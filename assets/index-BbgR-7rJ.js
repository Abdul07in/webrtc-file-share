var Ev=Object.defineProperty;var u1=t=>{throw TypeError(t)};var Cv=(t,e,n)=>e in t?Ev(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var br=(t,e,n)=>Cv(t,typeof e!="symbol"?e+"":e,n),fd=(t,e,n)=>e.has(t)||u1("Cannot "+n);var J=(t,e,n)=>(fd(t,e,"read from private field"),n?n.call(t):e.get(t)),tt=(t,e,n)=>e.has(t)?u1("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Me=(t,e,n,i)=>(fd(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),xn=(t,e,n)=>(fd(t,e,"access private method"),n);var Vl=(t,e,n,i)=>({set _(o){Me(t,e,o,n)},get _(){return J(t,e,i)}});function rm(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(t,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&i(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();var xa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Sf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var im={exports:{}},xu={},sm={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=Symbol.for("react.element"),bv=Symbol.for("react.portal"),Av=Symbol.for("react.fragment"),_v=Symbol.for("react.strict_mode"),Sv=Symbol.for("react.profiler"),Tv=Symbol.for("react.provider"),Iv=Symbol.for("react.context"),Rv=Symbol.for("react.forward_ref"),Ov=Symbol.for("react.suspense"),Nv=Symbol.for("react.memo"),kv=Symbol.for("react.lazy"),d1=Symbol.iterator;function Pv(t){return t===null||typeof t!="object"?null:(t=d1&&t[d1]||t["@@iterator"],typeof t=="function"?t:null)}var om={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},am=Object.assign,lm={};function ia(t,e,n){this.props=t,this.context=e,this.refs=lm,this.updater=n||om}ia.prototype.isReactComponent={};ia.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ia.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cm(){}cm.prototype=ia.prototype;function Tf(t,e,n){this.props=t,this.context=e,this.refs=lm,this.updater=n||om}var If=Tf.prototype=new cm;If.constructor=Tf;am(If,ia.prototype);If.isPureReactComponent=!0;var h1=Array.isArray,um=Object.prototype.hasOwnProperty,Rf={current:null},dm={key:!0,ref:!0,__self:!0,__source:!0};function hm(t,e,n){var i,o={},l=null,d=null;if(e!=null)for(i in e.ref!==void 0&&(d=e.ref),e.key!==void 0&&(l=""+e.key),e)um.call(e,i)&&!dm.hasOwnProperty(i)&&(o[i]=e[i]);var m=arguments.length-2;if(m===1)o.children=n;else if(1<m){for(var p=Array(m),g=0;g<m;g++)p[g]=arguments[g+2];o.children=p}if(t&&t.defaultProps)for(i in m=t.defaultProps,m)o[i]===void 0&&(o[i]=m[i]);return{$$typeof:Al,type:t,key:l,ref:d,props:o,_owner:Rf.current}}function Dv(t,e){return{$$typeof:Al,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Of(t){return typeof t=="object"&&t!==null&&t.$$typeof===Al}function Mv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var f1=/\/+/g;function pd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Mv(""+t.key):e.toString(36)}function gc(t,e,n,i,o){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var d=!1;if(t===null)d=!0;else switch(l){case"string":case"number":d=!0;break;case"object":switch(t.$$typeof){case Al:case bv:d=!0}}if(d)return d=t,o=o(d),t=i===""?"."+pd(d,0):i,h1(o)?(n="",t!=null&&(n=t.replace(f1,"$&/")+"/"),gc(o,e,n,"",function(g){return g})):o!=null&&(Of(o)&&(o=Dv(o,n+(!o.key||d&&d.key===o.key?"":(""+o.key).replace(f1,"$&/")+"/")+t)),e.push(o)),1;if(d=0,i=i===""?".":i+":",h1(t))for(var m=0;m<t.length;m++){l=t[m];var p=i+pd(l,m);d+=gc(l,e,n,p,o)}else if(p=Pv(t),typeof p=="function")for(t=p.call(t),m=0;!(l=t.next()).done;)l=l.value,p=i+pd(l,m++),d+=gc(l,e,n,p,o);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return d}function Wl(t,e,n){if(t==null)return t;var i=[],o=0;return gc(t,i,"","",function(l){return e.call(n,l,o++)}),i}function Lv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var kn={current:null},mc={transition:null},Bv={ReactCurrentDispatcher:kn,ReactCurrentBatchConfig:mc,ReactCurrentOwner:Rf};function fm(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Wl,forEach:function(t,e,n){Wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Wl(t,function(){e++}),e},toArray:function(t){return Wl(t,function(e){return e})||[]},only:function(t){if(!Of(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=ia;He.Fragment=Av;He.Profiler=Sv;He.PureComponent=Tf;He.StrictMode=_v;He.Suspense=Ov;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bv;He.act=fm;He.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=am({},t.props),o=t.key,l=t.ref,d=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,d=Rf.current),e.key!==void 0&&(o=""+e.key),t.type&&t.type.defaultProps)var m=t.type.defaultProps;for(p in e)um.call(e,p)&&!dm.hasOwnProperty(p)&&(i[p]=e[p]===void 0&&m!==void 0?m[p]:e[p])}var p=arguments.length-2;if(p===1)i.children=n;else if(1<p){m=Array(p);for(var g=0;g<p;g++)m[g]=arguments[g+2];i.children=m}return{$$typeof:Al,type:t.type,key:o,ref:l,props:i,_owner:d}};He.createContext=function(t){return t={$$typeof:Iv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Tv,_context:t},t.Consumer=t};He.createElement=hm;He.createFactory=function(t){var e=hm.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:Rv,render:t}};He.isValidElement=Of;He.lazy=function(t){return{$$typeof:kv,_payload:{_status:-1,_result:t},_init:Lv}};He.memo=function(t,e){return{$$typeof:Nv,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=mc.transition;mc.transition={};try{t()}finally{mc.transition=e}};He.unstable_act=fm;He.useCallback=function(t,e){return kn.current.useCallback(t,e)};He.useContext=function(t){return kn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return kn.current.useDeferredValue(t)};He.useEffect=function(t,e){return kn.current.useEffect(t,e)};He.useId=function(){return kn.current.useId()};He.useImperativeHandle=function(t,e,n){return kn.current.useImperativeHandle(t,e,n)};He.useInsertionEffect=function(t,e){return kn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return kn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return kn.current.useMemo(t,e)};He.useReducer=function(t,e,n){return kn.current.useReducer(t,e,n)};He.useRef=function(t){return kn.current.useRef(t)};He.useState=function(t){return kn.current.useState(t)};He.useSyncExternalStore=function(t,e,n){return kn.current.useSyncExternalStore(t,e,n)};He.useTransition=function(){return kn.current.useTransition()};He.version="18.3.1";sm.exports=He;var P=sm.exports;const ne=Sf(P),Nf=rm({__proto__:null,default:ne},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv=P,jv=Symbol.for("react.element"),Uv=Symbol.for("react.fragment"),zv=Object.prototype.hasOwnProperty,Vv=Fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wv={key:!0,ref:!0,__self:!0,__source:!0};function pm(t,e,n){var i,o={},l=null,d=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(d=e.ref);for(i in e)zv.call(e,i)&&!Wv.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)o[i]===void 0&&(o[i]=e[i]);return{$$typeof:jv,type:t,key:l,ref:d,props:o,_owner:Vv.current}}xu.Fragment=Uv;xu.jsx=pm;xu.jsxs=pm;im.exports=xu;var B=im.exports,gm={exports:{}},or={},mm={exports:{}},wm={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Z){var de=q.length;q.push(Z);e:for(;0<de;){var Ae=de-1>>>1,fe=q[Ae];if(0<o(fe,Z))q[Ae]=Z,q[de]=fe,de=Ae;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Z=q[0],de=q.pop();if(de!==Z){q[0]=de;e:for(var Ae=0,fe=q.length,Te=fe>>>1;Ae<Te;){var Ee=2*(Ae+1)-1,nt=q[Ee],me=Ee+1,Ve=q[me];if(0>o(nt,de))me<fe&&0>o(Ve,nt)?(q[Ae]=Ve,q[me]=de,Ae=me):(q[Ae]=nt,q[Ee]=de,Ae=Ee);else if(me<fe&&0>o(Ve,de))q[Ae]=Ve,q[me]=de,Ae=me;else break e}}return Z}function o(q,Z){var de=q.sortIndex-Z.sortIndex;return de!==0?de:q.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var d=Date,m=d.now();t.unstable_now=function(){return d.now()-m}}var p=[],g=[],y=1,v=null,E=3,C=!1,T=!1,A=!1,N=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(q){for(var Z=n(g);Z!==null;){if(Z.callback===null)i(g);else if(Z.startTime<=q)i(g),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=n(g)}}function D(q){if(A=!1,_(q),!T)if(n(p)!==null)T=!0,pe(U);else{var Z=n(g);Z!==null&&oe(D,Z.startTime-q)}}function U(q,Z){T=!1,A&&(A=!1,O(K),K=-1),C=!0;var de=E;try{for(_(Z),v=n(p);v!==null&&(!(v.expirationTime>Z)||q&&!he());){var Ae=v.callback;if(typeof Ae=="function"){v.callback=null,E=v.priorityLevel;var fe=Ae(v.expirationTime<=Z);Z=t.unstable_now(),typeof fe=="function"?v.callback=fe:v===n(p)&&i(p),_(Z)}else i(p);v=n(p)}if(v!==null)var Te=!0;else{var Ee=n(g);Ee!==null&&oe(D,Ee.startTime-Z),Te=!1}return Te}finally{v=null,E=de,C=!1}}var z=!1,F=null,K=-1,W=5,re=-1;function he(){return!(t.unstable_now()-re<W)}function Q(){if(F!==null){var q=t.unstable_now();re=q;var Z=!0;try{Z=F(!0,q)}finally{Z?ce():(z=!1,F=null)}}else z=!1}var ce;if(typeof S=="function")ce=function(){S(Q)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,H=te.port2;te.port1.onmessage=Q,ce=function(){H.postMessage(null)}}else ce=function(){N(Q,0)};function pe(q){F=q,z||(z=!0,ce())}function oe(q,Z){K=N(function(){q(t.unstable_now())},Z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){T||C||(T=!0,pe(U))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return n(p)},t.unstable_next=function(q){switch(E){case 1:case 2:case 3:var Z=3;break;default:Z=E}var de=E;E=Z;try{return q()}finally{E=de}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Z){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var de=E;E=q;try{return Z()}finally{E=de}},t.unstable_scheduleCallback=function(q,Z,de){var Ae=t.unstable_now();switch(typeof de=="object"&&de!==null?(de=de.delay,de=typeof de=="number"&&0<de?Ae+de:Ae):de=Ae,q){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=de+fe,q={id:y++,callback:Z,priorityLevel:q,startTime:de,expirationTime:fe,sortIndex:-1},de>Ae?(q.sortIndex=de,e(g,q),n(p)===null&&q===n(g)&&(A?(O(K),K=-1):A=!0,oe(D,de-Ae))):(q.sortIndex=fe,e(p,q),T||C||(T=!0,pe(U))),q},t.unstable_shouldYield=he,t.unstable_wrapCallback=function(q){var Z=E;return function(){var de=E;E=Z;try{return q.apply(this,arguments)}finally{E=de}}}})(wm);mm.exports=wm;var Hv=mm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $v=P,sr=Hv;function se(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ym=new Set,Ya={};function Ks(t,e){Yo(t,e),Yo(t+"Capture",e)}function Yo(t,e){for(Ya[t]=e,t=0;t<e.length;t++)ym.add(e[t])}var xi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),nh=Object.prototype.hasOwnProperty,Gv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p1={},g1={};function Kv(t){return nh.call(g1,t)?!0:nh.call(p1,t)?!1:Gv.test(t)?g1[t]=!0:(p1[t]=!0,!1)}function Xv(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yv(t,e,n,i){if(e===null||typeof e>"u"||Xv(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Pn(t,e,n,i,o,l,d){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=d}var pn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pn[t]=new Pn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pn[e]=new Pn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pn[t]=new Pn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pn[t]=new Pn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pn[t]=new Pn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pn[t]=new Pn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pn[t]=new Pn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pn[t]=new Pn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pn[t]=new Pn(t,5,!1,t.toLowerCase(),null,!1,!1)});var kf=/[\-:]([a-z])/g;function Pf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kf,Pf);pn[e]=new Pn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kf,Pf);pn[e]=new Pn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kf,Pf);pn[e]=new Pn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!1,!1)});pn.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pn[t]=new Pn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Df(t,e,n,i){var o=pn.hasOwnProperty(e)?pn[e]:null;(o!==null?o.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yv(e,n,o,i)&&(n=null),i||o===null?Kv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):o.mustUseProperty?t[o.propertyName]=n===null?o.type===3?!1:"":n:(e=o.attributeName,i=o.attributeNamespace,n===null?t.removeAttribute(e):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var _i=$v.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hl=Symbol.for("react.element"),mo=Symbol.for("react.portal"),wo=Symbol.for("react.fragment"),Mf=Symbol.for("react.strict_mode"),rh=Symbol.for("react.profiler"),xm=Symbol.for("react.provider"),vm=Symbol.for("react.context"),Lf=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),sh=Symbol.for("react.suspense_list"),Bf=Symbol.for("react.memo"),Fi=Symbol.for("react.lazy"),Em=Symbol.for("react.offscreen"),m1=Symbol.iterator;function va(t){return t===null||typeof t!="object"?null:(t=m1&&t[m1]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,gd;function ka(t){if(gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);gd=e&&e[1]||""}return`
`+gd+t}var md=!1;function wd(t,e){if(!t||md)return"";md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var i=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){i=g}t.call(e.prototype)}else{try{throw Error()}catch(g){i=g}t()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var o=g.stack.split(`
`),l=i.stack.split(`
`),d=o.length-1,m=l.length-1;1<=d&&0<=m&&o[d]!==l[m];)m--;for(;1<=d&&0<=m;d--,m--)if(o[d]!==l[m]){if(d!==1||m!==1)do if(d--,m--,0>m||o[d]!==l[m]){var p=`
`+o[d].replace(" at new "," at ");return t.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",t.displayName)),p}while(1<=d&&0<=m);break}}}finally{md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ka(t):""}function qv(t){switch(t.tag){case 5:return ka(t.type);case 16:return ka("Lazy");case 13:return ka("Suspense");case 19:return ka("SuspenseList");case 0:case 2:case 15:return t=wd(t.type,!1),t;case 11:return t=wd(t.type.render,!1),t;case 1:return t=wd(t.type,!0),t;default:return""}}function oh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wo:return"Fragment";case mo:return"Portal";case rh:return"Profiler";case Mf:return"StrictMode";case ih:return"Suspense";case sh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case vm:return(t.displayName||"Context")+".Consumer";case xm:return(t._context.displayName||"Context")+".Provider";case Lf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Bf:return e=t.displayName||null,e!==null?e:oh(t.type)||"Memo";case Fi:e=t._payload,t=t._init;try{return oh(t(e))}catch{}}return null}function Qv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return oh(e);case 8:return e===Mf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function os(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Cm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Zv(t){var e=Cm(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return o.call(this)},set:function(d){i=""+d,l.call(this,d)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(d){i=""+d},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function $l(t){t._valueTracker||(t._valueTracker=Zv(t))}function bm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Cm(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Nc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ah(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function w1(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=os(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Am(t,e){e=e.checked,e!=null&&Df(t,"checked",e,!1)}function lh(t,e){Am(t,e);var n=os(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&ch(t,e.type,os(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function y1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ch(t,e,n){(e!=="number"||Nc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Pa=Array.isArray;function No(t,e,n,i){if(t=t.options,e){e={};for(var o=0;o<n.length;o++)e["$"+n[o]]=!0;for(n=0;n<t.length;n++)o=e.hasOwnProperty("$"+t[n].value),t[n].selected!==o&&(t[n].selected=o),o&&i&&(t[n].defaultSelected=!0)}else{for(n=""+os(n),e=null,o=0;o<t.length;o++){if(t[o].value===n){t[o].selected=!0,i&&(t[o].defaultSelected=!0);return}e!==null||t[o].disabled||(e=t[o])}e!==null&&(e.selected=!0)}}function uh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(se(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function x1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(se(92));if(Pa(n)){if(1<n.length)throw Error(se(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:os(n)}}function _m(t,e){var n=os(e.value),i=os(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function v1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Gl,Tm=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,o){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,o)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Gl=Gl||document.createElement("div"),Gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function qa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ba={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jv=["Webkit","ms","Moz","O"];Object.keys(Ba).forEach(function(t){Jv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ba[e]=Ba[t]})});function Im(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ba.hasOwnProperty(t)&&Ba[t]?(""+e).trim():e+"px"}function Rm(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,o=Im(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,o):t[n]=o}}var eE=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hh(t,e){if(e){if(eE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(se(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(se(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(se(61))}if(e.style!=null&&typeof e.style!="object")throw Error(se(62))}}function fh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ph=null;function Ff(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,ko=null,Po=null;function E1(t){if(t=Tl(t)){if(typeof gh!="function")throw Error(se(280));var e=t.stateNode;e&&(e=Au(e),gh(t.stateNode,t.type,e))}}function Om(t){ko?Po?Po.push(t):Po=[t]:ko=t}function Nm(){if(ko){var t=ko,e=Po;if(Po=ko=null,E1(t),e)for(t=0;t<e.length;t++)E1(e[t])}}function km(t,e){return t(e)}function Pm(){}var yd=!1;function Dm(t,e,n){if(yd)return t(e,n);yd=!0;try{return km(t,e,n)}finally{yd=!1,(ko!==null||Po!==null)&&(Pm(),Nm())}}function Qa(t,e){var n=t.stateNode;if(n===null)return null;var i=Au(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(se(231,e,typeof n));return n}var mh=!1;if(xi)try{var Ea={};Object.defineProperty(Ea,"passive",{get:function(){mh=!0}}),window.addEventListener("test",Ea,Ea),window.removeEventListener("test",Ea,Ea)}catch{mh=!1}function tE(t,e,n,i,o,l,d,m,p){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(y){this.onError(y)}}var Fa=!1,kc=null,Pc=!1,wh=null,nE={onError:function(t){Fa=!0,kc=t}};function rE(t,e,n,i,o,l,d,m,p){Fa=!1,kc=null,tE.apply(nE,arguments)}function iE(t,e,n,i,o,l,d,m,p){if(rE.apply(this,arguments),Fa){if(Fa){var g=kc;Fa=!1,kc=null}else throw Error(se(198));Pc||(Pc=!0,wh=g)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Mm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function C1(t){if(Xs(t)!==t)throw Error(se(188))}function sE(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error(se(188));return e!==t?null:t}for(var n=t,i=e;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return C1(o),t;if(l===i)return C1(o),e;l=l.sibling}throw Error(se(188))}if(n.return!==i.return)n=o,i=l;else{for(var d=!1,m=o.child;m;){if(m===n){d=!0,n=o,i=l;break}if(m===i){d=!0,i=o,n=l;break}m=m.sibling}if(!d){for(m=l.child;m;){if(m===n){d=!0,n=l,i=o;break}if(m===i){d=!0,i=l,n=o;break}m=m.sibling}if(!d)throw Error(se(189))}}if(n.alternate!==i)throw Error(se(190))}if(n.tag!==3)throw Error(se(188));return n.stateNode.current===n?t:e}function Lm(t){return t=sE(t),t!==null?Bm(t):null}function Bm(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Bm(t);if(e!==null)return e;t=t.sibling}return null}var Fm=sr.unstable_scheduleCallback,b1=sr.unstable_cancelCallback,oE=sr.unstable_shouldYield,aE=sr.unstable_requestPaint,jt=sr.unstable_now,lE=sr.unstable_getCurrentPriorityLevel,jf=sr.unstable_ImmediatePriority,jm=sr.unstable_UserBlockingPriority,Dc=sr.unstable_NormalPriority,cE=sr.unstable_LowPriority,Um=sr.unstable_IdlePriority,vu=null,ti=null;function uE(t){if(ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(vu,t,void 0,(t.current.flags&128)===128)}catch{}}var Lr=Math.clz32?Math.clz32:fE,dE=Math.log,hE=Math.LN2;function fE(t){return t>>>=0,t===0?32:31-(dE(t)/hE|0)|0}var Kl=64,Xl=4194304;function Da(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,o=t.suspendedLanes,l=t.pingedLanes,d=n&268435455;if(d!==0){var m=d&~o;m!==0?i=Da(m):(l&=d,l!==0&&(i=Da(l)))}else d=n&~o,d!==0?i=Da(d):l!==0&&(i=Da(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&o)&&(o=i&-i,l=e&-e,o>=l||o===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Lr(e),o=1<<n,i|=t[n],e&=~o;return i}function pE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gE(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,o=t.expirationTimes,l=t.pendingLanes;0<l;){var d=31-Lr(l),m=1<<d,p=o[d];p===-1?(!(m&n)||m&i)&&(o[d]=pE(m,e)):p<=e&&(t.expiredLanes|=m),l&=~m}}function yh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function zm(){var t=Kl;return Kl<<=1,!(Kl&4194240)&&(Kl=64),t}function xd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function _l(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Lr(e),t[e]=n}function mE(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var o=31-Lr(n),l=1<<o;e[o]=0,i[o]=-1,t[o]=-1,n&=~l}}function Uf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Lr(n),o=1<<i;o&e|t[i]&e&&(t[i]|=e),n&=~o}}var st=0;function Vm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Wm,zf,Hm,$m,Gm,xh=!1,Yl=[],Zi=null,Ji=null,es=null,Za=new Map,Ja=new Map,zi=[],wE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function A1(t,e){switch(t){case"focusin":case"focusout":Zi=null;break;case"dragenter":case"dragleave":Ji=null;break;case"mouseover":case"mouseout":es=null;break;case"pointerover":case"pointerout":Za.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ja.delete(e.pointerId)}}function Ca(t,e,n,i,o,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[o]},e!==null&&(e=Tl(e),e!==null&&zf(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),t)}function yE(t,e,n,i,o){switch(e){case"focusin":return Zi=Ca(Zi,t,e,n,i,o),!0;case"dragenter":return Ji=Ca(Ji,t,e,n,i,o),!0;case"mouseover":return es=Ca(es,t,e,n,i,o),!0;case"pointerover":var l=o.pointerId;return Za.set(l,Ca(Za.get(l)||null,t,e,n,i,o)),!0;case"gotpointercapture":return l=o.pointerId,Ja.set(l,Ca(Ja.get(l)||null,t,e,n,i,o)),!0}return!1}function Km(t){var e=Is(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Mm(n),e!==null){t.blockedOn=e,Gm(t.priority,function(){Hm(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=vh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);ph=i,n.target.dispatchEvent(i),ph=null}else return e=Tl(n),e!==null&&zf(e),t.blockedOn=n,!1;e.shift()}return!0}function _1(t,e,n){wc(t)&&n.delete(e)}function xE(){xh=!1,Zi!==null&&wc(Zi)&&(Zi=null),Ji!==null&&wc(Ji)&&(Ji=null),es!==null&&wc(es)&&(es=null),Za.forEach(_1),Ja.forEach(_1)}function ba(t,e){t.blockedOn===e&&(t.blockedOn=null,xh||(xh=!0,sr.unstable_scheduleCallback(sr.unstable_NormalPriority,xE)))}function el(t){function e(o){return ba(o,t)}if(0<Yl.length){ba(Yl[0],t);for(var n=1;n<Yl.length;n++){var i=Yl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Zi!==null&&ba(Zi,t),Ji!==null&&ba(Ji,t),es!==null&&ba(es,t),Za.forEach(e),Ja.forEach(e),n=0;n<zi.length;n++)i=zi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<zi.length&&(n=zi[0],n.blockedOn===null);)Km(n),n.blockedOn===null&&zi.shift()}var Do=_i.ReactCurrentBatchConfig,Lc=!0;function vE(t,e,n,i){var o=st,l=Do.transition;Do.transition=null;try{st=1,Vf(t,e,n,i)}finally{st=o,Do.transition=l}}function EE(t,e,n,i){var o=st,l=Do.transition;Do.transition=null;try{st=4,Vf(t,e,n,i)}finally{st=o,Do.transition=l}}function Vf(t,e,n,i){if(Lc){var o=vh(t,e,n,i);if(o===null)Rd(t,e,i,Bc,n),A1(t,i);else if(yE(o,t,e,n,i))i.stopPropagation();else if(A1(t,i),e&4&&-1<wE.indexOf(t)){for(;o!==null;){var l=Tl(o);if(l!==null&&Wm(l),l=vh(t,e,n,i),l===null&&Rd(t,e,i,Bc,n),l===o)break;o=l}o!==null&&i.stopPropagation()}else Rd(t,e,i,null,n)}}var Bc=null;function vh(t,e,n,i){if(Bc=null,t=Ff(i),t=Is(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Mm(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bc=t,null}function Xm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lE()){case jf:return 1;case jm:return 4;case Dc:case cE:return 16;case Um:return 536870912;default:return 16}default:return 16}}var Yi=null,Wf=null,yc=null;function Ym(){if(yc)return yc;var t,e=Wf,n=e.length,i,o="value"in Yi?Yi.value:Yi.textContent,l=o.length;for(t=0;t<n&&e[t]===o[t];t++);var d=n-t;for(i=1;i<=d&&e[n-i]===o[l-i];i++);return yc=o.slice(t,1<i?1-i:void 0)}function xc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ql(){return!0}function S1(){return!1}function ar(t){function e(n,i,o,l,d){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=l,this.target=d,this.currentTarget=null;for(var m in t)t.hasOwnProperty(m)&&(n=t[m],this[m]=n?n(l):l[m]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ql:S1,this.isPropagationStopped=S1,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ql)},persist:function(){},isPersistent:ql}),e}var sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hf=ar(sa),Sl=It({},sa,{view:0,detail:0}),CE=ar(Sl),vd,Ed,Aa,Eu=It({},Sl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$f,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Aa&&(Aa&&t.type==="mousemove"?(vd=t.screenX-Aa.screenX,Ed=t.screenY-Aa.screenY):Ed=vd=0,Aa=t),vd)},movementY:function(t){return"movementY"in t?t.movementY:Ed}}),T1=ar(Eu),bE=It({},Eu,{dataTransfer:0}),AE=ar(bE),_E=It({},Sl,{relatedTarget:0}),Cd=ar(_E),SE=It({},sa,{animationName:0,elapsedTime:0,pseudoElement:0}),TE=ar(SE),IE=It({},sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),RE=ar(IE),OE=It({},sa,{data:0}),I1=ar(OE),NE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PE={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=PE[t])?!!e[t]:!1}function $f(){return DE}var ME=It({},Sl,{key:function(t){if(t.key){var e=NE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?kE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$f,charCode:function(t){return t.type==="keypress"?xc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LE=ar(ME),BE=It({},Eu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),R1=ar(BE),FE=It({},Sl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$f}),jE=ar(FE),UE=It({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),zE=ar(UE),VE=It({},Eu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WE=ar(VE),HE=[9,13,27,32],Gf=xi&&"CompositionEvent"in window,ja=null;xi&&"documentMode"in document&&(ja=document.documentMode);var $E=xi&&"TextEvent"in window&&!ja,qm=xi&&(!Gf||ja&&8<ja&&11>=ja),O1=" ",N1=!1;function Qm(t,e){switch(t){case"keyup":return HE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yo=!1;function GE(t,e){switch(t){case"compositionend":return Zm(e);case"keypress":return e.which!==32?null:(N1=!0,O1);case"textInput":return t=e.data,t===O1&&N1?null:t;default:return null}}function KE(t,e){if(yo)return t==="compositionend"||!Gf&&Qm(t,e)?(t=Ym(),yc=Wf=Yi=null,yo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qm&&e.locale!=="ko"?null:e.data;default:return null}}var XE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function k1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XE[t.type]:e==="textarea"}function Jm(t,e,n,i){Om(i),e=Fc(e,"onChange"),0<e.length&&(n=new Hf("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Ua=null,tl=null;function YE(t){uw(t,0)}function Cu(t){var e=Eo(t);if(bm(e))return t}function qE(t,e){if(t==="change")return e}var ew=!1;if(xi){var bd;if(xi){var Ad="oninput"in document;if(!Ad){var P1=document.createElement("div");P1.setAttribute("oninput","return;"),Ad=typeof P1.oninput=="function"}bd=Ad}else bd=!1;ew=bd&&(!document.documentMode||9<document.documentMode)}function D1(){Ua&&(Ua.detachEvent("onpropertychange",tw),tl=Ua=null)}function tw(t){if(t.propertyName==="value"&&Cu(tl)){var e=[];Jm(e,tl,t,Ff(t)),Dm(YE,e)}}function QE(t,e,n){t==="focusin"?(D1(),Ua=e,tl=n,Ua.attachEvent("onpropertychange",tw)):t==="focusout"&&D1()}function ZE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cu(tl)}function JE(t,e){if(t==="click")return Cu(e)}function eC(t,e){if(t==="input"||t==="change")return Cu(e)}function tC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Fr=typeof Object.is=="function"?Object.is:tC;function nl(t,e){if(Fr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!nh.call(e,o)||!Fr(t[o],e[o]))return!1}return!0}function M1(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function L1(t,e){var n=M1(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=M1(n)}}function nw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rw(){for(var t=window,e=Nc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Nc(t.document)}return e}function Kf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nC(t){var e=rw(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nw(n.ownerDocument.documentElement,n)){if(i!==null&&Kf(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var o=n.textContent.length,l=Math.min(i.start,o);i=i.end===void 0?l:Math.min(i.end,o),!t.extend&&l>i&&(o=i,i=l,l=o),o=L1(n,l);var d=L1(n,i);o&&d&&(t.rangeCount!==1||t.anchorNode!==o.node||t.anchorOffset!==o.offset||t.focusNode!==d.node||t.focusOffset!==d.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(d.node,d.offset)):(e.setEnd(d.node,d.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rC=xi&&"documentMode"in document&&11>=document.documentMode,xo=null,Eh=null,za=null,Ch=!1;function B1(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ch||xo==null||xo!==Nc(i)||(i=xo,"selectionStart"in i&&Kf(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),za&&nl(za,i)||(za=i,i=Fc(Eh,"onSelect"),0<i.length&&(e=new Hf("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=xo)))}function Ql(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vo={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionend:Ql("Transition","TransitionEnd")},_d={},iw={};xi&&(iw=document.createElement("div").style,"AnimationEvent"in window||(delete vo.animationend.animation,delete vo.animationiteration.animation,delete vo.animationstart.animation),"TransitionEvent"in window||delete vo.transitionend.transition);function bu(t){if(_d[t])return _d[t];if(!vo[t])return t;var e=vo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in iw)return _d[t]=e[n];return t}var sw=bu("animationend"),ow=bu("animationiteration"),aw=bu("animationstart"),lw=bu("transitionend"),cw=new Map,F1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hs(t,e){cw.set(t,e),Ks(e,[t])}for(var Sd=0;Sd<F1.length;Sd++){var Td=F1[Sd],iC=Td.toLowerCase(),sC=Td[0].toUpperCase()+Td.slice(1);hs(iC,"on"+sC)}hs(sw,"onAnimationEnd");hs(ow,"onAnimationIteration");hs(aw,"onAnimationStart");hs("dblclick","onDoubleClick");hs("focusin","onFocus");hs("focusout","onBlur");hs(lw,"onTransitionEnd");Yo("onMouseEnter",["mouseout","mouseover"]);Yo("onMouseLeave",["mouseout","mouseover"]);Yo("onPointerEnter",["pointerout","pointerover"]);Yo("onPointerLeave",["pointerout","pointerover"]);Ks("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ks("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ks("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ks("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ks("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ma="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ma));function j1(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,iE(i,e,void 0,t),t.currentTarget=null}function uw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],o=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var d=i.length-1;0<=d;d--){var m=i[d],p=m.instance,g=m.currentTarget;if(m=m.listener,p!==l&&o.isPropagationStopped())break e;j1(o,m,g),l=p}else for(d=0;d<i.length;d++){if(m=i[d],p=m.instance,g=m.currentTarget,m=m.listener,p!==l&&o.isPropagationStopped())break e;j1(o,m,g),l=p}}}if(Pc)throw t=wh,Pc=!1,wh=null,t}function wt(t,e){var n=e[Th];n===void 0&&(n=e[Th]=new Set);var i=t+"__bubble";n.has(i)||(dw(e,t,2,!1),n.add(i))}function Id(t,e,n){var i=0;e&&(i|=4),dw(n,t,i,e)}var Zl="_reactListening"+Math.random().toString(36).slice(2);function rl(t){if(!t[Zl]){t[Zl]=!0,ym.forEach(function(n){n!=="selectionchange"&&(oC.has(n)||Id(n,!1,t),Id(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zl]||(e[Zl]=!0,Id("selectionchange",!1,e))}}function dw(t,e,n,i){switch(Xm(e)){case 1:var o=vE;break;case 4:o=EE;break;default:o=Vf}n=o.bind(null,e,n,t),o=void 0,!mh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),i?o!==void 0?t.addEventListener(e,n,{capture:!0,passive:o}):t.addEventListener(e,n,!0):o!==void 0?t.addEventListener(e,n,{passive:o}):t.addEventListener(e,n,!1)}function Rd(t,e,n,i,o){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var d=i.tag;if(d===3||d===4){var m=i.stateNode.containerInfo;if(m===o||m.nodeType===8&&m.parentNode===o)break;if(d===4)for(d=i.return;d!==null;){var p=d.tag;if((p===3||p===4)&&(p=d.stateNode.containerInfo,p===o||p.nodeType===8&&p.parentNode===o))return;d=d.return}for(;m!==null;){if(d=Is(m),d===null)return;if(p=d.tag,p===5||p===6){i=l=d;continue e}m=m.parentNode}}i=i.return}Dm(function(){var g=l,y=Ff(n),v=[];e:{var E=cw.get(t);if(E!==void 0){var C=Hf,T=t;switch(t){case"keypress":if(xc(n)===0)break e;case"keydown":case"keyup":C=LE;break;case"focusin":T="focus",C=Cd;break;case"focusout":T="blur",C=Cd;break;case"beforeblur":case"afterblur":C=Cd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":C=T1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":C=AE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":C=jE;break;case sw:case ow:case aw:C=TE;break;case lw:C=zE;break;case"scroll":C=CE;break;case"wheel":C=WE;break;case"copy":case"cut":case"paste":C=RE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":C=R1}var A=(e&4)!==0,N=!A&&t==="scroll",O=A?E!==null?E+"Capture":null:E;A=[];for(var S=g,_;S!==null;){_=S;var D=_.stateNode;if(_.tag===5&&D!==null&&(_=D,O!==null&&(D=Qa(S,O),D!=null&&A.push(il(S,D,_)))),N)break;S=S.return}0<A.length&&(E=new C(E,T,null,n,y),v.push({event:E,listeners:A}))}}if(!(e&7)){e:{if(E=t==="mouseover"||t==="pointerover",C=t==="mouseout"||t==="pointerout",E&&n!==ph&&(T=n.relatedTarget||n.fromElement)&&(Is(T)||T[vi]))break e;if((C||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,C?(T=n.relatedTarget||n.toElement,C=g,T=T?Is(T):null,T!==null&&(N=Xs(T),T!==N||T.tag!==5&&T.tag!==6)&&(T=null)):(C=null,T=g),C!==T)){if(A=T1,D="onMouseLeave",O="onMouseEnter",S="mouse",(t==="pointerout"||t==="pointerover")&&(A=R1,D="onPointerLeave",O="onPointerEnter",S="pointer"),N=C==null?E:Eo(C),_=T==null?E:Eo(T),E=new A(D,S+"leave",C,n,y),E.target=N,E.relatedTarget=_,D=null,Is(y)===g&&(A=new A(O,S+"enter",T,n,y),A.target=_,A.relatedTarget=N,D=A),N=D,C&&T)t:{for(A=C,O=T,S=0,_=A;_;_=so(_))S++;for(_=0,D=O;D;D=so(D))_++;for(;0<S-_;)A=so(A),S--;for(;0<_-S;)O=so(O),_--;for(;S--;){if(A===O||O!==null&&A===O.alternate)break t;A=so(A),O=so(O)}A=null}else A=null;C!==null&&U1(v,E,C,A,!1),T!==null&&N!==null&&U1(v,N,T,A,!0)}}e:{if(E=g?Eo(g):window,C=E.nodeName&&E.nodeName.toLowerCase(),C==="select"||C==="input"&&E.type==="file")var U=qE;else if(k1(E))if(ew)U=eC;else{U=ZE;var z=QE}else(C=E.nodeName)&&C.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(U=JE);if(U&&(U=U(t,g))){Jm(v,U,n,y);break e}z&&z(t,E,g),t==="focusout"&&(z=E._wrapperState)&&z.controlled&&E.type==="number"&&ch(E,"number",E.value)}switch(z=g?Eo(g):window,t){case"focusin":(k1(z)||z.contentEditable==="true")&&(xo=z,Eh=g,za=null);break;case"focusout":za=Eh=xo=null;break;case"mousedown":Ch=!0;break;case"contextmenu":case"mouseup":case"dragend":Ch=!1,B1(v,n,y);break;case"selectionchange":if(rC)break;case"keydown":case"keyup":B1(v,n,y)}var F;if(Gf)e:{switch(t){case"compositionstart":var K="onCompositionStart";break e;case"compositionend":K="onCompositionEnd";break e;case"compositionupdate":K="onCompositionUpdate";break e}K=void 0}else yo?Qm(t,n)&&(K="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(K="onCompositionStart");K&&(qm&&n.locale!=="ko"&&(yo||K!=="onCompositionStart"?K==="onCompositionEnd"&&yo&&(F=Ym()):(Yi=y,Wf="value"in Yi?Yi.value:Yi.textContent,yo=!0)),z=Fc(g,K),0<z.length&&(K=new I1(K,t,null,n,y),v.push({event:K,listeners:z}),F?K.data=F:(F=Zm(n),F!==null&&(K.data=F)))),(F=$E?GE(t,n):KE(t,n))&&(g=Fc(g,"onBeforeInput"),0<g.length&&(y=new I1("onBeforeInput","beforeinput",null,n,y),v.push({event:y,listeners:g}),y.data=F))}uw(v,e)})}function il(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Fc(t,e){for(var n=e+"Capture",i=[];t!==null;){var o=t,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=Qa(t,n),l!=null&&i.unshift(il(t,l,o)),l=Qa(t,e),l!=null&&i.push(il(t,l,o))),t=t.return}return i}function so(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function U1(t,e,n,i,o){for(var l=e._reactName,d=[];n!==null&&n!==i;){var m=n,p=m.alternate,g=m.stateNode;if(p!==null&&p===i)break;m.tag===5&&g!==null&&(m=g,o?(p=Qa(n,l),p!=null&&d.unshift(il(n,p,m))):o||(p=Qa(n,l),p!=null&&d.push(il(n,p,m)))),n=n.return}d.length!==0&&t.push({event:e,listeners:d})}var aC=/\r\n?/g,lC=/\u0000|\uFFFD/g;function z1(t){return(typeof t=="string"?t:""+t).replace(aC,`
`).replace(lC,"")}function Jl(t,e,n){if(e=z1(e),z1(t)!==e&&n)throw Error(se(425))}function jc(){}var bh=null,Ah=null;function _h(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sh=typeof setTimeout=="function"?setTimeout:void 0,cC=typeof clearTimeout=="function"?clearTimeout:void 0,V1=typeof Promise=="function"?Promise:void 0,uC=typeof queueMicrotask=="function"?queueMicrotask:typeof V1<"u"?function(t){return V1.resolve(null).then(t).catch(dC)}:Sh;function dC(t){setTimeout(function(){throw t})}function Od(t,e){var n=e,i=0;do{var o=n.nextSibling;if(t.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(i===0){t.removeChild(o),el(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=o}while(n);el(e)}function ts(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function W1(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oa=Math.random().toString(36).slice(2),Zr="__reactFiber$"+oa,sl="__reactProps$"+oa,vi="__reactContainer$"+oa,Th="__reactEvents$"+oa,hC="__reactListeners$"+oa,fC="__reactHandles$"+oa;function Is(t){var e=t[Zr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[vi]||n[Zr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=W1(t);t!==null;){if(n=t[Zr])return n;t=W1(t)}return e}t=n,n=t.parentNode}return null}function Tl(t){return t=t[Zr]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Eo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(se(33))}function Au(t){return t[sl]||null}var Ih=[],Co=-1;function fs(t){return{current:t}}function xt(t){0>Co||(t.current=Ih[Co],Ih[Co]=null,Co--)}function ft(t,e){Co++,Ih[Co]=t.current,t.current=e}var as={},An=fs(as),Wn=fs(!1),Us=as;function qo(t,e){var n=t.type.contextTypes;if(!n)return as;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function Hn(t){return t=t.childContextTypes,t!=null}function Uc(){xt(Wn),xt(An)}function H1(t,e,n){if(An.current!==as)throw Error(se(168));ft(An,e),ft(Wn,n)}function hw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var o in i)if(!(o in e))throw Error(se(108,Qv(t)||"Unknown",o));return It({},n,i)}function zc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||as,Us=An.current,ft(An,t),ft(Wn,Wn.current),!0}function $1(t,e,n){var i=t.stateNode;if(!i)throw Error(se(169));n?(t=hw(t,e,Us),i.__reactInternalMemoizedMergedChildContext=t,xt(Wn),xt(An),ft(An,t)):xt(Wn),ft(Wn,n)}var fi=null,_u=!1,Nd=!1;function fw(t){fi===null?fi=[t]:fi.push(t)}function pC(t){_u=!0,fw(t)}function ps(){if(!Nd&&fi!==null){Nd=!0;var t=0,e=st;try{var n=fi;for(st=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}fi=null,_u=!1}catch(o){throw fi!==null&&(fi=fi.slice(t+1)),Fm(jf,ps),o}finally{st=e,Nd=!1}}return null}var bo=[],Ao=0,Vc=null,Wc=0,pr=[],gr=0,zs=null,mi=1,wi="";function Cs(t,e){bo[Ao++]=Wc,bo[Ao++]=Vc,Vc=t,Wc=e}function pw(t,e,n){pr[gr++]=mi,pr[gr++]=wi,pr[gr++]=zs,zs=t;var i=mi;t=wi;var o=32-Lr(i)-1;i&=~(1<<o),n+=1;var l=32-Lr(e)+o;if(30<l){var d=o-o%5;l=(i&(1<<d)-1).toString(32),i>>=d,o-=d,mi=1<<32-Lr(e)+o|n<<o|i,wi=l+t}else mi=1<<l|n<<o|i,wi=t}function Xf(t){t.return!==null&&(Cs(t,1),pw(t,1,0))}function Yf(t){for(;t===Vc;)Vc=bo[--Ao],bo[Ao]=null,Wc=bo[--Ao],bo[Ao]=null;for(;t===zs;)zs=pr[--gr],pr[gr]=null,wi=pr[--gr],pr[gr]=null,mi=pr[--gr],pr[gr]=null}var rr=null,nr=null,bt=!1,Mr=null;function gw(t,e){var n=mr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function G1(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,rr=t,nr=ts(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,rr=t,nr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=zs!==null?{id:mi,overflow:wi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=mr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,rr=t,nr=null,!0):!1;default:return!1}}function Rh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Oh(t){if(bt){var e=nr;if(e){var n=e;if(!G1(t,e)){if(Rh(t))throw Error(se(418));e=ts(n.nextSibling);var i=rr;e&&G1(t,e)?gw(i,n):(t.flags=t.flags&-4097|2,bt=!1,rr=t)}}else{if(Rh(t))throw Error(se(418));t.flags=t.flags&-4097|2,bt=!1,rr=t}}}function K1(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;rr=t}function ec(t){if(t!==rr)return!1;if(!bt)return K1(t),bt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_h(t.type,t.memoizedProps)),e&&(e=nr)){if(Rh(t))throw mw(),Error(se(418));for(;e;)gw(t,e),e=ts(e.nextSibling)}if(K1(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(se(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){nr=ts(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}nr=null}}else nr=rr?ts(t.stateNode.nextSibling):null;return!0}function mw(){for(var t=nr;t;)t=ts(t.nextSibling)}function Qo(){nr=rr=null,bt=!1}function qf(t){Mr===null?Mr=[t]:Mr.push(t)}var gC=_i.ReactCurrentBatchConfig;function _a(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(se(309));var i=n.stateNode}if(!i)throw Error(se(147,t));var o=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(d){var m=o.refs;d===null?delete m[l]:m[l]=d},e._stringRef=l,e)}if(typeof t!="string")throw Error(se(284));if(!n._owner)throw Error(se(290,t))}return t}function tc(t,e){throw t=Object.prototype.toString.call(e),Error(se(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function X1(t){var e=t._init;return e(t._payload)}function ww(t){function e(O,S){if(t){var _=O.deletions;_===null?(O.deletions=[S],O.flags|=16):_.push(S)}}function n(O,S){if(!t)return null;for(;S!==null;)e(O,S),S=S.sibling;return null}function i(O,S){for(O=new Map;S!==null;)S.key!==null?O.set(S.key,S):O.set(S.index,S),S=S.sibling;return O}function o(O,S){return O=ss(O,S),O.index=0,O.sibling=null,O}function l(O,S,_){return O.index=_,t?(_=O.alternate,_!==null?(_=_.index,_<S?(O.flags|=2,S):_):(O.flags|=2,S)):(O.flags|=1048576,S)}function d(O){return t&&O.alternate===null&&(O.flags|=2),O}function m(O,S,_,D){return S===null||S.tag!==6?(S=Fd(_,O.mode,D),S.return=O,S):(S=o(S,_),S.return=O,S)}function p(O,S,_,D){var U=_.type;return U===wo?y(O,S,_.props.children,D,_.key):S!==null&&(S.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Fi&&X1(U)===S.type)?(D=o(S,_.props),D.ref=_a(O,S,_),D.return=O,D):(D=Sc(_.type,_.key,_.props,null,O.mode,D),D.ref=_a(O,S,_),D.return=O,D)}function g(O,S,_,D){return S===null||S.tag!==4||S.stateNode.containerInfo!==_.containerInfo||S.stateNode.implementation!==_.implementation?(S=jd(_,O.mode,D),S.return=O,S):(S=o(S,_.children||[]),S.return=O,S)}function y(O,S,_,D,U){return S===null||S.tag!==7?(S=js(_,O.mode,D,U),S.return=O,S):(S=o(S,_),S.return=O,S)}function v(O,S,_){if(typeof S=="string"&&S!==""||typeof S=="number")return S=Fd(""+S,O.mode,_),S.return=O,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Hl:return _=Sc(S.type,S.key,S.props,null,O.mode,_),_.ref=_a(O,null,S),_.return=O,_;case mo:return S=jd(S,O.mode,_),S.return=O,S;case Fi:var D=S._init;return v(O,D(S._payload),_)}if(Pa(S)||va(S))return S=js(S,O.mode,_,null),S.return=O,S;tc(O,S)}return null}function E(O,S,_,D){var U=S!==null?S.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return U!==null?null:m(O,S,""+_,D);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Hl:return _.key===U?p(O,S,_,D):null;case mo:return _.key===U?g(O,S,_,D):null;case Fi:return U=_._init,E(O,S,U(_._payload),D)}if(Pa(_)||va(_))return U!==null?null:y(O,S,_,D,null);tc(O,_)}return null}function C(O,S,_,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return O=O.get(_)||null,m(S,O,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Hl:return O=O.get(D.key===null?_:D.key)||null,p(S,O,D,U);case mo:return O=O.get(D.key===null?_:D.key)||null,g(S,O,D,U);case Fi:var z=D._init;return C(O,S,_,z(D._payload),U)}if(Pa(D)||va(D))return O=O.get(_)||null,y(S,O,D,U,null);tc(S,D)}return null}function T(O,S,_,D){for(var U=null,z=null,F=S,K=S=0,W=null;F!==null&&K<_.length;K++){F.index>K?(W=F,F=null):W=F.sibling;var re=E(O,F,_[K],D);if(re===null){F===null&&(F=W);break}t&&F&&re.alternate===null&&e(O,F),S=l(re,S,K),z===null?U=re:z.sibling=re,z=re,F=W}if(K===_.length)return n(O,F),bt&&Cs(O,K),U;if(F===null){for(;K<_.length;K++)F=v(O,_[K],D),F!==null&&(S=l(F,S,K),z===null?U=F:z.sibling=F,z=F);return bt&&Cs(O,K),U}for(F=i(O,F);K<_.length;K++)W=C(F,O,K,_[K],D),W!==null&&(t&&W.alternate!==null&&F.delete(W.key===null?K:W.key),S=l(W,S,K),z===null?U=W:z.sibling=W,z=W);return t&&F.forEach(function(he){return e(O,he)}),bt&&Cs(O,K),U}function A(O,S,_,D){var U=va(_);if(typeof U!="function")throw Error(se(150));if(_=U.call(_),_==null)throw Error(se(151));for(var z=U=null,F=S,K=S=0,W=null,re=_.next();F!==null&&!re.done;K++,re=_.next()){F.index>K?(W=F,F=null):W=F.sibling;var he=E(O,F,re.value,D);if(he===null){F===null&&(F=W);break}t&&F&&he.alternate===null&&e(O,F),S=l(he,S,K),z===null?U=he:z.sibling=he,z=he,F=W}if(re.done)return n(O,F),bt&&Cs(O,K),U;if(F===null){for(;!re.done;K++,re=_.next())re=v(O,re.value,D),re!==null&&(S=l(re,S,K),z===null?U=re:z.sibling=re,z=re);return bt&&Cs(O,K),U}for(F=i(O,F);!re.done;K++,re=_.next())re=C(F,O,K,re.value,D),re!==null&&(t&&re.alternate!==null&&F.delete(re.key===null?K:re.key),S=l(re,S,K),z===null?U=re:z.sibling=re,z=re);return t&&F.forEach(function(Q){return e(O,Q)}),bt&&Cs(O,K),U}function N(O,S,_,D){if(typeof _=="object"&&_!==null&&_.type===wo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Hl:e:{for(var U=_.key,z=S;z!==null;){if(z.key===U){if(U=_.type,U===wo){if(z.tag===7){n(O,z.sibling),S=o(z,_.props.children),S.return=O,O=S;break e}}else if(z.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Fi&&X1(U)===z.type){n(O,z.sibling),S=o(z,_.props),S.ref=_a(O,z,_),S.return=O,O=S;break e}n(O,z);break}else e(O,z);z=z.sibling}_.type===wo?(S=js(_.props.children,O.mode,D,_.key),S.return=O,O=S):(D=Sc(_.type,_.key,_.props,null,O.mode,D),D.ref=_a(O,S,_),D.return=O,O=D)}return d(O);case mo:e:{for(z=_.key;S!==null;){if(S.key===z)if(S.tag===4&&S.stateNode.containerInfo===_.containerInfo&&S.stateNode.implementation===_.implementation){n(O,S.sibling),S=o(S,_.children||[]),S.return=O,O=S;break e}else{n(O,S);break}else e(O,S);S=S.sibling}S=jd(_,O.mode,D),S.return=O,O=S}return d(O);case Fi:return z=_._init,N(O,S,z(_._payload),D)}if(Pa(_))return T(O,S,_,D);if(va(_))return A(O,S,_,D);tc(O,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,S!==null&&S.tag===6?(n(O,S.sibling),S=o(S,_),S.return=O,O=S):(n(O,S),S=Fd(_,O.mode,D),S.return=O,O=S),d(O)):n(O,S)}return N}var Zo=ww(!0),yw=ww(!1),Hc=fs(null),$c=null,_o=null,Qf=null;function Zf(){Qf=_o=$c=null}function Jf(t){var e=Hc.current;xt(Hc),t._currentValue=e}function Nh(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Mo(t,e){$c=t,Qf=_o=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vn=!0),t.firstContext=null)}function yr(t){var e=t._currentValue;if(Qf!==t)if(t={context:t,memoizedValue:e,next:null},_o===null){if($c===null)throw Error(se(308));_o=t,$c.dependencies={lanes:0,firstContext:t}}else _o=_o.next=t;return e}var Rs=null;function e0(t){Rs===null?Rs=[t]:Rs.push(t)}function xw(t,e,n,i){var o=e.interleaved;return o===null?(n.next=n,e0(e)):(n.next=o.next,o.next=n),e.interleaved=n,Ei(t,i)}function Ei(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ji=!1;function t0(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function yi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ns(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ze&2){var o=i.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),i.pending=e,Ei(t,n)}return o=i.interleaved,o===null?(e.next=e,e0(i)):(e.next=o.next,o.next=e),i.interleaved=e,Ei(t,n)}function vc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Uf(t,n)}}function Y1(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var d={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=d:l=l.next=d,n=n.next}while(n!==null);l===null?o=l=e:l=l.next=e}else o=l=e;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Gc(t,e,n,i){var o=t.updateQueue;ji=!1;var l=o.firstBaseUpdate,d=o.lastBaseUpdate,m=o.shared.pending;if(m!==null){o.shared.pending=null;var p=m,g=p.next;p.next=null,d===null?l=g:d.next=g,d=p;var y=t.alternate;y!==null&&(y=y.updateQueue,m=y.lastBaseUpdate,m!==d&&(m===null?y.firstBaseUpdate=g:m.next=g,y.lastBaseUpdate=p))}if(l!==null){var v=o.baseState;d=0,y=g=p=null,m=l;do{var E=m.lane,C=m.eventTime;if((i&E)===E){y!==null&&(y=y.next={eventTime:C,lane:0,tag:m.tag,payload:m.payload,callback:m.callback,next:null});e:{var T=t,A=m;switch(E=e,C=n,A.tag){case 1:if(T=A.payload,typeof T=="function"){v=T.call(C,v,E);break e}v=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=A.payload,E=typeof T=="function"?T.call(C,v,E):T,E==null)break e;v=It({},v,E);break e;case 2:ji=!0}}m.callback!==null&&m.lane!==0&&(t.flags|=64,E=o.effects,E===null?o.effects=[m]:E.push(m))}else C={eventTime:C,lane:E,tag:m.tag,payload:m.payload,callback:m.callback,next:null},y===null?(g=y=C,p=v):y=y.next=C,d|=E;if(m=m.next,m===null){if(m=o.shared.pending,m===null)break;E=m,m=E.next,E.next=null,o.lastBaseUpdate=E,o.shared.pending=null}}while(!0);if(y===null&&(p=v),o.baseState=p,o.firstBaseUpdate=g,o.lastBaseUpdate=y,e=o.shared.interleaved,e!==null){o=e;do d|=o.lane,o=o.next;while(o!==e)}else l===null&&(o.shared.lanes=0);Ws|=d,t.lanes=d,t.memoizedState=v}}function q1(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],o=i.callback;if(o!==null){if(i.callback=null,i=n,typeof o!="function")throw Error(se(191,o));o.call(i)}}}var Il={},ni=fs(Il),ol=fs(Il),al=fs(Il);function Os(t){if(t===Il)throw Error(se(174));return t}function n0(t,e){switch(ft(al,e),ft(ol,t),ft(ni,Il),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}xt(ni),ft(ni,e)}function Jo(){xt(ni),xt(ol),xt(al)}function Ew(t){Os(al.current);var e=Os(ni.current),n=dh(e,t.type);e!==n&&(ft(ol,t),ft(ni,n))}function r0(t){ol.current===t&&(xt(ni),xt(ol))}var St=fs(0);function Kc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var kd=[];function i0(){for(var t=0;t<kd.length;t++)kd[t]._workInProgressVersionPrimary=null;kd.length=0}var Ec=_i.ReactCurrentDispatcher,Pd=_i.ReactCurrentBatchConfig,Vs=0,Tt=null,Yt=null,rn=null,Xc=!1,Va=!1,ll=0,mC=0;function vn(){throw Error(se(321))}function s0(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Fr(t[n],e[n]))return!1;return!0}function o0(t,e,n,i,o,l){if(Vs=l,Tt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ec.current=t===null||t.memoizedState===null?vC:EC,t=n(i,o),Va){l=0;do{if(Va=!1,ll=0,25<=l)throw Error(se(301));l+=1,rn=Yt=null,e.updateQueue=null,Ec.current=CC,t=n(i,o)}while(Va)}if(Ec.current=Yc,e=Yt!==null&&Yt.next!==null,Vs=0,rn=Yt=Tt=null,Xc=!1,e)throw Error(se(300));return t}function a0(){var t=ll!==0;return ll=0,t}function Xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rn===null?Tt.memoizedState=rn=t:rn=rn.next=t,rn}function xr(){if(Yt===null){var t=Tt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=rn===null?Tt.memoizedState:rn.next;if(e!==null)rn=e,Yt=t;else{if(t===null)throw Error(se(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},rn===null?Tt.memoizedState=rn=t:rn=rn.next=t}return rn}function cl(t,e){return typeof e=="function"?e(t):e}function Dd(t){var e=xr(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=Yt,o=i.baseQueue,l=n.pending;if(l!==null){if(o!==null){var d=o.next;o.next=l.next,l.next=d}i.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,i=i.baseState;var m=d=null,p=null,g=l;do{var y=g.lane;if((Vs&y)===y)p!==null&&(p=p.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:t(i,g.action);else{var v={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};p===null?(m=p=v,d=i):p=p.next=v,Tt.lanes|=y,Ws|=y}g=g.next}while(g!==null&&g!==l);p===null?d=i:p.next=m,Fr(i,e.memoizedState)||(Vn=!0),e.memoizedState=i,e.baseState=d,e.baseQueue=p,n.lastRenderedState=i}if(t=n.interleaved,t!==null){o=t;do l=o.lane,Tt.lanes|=l,Ws|=l,o=o.next;while(o!==t)}else o===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Md(t){var e=xr(),n=e.queue;if(n===null)throw Error(se(311));n.lastRenderedReducer=t;var i=n.dispatch,o=n.pending,l=e.memoizedState;if(o!==null){n.pending=null;var d=o=o.next;do l=t(l,d.action),d=d.next;while(d!==o);Fr(l,e.memoizedState)||(Vn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Cw(){}function bw(t,e){var n=Tt,i=xr(),o=e(),l=!Fr(i.memoizedState,o);if(l&&(i.memoizedState=o,Vn=!0),i=i.queue,l0(Sw.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||rn!==null&&rn.memoizedState.tag&1){if(n.flags|=2048,ul(9,_w.bind(null,n,i,o,e),void 0,null),sn===null)throw Error(se(349));Vs&30||Aw(n,e,o)}return o}function Aw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _w(t,e,n,i){e.value=n,e.getSnapshot=i,Tw(e)&&Iw(t)}function Sw(t,e,n){return n(function(){Tw(e)&&Iw(t)})}function Tw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Fr(t,n)}catch{return!0}}function Iw(t){var e=Ei(t,1);e!==null&&Br(e,t,1,-1)}function Q1(t){var e=Xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:cl,lastRenderedState:t},e.queue=t,t=t.dispatch=xC.bind(null,Tt,t),[e.memoizedState,t]}function ul(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Tt.updateQueue,e===null?(e={lastEffect:null,stores:null},Tt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Rw(){return xr().memoizedState}function Cc(t,e,n,i){var o=Xr();Tt.flags|=t,o.memoizedState=ul(1|e,n,void 0,i===void 0?null:i)}function Su(t,e,n,i){var o=xr();i=i===void 0?null:i;var l=void 0;if(Yt!==null){var d=Yt.memoizedState;if(l=d.destroy,i!==null&&s0(i,d.deps)){o.memoizedState=ul(e,n,l,i);return}}Tt.flags|=t,o.memoizedState=ul(1|e,n,l,i)}function Z1(t,e){return Cc(8390656,8,t,e)}function l0(t,e){return Su(2048,8,t,e)}function Ow(t,e){return Su(4,2,t,e)}function Nw(t,e){return Su(4,4,t,e)}function kw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pw(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,kw.bind(null,e,t),n)}function c0(){}function Dw(t,e){var n=xr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&s0(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Mw(t,e){var n=xr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&s0(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Lw(t,e,n){return Vs&21?(Fr(n,e)||(n=zm(),Tt.lanes|=n,Ws|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vn=!0),t.memoizedState=n)}function wC(t,e){var n=st;st=n!==0&&4>n?n:4,t(!0);var i=Pd.transition;Pd.transition={};try{t(!1),e()}finally{st=n,Pd.transition=i}}function Bw(){return xr().memoizedState}function yC(t,e,n){var i=is(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Fw(t))jw(e,n);else if(n=xw(t,e,n,i),n!==null){var o=Nn();Br(n,t,i,o),Uw(n,e,i)}}function xC(t,e,n){var i=is(t),o={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Fw(t))jw(e,o);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var d=e.lastRenderedState,m=l(d,n);if(o.hasEagerState=!0,o.eagerState=m,Fr(m,d)){var p=e.interleaved;p===null?(o.next=o,e0(e)):(o.next=p.next,p.next=o),e.interleaved=o;return}}catch{}finally{}n=xw(t,e,o,i),n!==null&&(o=Nn(),Br(n,t,i,o),Uw(n,e,i))}}function Fw(t){var e=t.alternate;return t===Tt||e!==null&&e===Tt}function jw(t,e){Va=Xc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Uf(t,n)}}var Yc={readContext:yr,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},vC={readContext:yr,useCallback:function(t,e){return Xr().memoizedState=[t,e===void 0?null:e],t},useContext:yr,useEffect:Z1,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Cc(4194308,4,kw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Cc(4194308,4,t,e)},useInsertionEffect:function(t,e){return Cc(4,2,t,e)},useMemo:function(t,e){var n=Xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Xr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=yC.bind(null,Tt,t),[i.memoizedState,t]},useRef:function(t){var e=Xr();return t={current:t},e.memoizedState=t},useState:Q1,useDebugValue:c0,useDeferredValue:function(t){return Xr().memoizedState=t},useTransition:function(){var t=Q1(!1),e=t[0];return t=wC.bind(null,t[1]),Xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Tt,o=Xr();if(bt){if(n===void 0)throw Error(se(407));n=n()}else{if(n=e(),sn===null)throw Error(se(349));Vs&30||Aw(i,e,n)}o.memoizedState=n;var l={value:n,getSnapshot:e};return o.queue=l,Z1(Sw.bind(null,i,l,t),[t]),i.flags|=2048,ul(9,_w.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=Xr(),e=sn.identifierPrefix;if(bt){var n=wi,i=mi;n=(i&~(1<<32-Lr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ll++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=mC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},EC={readContext:yr,useCallback:Dw,useContext:yr,useEffect:l0,useImperativeHandle:Pw,useInsertionEffect:Ow,useLayoutEffect:Nw,useMemo:Mw,useReducer:Dd,useRef:Rw,useState:function(){return Dd(cl)},useDebugValue:c0,useDeferredValue:function(t){var e=xr();return Lw(e,Yt.memoizedState,t)},useTransition:function(){var t=Dd(cl)[0],e=xr().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:bw,useId:Bw,unstable_isNewReconciler:!1},CC={readContext:yr,useCallback:Dw,useContext:yr,useEffect:l0,useImperativeHandle:Pw,useInsertionEffect:Ow,useLayoutEffect:Nw,useMemo:Mw,useReducer:Md,useRef:Rw,useState:function(){return Md(cl)},useDebugValue:c0,useDeferredValue:function(t){var e=xr();return Yt===null?e.memoizedState=t:Lw(e,Yt.memoizedState,t)},useTransition:function(){var t=Md(cl)[0],e=xr().memoizedState;return[t,e]},useMutableSource:Cw,useSyncExternalStore:bw,useId:Bw,unstable_isNewReconciler:!1};function Tr(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function kh(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Tu={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Nn(),o=is(t),l=yi(i,o);l.payload=e,n!=null&&(l.callback=n),e=ns(t,l,o),e!==null&&(Br(e,t,o,i),vc(e,t,o))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Nn(),o=is(t),l=yi(i,o);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=ns(t,l,o),e!==null&&(Br(e,t,o,i),vc(e,t,o))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nn(),i=is(t),o=yi(n,i);o.tag=2,e!=null&&(o.callback=e),e=ns(t,o,i),e!==null&&(Br(e,t,i,n),vc(e,t,i))}};function J1(t,e,n,i,o,l,d){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,d):e.prototype&&e.prototype.isPureReactComponent?!nl(n,i)||!nl(o,l):!0}function zw(t,e,n){var i=!1,o=as,l=e.contextType;return typeof l=="object"&&l!==null?l=yr(l):(o=Hn(e)?Us:An.current,i=e.contextTypes,l=(i=i!=null)?qo(t,o):as),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Tu,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=o,t.__reactInternalMemoizedMaskedChildContext=l),e}function ep(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Tu.enqueueReplaceState(e,e.state,null)}function Ph(t,e,n,i){var o=t.stateNode;o.props=n,o.state=t.memoizedState,o.refs={},t0(t);var l=e.contextType;typeof l=="object"&&l!==null?o.context=yr(l):(l=Hn(e)?Us:An.current,o.context=qo(t,l)),o.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(kh(t,e,l,n),o.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Tu.enqueueReplaceState(o,o.state,null),Gc(t,n,o,i),o.state=t.memoizedState),typeof o.componentDidMount=="function"&&(t.flags|=4194308)}function ea(t,e){try{var n="",i=e;do n+=qv(i),i=i.return;while(i);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:o,digest:null}}function Ld(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Dh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bC=typeof WeakMap=="function"?WeakMap:Map;function Vw(t,e,n){n=yi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Qc||(Qc=!0,Hh=i),Dh(t,e)},n}function Ww(t,e,n){n=yi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var o=e.value;n.payload=function(){return i(o)},n.callback=function(){Dh(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Dh(t,e),typeof i!="function"&&(rs===null?rs=new Set([this]):rs.add(this));var d=e.stack;this.componentDidCatch(e.value,{componentStack:d!==null?d:""})}),n}function tp(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new bC;var o=new Set;i.set(e,o)}else o=i.get(e),o===void 0&&(o=new Set,i.set(e,o));o.has(n)||(o.add(n),t=BC.bind(null,t,e,n),e.then(t,t))}function np(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function rp(t,e,n,i,o){return t.mode&1?(t.flags|=65536,t.lanes=o,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=yi(-1,1),e.tag=2,ns(n,e,1))),n.lanes|=1),t)}var AC=_i.ReactCurrentOwner,Vn=!1;function Rn(t,e,n,i){e.child=t===null?yw(e,null,n,i):Zo(e,t.child,n,i)}function ip(t,e,n,i,o){n=n.render;var l=e.ref;return Mo(e,o),i=o0(t,e,n,i,l,o),n=a0(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ci(t,e,o)):(bt&&n&&Xf(e),e.flags|=1,Rn(t,e,i,o),e.child)}function sp(t,e,n,i,o){if(t===null){var l=n.type;return typeof l=="function"&&!w0(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,Hw(t,e,l,i,o)):(t=Sc(n.type,null,i,e,e.mode,o),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&o)){var d=l.memoizedProps;if(n=n.compare,n=n!==null?n:nl,n(d,i)&&t.ref===e.ref)return Ci(t,e,o)}return e.flags|=1,t=ss(l,i),t.ref=e.ref,t.return=e,e.child=t}function Hw(t,e,n,i,o){if(t!==null){var l=t.memoizedProps;if(nl(l,i)&&t.ref===e.ref)if(Vn=!1,e.pendingProps=i=l,(t.lanes&o)!==0)t.flags&131072&&(Vn=!0);else return e.lanes=t.lanes,Ci(t,e,o)}return Mh(t,e,n,i,o)}function $w(t,e,n){var i=e.pendingProps,o=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(To,Zn),Zn|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(To,Zn),Zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,ft(To,Zn),Zn|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,ft(To,Zn),Zn|=i;return Rn(t,e,o,n),e.child}function Gw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mh(t,e,n,i,o){var l=Hn(n)?Us:An.current;return l=qo(e,l),Mo(e,o),n=o0(t,e,n,i,l,o),i=a0(),t!==null&&!Vn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~o,Ci(t,e,o)):(bt&&i&&Xf(e),e.flags|=1,Rn(t,e,n,o),e.child)}function op(t,e,n,i,o){if(Hn(n)){var l=!0;zc(e)}else l=!1;if(Mo(e,o),e.stateNode===null)bc(t,e),zw(e,n,i),Ph(e,n,i,o),i=!0;else if(t===null){var d=e.stateNode,m=e.memoizedProps;d.props=m;var p=d.context,g=n.contextType;typeof g=="object"&&g!==null?g=yr(g):(g=Hn(n)?Us:An.current,g=qo(e,g));var y=n.getDerivedStateFromProps,v=typeof y=="function"||typeof d.getSnapshotBeforeUpdate=="function";v||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==i||p!==g)&&ep(e,d,i,g),ji=!1;var E=e.memoizedState;d.state=E,Gc(e,i,d,o),p=e.memoizedState,m!==i||E!==p||Wn.current||ji?(typeof y=="function"&&(kh(e,n,y,i),p=e.memoizedState),(m=ji||J1(e,n,m,i,E,p,g))?(v||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(e.flags|=4194308)):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=p),d.props=i,d.state=p,d.context=g,i=m):(typeof d.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{d=e.stateNode,vw(t,e),m=e.memoizedProps,g=e.type===e.elementType?m:Tr(e.type,m),d.props=g,v=e.pendingProps,E=d.context,p=n.contextType,typeof p=="object"&&p!==null?p=yr(p):(p=Hn(n)?Us:An.current,p=qo(e,p));var C=n.getDerivedStateFromProps;(y=typeof C=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(m!==v||E!==p)&&ep(e,d,i,p),ji=!1,E=e.memoizedState,d.state=E,Gc(e,i,d,o);var T=e.memoizedState;m!==v||E!==T||Wn.current||ji?(typeof C=="function"&&(kh(e,n,C,i),T=e.memoizedState),(g=ji||J1(e,n,g,i,E,T,p)||!1)?(y||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(i,T,p),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(i,T,p)),typeof d.componentDidUpdate=="function"&&(e.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=T),d.props=i,d.state=T,d.context=p,i=g):(typeof d.componentDidUpdate!="function"||m===t.memoizedProps&&E===t.memoizedState||(e.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&E===t.memoizedState||(e.flags|=1024),i=!1)}return Lh(t,e,n,i,l,o)}function Lh(t,e,n,i,o,l){Gw(t,e);var d=(e.flags&128)!==0;if(!i&&!d)return o&&$1(e,n,!1),Ci(t,e,l);i=e.stateNode,AC.current=e;var m=d&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&d?(e.child=Zo(e,t.child,null,l),e.child=Zo(e,null,m,l)):Rn(t,e,m,l),e.memoizedState=i.state,o&&$1(e,n,!0),e.child}function Kw(t){var e=t.stateNode;e.pendingContext?H1(t,e.pendingContext,e.pendingContext!==e.context):e.context&&H1(t,e.context,!1),n0(t,e.containerInfo)}function ap(t,e,n,i,o){return Qo(),qf(o),e.flags|=256,Rn(t,e,n,i),e.child}var Bh={dehydrated:null,treeContext:null,retryLane:0};function Fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xw(t,e,n){var i=e.pendingProps,o=St.current,l=!1,d=(e.flags&128)!==0,m;if((m=d)||(m=t!==null&&t.memoizedState===null?!1:(o&2)!==0),m?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(o|=1),ft(St,o&1),t===null)return Oh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(d=i.children,t=i.fallback,l?(i=e.mode,l=e.child,d={mode:"hidden",children:d},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=d):l=Ou(d,i,0,null),t=js(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=Fh(n),e.memoizedState=Bh,t):u0(e,d));if(o=t.memoizedState,o!==null&&(m=o.dehydrated,m!==null))return _C(t,e,d,i,m,o,n);if(l){l=i.fallback,d=e.mode,o=t.child,m=o.sibling;var p={mode:"hidden",children:i.children};return!(d&1)&&e.child!==o?(i=e.child,i.childLanes=0,i.pendingProps=p,e.deletions=null):(i=ss(o,p),i.subtreeFlags=o.subtreeFlags&14680064),m!==null?l=ss(m,l):(l=js(l,d,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,d=t.child.memoizedState,d=d===null?Fh(n):{baseLanes:d.baseLanes|n,cachePool:null,transitions:d.transitions},l.memoizedState=d,l.childLanes=t.childLanes&~n,e.memoizedState=Bh,i}return l=t.child,t=l.sibling,i=ss(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function u0(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nc(t,e,n,i){return i!==null&&qf(i),Zo(e,t.child,null,n),t=u0(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function _C(t,e,n,i,o,l,d){if(n)return e.flags&256?(e.flags&=-257,i=Ld(Error(se(422))),nc(t,e,d,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,o=e.mode,i=Ou({mode:"visible",children:i.children},o,0,null),l=js(l,o,d,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Zo(e,t.child,null,d),e.child.memoizedState=Fh(d),e.memoizedState=Bh,l);if(!(e.mode&1))return nc(t,e,d,null);if(o.data==="$!"){if(i=o.nextSibling&&o.nextSibling.dataset,i)var m=i.dgst;return i=m,l=Error(se(419)),i=Ld(l,i,void 0),nc(t,e,d,i)}if(m=(d&t.childLanes)!==0,Vn||m){if(i=sn,i!==null){switch(d&-d){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(i.suspendedLanes|d)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,Ei(t,o),Br(i,t,o,-1))}return m0(),i=Ld(Error(se(421))),nc(t,e,d,i)}return o.data==="$?"?(e.flags|=128,e.child=t.child,e=FC.bind(null,t),o._reactRetry=e,null):(t=l.treeContext,nr=ts(o.nextSibling),rr=e,bt=!0,Mr=null,t!==null&&(pr[gr++]=mi,pr[gr++]=wi,pr[gr++]=zs,mi=t.id,wi=t.overflow,zs=e),e=u0(e,i.children),e.flags|=4096,e)}function lp(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Nh(t.return,e,n)}function Bd(t,e,n,i,o){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=o)}function Yw(t,e,n){var i=e.pendingProps,o=i.revealOrder,l=i.tail;if(Rn(t,e,i.children,n),i=St.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lp(t,n,e);else if(t.tag===19)lp(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ft(St,i),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(n=e.child,o=null;n!==null;)t=n.alternate,t!==null&&Kc(t)===null&&(o=n),n=n.sibling;n=o,n===null?(o=e.child,e.child=null):(o=n.sibling,n.sibling=null),Bd(e,!1,o,n,l);break;case"backwards":for(n=null,o=e.child,e.child=null;o!==null;){if(t=o.alternate,t!==null&&Kc(t)===null){e.child=o;break}t=o.sibling,o.sibling=n,n=o,o=t}Bd(e,!0,n,null,l);break;case"together":Bd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ci(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ws|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(se(153));if(e.child!==null){for(t=e.child,n=ss(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ss(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function SC(t,e,n){switch(e.tag){case 3:Kw(e),Qo();break;case 5:Ew(e);break;case 1:Hn(e.type)&&zc(e);break;case 4:n0(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,o=e.memoizedProps.value;ft(Hc,i._currentValue),i._currentValue=o;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ft(St,St.current&1),e.flags|=128,null):n&e.child.childLanes?Xw(t,e,n):(ft(St,St.current&1),t=Ci(t,e,n),t!==null?t.sibling:null);ft(St,St.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Yw(t,e,n);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ft(St,St.current),i)break;return null;case 22:case 23:return e.lanes=0,$w(t,e,n)}return Ci(t,e,n)}var qw,jh,Qw,Zw;qw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};jh=function(){};Qw=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Os(ni.current);var l=null;switch(n){case"input":o=ah(t,o),i=ah(t,i),l=[];break;case"select":o=It({},o,{value:void 0}),i=It({},i,{value:void 0}),l=[];break;case"textarea":o=uh(t,o),i=uh(t,i),l=[];break;default:typeof o.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=jc)}hh(n,i);var d;n=null;for(g in o)if(!i.hasOwnProperty(g)&&o.hasOwnProperty(g)&&o[g]!=null)if(g==="style"){var m=o[g];for(d in m)m.hasOwnProperty(d)&&(n||(n={}),n[d]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(Ya.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in i){var p=i[g];if(m=o!=null?o[g]:void 0,i.hasOwnProperty(g)&&p!==m&&(p!=null||m!=null))if(g==="style")if(m){for(d in m)!m.hasOwnProperty(d)||p&&p.hasOwnProperty(d)||(n||(n={}),n[d]="");for(d in p)p.hasOwnProperty(d)&&m[d]!==p[d]&&(n||(n={}),n[d]=p[d])}else n||(l||(l=[]),l.push(g,n)),n=p;else g==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,m=m?m.__html:void 0,p!=null&&m!==p&&(l=l||[]).push(g,p)):g==="children"?typeof p!="string"&&typeof p!="number"||(l=l||[]).push(g,""+p):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(Ya.hasOwnProperty(g)?(p!=null&&g==="onScroll"&&wt("scroll",t),l||m===p||(l=[])):(l=l||[]).push(g,p))}n&&(l=l||[]).push("style",n);var g=l;(e.updateQueue=g)&&(e.flags|=4)}};Zw=function(t,e,n,i){n!==i&&(e.flags|=4)};function Sa(t,e){if(!bt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function En(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&14680064,i|=o.flags&14680064,o.return=t,o=o.sibling;else for(o=t.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=t,o=o.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function TC(t,e,n){var i=e.pendingProps;switch(Yf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return En(e),null;case 1:return Hn(e.type)&&Uc(),En(e),null;case 3:return i=e.stateNode,Jo(),xt(Wn),xt(An),i0(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Mr!==null&&(Kh(Mr),Mr=null))),jh(t,e),En(e),null;case 5:r0(e);var o=Os(al.current);if(n=e.type,t!==null&&e.stateNode!=null)Qw(t,e,n,i,o),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(se(166));return En(e),null}if(t=Os(ni.current),ec(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[Zr]=e,i[sl]=l,t=(e.mode&1)!==0,n){case"dialog":wt("cancel",i),wt("close",i);break;case"iframe":case"object":case"embed":wt("load",i);break;case"video":case"audio":for(o=0;o<Ma.length;o++)wt(Ma[o],i);break;case"source":wt("error",i);break;case"img":case"image":case"link":wt("error",i),wt("load",i);break;case"details":wt("toggle",i);break;case"input":w1(i,l),wt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},wt("invalid",i);break;case"textarea":x1(i,l),wt("invalid",i)}hh(n,l),o=null;for(var d in l)if(l.hasOwnProperty(d)){var m=l[d];d==="children"?typeof m=="string"?i.textContent!==m&&(l.suppressHydrationWarning!==!0&&Jl(i.textContent,m,t),o=["children",m]):typeof m=="number"&&i.textContent!==""+m&&(l.suppressHydrationWarning!==!0&&Jl(i.textContent,m,t),o=["children",""+m]):Ya.hasOwnProperty(d)&&m!=null&&d==="onScroll"&&wt("scroll",i)}switch(n){case"input":$l(i),y1(i,l,!0);break;case"textarea":$l(i),v1(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=jc)}i=o,e.updateQueue=i,i!==null&&(e.flags|=4)}else{d=o.nodeType===9?o:o.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sm(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=d.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=d.createElement(n,{is:i.is}):(t=d.createElement(n),n==="select"&&(d=t,i.multiple?d.multiple=!0:i.size&&(d.size=i.size))):t=d.createElementNS(t,n),t[Zr]=e,t[sl]=i,qw(t,e,!1,!1),e.stateNode=t;e:{switch(d=fh(n,i),n){case"dialog":wt("cancel",t),wt("close",t),o=i;break;case"iframe":case"object":case"embed":wt("load",t),o=i;break;case"video":case"audio":for(o=0;o<Ma.length;o++)wt(Ma[o],t);o=i;break;case"source":wt("error",t),o=i;break;case"img":case"image":case"link":wt("error",t),wt("load",t),o=i;break;case"details":wt("toggle",t),o=i;break;case"input":w1(t,i),o=ah(t,i),wt("invalid",t);break;case"option":o=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=It({},i,{value:void 0}),wt("invalid",t);break;case"textarea":x1(t,i),o=uh(t,i),wt("invalid",t);break;default:o=i}hh(n,o),m=o;for(l in m)if(m.hasOwnProperty(l)){var p=m[l];l==="style"?Rm(t,p):l==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Tm(t,p)):l==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&qa(t,p):typeof p=="number"&&qa(t,""+p):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ya.hasOwnProperty(l)?p!=null&&l==="onScroll"&&wt("scroll",t):p!=null&&Df(t,l,p,d))}switch(n){case"input":$l(t),y1(t,i,!1);break;case"textarea":$l(t),v1(t);break;case"option":i.value!=null&&t.setAttribute("value",""+os(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?No(t,!!i.multiple,l,!1):i.defaultValue!=null&&No(t,!!i.multiple,i.defaultValue,!0);break;default:typeof o.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return En(e),null;case 6:if(t&&e.stateNode!=null)Zw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(se(166));if(n=Os(al.current),Os(ni.current),ec(e)){if(i=e.stateNode,n=e.memoizedProps,i[Zr]=e,(l=i.nodeValue!==n)&&(t=rr,t!==null))switch(t.tag){case 3:Jl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Jl(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Zr]=e,e.stateNode=i}return En(e),null;case 13:if(xt(St),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(bt&&nr!==null&&e.mode&1&&!(e.flags&128))mw(),Qo(),e.flags|=98560,l=!1;else if(l=ec(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(se(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(se(317));l[Zr]=e}else Qo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;En(e),l=!1}else Mr!==null&&(Kh(Mr),Mr=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?Qt===0&&(Qt=3):m0())),e.updateQueue!==null&&(e.flags|=4),En(e),null);case 4:return Jo(),jh(t,e),t===null&&rl(e.stateNode.containerInfo),En(e),null;case 10:return Jf(e.type._context),En(e),null;case 17:return Hn(e.type)&&Uc(),En(e),null;case 19:if(xt(St),l=e.memoizedState,l===null)return En(e),null;if(i=(e.flags&128)!==0,d=l.rendering,d===null)if(i)Sa(l,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(d=Kc(t),d!==null){for(e.flags|=128,Sa(l,!1),i=d.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,d=l.alternate,d===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=d.childLanes,l.lanes=d.lanes,l.child=d.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=d.memoizedProps,l.memoizedState=d.memoizedState,l.updateQueue=d.updateQueue,l.type=d.type,t=d.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ft(St,St.current&1|2),e.child}t=t.sibling}l.tail!==null&&jt()>ta&&(e.flags|=128,i=!0,Sa(l,!1),e.lanes=4194304)}else{if(!i)if(t=Kc(d),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Sa(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!bt)return En(e),null}else 2*jt()-l.renderingStartTime>ta&&n!==1073741824&&(e.flags|=128,i=!0,Sa(l,!1),e.lanes=4194304);l.isBackwards?(d.sibling=e.child,e.child=d):(n=l.last,n!==null?n.sibling=d:e.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=jt(),e.sibling=null,n=St.current,ft(St,i?n&1|2:n&1),e):(En(e),null);case 22:case 23:return g0(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Zn&1073741824&&(En(e),e.subtreeFlags&6&&(e.flags|=8192)):En(e),null;case 24:return null;case 25:return null}throw Error(se(156,e.tag))}function IC(t,e){switch(Yf(e),e.tag){case 1:return Hn(e.type)&&Uc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Jo(),xt(Wn),xt(An),i0(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return r0(e),null;case 13:if(xt(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(se(340));Qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return xt(St),null;case 4:return Jo(),null;case 10:return Jf(e.type._context),null;case 22:case 23:return g0(),null;case 24:return null;default:return null}}var rc=!1,bn=!1,RC=typeof WeakSet=="function"?WeakSet:Set,xe=null;function So(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Mt(t,e,i)}else n.current=null}function Uh(t,e,n){try{n()}catch(i){Mt(t,e,i)}}var cp=!1;function OC(t,e){if(bh=Lc,t=rw(),Kf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var d=0,m=-1,p=-1,g=0,y=0,v=t,E=null;t:for(;;){for(var C;v!==n||o!==0&&v.nodeType!==3||(m=d+o),v!==l||i!==0&&v.nodeType!==3||(p=d+i),v.nodeType===3&&(d+=v.nodeValue.length),(C=v.firstChild)!==null;)E=v,v=C;for(;;){if(v===t)break t;if(E===n&&++g===o&&(m=d),E===l&&++y===i&&(p=d),(C=v.nextSibling)!==null)break;v=E,E=v.parentNode}v=C}n=m===-1||p===-1?null:{start:m,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ah={focusedElem:t,selectionRange:n},Lc=!1,xe=e;xe!==null;)if(e=xe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,xe=t;else for(;xe!==null;){e=xe;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var A=T.memoizedProps,N=T.memoizedState,O=e.stateNode,S=O.getSnapshotBeforeUpdate(e.elementType===e.type?A:Tr(e.type,A),N);O.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(se(163))}}catch(D){Mt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,xe=t;break}xe=e.return}return T=cp,cp=!1,T}function Wa(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var o=i=i.next;do{if((o.tag&t)===t){var l=o.destroy;o.destroy=void 0,l!==void 0&&Uh(e,n,l)}o=o.next}while(o!==i)}}function Iu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jw(t){var e=t.alternate;e!==null&&(t.alternate=null,Jw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zr],delete e[sl],delete e[Th],delete e[hC],delete e[fC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ey(t){return t.tag===5||t.tag===3||t.tag===4}function up(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ey(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(i!==4&&(t=t.child,t!==null))for(Vh(t,e,n),t=t.sibling;t!==null;)Vh(t,e,n),t=t.sibling}function Wh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}var hn=null,Pr=!1;function Di(t,e,n){for(n=n.child;n!==null;)ty(t,e,n),n=n.sibling}function ty(t,e,n){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(vu,n)}catch{}switch(n.tag){case 5:bn||So(n,e);case 6:var i=hn,o=Pr;hn=null,Di(t,e,n),hn=i,Pr=o,hn!==null&&(Pr?(t=hn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hn.removeChild(n.stateNode));break;case 18:hn!==null&&(Pr?(t=hn,n=n.stateNode,t.nodeType===8?Od(t.parentNode,n):t.nodeType===1&&Od(t,n),el(t)):Od(hn,n.stateNode));break;case 4:i=hn,o=Pr,hn=n.stateNode.containerInfo,Pr=!0,Di(t,e,n),hn=i,Pr=o;break;case 0:case 11:case 14:case 15:if(!bn&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){o=i=i.next;do{var l=o,d=l.destroy;l=l.tag,d!==void 0&&(l&2||l&4)&&Uh(n,e,d),o=o.next}while(o!==i)}Di(t,e,n);break;case 1:if(!bn&&(So(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(m){Mt(n,e,m)}Di(t,e,n);break;case 21:Di(t,e,n);break;case 22:n.mode&1?(bn=(i=bn)||n.memoizedState!==null,Di(t,e,n),bn=i):Di(t,e,n);break;default:Di(t,e,n)}}function dp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new RC),e.forEach(function(i){var o=jC.bind(null,t,i);n.has(i)||(n.add(i),i.then(o,o))})}}function Ar(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i];try{var l=t,d=e,m=d;e:for(;m!==null;){switch(m.tag){case 5:hn=m.stateNode,Pr=!1;break e;case 3:hn=m.stateNode.containerInfo,Pr=!0;break e;case 4:hn=m.stateNode.containerInfo,Pr=!0;break e}m=m.return}if(hn===null)throw Error(se(160));ty(l,d,o),hn=null,Pr=!1;var p=o.alternate;p!==null&&(p.return=null),o.return=null}catch(g){Mt(o,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ny(e,t),e=e.sibling}function ny(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ar(e,t),Kr(t),i&4){try{Wa(3,t,t.return),Iu(3,t)}catch(A){Mt(t,t.return,A)}try{Wa(5,t,t.return)}catch(A){Mt(t,t.return,A)}}break;case 1:Ar(e,t),Kr(t),i&512&&n!==null&&So(n,n.return);break;case 5:if(Ar(e,t),Kr(t),i&512&&n!==null&&So(n,n.return),t.flags&32){var o=t.stateNode;try{qa(o,"")}catch(A){Mt(t,t.return,A)}}if(i&4&&(o=t.stateNode,o!=null)){var l=t.memoizedProps,d=n!==null?n.memoizedProps:l,m=t.type,p=t.updateQueue;if(t.updateQueue=null,p!==null)try{m==="input"&&l.type==="radio"&&l.name!=null&&Am(o,l),fh(m,d);var g=fh(m,l);for(d=0;d<p.length;d+=2){var y=p[d],v=p[d+1];y==="style"?Rm(o,v):y==="dangerouslySetInnerHTML"?Tm(o,v):y==="children"?qa(o,v):Df(o,y,v,g)}switch(m){case"input":lh(o,l);break;case"textarea":_m(o,l);break;case"select":var E=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var C=l.value;C!=null?No(o,!!l.multiple,C,!1):E!==!!l.multiple&&(l.defaultValue!=null?No(o,!!l.multiple,l.defaultValue,!0):No(o,!!l.multiple,l.multiple?[]:"",!1))}o[sl]=l}catch(A){Mt(t,t.return,A)}}break;case 6:if(Ar(e,t),Kr(t),i&4){if(t.stateNode===null)throw Error(se(162));o=t.stateNode,l=t.memoizedProps;try{o.nodeValue=l}catch(A){Mt(t,t.return,A)}}break;case 3:if(Ar(e,t),Kr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{el(e.containerInfo)}catch(A){Mt(t,t.return,A)}break;case 4:Ar(e,t),Kr(t);break;case 13:Ar(e,t),Kr(t),o=t.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(f0=jt())),i&4&&dp(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(bn=(g=bn)||y,Ar(e,t),bn=g):Ar(e,t),Kr(t),i&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(xe=t,y=t.child;y!==null;){for(v=xe=y;xe!==null;){switch(E=xe,C=E.child,E.tag){case 0:case 11:case 14:case 15:Wa(4,E,E.return);break;case 1:So(E,E.return);var T=E.stateNode;if(typeof T.componentWillUnmount=="function"){i=E,n=E.return;try{e=i,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(A){Mt(i,n,A)}}break;case 5:So(E,E.return);break;case 22:if(E.memoizedState!==null){fp(v);continue}}C!==null?(C.return=E,xe=C):fp(v)}y=y.sibling}e:for(y=null,v=t;;){if(v.tag===5){if(y===null){y=v;try{o=v.stateNode,g?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(m=v.stateNode,p=v.memoizedProps.style,d=p!=null&&p.hasOwnProperty("display")?p.display:null,m.style.display=Im("display",d))}catch(A){Mt(t,t.return,A)}}}else if(v.tag===6){if(y===null)try{v.stateNode.nodeValue=g?"":v.memoizedProps}catch(A){Mt(t,t.return,A)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===t)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===t)break e;for(;v.sibling===null;){if(v.return===null||v.return===t)break e;y===v&&(y=null),v=v.return}y===v&&(y=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Ar(e,t),Kr(t),i&4&&dp(t);break;case 21:break;default:Ar(e,t),Kr(t)}}function Kr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ey(n)){var i=n;break e}n=n.return}throw Error(se(160))}switch(i.tag){case 5:var o=i.stateNode;i.flags&32&&(qa(o,""),i.flags&=-33);var l=up(t);Wh(t,l,o);break;case 3:case 4:var d=i.stateNode.containerInfo,m=up(t);Vh(t,m,d);break;default:throw Error(se(161))}}catch(p){Mt(t,t.return,p)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NC(t,e,n){xe=t,ry(t)}function ry(t,e,n){for(var i=(t.mode&1)!==0;xe!==null;){var o=xe,l=o.child;if(o.tag===22&&i){var d=o.memoizedState!==null||rc;if(!d){var m=o.alternate,p=m!==null&&m.memoizedState!==null||bn;m=rc;var g=bn;if(rc=d,(bn=p)&&!g)for(xe=o;xe!==null;)d=xe,p=d.child,d.tag===22&&d.memoizedState!==null?pp(o):p!==null?(p.return=d,xe=p):pp(o);for(;l!==null;)xe=l,ry(l),l=l.sibling;xe=o,rc=m,bn=g}hp(t)}else o.subtreeFlags&8772&&l!==null?(l.return=o,xe=l):hp(t)}}function hp(t){for(;xe!==null;){var e=xe;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bn||Iu(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!bn)if(n===null)i.componentDidMount();else{var o=e.elementType===e.type?n.memoizedProps:Tr(e.type,n.memoizedProps);i.componentDidUpdate(o,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&q1(e,l,i);break;case 3:var d=e.updateQueue;if(d!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q1(e,d,n)}break;case 5:var m=e.stateNode;if(n===null&&e.flags&4){n=m;var p=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var v=y.dehydrated;v!==null&&el(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(se(163))}bn||e.flags&512&&zh(e)}catch(E){Mt(e,e.return,E)}}if(e===t){xe=null;break}if(n=e.sibling,n!==null){n.return=e.return,xe=n;break}xe=e.return}}function fp(t){for(;xe!==null;){var e=xe;if(e===t){xe=null;break}var n=e.sibling;if(n!==null){n.return=e.return,xe=n;break}xe=e.return}}function pp(t){for(;xe!==null;){var e=xe;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iu(4,e)}catch(p){Mt(e,n,p)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var o=e.return;try{i.componentDidMount()}catch(p){Mt(e,o,p)}}var l=e.return;try{zh(e)}catch(p){Mt(e,l,p)}break;case 5:var d=e.return;try{zh(e)}catch(p){Mt(e,d,p)}}}catch(p){Mt(e,e.return,p)}if(e===t){xe=null;break}var m=e.sibling;if(m!==null){m.return=e.return,xe=m;break}xe=e.return}}var kC=Math.ceil,qc=_i.ReactCurrentDispatcher,d0=_i.ReactCurrentOwner,wr=_i.ReactCurrentBatchConfig,Ze=0,sn=null,Vt=null,fn=0,Zn=0,To=fs(0),Qt=0,dl=null,Ws=0,Ru=0,h0=0,Ha=null,zn=null,f0=0,ta=1/0,di=null,Qc=!1,Hh=null,rs=null,ic=!1,qi=null,Zc=0,$a=0,$h=null,Ac=-1,_c=0;function Nn(){return Ze&6?jt():Ac!==-1?Ac:Ac=jt()}function is(t){return t.mode&1?Ze&2&&fn!==0?fn&-fn:gC.transition!==null?(_c===0&&(_c=zm()),_c):(t=st,t!==0||(t=window.event,t=t===void 0?16:Xm(t.type)),t):1}function Br(t,e,n,i){if(50<$a)throw $a=0,$h=null,Error(se(185));_l(t,n,i),(!(Ze&2)||t!==sn)&&(t===sn&&(!(Ze&2)&&(Ru|=n),Qt===4&&Vi(t,fn)),$n(t,i),n===1&&Ze===0&&!(e.mode&1)&&(ta=jt()+500,_u&&ps()))}function $n(t,e){var n=t.callbackNode;gE(t,e);var i=Mc(t,t===sn?fn:0);if(i===0)n!==null&&b1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&b1(n),e===1)t.tag===0?pC(gp.bind(null,t)):fw(gp.bind(null,t)),uC(function(){!(Ze&6)&&ps()}),n=null;else{switch(Vm(i)){case 1:n=jf;break;case 4:n=jm;break;case 16:n=Dc;break;case 536870912:n=Um;break;default:n=Dc}n=dy(n,iy.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function iy(t,e){if(Ac=-1,_c=0,Ze&6)throw Error(se(327));var n=t.callbackNode;if(Lo()&&t.callbackNode!==n)return null;var i=Mc(t,t===sn?fn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Jc(t,i);else{e=i;var o=Ze;Ze|=2;var l=oy();(sn!==t||fn!==e)&&(di=null,ta=jt()+500,Fs(t,e));do try{MC();break}catch(m){sy(t,m)}while(!0);Zf(),qc.current=l,Ze=o,Vt!==null?e=0:(sn=null,fn=0,e=Qt)}if(e!==0){if(e===2&&(o=yh(t),o!==0&&(i=o,e=Gh(t,o))),e===1)throw n=dl,Fs(t,0),Vi(t,i),$n(t,jt()),n;if(e===6)Vi(t,i);else{if(o=t.current.alternate,!(i&30)&&!PC(o)&&(e=Jc(t,i),e===2&&(l=yh(t),l!==0&&(i=l,e=Gh(t,l))),e===1))throw n=dl,Fs(t,0),Vi(t,i),$n(t,jt()),n;switch(t.finishedWork=o,t.finishedLanes=i,e){case 0:case 1:throw Error(se(345));case 2:bs(t,zn,di);break;case 3:if(Vi(t,i),(i&130023424)===i&&(e=f0+500-jt(),10<e)){if(Mc(t,0)!==0)break;if(o=t.suspendedLanes,(o&i)!==i){Nn(),t.pingedLanes|=t.suspendedLanes&o;break}t.timeoutHandle=Sh(bs.bind(null,t,zn,di),e);break}bs(t,zn,di);break;case 4:if(Vi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,o=-1;0<i;){var d=31-Lr(i);l=1<<d,d=e[d],d>o&&(o=d),i&=~l}if(i=o,i=jt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*kC(i/1960))-i,10<i){t.timeoutHandle=Sh(bs.bind(null,t,zn,di),i);break}bs(t,zn,di);break;case 5:bs(t,zn,di);break;default:throw Error(se(329))}}}return $n(t,jt()),t.callbackNode===n?iy.bind(null,t):null}function Gh(t,e){var n=Ha;return t.current.memoizedState.isDehydrated&&(Fs(t,e).flags|=256),t=Jc(t,e),t!==2&&(e=zn,zn=n,e!==null&&Kh(e)),t}function Kh(t){zn===null?zn=t:zn.push.apply(zn,t)}function PC(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var o=n[i],l=o.getSnapshot;o=o.value;try{if(!Fr(l(),o))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~h0,e&=~Ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Lr(e),i=1<<n;t[n]=-1,e&=~i}}function gp(t){if(Ze&6)throw Error(se(327));Lo();var e=Mc(t,0);if(!(e&1))return $n(t,jt()),null;var n=Jc(t,e);if(t.tag!==0&&n===2){var i=yh(t);i!==0&&(e=i,n=Gh(t,i))}if(n===1)throw n=dl,Fs(t,0),Vi(t,e),$n(t,jt()),n;if(n===6)throw Error(se(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,bs(t,zn,di),$n(t,jt()),null}function p0(t,e){var n=Ze;Ze|=1;try{return t(e)}finally{Ze=n,Ze===0&&(ta=jt()+500,_u&&ps())}}function Hs(t){qi!==null&&qi.tag===0&&!(Ze&6)&&Lo();var e=Ze;Ze|=1;var n=wr.transition,i=st;try{if(wr.transition=null,st=1,t)return t()}finally{st=i,wr.transition=n,Ze=e,!(Ze&6)&&ps()}}function g0(){Zn=To.current,xt(To)}function Fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,cC(n)),Vt!==null)for(n=Vt.return;n!==null;){var i=n;switch(Yf(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Uc();break;case 3:Jo(),xt(Wn),xt(An),i0();break;case 5:r0(i);break;case 4:Jo();break;case 13:xt(St);break;case 19:xt(St);break;case 10:Jf(i.type._context);break;case 22:case 23:g0()}n=n.return}if(sn=t,Vt=t=ss(t.current,null),fn=Zn=e,Qt=0,dl=null,h0=Ru=Ws=0,zn=Ha=null,Rs!==null){for(e=0;e<Rs.length;e++)if(n=Rs[e],i=n.interleaved,i!==null){n.interleaved=null;var o=i.next,l=n.pending;if(l!==null){var d=l.next;l.next=o,i.next=d}n.pending=i}Rs=null}return t}function sy(t,e){do{var n=Vt;try{if(Zf(),Ec.current=Yc,Xc){for(var i=Tt.memoizedState;i!==null;){var o=i.queue;o!==null&&(o.pending=null),i=i.next}Xc=!1}if(Vs=0,rn=Yt=Tt=null,Va=!1,ll=0,d0.current=null,n===null||n.return===null){Qt=1,dl=e,Vt=null;break}e:{var l=t,d=n.return,m=n,p=e;if(e=fn,m.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var g=p,y=m,v=y.tag;if(!(y.mode&1)&&(v===0||v===11||v===15)){var E=y.alternate;E?(y.updateQueue=E.updateQueue,y.memoizedState=E.memoizedState,y.lanes=E.lanes):(y.updateQueue=null,y.memoizedState=null)}var C=np(d);if(C!==null){C.flags&=-257,rp(C,d,m,l,e),C.mode&1&&tp(l,g,e),e=C,p=g;var T=e.updateQueue;if(T===null){var A=new Set;A.add(p),e.updateQueue=A}else T.add(p);break e}else{if(!(e&1)){tp(l,g,e),m0();break e}p=Error(se(426))}}else if(bt&&m.mode&1){var N=np(d);if(N!==null){!(N.flags&65536)&&(N.flags|=256),rp(N,d,m,l,e),qf(ea(p,m));break e}}l=p=ea(p,m),Qt!==4&&(Qt=2),Ha===null?Ha=[l]:Ha.push(l),l=d;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var O=Vw(l,p,e);Y1(l,O);break e;case 1:m=p;var S=l.type,_=l.stateNode;if(!(l.flags&128)&&(typeof S.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(rs===null||!rs.has(_)))){l.flags|=65536,e&=-e,l.lanes|=e;var D=Ww(l,m,e);Y1(l,D);break e}}l=l.return}while(l!==null)}ly(n)}catch(U){e=U,Vt===n&&n!==null&&(Vt=n=n.return);continue}break}while(!0)}function oy(){var t=qc.current;return qc.current=Yc,t===null?Yc:t}function m0(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),sn===null||!(Ws&268435455)&&!(Ru&268435455)||Vi(sn,fn)}function Jc(t,e){var n=Ze;Ze|=2;var i=oy();(sn!==t||fn!==e)&&(di=null,Fs(t,e));do try{DC();break}catch(o){sy(t,o)}while(!0);if(Zf(),Ze=n,qc.current=i,Vt!==null)throw Error(se(261));return sn=null,fn=0,Qt}function DC(){for(;Vt!==null;)ay(Vt)}function MC(){for(;Vt!==null&&!oE();)ay(Vt)}function ay(t){var e=uy(t.alternate,t,Zn);t.memoizedProps=t.pendingProps,e===null?ly(t):Vt=e,d0.current=null}function ly(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=IC(n,e),n!==null){n.flags&=32767,Vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Vt=null;return}}else if(n=TC(n,e,Zn),n!==null){Vt=n;return}if(e=e.sibling,e!==null){Vt=e;return}Vt=e=t}while(e!==null);Qt===0&&(Qt=5)}function bs(t,e,n){var i=st,o=wr.transition;try{wr.transition=null,st=1,LC(t,e,n,i)}finally{wr.transition=o,st=i}return null}function LC(t,e,n,i){do Lo();while(qi!==null);if(Ze&6)throw Error(se(327));n=t.finishedWork;var o=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(se(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(mE(t,l),t===sn&&(Vt=sn=null,fn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,dy(Dc,function(){return Lo(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=wr.transition,wr.transition=null;var d=st;st=1;var m=Ze;Ze|=4,d0.current=null,OC(t,n),ny(n,t),nC(Ah),Lc=!!bh,Ah=bh=null,t.current=n,NC(n),aE(),Ze=m,st=d,wr.transition=l}else t.current=n;if(ic&&(ic=!1,qi=t,Zc=o),l=t.pendingLanes,l===0&&(rs=null),uE(n.stateNode),$n(t,jt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)o=e[n],i(o.value,{componentStack:o.stack,digest:o.digest});if(Qc)throw Qc=!1,t=Hh,Hh=null,t;return Zc&1&&t.tag!==0&&Lo(),l=t.pendingLanes,l&1?t===$h?$a++:($a=0,$h=t):$a=0,ps(),null}function Lo(){if(qi!==null){var t=Vm(Zc),e=wr.transition,n=st;try{if(wr.transition=null,st=16>t?16:t,qi===null)var i=!1;else{if(t=qi,qi=null,Zc=0,Ze&6)throw Error(se(331));var o=Ze;for(Ze|=4,xe=t.current;xe!==null;){var l=xe,d=l.child;if(xe.flags&16){var m=l.deletions;if(m!==null){for(var p=0;p<m.length;p++){var g=m[p];for(xe=g;xe!==null;){var y=xe;switch(y.tag){case 0:case 11:case 15:Wa(8,y,l)}var v=y.child;if(v!==null)v.return=y,xe=v;else for(;xe!==null;){y=xe;var E=y.sibling,C=y.return;if(Jw(y),y===g){xe=null;break}if(E!==null){E.return=C,xe=E;break}xe=C}}}var T=l.alternate;if(T!==null){var A=T.child;if(A!==null){T.child=null;do{var N=A.sibling;A.sibling=null,A=N}while(A!==null)}}xe=l}}if(l.subtreeFlags&2064&&d!==null)d.return=l,xe=d;else e:for(;xe!==null;){if(l=xe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Wa(9,l,l.return)}var O=l.sibling;if(O!==null){O.return=l.return,xe=O;break e}xe=l.return}}var S=t.current;for(xe=S;xe!==null;){d=xe;var _=d.child;if(d.subtreeFlags&2064&&_!==null)_.return=d,xe=_;else e:for(d=S;xe!==null;){if(m=xe,m.flags&2048)try{switch(m.tag){case 0:case 11:case 15:Iu(9,m)}}catch(U){Mt(m,m.return,U)}if(m===d){xe=null;break e}var D=m.sibling;if(D!==null){D.return=m.return,xe=D;break e}xe=m.return}}if(Ze=o,ps(),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(vu,t)}catch{}i=!0}return i}finally{st=n,wr.transition=e}}return!1}function mp(t,e,n){e=ea(n,e),e=Vw(t,e,1),t=ns(t,e,1),e=Nn(),t!==null&&(_l(t,1,e),$n(t,e))}function Mt(t,e,n){if(t.tag===3)mp(t,t,n);else for(;e!==null;){if(e.tag===3){mp(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rs===null||!rs.has(i))){t=ea(n,t),t=Ww(e,t,1),e=ns(e,t,1),t=Nn(),e!==null&&(_l(e,1,t),$n(e,t));break}}e=e.return}}function BC(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Nn(),t.pingedLanes|=t.suspendedLanes&n,sn===t&&(fn&n)===n&&(Qt===4||Qt===3&&(fn&130023424)===fn&&500>jt()-f0?Fs(t,0):h0|=n),$n(t,e)}function cy(t,e){e===0&&(t.mode&1?(e=Xl,Xl<<=1,!(Xl&130023424)&&(Xl=4194304)):e=1);var n=Nn();t=Ei(t,e),t!==null&&(_l(t,e,n),$n(t,n))}function FC(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),cy(t,n)}function jC(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,o=t.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(se(314))}i!==null&&i.delete(e),cy(t,n)}var uy;uy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Wn.current)Vn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vn=!1,SC(t,e,n);Vn=!!(t.flags&131072)}else Vn=!1,bt&&e.flags&1048576&&pw(e,Wc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;bc(t,e),t=e.pendingProps;var o=qo(e,An.current);Mo(e,n),o=o0(null,e,i,t,o,n);var l=a0();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Hn(i)?(l=!0,zc(e)):l=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,t0(e),o.updater=Tu,e.stateNode=o,o._reactInternals=e,Ph(e,i,t,n),e=Lh(null,e,i,!0,l,n)):(e.tag=0,bt&&l&&Xf(e),Rn(null,e,o,n),e=e.child),e;case 16:i=e.elementType;e:{switch(bc(t,e),t=e.pendingProps,o=i._init,i=o(i._payload),e.type=i,o=e.tag=zC(i),t=Tr(i,t),o){case 0:e=Mh(null,e,i,t,n);break e;case 1:e=op(null,e,i,t,n);break e;case 11:e=ip(null,e,i,t,n);break e;case 14:e=sp(null,e,i,Tr(i.type,t),n);break e}throw Error(se(306,i,""))}return e;case 0:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Tr(i,o),Mh(t,e,i,o,n);case 1:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Tr(i,o),op(t,e,i,o,n);case 3:e:{if(Kw(e),t===null)throw Error(se(387));i=e.pendingProps,l=e.memoizedState,o=l.element,vw(t,e),Gc(e,i,null,n);var d=e.memoizedState;if(i=d.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:d.cache,pendingSuspenseBoundaries:d.pendingSuspenseBoundaries,transitions:d.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){o=ea(Error(se(423)),e),e=ap(t,e,i,n,o);break e}else if(i!==o){o=ea(Error(se(424)),e),e=ap(t,e,i,n,o);break e}else for(nr=ts(e.stateNode.containerInfo.firstChild),rr=e,bt=!0,Mr=null,n=yw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qo(),i===o){e=Ci(t,e,n);break e}Rn(t,e,i,n)}e=e.child}return e;case 5:return Ew(e),t===null&&Oh(e),i=e.type,o=e.pendingProps,l=t!==null?t.memoizedProps:null,d=o.children,_h(i,o)?d=null:l!==null&&_h(i,l)&&(e.flags|=32),Gw(t,e),Rn(t,e,d,n),e.child;case 6:return t===null&&Oh(e),null;case 13:return Xw(t,e,n);case 4:return n0(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Zo(e,null,i,n):Rn(t,e,i,n),e.child;case 11:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Tr(i,o),ip(t,e,i,o,n);case 7:return Rn(t,e,e.pendingProps,n),e.child;case 8:return Rn(t,e,e.pendingProps.children,n),e.child;case 12:return Rn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,o=e.pendingProps,l=e.memoizedProps,d=o.value,ft(Hc,i._currentValue),i._currentValue=d,l!==null)if(Fr(l.value,d)){if(l.children===o.children&&!Wn.current){e=Ci(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var m=l.dependencies;if(m!==null){d=l.child;for(var p=m.firstContext;p!==null;){if(p.context===i){if(l.tag===1){p=yi(-1,n&-n),p.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?p.next=p:(p.next=y.next,y.next=p),g.pending=p}}l.lanes|=n,p=l.alternate,p!==null&&(p.lanes|=n),Nh(l.return,n,e),m.lanes|=n;break}p=p.next}}else if(l.tag===10)d=l.type===e.type?null:l.child;else if(l.tag===18){if(d=l.return,d===null)throw Error(se(341));d.lanes|=n,m=d.alternate,m!==null&&(m.lanes|=n),Nh(d,n,e),d=l.sibling}else d=l.child;if(d!==null)d.return=l;else for(d=l;d!==null;){if(d===e){d=null;break}if(l=d.sibling,l!==null){l.return=d.return,d=l;break}d=d.return}l=d}Rn(t,e,o.children,n),e=e.child}return e;case 9:return o=e.type,i=e.pendingProps.children,Mo(e,n),o=yr(o),i=i(o),e.flags|=1,Rn(t,e,i,n),e.child;case 14:return i=e.type,o=Tr(i,e.pendingProps),o=Tr(i.type,o),sp(t,e,i,o,n);case 15:return Hw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,o=e.pendingProps,o=e.elementType===i?o:Tr(i,o),bc(t,e),e.tag=1,Hn(i)?(t=!0,zc(e)):t=!1,Mo(e,n),zw(e,i,o),Ph(e,i,o,n),Lh(null,e,i,!0,t,n);case 19:return Yw(t,e,n);case 22:return $w(t,e,n)}throw Error(se(156,e.tag))};function dy(t,e){return Fm(t,e)}function UC(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mr(t,e,n,i){return new UC(t,e,n,i)}function w0(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zC(t){if(typeof t=="function")return w0(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lf)return 11;if(t===Bf)return 14}return 2}function ss(t,e){var n=t.alternate;return n===null?(n=mr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Sc(t,e,n,i,o,l){var d=2;if(i=t,typeof t=="function")w0(t)&&(d=1);else if(typeof t=="string")d=5;else e:switch(t){case wo:return js(n.children,o,l,e);case Mf:d=8,o|=8;break;case rh:return t=mr(12,n,e,o|2),t.elementType=rh,t.lanes=l,t;case ih:return t=mr(13,n,e,o),t.elementType=ih,t.lanes=l,t;case sh:return t=mr(19,n,e,o),t.elementType=sh,t.lanes=l,t;case Em:return Ou(n,o,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xm:d=10;break e;case vm:d=9;break e;case Lf:d=11;break e;case Bf:d=14;break e;case Fi:d=16,i=null;break e}throw Error(se(130,t==null?t:typeof t,""))}return e=mr(d,n,e,o),e.elementType=t,e.type=i,e.lanes=l,e}function js(t,e,n,i){return t=mr(7,t,i,e),t.lanes=n,t}function Ou(t,e,n,i){return t=mr(22,t,i,e),t.elementType=Em,t.lanes=n,t.stateNode={isHidden:!1},t}function Fd(t,e,n){return t=mr(6,t,null,e),t.lanes=n,t}function jd(t,e,n){return e=mr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function VC(t,e,n,i,o){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xd(0),this.expirationTimes=xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xd(0),this.identifierPrefix=i,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function y0(t,e,n,i,o,l,d,m,p){return t=new VC(t,e,n,m,p),e===1?(e=1,l===!0&&(e|=8)):e=0,l=mr(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},t0(l),t}function WC(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function hy(t){if(!t)return as;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(se(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Hn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(se(171))}if(t.tag===1){var n=t.type;if(Hn(n))return hw(t,n,e)}return e}function fy(t,e,n,i,o,l,d,m,p){return t=y0(n,i,!0,t,o,l,d,m,p),t.context=hy(null),n=t.current,i=Nn(),o=is(n),l=yi(i,o),l.callback=e??null,ns(n,l,o),t.current.lanes=o,_l(t,o,i),$n(t,i),t}function Nu(t,e,n,i){var o=e.current,l=Nn(),d=is(o);return n=hy(n),e.context===null?e.context=n:e.pendingContext=n,e=yi(l,d),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ns(o,e,d),t!==null&&(Br(t,o,d,l),vc(t,o,d)),d}function eu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function x0(t,e){wp(t,e),(t=t.alternate)&&wp(t,e)}function HC(){return null}var py=typeof reportError=="function"?reportError:function(t){console.error(t)};function v0(t){this._internalRoot=t}ku.prototype.render=v0.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(se(409));Nu(t,e,null,null)};ku.prototype.unmount=v0.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Hs(function(){Nu(null,t,null,null)}),e[vi]=null}};function ku(t){this._internalRoot=t}ku.prototype.unstable_scheduleHydration=function(t){if(t){var e=$m();t={blockedOn:null,target:t,priority:e};for(var n=0;n<zi.length&&e!==0&&e<zi[n].priority;n++);zi.splice(n,0,t),n===0&&Km(t)}};function E0(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function yp(){}function $C(t,e,n,i,o){if(o){if(typeof i=="function"){var l=i;i=function(){var g=eu(d);l.call(g)}}var d=fy(e,i,t,0,null,!1,!1,"",yp);return t._reactRootContainer=d,t[vi]=d.current,rl(t.nodeType===8?t.parentNode:t),Hs(),d}for(;o=t.lastChild;)t.removeChild(o);if(typeof i=="function"){var m=i;i=function(){var g=eu(p);m.call(g)}}var p=y0(t,0,!1,null,null,!1,!1,"",yp);return t._reactRootContainer=p,t[vi]=p.current,rl(t.nodeType===8?t.parentNode:t),Hs(function(){Nu(e,p,n,i)}),p}function Du(t,e,n,i,o){var l=n._reactRootContainer;if(l){var d=l;if(typeof o=="function"){var m=o;o=function(){var p=eu(d);m.call(p)}}Nu(e,d,t,o)}else d=$C(n,e,t,o,i);return eu(d)}Wm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Da(e.pendingLanes);n!==0&&(Uf(e,n|1),$n(e,jt()),!(Ze&6)&&(ta=jt()+500,ps()))}break;case 13:Hs(function(){var i=Ei(t,1);if(i!==null){var o=Nn();Br(i,t,1,o)}}),x0(t,1)}};zf=function(t){if(t.tag===13){var e=Ei(t,134217728);if(e!==null){var n=Nn();Br(e,t,134217728,n)}x0(t,134217728)}};Hm=function(t){if(t.tag===13){var e=is(t),n=Ei(t,e);if(n!==null){var i=Nn();Br(n,t,e,i)}x0(t,e)}};$m=function(){return st};Gm=function(t,e){var n=st;try{return st=t,e()}finally{st=n}};gh=function(t,e,n){switch(e){case"input":if(lh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var o=Au(i);if(!o)throw Error(se(90));bm(i),lh(i,o)}}}break;case"textarea":_m(t,n);break;case"select":e=n.value,e!=null&&No(t,!!n.multiple,e,!1)}};km=p0;Pm=Hs;var GC={usingClientEntryPoint:!1,Events:[Tl,Eo,Au,Om,Nm,p0]},Ta={findFiberByHostInstance:Is,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KC={bundleType:Ta.bundleType,version:Ta.version,rendererPackageName:Ta.rendererPackageName,rendererConfig:Ta.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_i.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lm(t),t===null?null:t.stateNode},findFiberByHostInstance:Ta.findFiberByHostInstance||HC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var sc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sc.isDisabled&&sc.supportsFiber)try{vu=sc.inject(KC),ti=sc}catch{}}or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GC;or.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!E0(e))throw Error(se(200));return WC(t,e,null,n)};or.createRoot=function(t,e){if(!E0(t))throw Error(se(299));var n=!1,i="",o=py;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=y0(t,1,!1,null,null,n,!1,i,o),t[vi]=e.current,rl(t.nodeType===8?t.parentNode:t),new v0(e)};or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(se(188)):(t=Object.keys(t).join(","),Error(se(268,t)));return t=Lm(e),t=t===null?null:t.stateNode,t};or.flushSync=function(t){return Hs(t)};or.hydrate=function(t,e,n){if(!Pu(e))throw Error(se(200));return Du(null,t,e,!0,n)};or.hydrateRoot=function(t,e,n){if(!E0(t))throw Error(se(405));var i=n!=null&&n.hydratedSources||null,o=!1,l="",d=py;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(d=n.onRecoverableError)),e=fy(e,null,t,1,n??null,o,!1,l,d),t[vi]=e.current,rl(t),i)for(t=0;t<i.length;t++)n=i[t],o=n._getVersion,o=o(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,o]:e.mutableSourceEagerHydrationData.push(n,o);return new ku(e)};or.render=function(t,e,n){if(!Pu(e))throw Error(se(200));return Du(null,t,e,!1,n)};or.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(se(40));return t._reactRootContainer?(Hs(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1};or.unstable_batchedUpdates=p0;or.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Pu(n))throw Error(se(200));if(t==null||t._reactInternals===void 0)throw Error(se(38));return Du(t,e,n,!1,i)};or.version="18.3.1-next-f1338f8080-20240426";function gy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gy)}catch(t){console.error(t)}}gy(),gm.exports=or;var Rl=gm.exports;const my=Sf(Rl);var wy,xp=Rl;wy=xp.createRoot,xp.hydrateRoot;const XC=1,YC=1e6;let Ud=0;function qC(){return Ud=(Ud+1)%Number.MAX_SAFE_INTEGER,Ud.toString()}const zd=new Map,vp=t=>{if(zd.has(t))return;const e=setTimeout(()=>{zd.delete(t),Ga({type:"REMOVE_TOAST",toastId:t})},YC);zd.set(t,e)},QC=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,XC)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?vp(n):t.toasts.forEach(i=>{vp(i.id)}),{...t,toasts:t.toasts.map(i=>i.id===n||n===void 0?{...i,open:!1}:i)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Tc=[];let Ic={toasts:[]};function Ga(t){Ic=QC(Ic,t),Tc.forEach(e=>{e(Ic)})}function ZC({...t}){const e=qC(),n=o=>Ga({type:"UPDATE_TOAST",toast:{...o,id:e}}),i=()=>Ga({type:"DISMISS_TOAST",toastId:e});return Ga({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:o=>{o||i()}}}),{id:e,dismiss:i,update:n}}function JC(){const[t,e]=P.useState(Ic);return P.useEffect(()=>(Tc.push(e),()=>{const n=Tc.indexOf(e);n>-1&&Tc.splice(n,1)}),[t]),{...t,toast:ZC,dismiss:n=>Ga({type:"DISMISS_TOAST",toastId:n})}}function qt(t,e,{checkForDefaultPrevented:n=!0}={}){return function(o){if(t==null||t(o),n===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function Ep(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function C0(...t){return e=>{let n=!1;const i=t.map(o=>{const l=Ep(o,e);return!n&&typeof l=="function"&&(n=!0),l});if(n)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():Ep(t[o],null)}}}}function jr(...t){return P.useCallback(C0(...t),t)}function Mu(t,e=[]){let n=[];function i(l,d){const m=P.createContext(d),p=n.length;n=[...n,d];const g=v=>{var O;const{scope:E,children:C,...T}=v,A=((O=E==null?void 0:E[t])==null?void 0:O[p])||m,N=P.useMemo(()=>T,Object.values(T));return B.jsx(A.Provider,{value:N,children:C})};g.displayName=l+"Provider";function y(v,E){var A;const C=((A=E==null?void 0:E[t])==null?void 0:A[p])||m,T=P.useContext(C);if(T)return T;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[g,y]}const o=()=>{const l=n.map(d=>P.createContext(d));return function(m){const p=(m==null?void 0:m[t])||l;return P.useMemo(()=>({[`__scope${t}`]:{...m,[t]:p}}),[m,p])}};return o.scopeName=t,[i,eb(o,...e)]}function eb(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=i.reduce((m,{useScope:p,scopeName:g})=>{const v=p(l)[`__scope${g}`];return{...m,...v}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}function tu(t){const e=nb(t),n=P.forwardRef((i,o)=>{const{children:l,...d}=i,m=P.Children.toArray(l),p=m.find(ib);if(p){const g=p.props.children,y=m.map(v=>v===p?P.Children.count(g)>1?P.Children.only(null):P.isValidElement(g)?g.props.children:null:v);return B.jsx(e,{...d,ref:o,children:P.isValidElement(g)?P.cloneElement(g,void 0,y):null})}return B.jsx(e,{...d,ref:o,children:l})});return n.displayName=`${t}.Slot`,n}var tb=tu("Slot");function nb(t){const e=P.forwardRef((n,i)=>{const{children:o,...l}=n;if(P.isValidElement(o)){const d=ob(o),m=sb(l,o.props);return o.type!==P.Fragment&&(m.ref=i?C0(i,d):d),P.cloneElement(o,m)}return P.Children.count(o)>1?P.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var yy=Symbol("radix.slottable");function rb(t){const e=({children:n})=>B.jsx(B.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=yy,e}function ib(t){return P.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yy}function sb(t,e){const n={...e};for(const i in e){const o=t[i],l=e[i];/^on[A-Z]/.test(i)?o&&l?n[i]=(...m)=>{const p=l(...m);return o(...m),p}:o&&(n[i]=o):i==="style"?n[i]={...o,...l}:i==="className"&&(n[i]=[o,l].filter(Boolean).join(" "))}return{...t,...n}}function ob(t){var i,o;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function ab(t){const e=t+"CollectionProvider",[n,i]=Mu(e),[o,l]=n(e,{collectionRef:{current:null},itemMap:new Map}),d=A=>{const{scope:N,children:O}=A,S=ne.useRef(null),_=ne.useRef(new Map).current;return B.jsx(o,{scope:N,itemMap:_,collectionRef:S,children:O})};d.displayName=e;const m=t+"CollectionSlot",p=tu(m),g=ne.forwardRef((A,N)=>{const{scope:O,children:S}=A,_=l(m,O),D=jr(N,_.collectionRef);return B.jsx(p,{ref:D,children:S})});g.displayName=m;const y=t+"CollectionItemSlot",v="data-radix-collection-item",E=tu(y),C=ne.forwardRef((A,N)=>{const{scope:O,children:S,..._}=A,D=ne.useRef(null),U=jr(N,D),z=l(y,O);return ne.useEffect(()=>(z.itemMap.set(D,{ref:D,..._}),()=>void z.itemMap.delete(D))),B.jsx(E,{[v]:"",ref:U,children:S})});C.displayName=y;function T(A){const N=l(t+"CollectionConsumer",A);return ne.useCallback(()=>{const S=N.collectionRef.current;if(!S)return[];const _=Array.from(S.querySelectorAll(`[${v}]`));return Array.from(N.itemMap.values()).sort((z,F)=>_.indexOf(z.ref.current)-_.indexOf(F.ref.current))},[N.collectionRef,N.itemMap])}return[{Provider:d,Slot:g,ItemSlot:C},T,i]}var lb=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Kn=lb.reduce((t,e)=>{const n=tu(`Primitive.${e}`),i=P.forwardRef((o,l)=>{const{asChild:d,...m}=o,p=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(p,{...m,ref:l})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function xy(t,e){t&&Rl.flushSync(()=>t.dispatchEvent(e))}function ls(t){const e=P.useRef(t);return P.useEffect(()=>{e.current=t}),P.useMemo(()=>(...n)=>{var i;return(i=e.current)==null?void 0:i.call(e,...n)},[])}function cb(t,e=globalThis==null?void 0:globalThis.document){const n=ls(t);P.useEffect(()=>{const i=o=>{o.key==="Escape"&&n(o)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var ub="DismissableLayer",Xh="dismissableLayer.update",db="dismissableLayer.pointerDownOutside",hb="dismissableLayer.focusOutside",Cp,vy=P.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),b0=P.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:d,onDismiss:m,...p}=t,g=P.useContext(vy),[y,v]=P.useState(null),E=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,C]=P.useState({}),T=jr(e,F=>v(F)),A=Array.from(g.layers),[N]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),O=A.indexOf(N),S=y?A.indexOf(y):-1,_=g.layersWithOutsidePointerEventsDisabled.size>0,D=S>=O,U=pb(F=>{const K=F.target,W=[...g.branches].some(re=>re.contains(K));!D||W||(o==null||o(F),d==null||d(F),F.defaultPrevented||m==null||m())},E),z=gb(F=>{const K=F.target;[...g.branches].some(re=>re.contains(K))||(l==null||l(F),d==null||d(F),F.defaultPrevented||m==null||m())},E);return cb(F=>{S===g.layers.size-1&&(i==null||i(F),!F.defaultPrevented&&m&&(F.preventDefault(),m()))},E),P.useEffect(()=>{if(y)return n&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(Cp=E.body.style.pointerEvents,E.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(y)),g.layers.add(y),bp(),()=>{n&&g.layersWithOutsidePointerEventsDisabled.size===1&&(E.body.style.pointerEvents=Cp)}},[y,E,n,g]),P.useEffect(()=>()=>{y&&(g.layers.delete(y),g.layersWithOutsidePointerEventsDisabled.delete(y),bp())},[y,g]),P.useEffect(()=>{const F=()=>C({});return document.addEventListener(Xh,F),()=>document.removeEventListener(Xh,F)},[]),B.jsx(Kn.div,{...p,ref:T,style:{pointerEvents:_?D?"auto":"none":void 0,...t.style},onFocusCapture:qt(t.onFocusCapture,z.onFocusCapture),onBlurCapture:qt(t.onBlurCapture,z.onBlurCapture),onPointerDownCapture:qt(t.onPointerDownCapture,U.onPointerDownCapture)})});b0.displayName=ub;var fb="DismissableLayerBranch",Ey=P.forwardRef((t,e)=>{const n=P.useContext(vy),i=P.useRef(null),o=jr(e,i);return P.useEffect(()=>{const l=i.current;if(l)return n.branches.add(l),()=>{n.branches.delete(l)}},[n.branches]),B.jsx(Kn.div,{...t,ref:o})});Ey.displayName=fb;function pb(t,e=globalThis==null?void 0:globalThis.document){const n=ls(t),i=P.useRef(!1),o=P.useRef(()=>{});return P.useEffect(()=>{const l=m=>{if(m.target&&!i.current){let p=function(){Cy(db,n,g,{discrete:!0})};const g={originalEvent:m};m.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=p,e.addEventListener("click",o.current,{once:!0})):p()}else e.removeEventListener("click",o.current);i.current=!1},d=window.setTimeout(()=>{e.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(d),e.removeEventListener("pointerdown",l),e.removeEventListener("click",o.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function gb(t,e=globalThis==null?void 0:globalThis.document){const n=ls(t),i=P.useRef(!1);return P.useEffect(()=>{const o=l=>{l.target&&!i.current&&Cy(hb,n,{originalEvent:l},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function bp(){const t=new CustomEvent(Xh);document.dispatchEvent(t)}function Cy(t,e,n,{discrete:i}){const o=n.originalEvent.target,l=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),i?xy(o,l):o.dispatchEvent(l)}var mb=b0,wb=Ey,cs=globalThis!=null&&globalThis.document?P.useLayoutEffect:()=>{},yb="Portal",by=P.forwardRef((t,e)=>{var m;const{container:n,...i}=t,[o,l]=P.useState(!1);cs(()=>l(!0),[]);const d=n||o&&((m=globalThis==null?void 0:globalThis.document)==null?void 0:m.body);return d?my.createPortal(B.jsx(Kn.div,{...i,ref:e}),d):null});by.displayName=yb;function xb(t,e){return P.useReducer((n,i)=>e[n][i]??n,t)}var A0=t=>{const{present:e,children:n}=t,i=vb(e),o=typeof n=="function"?n({present:i.isPresent}):P.Children.only(n),l=jr(i.ref,Eb(o));return typeof n=="function"||i.isPresent?P.cloneElement(o,{ref:l}):null};A0.displayName="Presence";function vb(t){const[e,n]=P.useState(),i=P.useRef(null),o=P.useRef(t),l=P.useRef("none"),d=t?"mounted":"unmounted",[m,p]=xb(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return P.useEffect(()=>{const g=oc(i.current);l.current=m==="mounted"?g:"none"},[m]),cs(()=>{const g=i.current,y=o.current;if(y!==t){const E=l.current,C=oc(g);t?p("MOUNT"):C==="none"||(g==null?void 0:g.display)==="none"?p("UNMOUNT"):p(y&&E!==C?"ANIMATION_OUT":"UNMOUNT"),o.current=t}},[t,p]),cs(()=>{if(e){let g;const y=e.ownerDocument.defaultView??window,v=C=>{const A=oc(i.current).includes(C.animationName);if(C.target===e&&A&&(p("ANIMATION_END"),!o.current)){const N=e.style.animationFillMode;e.style.animationFillMode="forwards",g=y.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=N)})}},E=C=>{C.target===e&&(l.current=oc(i.current))};return e.addEventListener("animationstart",E),e.addEventListener("animationcancel",v),e.addEventListener("animationend",v),()=>{y.clearTimeout(g),e.removeEventListener("animationstart",E),e.removeEventListener("animationcancel",v),e.removeEventListener("animationend",v)}}else p("ANIMATION_END")},[e,p]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:P.useCallback(g=>{i.current=g?getComputedStyle(g):null,n(g)},[])}}function oc(t){return(t==null?void 0:t.animationName)||"none"}function Eb(t){var i,o;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var Cb=Nf[" useInsertionEffect ".trim().toString()]||cs;function bb({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[o,l,d]=Ab({defaultProp:e,onChange:n}),m=t!==void 0,p=m?t:o;{const y=P.useRef(t!==void 0);P.useEffect(()=>{const v=y.current;v!==m&&console.warn(`${i} is changing from ${v?"controlled":"uncontrolled"} to ${m?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),y.current=m},[m,i])}const g=P.useCallback(y=>{var v;if(m){const E=_b(y)?y(t):y;E!==t&&((v=d.current)==null||v.call(d,E))}else l(y)},[m,t,l,d]);return[p,g]}function Ab({defaultProp:t,onChange:e}){const[n,i]=P.useState(t),o=P.useRef(n),l=P.useRef(e);return Cb(()=>{l.current=e},[e]),P.useEffect(()=>{var d;o.current!==n&&((d=l.current)==null||d.call(l,n),o.current=n)},[n,o]),[n,i,l]}function _b(t){return typeof t=="function"}var Sb=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Tb="VisuallyHidden",Lu=P.forwardRef((t,e)=>B.jsx(Kn.span,{...t,ref:e,style:{...Sb,...t.style}}));Lu.displayName=Tb;var Ib=Lu,_0="ToastProvider",[S0,Rb,Ob]=ab("Toast"),[Ay,_R]=Mu("Toast",[Ob]),[Nb,Bu]=Ay(_0),_y=t=>{const{__scopeToast:e,label:n="Notification",duration:i=5e3,swipeDirection:o="right",swipeThreshold:l=50,children:d}=t,[m,p]=P.useState(null),[g,y]=P.useState(0),v=P.useRef(!1),E=P.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${_0}\`. Expected non-empty \`string\`.`),B.jsx(S0.Provider,{scope:e,children:B.jsx(Nb,{scope:e,label:n,duration:i,swipeDirection:o,swipeThreshold:l,toastCount:g,viewport:m,onViewportChange:p,onToastAdd:P.useCallback(()=>y(C=>C+1),[]),onToastRemove:P.useCallback(()=>y(C=>C-1),[]),isFocusedToastEscapeKeyDownRef:v,isClosePausedRef:E,children:d})})};_y.displayName=_0;var Sy="ToastViewport",kb=["F8"],Yh="toast.viewportPause",qh="toast.viewportResume",Ty=P.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:i=kb,label:o="Notifications ({hotkey})",...l}=t,d=Bu(Sy,n),m=Rb(n),p=P.useRef(null),g=P.useRef(null),y=P.useRef(null),v=P.useRef(null),E=jr(e,v,d.onViewportChange),C=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),T=d.toastCount>0;P.useEffect(()=>{const N=O=>{var _;i.length!==0&&i.every(D=>O[D]||O.code===D)&&((_=v.current)==null||_.focus())};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[i]),P.useEffect(()=>{const N=p.current,O=v.current;if(T&&N&&O){const S=()=>{if(!d.isClosePausedRef.current){const z=new CustomEvent(Yh);O.dispatchEvent(z),d.isClosePausedRef.current=!0}},_=()=>{if(d.isClosePausedRef.current){const z=new CustomEvent(qh);O.dispatchEvent(z),d.isClosePausedRef.current=!1}},D=z=>{!N.contains(z.relatedTarget)&&_()},U=()=>{N.contains(document.activeElement)||_()};return N.addEventListener("focusin",S),N.addEventListener("focusout",D),N.addEventListener("pointermove",S),N.addEventListener("pointerleave",U),window.addEventListener("blur",S),window.addEventListener("focus",_),()=>{N.removeEventListener("focusin",S),N.removeEventListener("focusout",D),N.removeEventListener("pointermove",S),N.removeEventListener("pointerleave",U),window.removeEventListener("blur",S),window.removeEventListener("focus",_)}}},[T,d.isClosePausedRef]);const A=P.useCallback(({tabbingDirection:N})=>{const S=m().map(_=>{const D=_.ref.current,U=[D,...$b(D)];return N==="forwards"?U:U.reverse()});return(N==="forwards"?S.reverse():S).flat()},[m]);return P.useEffect(()=>{const N=v.current;if(N){const O=S=>{var U,z,F;const _=S.altKey||S.ctrlKey||S.metaKey;if(S.key==="Tab"&&!_){const K=document.activeElement,W=S.shiftKey;if(S.target===N&&W){(U=g.current)==null||U.focus();return}const Q=A({tabbingDirection:W?"backwards":"forwards"}),ce=Q.findIndex(te=>te===K);Vd(Q.slice(ce+1))?S.preventDefault():W?(z=g.current)==null||z.focus():(F=y.current)==null||F.focus()}};return N.addEventListener("keydown",O),()=>N.removeEventListener("keydown",O)}},[m,A]),B.jsxs(wb,{ref:p,role:"region","aria-label":o.replace("{hotkey}",C),tabIndex:-1,style:{pointerEvents:T?void 0:"none"},children:[T&&B.jsx(Qh,{ref:g,onFocusFromOutsideViewport:()=>{const N=A({tabbingDirection:"forwards"});Vd(N)}}),B.jsx(S0.Slot,{scope:n,children:B.jsx(Kn.ol,{tabIndex:-1,...l,ref:E})}),T&&B.jsx(Qh,{ref:y,onFocusFromOutsideViewport:()=>{const N=A({tabbingDirection:"backwards"});Vd(N)}})]})});Ty.displayName=Sy;var Iy="ToastFocusProxy",Qh=P.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:i,...o}=t,l=Bu(Iy,n);return B.jsx(Lu,{"aria-hidden":!0,tabIndex:0,...o,ref:e,style:{position:"fixed"},onFocus:d=>{var g;const m=d.relatedTarget;!((g=l.viewport)!=null&&g.contains(m))&&i()}})});Qh.displayName=Iy;var Ol="Toast",Pb="toast.swipeStart",Db="toast.swipeMove",Mb="toast.swipeCancel",Lb="toast.swipeEnd",Ry=P.forwardRef((t,e)=>{const{forceMount:n,open:i,defaultOpen:o,onOpenChange:l,...d}=t,[m,p]=bb({prop:i,defaultProp:o??!0,onChange:l,caller:Ol});return B.jsx(A0,{present:n||m,children:B.jsx(jb,{open:m,...d,ref:e,onClose:()=>p(!1),onPause:ls(t.onPause),onResume:ls(t.onResume),onSwipeStart:qt(t.onSwipeStart,g=>{g.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:qt(t.onSwipeMove,g=>{const{x:y,y:v}=g.detail.delta;g.currentTarget.setAttribute("data-swipe","move"),g.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${y}px`),g.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${v}px`)}),onSwipeCancel:qt(t.onSwipeCancel,g=>{g.currentTarget.setAttribute("data-swipe","cancel"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),g.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),g.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:qt(t.onSwipeEnd,g=>{const{x:y,y:v}=g.detail.delta;g.currentTarget.setAttribute("data-swipe","end"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),g.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),g.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${y}px`),g.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${v}px`),p(!1)})})})});Ry.displayName=Ol;var[Bb,Fb]=Ay(Ol,{onClose(){}}),jb=P.forwardRef((t,e)=>{const{__scopeToast:n,type:i="foreground",duration:o,open:l,onClose:d,onEscapeKeyDown:m,onPause:p,onResume:g,onSwipeStart:y,onSwipeMove:v,onSwipeCancel:E,onSwipeEnd:C,...T}=t,A=Bu(Ol,n),[N,O]=P.useState(null),S=jr(e,te=>O(te)),_=P.useRef(null),D=P.useRef(null),U=o||A.duration,z=P.useRef(0),F=P.useRef(U),K=P.useRef(0),{onToastAdd:W,onToastRemove:re}=A,he=ls(()=>{var H;(N==null?void 0:N.contains(document.activeElement))&&((H=A.viewport)==null||H.focus()),d()}),Q=P.useCallback(te=>{!te||te===1/0||(window.clearTimeout(K.current),z.current=new Date().getTime(),K.current=window.setTimeout(he,te))},[he]);P.useEffect(()=>{const te=A.viewport;if(te){const H=()=>{Q(F.current),g==null||g()},pe=()=>{const oe=new Date().getTime()-z.current;F.current=F.current-oe,window.clearTimeout(K.current),p==null||p()};return te.addEventListener(Yh,pe),te.addEventListener(qh,H),()=>{te.removeEventListener(Yh,pe),te.removeEventListener(qh,H)}}},[A.viewport,U,p,g,Q]),P.useEffect(()=>{l&&!A.isClosePausedRef.current&&Q(U)},[l,U,A.isClosePausedRef,Q]),P.useEffect(()=>(W(),()=>re()),[W,re]);const ce=P.useMemo(()=>N?Ly(N):null,[N]);return A.viewport?B.jsxs(B.Fragment,{children:[ce&&B.jsx(Ub,{__scopeToast:n,role:"status","aria-live":i==="foreground"?"assertive":"polite","aria-atomic":!0,children:ce}),B.jsx(Bb,{scope:n,onClose:he,children:Rl.createPortal(B.jsx(S0.ItemSlot,{scope:n,children:B.jsx(mb,{asChild:!0,onEscapeKeyDown:qt(m,()=>{A.isFocusedToastEscapeKeyDownRef.current||he(),A.isFocusedToastEscapeKeyDownRef.current=!1}),children:B.jsx(Kn.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":l?"open":"closed","data-swipe-direction":A.swipeDirection,...T,ref:S,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:qt(t.onKeyDown,te=>{te.key==="Escape"&&(m==null||m(te.nativeEvent),te.nativeEvent.defaultPrevented||(A.isFocusedToastEscapeKeyDownRef.current=!0,he()))}),onPointerDown:qt(t.onPointerDown,te=>{te.button===0&&(_.current={x:te.clientX,y:te.clientY})}),onPointerMove:qt(t.onPointerMove,te=>{if(!_.current)return;const H=te.clientX-_.current.x,pe=te.clientY-_.current.y,oe=!!D.current,q=["left","right"].includes(A.swipeDirection),Z=["left","up"].includes(A.swipeDirection)?Math.min:Math.max,de=q?Z(0,H):0,Ae=q?0:Z(0,pe),fe=te.pointerType==="touch"?10:2,Te={x:de,y:Ae},Ee={originalEvent:te,delta:Te};oe?(D.current=Te,ac(Db,v,Ee,{discrete:!1})):Ap(Te,A.swipeDirection,fe)?(D.current=Te,ac(Pb,y,Ee,{discrete:!1}),te.target.setPointerCapture(te.pointerId)):(Math.abs(H)>fe||Math.abs(pe)>fe)&&(_.current=null)}),onPointerUp:qt(t.onPointerUp,te=>{const H=D.current,pe=te.target;if(pe.hasPointerCapture(te.pointerId)&&pe.releasePointerCapture(te.pointerId),D.current=null,_.current=null,H){const oe=te.currentTarget,q={originalEvent:te,delta:H};Ap(H,A.swipeDirection,A.swipeThreshold)?ac(Lb,C,q,{discrete:!0}):ac(Mb,E,q,{discrete:!0}),oe.addEventListener("click",Z=>Z.preventDefault(),{once:!0})}})})})}),A.viewport)})]}):null}),Ub=t=>{const{__scopeToast:e,children:n,...i}=t,o=Bu(Ol,e),[l,d]=P.useState(!1),[m,p]=P.useState(!1);return Wb(()=>d(!0)),P.useEffect(()=>{const g=window.setTimeout(()=>p(!0),1e3);return()=>window.clearTimeout(g)},[]),m?null:B.jsx(by,{asChild:!0,children:B.jsx(Lu,{...i,children:l&&B.jsxs(B.Fragment,{children:[o.label," ",n]})})})},zb="ToastTitle",Oy=P.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return B.jsx(Kn.div,{...i,ref:e})});Oy.displayName=zb;var Vb="ToastDescription",Ny=P.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t;return B.jsx(Kn.div,{...i,ref:e})});Ny.displayName=Vb;var ky="ToastAction",Py=P.forwardRef((t,e)=>{const{altText:n,...i}=t;return n.trim()?B.jsx(My,{altText:n,asChild:!0,children:B.jsx(T0,{...i,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ky}\`. Expected non-empty \`string\`.`),null)});Py.displayName=ky;var Dy="ToastClose",T0=P.forwardRef((t,e)=>{const{__scopeToast:n,...i}=t,o=Fb(Dy,n);return B.jsx(My,{asChild:!0,children:B.jsx(Kn.button,{type:"button",...i,ref:e,onClick:qt(t.onClick,o.onClose)})})});T0.displayName=Dy;var My=P.forwardRef((t,e)=>{const{__scopeToast:n,altText:i,...o}=t;return B.jsx(Kn.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":i||void 0,...o,ref:e})});function Ly(t){const e=[];return Array.from(t.childNodes).forEach(i=>{if(i.nodeType===i.TEXT_NODE&&i.textContent&&e.push(i.textContent),Hb(i)){const o=i.ariaHidden||i.hidden||i.style.display==="none",l=i.dataset.radixToastAnnounceExclude==="";if(!o)if(l){const d=i.dataset.radixToastAnnounceAlt;d&&e.push(d)}else e.push(...Ly(i))}}),e}function ac(t,e,n,{discrete:i}){const o=n.originalEvent.currentTarget,l=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),i?xy(o,l):o.dispatchEvent(l)}var Ap=(t,e,n=0)=>{const i=Math.abs(t.x),o=Math.abs(t.y),l=i>o;return e==="left"||e==="right"?l&&i>n:!l&&o>n};function Wb(t=()=>{}){const e=ls(t);cs(()=>{let n=0,i=0;return n=window.requestAnimationFrame(()=>i=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(i)}},[e])}function Hb(t){return t.nodeType===t.ELEMENT_NODE}function $b(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Vd(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Gb=_y,By=Ty,Fy=Ry,jy=Oy,Uy=Ny,zy=Py,Vy=T0;function Wy(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=Wy(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function Hy(){for(var t,e,n=0,i="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=Wy(t))&&(i&&(i+=" "),i+=e);return i}const _p=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Sp=Hy,$y=(t,e)=>n=>{var i;if((e==null?void 0:e.variants)==null)return Sp(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:o,defaultVariants:l}=e,d=Object.keys(o).map(g=>{const y=n==null?void 0:n[g],v=l==null?void 0:l[g];if(y===null)return null;const E=_p(y)||_p(v);return o[g][E]}),m=n&&Object.entries(n).reduce((g,y)=>{let[v,E]=y;return E===void 0||(g[v]=E),g},{}),p=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((g,y)=>{let{class:v,className:E,...C}=y;return Object.entries(C).every(T=>{let[A,N]=T;return Array.isArray(N)?N.includes({...l,...m}[A]):{...l,...m}[A]===N})?[...g,v,E]:g},[]);return Sp(t,d,p,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kb=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gy=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Xb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yb=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:d,...m},p)=>P.createElement("svg",{ref:p,...Xb,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:Gy("lucide",o),...m},[...d.map(([g,y])=>P.createElement(g,y)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=(t,e)=>{const n=P.forwardRef(({className:i,...o},l)=>P.createElement(Yb,{ref:l,iconNode:e,className:Gy(`lucide-${Kb(t)}`,i),...o}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=Zt("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qb=Zt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zb=Zt("CircleArrowDown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jb=Zt("CircleArrowUp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ky=Zt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=Zt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=Zt("Dot",[["circle",{cx:"12.1",cy:"12.1",r:"1",key:"18d7e5"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=Zt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xy=Zt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=Zt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rc=Zt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=Zt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=Zt("ScanLine",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M7 12h10",key:"b7w52i"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=Zt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tp=Zt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=Zt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=Zt("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=Zt("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I0=Zt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),R0="-",u3=t=>{const e=h3(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:d=>{const m=d.split(R0);return m[0]===""&&m.length!==1&&m.shift(),Yy(m,e)||d3(d)},getConflictingClassGroupIds:(d,m)=>{const p=n[d]||[];return m&&i[d]?[...p,...i[d]]:p}}},Yy=(t,e)=>{var d;if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),o=i?Yy(t.slice(1),i):void 0;if(o)return o;if(e.validators.length===0)return;const l=t.join(R0);return(d=e.validators.find(({validator:m})=>m(l)))==null?void 0:d.classGroupId},Ip=/^\[(.+)\]$/,d3=t=>{if(Ip.test(t)){const e=Ip.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},h3=t=>{const{theme:e,prefix:n}=t,i={nextPart:new Map,validators:[]};return p3(Object.entries(t.classGroups),n).forEach(([l,d])=>{Zh(d,i,l,e)}),i},Zh=(t,e,n,i)=>{t.forEach(o=>{if(typeof o=="string"){const l=o===""?e:Rp(e,o);l.classGroupId=n;return}if(typeof o=="function"){if(f3(o)){Zh(o(i),e,n,i);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([l,d])=>{Zh(d,Rp(e,l),n,i)})})},Rp=(t,e)=>{let n=t;return e.split(R0).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},f3=t=>t.isThemeGetter,p3=(t,e)=>e?t.map(([n,i])=>{const o=i.map(l=>typeof l=="string"?e+l:typeof l=="object"?Object.fromEntries(Object.entries(l).map(([d,m])=>[e+d,m])):l);return[n,o]}):t,g3=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const o=(l,d)=>{n.set(l,d),e++,e>t&&(e=0,i=n,n=new Map)};return{get(l){let d=n.get(l);if(d!==void 0)return d;if((d=i.get(l))!==void 0)return o(l,d),d},set(l,d){n.has(l)?n.set(l,d):o(l,d)}}},qy="!",m3=t=>{const{separator:e,experimentalParseClassName:n}=t,i=e.length===1,o=e[0],l=e.length,d=m=>{const p=[];let g=0,y=0,v;for(let N=0;N<m.length;N++){let O=m[N];if(g===0){if(O===o&&(i||m.slice(N,N+l)===e)){p.push(m.slice(y,N)),y=N+l;continue}if(O==="/"){v=N;continue}}O==="["?g++:O==="]"&&g--}const E=p.length===0?m:m.substring(y),C=E.startsWith(qy),T=C?E.substring(1):E,A=v&&v>y?v-y:void 0;return{modifiers:p,hasImportantModifier:C,baseClassName:T,maybePostfixModifierPosition:A}};return n?m=>n({className:m,parseClassName:d}):d},w3=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(i=>{i[0]==="["?(e.push(...n.sort(),i),n=[]):n.push(i)}),e.push(...n.sort()),e},y3=t=>({cache:g3(t.cacheSize),parseClassName:m3(t),...u3(t)}),x3=/\s+/,v3=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:o}=e,l=[],d=t.trim().split(x3);let m="";for(let p=d.length-1;p>=0;p-=1){const g=d[p],{modifiers:y,hasImportantModifier:v,baseClassName:E,maybePostfixModifierPosition:C}=n(g);let T=!!C,A=i(T?E.substring(0,C):E);if(!A){if(!T){m=g+(m.length>0?" "+m:m);continue}if(A=i(E),!A){m=g+(m.length>0?" "+m:m);continue}T=!1}const N=w3(y).join(":"),O=v?N+qy:N,S=O+A;if(l.includes(S))continue;l.push(S);const _=o(A,T);for(let D=0;D<_.length;++D){const U=_[D];l.push(O+U)}m=g+(m.length>0?" "+m:m)}return m};function E3(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=Qy(e))&&(i&&(i+=" "),i+=n);return i}const Qy=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=Qy(t[i]))&&(n&&(n+=" "),n+=e);return n};function C3(t,...e){let n,i,o,l=d;function d(p){const g=e.reduce((y,v)=>v(y),t());return n=y3(g),i=n.cache.get,o=n.cache.set,l=m,m(p)}function m(p){const g=i(p);if(g)return g;const y=v3(p,n);return o(p,y),y}return function(){return l(E3.apply(null,arguments))}}const mt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},Zy=/^\[(?:([a-z-]+):)?(.+)\]$/i,b3=/^\d+\/\d+$/,A3=new Set(["px","full","screen"]),_3=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,S3=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,T3=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,I3=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,R3=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,li=t=>Bo(t)||A3.has(t)||b3.test(t),Mi=t=>aa(t,"length",B3),Bo=t=>!!t&&!Number.isNaN(Number(t)),Wd=t=>aa(t,"number",Bo),Ia=t=>!!t&&Number.isInteger(Number(t)),O3=t=>t.endsWith("%")&&Bo(t.slice(0,-1)),je=t=>Zy.test(t),Li=t=>_3.test(t),N3=new Set(["length","size","percentage"]),k3=t=>aa(t,N3,Jy),P3=t=>aa(t,"position",Jy),D3=new Set(["image","url"]),M3=t=>aa(t,D3,j3),L3=t=>aa(t,"",F3),Ra=()=>!0,aa=(t,e,n)=>{const i=Zy.exec(t);return i?i[1]?typeof e=="string"?i[1]===e:e.has(i[1]):n(i[2]):!1},B3=t=>S3.test(t)&&!T3.test(t),Jy=()=>!1,F3=t=>I3.test(t),j3=t=>R3.test(t),U3=()=>{const t=mt("colors"),e=mt("spacing"),n=mt("blur"),i=mt("brightness"),o=mt("borderColor"),l=mt("borderRadius"),d=mt("borderSpacing"),m=mt("borderWidth"),p=mt("contrast"),g=mt("grayscale"),y=mt("hueRotate"),v=mt("invert"),E=mt("gap"),C=mt("gradientColorStops"),T=mt("gradientColorStopPositions"),A=mt("inset"),N=mt("margin"),O=mt("opacity"),S=mt("padding"),_=mt("saturate"),D=mt("scale"),U=mt("sepia"),z=mt("skew"),F=mt("space"),K=mt("translate"),W=()=>["auto","contain","none"],re=()=>["auto","hidden","clip","visible","scroll"],he=()=>["auto",je,e],Q=()=>[je,e],ce=()=>["",li,Mi],te=()=>["auto",Bo,je],H=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],pe=()=>["solid","dashed","dotted","double","none"],oe=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],q=()=>["start","end","center","between","around","evenly","stretch"],Z=()=>["","0",je],de=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ae=()=>[Bo,je];return{cacheSize:500,separator:":",theme:{colors:[Ra],spacing:[li,Mi],blur:["none","",Li,je],brightness:Ae(),borderColor:[t],borderRadius:["none","","full",Li,je],borderSpacing:Q(),borderWidth:ce(),contrast:Ae(),grayscale:Z(),hueRotate:Ae(),invert:Z(),gap:Q(),gradientColorStops:[t],gradientColorStopPositions:[O3,Mi],inset:he(),margin:he(),opacity:Ae(),padding:Q(),saturate:Ae(),scale:Ae(),sepia:Z(),skew:Ae(),space:Q(),translate:Q()},classGroups:{aspect:[{aspect:["auto","square","video",je]}],container:["container"],columns:[{columns:[Li]}],"break-after":[{"break-after":de()}],"break-before":[{"break-before":de()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...H(),je]}],overflow:[{overflow:re()}],"overflow-x":[{"overflow-x":re()}],"overflow-y":[{"overflow-y":re()}],overscroll:[{overscroll:W()}],"overscroll-x":[{"overscroll-x":W()}],"overscroll-y":[{"overscroll-y":W()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[A]}],"inset-x":[{"inset-x":[A]}],"inset-y":[{"inset-y":[A]}],start:[{start:[A]}],end:[{end:[A]}],top:[{top:[A]}],right:[{right:[A]}],bottom:[{bottom:[A]}],left:[{left:[A]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Ia,je]}],basis:[{basis:he()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",je]}],grow:[{grow:Z()}],shrink:[{shrink:Z()}],order:[{order:["first","last","none",Ia,je]}],"grid-cols":[{"grid-cols":[Ra]}],"col-start-end":[{col:["auto",{span:["full",Ia,je]},je]}],"col-start":[{"col-start":te()}],"col-end":[{"col-end":te()}],"grid-rows":[{"grid-rows":[Ra]}],"row-start-end":[{row:["auto",{span:[Ia,je]},je]}],"row-start":[{"row-start":te()}],"row-end":[{"row-end":te()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",je]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",je]}],gap:[{gap:[E]}],"gap-x":[{"gap-x":[E]}],"gap-y":[{"gap-y":[E]}],"justify-content":[{justify:["normal",...q()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...q(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...q(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[N]}],mx:[{mx:[N]}],my:[{my:[N]}],ms:[{ms:[N]}],me:[{me:[N]}],mt:[{mt:[N]}],mr:[{mr:[N]}],mb:[{mb:[N]}],ml:[{ml:[N]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",je,e]}],"min-w":[{"min-w":[je,e,"min","max","fit"]}],"max-w":[{"max-w":[je,e,"none","full","min","max","fit","prose",{screen:[Li]},Li]}],h:[{h:[je,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[je,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[je,e,"auto","min","max","fit"]}],"font-size":[{text:["base",Li,Mi]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Wd]}],"font-family":[{font:[Ra]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",je]}],"line-clamp":[{"line-clamp":["none",Bo,Wd]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",li,je]}],"list-image":[{"list-image":["none",je]}],"list-style-type":[{list:["none","disc","decimal",je]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[O]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[O]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...pe(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",li,Mi]}],"underline-offset":[{"underline-offset":["auto",li,je]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:Q()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",je]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",je]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[O]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...H(),P3]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",k3]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},M3]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[T]}],"gradient-via-pos":[{via:[T]}],"gradient-to-pos":[{to:[T]}],"gradient-from":[{from:[C]}],"gradient-via":[{via:[C]}],"gradient-to":[{to:[C]}],rounded:[{rounded:[l]}],"rounded-s":[{"rounded-s":[l]}],"rounded-e":[{"rounded-e":[l]}],"rounded-t":[{"rounded-t":[l]}],"rounded-r":[{"rounded-r":[l]}],"rounded-b":[{"rounded-b":[l]}],"rounded-l":[{"rounded-l":[l]}],"rounded-ss":[{"rounded-ss":[l]}],"rounded-se":[{"rounded-se":[l]}],"rounded-ee":[{"rounded-ee":[l]}],"rounded-es":[{"rounded-es":[l]}],"rounded-tl":[{"rounded-tl":[l]}],"rounded-tr":[{"rounded-tr":[l]}],"rounded-br":[{"rounded-br":[l]}],"rounded-bl":[{"rounded-bl":[l]}],"border-w":[{border:[m]}],"border-w-x":[{"border-x":[m]}],"border-w-y":[{"border-y":[m]}],"border-w-s":[{"border-s":[m]}],"border-w-e":[{"border-e":[m]}],"border-w-t":[{"border-t":[m]}],"border-w-r":[{"border-r":[m]}],"border-w-b":[{"border-b":[m]}],"border-w-l":[{"border-l":[m]}],"border-opacity":[{"border-opacity":[O]}],"border-style":[{border:[...pe(),"hidden"]}],"divide-x":[{"divide-x":[m]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[m]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[O]}],"divide-style":[{divide:pe()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...pe()]}],"outline-offset":[{"outline-offset":[li,je]}],"outline-w":[{outline:[li,Mi]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ce()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[O]}],"ring-offset-w":[{"ring-offset":[li,Mi]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",Li,L3]}],"shadow-color":[{shadow:[Ra]}],opacity:[{opacity:[O]}],"mix-blend":[{"mix-blend":[...oe(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":oe()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[i]}],contrast:[{contrast:[p]}],"drop-shadow":[{"drop-shadow":["","none",Li,je]}],grayscale:[{grayscale:[g]}],"hue-rotate":[{"hue-rotate":[y]}],invert:[{invert:[v]}],saturate:[{saturate:[_]}],sepia:[{sepia:[U]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[i]}],"backdrop-contrast":[{"backdrop-contrast":[p]}],"backdrop-grayscale":[{"backdrop-grayscale":[g]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[y]}],"backdrop-invert":[{"backdrop-invert":[v]}],"backdrop-opacity":[{"backdrop-opacity":[O]}],"backdrop-saturate":[{"backdrop-saturate":[_]}],"backdrop-sepia":[{"backdrop-sepia":[U]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[d]}],"border-spacing-x":[{"border-spacing-x":[d]}],"border-spacing-y":[{"border-spacing-y":[d]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",je]}],duration:[{duration:Ae()}],ease:[{ease:["linear","in","out","in-out",je]}],delay:[{delay:Ae()}],animate:[{animate:["none","spin","ping","pulse","bounce",je]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[D]}],"scale-x":[{"scale-x":[D]}],"scale-y":[{"scale-y":[D]}],rotate:[{rotate:[Ia,je]}],"translate-x":[{"translate-x":[K]}],"translate-y":[{"translate-y":[K]}],"skew-x":[{"skew-x":[z]}],"skew-y":[{"skew-y":[z]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",je]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",je]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":Q()}],"scroll-mx":[{"scroll-mx":Q()}],"scroll-my":[{"scroll-my":Q()}],"scroll-ms":[{"scroll-ms":Q()}],"scroll-me":[{"scroll-me":Q()}],"scroll-mt":[{"scroll-mt":Q()}],"scroll-mr":[{"scroll-mr":Q()}],"scroll-mb":[{"scroll-mb":Q()}],"scroll-ml":[{"scroll-ml":Q()}],"scroll-p":[{"scroll-p":Q()}],"scroll-px":[{"scroll-px":Q()}],"scroll-py":[{"scroll-py":Q()}],"scroll-ps":[{"scroll-ps":Q()}],"scroll-pe":[{"scroll-pe":Q()}],"scroll-pt":[{"scroll-pt":Q()}],"scroll-pr":[{"scroll-pr":Q()}],"scroll-pb":[{"scroll-pb":Q()}],"scroll-pl":[{"scroll-pl":Q()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",je]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[li,Mi,Wd]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},z3=C3(U3);function _n(...t){return z3(Hy(t))}const V3=Gb,e2=P.forwardRef(({className:t,...e},n)=>B.jsx(By,{ref:n,className:_n("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));e2.displayName=By.displayName;const W3=$y("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),t2=P.forwardRef(({className:t,variant:e,...n},i)=>B.jsx(Fy,{ref:i,className:_n(W3({variant:e}),t),...n}));t2.displayName=Fy.displayName;const H3=P.forwardRef(({className:t,...e},n)=>B.jsx(zy,{ref:n,className:_n("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors group-[.destructive]:border-muted/40 hover:bg-secondary group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 group-[.destructive]:focus:ring-destructive disabled:pointer-events-none disabled:opacity-50",t),...e}));H3.displayName=zy.displayName;const n2=P.forwardRef(({className:t,...e},n)=>B.jsx(Vy,{ref:n,className:_n("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity group-hover:opacity-100 group-[.destructive]:text-red-300 hover:text-foreground group-[.destructive]:hover:text-red-50 focus:opacity-100 focus:outline-none focus:ring-2 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:B.jsx(I0,{className:"h-4 w-4"})}));n2.displayName=Vy.displayName;const r2=P.forwardRef(({className:t,...e},n)=>B.jsx(jy,{ref:n,className:_n("text-sm font-semibold",t),...e}));r2.displayName=jy.displayName;const i2=P.forwardRef(({className:t,...e},n)=>B.jsx(Uy,{ref:n,className:_n("text-sm opacity-90",t),...e}));i2.displayName=Uy.displayName;function $3(){const{toasts:t}=JC();return B.jsxs(V3,{children:[t.map(function({id:e,title:n,description:i,action:o,...l}){return B.jsxs(t2,{...l,children:[B.jsxs("div",{className:"grid gap-1",children:[n&&B.jsx(r2,{children:n}),i&&B.jsx(i2,{children:i})]}),o,B.jsx(n2,{})]},e)}),B.jsx(e2,{})]})}var Op=["light","dark"],G3="(prefers-color-scheme: dark)",K3=P.createContext(void 0),X3={setTheme:t=>{},themes:[]},Y3=()=>{var t;return(t=P.useContext(K3))!=null?t:X3};P.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:i,enableColorScheme:o,defaultTheme:l,value:d,attrs:m,nonce:p})=>{let g=l==="system",y=n==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${m.map(T=>`'${T}'`).join(",")})`};`:`var d=document.documentElement,n='${n}',s='setAttribute';`,v=o?Op.includes(l)&&l?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${l}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",E=(T,A=!1,N=!0)=>{let O=d?d[T]:T,S=A?T+"|| ''":`'${O}'`,_="";return o&&N&&!A&&Op.includes(T)&&(_+=`d.style.colorScheme = '${T}';`),n==="class"?A||O?_+=`c.add(${S})`:_+="null":O&&(_+=`d[s](n,${S})`),_},C=t?`!function(){${y}${E(t)}}()`:i?`!function(){try{${y}var e=localStorage.getItem('${e}');if('system'===e||(!e&&${g})){var t='${G3}',m=window.matchMedia(t);if(m.media!==t||m.matches){${E("dark")}}else{${E("light")}}}else if(e){${d?`var x=${JSON.stringify(d)};`:""}${E(d?"x[e]":"e",!0)}}${g?"":"else{"+E(l,!1,!1)+"}"}${v}}catch(e){}}()`:`!function(){try{${y}var e=localStorage.getItem('${e}');if(e){${d?`var x=${JSON.stringify(d)};`:""}${E(d?"x[e]":"e",!0)}}else{${E(l,!1,!1)};}${v}}catch(t){}}();`;return P.createElement("script",{nonce:p,dangerouslySetInnerHTML:{__html:C}})});var q3=t=>{switch(t){case"success":return J3;case"info":return tA;case"warning":return eA;case"error":return nA;default:return null}},Q3=Array(12).fill(0),Z3=({visible:t,className:e})=>ne.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ne.createElement("div",{className:"sonner-spinner"},Q3.map((n,i)=>ne.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),J3=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),eA=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tA=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),nA=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ne.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),rA=ne.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ne.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ne.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),iA=()=>{let[t,e]=ne.useState(document.hidden);return ne.useEffect(()=>{let n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t},Jh=1,sA=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let e=this.subscribers.indexOf(t);this.subscribers.splice(e,1)}),this.publish=t=>{this.subscribers.forEach(e=>e(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var e;let{message:n,...i}=t,o=typeof(t==null?void 0:t.id)=="number"||((e=t.id)==null?void 0:e.length)>0?t.id:Jh++,l=this.toasts.find(m=>m.id===o),d=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(m=>m.id===o?(this.publish({...m,...t,id:o,title:n}),{...m,...t,id:o,dismissible:d,title:n}):m):this.addToast({title:n,...i,dismissible:d,id:o}),o},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(e=>{this.subscribers.forEach(n=>n({id:e.id,dismiss:!0}))}),this.subscribers.forEach(e=>e({id:t,dismiss:!0})),t),this.message=(t,e)=>this.create({...e,message:t}),this.error=(t,e)=>this.create({...e,message:t,type:"error"}),this.success=(t,e)=>this.create({...e,type:"success",message:t}),this.info=(t,e)=>this.create({...e,type:"info",message:t}),this.warning=(t,e)=>this.create({...e,type:"warning",message:t}),this.loading=(t,e)=>this.create({...e,type:"loading",message:t}),this.promise=(t,e)=>{if(!e)return;let n;e.loading!==void 0&&(n=this.create({...e,promise:t,type:"loading",message:e.loading,description:typeof e.description!="function"?e.description:void 0}));let i=t instanceof Promise?t:t(),o=n!==void 0,l,d=i.then(async p=>{if(l=["resolve",p],ne.isValidElement(p))o=!1,this.create({id:n,type:"default",message:p});else if(aA(p)&&!p.ok){o=!1;let g=typeof e.error=="function"?await e.error(`HTTP error! status: ${p.status}`):e.error,y=typeof e.description=="function"?await e.description(`HTTP error! status: ${p.status}`):e.description;this.create({id:n,type:"error",message:g,description:y})}else if(e.success!==void 0){o=!1;let g=typeof e.success=="function"?await e.success(p):e.success,y=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"success",message:g,description:y})}}).catch(async p=>{if(l=["reject",p],e.error!==void 0){o=!1;let g=typeof e.error=="function"?await e.error(p):e.error,y=typeof e.description=="function"?await e.description(p):e.description;this.create({id:n,type:"error",message:g,description:y})}}).finally(()=>{var p;o&&(this.dismiss(n),n=void 0),(p=e.finally)==null||p.call(e)}),m=()=>new Promise((p,g)=>d.then(()=>l[0]==="reject"?g(l[1]):p(l[1])).catch(g));return typeof n!="string"&&typeof n!="number"?{unwrap:m}:Object.assign(n,{unwrap:m})},this.custom=(t,e)=>{let n=(e==null?void 0:e.id)||Jh++;return this.create({jsx:t(n),id:n,...e}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Un=new sA,oA=(t,e)=>{let n=(e==null?void 0:e.id)||Jh++;return Un.addToast({title:t,...e,id:n}),n},aA=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",lA=oA,cA=()=>Un.toasts,uA=()=>Un.getActiveToasts(),Ir=Object.assign(lA,{success:Un.success,info:Un.info,warning:Un.warning,error:Un.error,custom:Un.custom,message:Un.message,promise:Un.promise,dismiss:Un.dismiss,loading:Un.loading},{getHistory:cA,getToasts:uA});function dA(t,{insertAt:e}={}){if(typeof document>"u")return;let n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",e==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}dA(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function lc(t){return t.label!==void 0}var hA=3,fA="32px",pA="16px",Np=4e3,gA=356,mA=14,wA=20,yA=200;function _r(...t){return t.filter(Boolean).join(" ")}function xA(t){let[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}var vA=t=>{var e,n,i,o,l,d,m,p,g,y,v;let{invert:E,toast:C,unstyled:T,interacting:A,setHeights:N,visibleToasts:O,heights:S,index:_,toasts:D,expanded:U,removeToast:z,defaultRichColors:F,closeButton:K,style:W,cancelButtonStyle:re,actionButtonStyle:he,className:Q="",descriptionClassName:ce="",duration:te,position:H,gap:pe,loadingIcon:oe,expandByDefault:q,classNames:Z,icons:de,closeButtonAriaLabel:Ae="Close toast",pauseWhenPageIsHidden:fe}=t,[Te,Ee]=ne.useState(null),[nt,me]=ne.useState(null),[Ve,ot]=ne.useState(!1),[gn,mn]=ne.useState(!1),[pt,Sn]=ne.useState(!1),[Le,_e]=ne.useState(!1),[Ie,ut]=ne.useState(!1),[Ke,De]=ne.useState(0),[ve,Lt]=ne.useState(0),ge=ne.useRef(C.duration||te||Np),Wt=ne.useRef(null),Jt=ne.useRef(null),Bt=_===0,Dn=_+1<=O,Ye=C.type,on=C.dismissible!==!1,Xn=C.className||"",Ut=C.descriptionClassName||"",oi=ne.useMemo(()=>S.findIndex(Se=>Se.toastId===C.id)||0,[S,C.id]),Ti=ne.useMemo(()=>{var Se;return(Se=C.closeButton)!=null?Se:K},[C.closeButton,K]),Ys=ne.useMemo(()=>C.duration||te||Np,[C.duration,te]),Je=ne.useRef(0),le=ne.useRef(0),vt=ne.useRef(0),Xe=ne.useRef(null),[Et,gs]=H.split("-"),qs=ne.useMemo(()=>S.reduce((Se,et,Fe)=>Fe>=oi?Se:Se+et.height,0),[S,oi]),ua=iA(),qe=C.invert||E,vr=Ye==="loading";le.current=ne.useMemo(()=>oi*pe+qs,[oi,qs]),ne.useEffect(()=>{ge.current=Ys},[Ys]),ne.useEffect(()=>{ot(!0)},[]),ne.useEffect(()=>{let Se=Jt.current;if(Se){let et=Se.getBoundingClientRect().height;return Lt(et),N(Fe=>[{toastId:C.id,height:et,position:C.position},...Fe]),()=>N(Fe=>Fe.filter(en=>en.toastId!==C.id))}},[N,C.id]),ne.useLayoutEffect(()=>{if(!Ve)return;let Se=Jt.current,et=Se.style.height;Se.style.height="auto";let Fe=Se.getBoundingClientRect().height;Se.style.height=et,Lt(Fe),N(en=>en.find(wn=>wn.toastId===C.id)?en.map(wn=>wn.toastId===C.id?{...wn,height:Fe}:wn):[{toastId:C.id,height:Fe,position:C.position},...en])},[Ve,C.title,C.description,N,C.id]);let Er=ne.useCallback(()=>{mn(!0),De(le.current),N(Se=>Se.filter(et=>et.toastId!==C.id)),setTimeout(()=>{z(C)},yA)},[C,z,N,le]);ne.useEffect(()=>{if(C.promise&&Ye==="loading"||C.duration===1/0||C.type==="loading")return;let Se;return U||A||fe&&ua?(()=>{if(vt.current<Je.current){let et=new Date().getTime()-Je.current;ge.current=ge.current-et}vt.current=new Date().getTime()})():ge.current!==1/0&&(Je.current=new Date().getTime(),Se=setTimeout(()=>{var et;(et=C.onAutoClose)==null||et.call(C,C),Er()},ge.current)),()=>clearTimeout(Se)},[U,A,C,Ye,fe,ua,Er]),ne.useEffect(()=>{C.delete&&Er()},[Er,C.delete]);function Pl(){var Se,et,Fe;return de!=null&&de.loading?ne.createElement("div",{className:_r(Z==null?void 0:Z.loader,(Se=C==null?void 0:C.classNames)==null?void 0:Se.loader,"sonner-loader"),"data-visible":Ye==="loading"},de.loading):oe?ne.createElement("div",{className:_r(Z==null?void 0:Z.loader,(et=C==null?void 0:C.classNames)==null?void 0:et.loader,"sonner-loader"),"data-visible":Ye==="loading"},oe):ne.createElement(Z3,{className:_r(Z==null?void 0:Z.loader,(Fe=C==null?void 0:C.classNames)==null?void 0:Fe.loader),visible:Ye==="loading"})}return ne.createElement("li",{tabIndex:0,ref:Jt,className:_r(Q,Xn,Z==null?void 0:Z.toast,(e=C==null?void 0:C.classNames)==null?void 0:e.toast,Z==null?void 0:Z.default,Z==null?void 0:Z[Ye],(n=C==null?void 0:C.classNames)==null?void 0:n[Ye]),"data-sonner-toast":"","data-rich-colors":(i=C.richColors)!=null?i:F,"data-styled":!(C.jsx||C.unstyled||T),"data-mounted":Ve,"data-promise":!!C.promise,"data-swiped":Ie,"data-removed":gn,"data-visible":Dn,"data-y-position":Et,"data-x-position":gs,"data-index":_,"data-front":Bt,"data-swiping":pt,"data-dismissible":on,"data-type":Ye,"data-invert":qe,"data-swipe-out":Le,"data-swipe-direction":nt,"data-expanded":!!(U||q&&Ve),style:{"--index":_,"--toasts-before":_,"--z-index":D.length-_,"--offset":`${gn?Ke:le.current}px`,"--initial-height":q?"auto":`${ve}px`,...W,...C.style},onDragEnd:()=>{Sn(!1),Ee(null),Xe.current=null},onPointerDown:Se=>{vr||!on||(Wt.current=new Date,De(le.current),Se.target.setPointerCapture(Se.pointerId),Se.target.tagName!=="BUTTON"&&(Sn(!0),Xe.current={x:Se.clientX,y:Se.clientY}))},onPointerUp:()=>{var Se,et,Fe,en;if(Le||!on)return;Xe.current=null;let wn=Number(((Se=Jt.current)==null?void 0:Se.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ht=Number(((et=Jt.current)==null?void 0:et.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),ai=new Date().getTime()-((Fe=Wt.current)==null?void 0:Fe.getTime()),$t=Te==="x"?wn:Ht,lr=Math.abs($t)/ai;if(Math.abs($t)>=wA||lr>.11){De(le.current),(en=C.onDismiss)==null||en.call(C,C),me(Te==="x"?wn>0?"right":"left":Ht>0?"down":"up"),Er(),_e(!0),ut(!1);return}Sn(!1),Ee(null)},onPointerMove:Se=>{var et,Fe,en,wn;if(!Xe.current||!on||((et=window.getSelection())==null?void 0:et.toString().length)>0)return;let Ht=Se.clientY-Xe.current.y,ai=Se.clientX-Xe.current.x,$t=(Fe=t.swipeDirections)!=null?Fe:xA(H);!Te&&(Math.abs(ai)>1||Math.abs(Ht)>1)&&Ee(Math.abs(ai)>Math.abs(Ht)?"x":"y");let lr={x:0,y:0};Te==="y"?($t.includes("top")||$t.includes("bottom"))&&($t.includes("top")&&Ht<0||$t.includes("bottom")&&Ht>0)&&(lr.y=Ht):Te==="x"&&($t.includes("left")||$t.includes("right"))&&($t.includes("left")&&ai<0||$t.includes("right")&&ai>0)&&(lr.x=ai),(Math.abs(lr.x)>0||Math.abs(lr.y)>0)&&ut(!0),(en=Jt.current)==null||en.style.setProperty("--swipe-amount-x",`${lr.x}px`),(wn=Jt.current)==null||wn.style.setProperty("--swipe-amount-y",`${lr.y}px`)}},Ti&&!C.jsx?ne.createElement("button",{"aria-label":Ae,"data-disabled":vr,"data-close-button":!0,onClick:vr||!on?()=>{}:()=>{var Se;Er(),(Se=C.onDismiss)==null||Se.call(C,C)},className:_r(Z==null?void 0:Z.closeButton,(o=C==null?void 0:C.classNames)==null?void 0:o.closeButton)},(l=de==null?void 0:de.close)!=null?l:rA):null,C.jsx||P.isValidElement(C.title)?C.jsx?C.jsx:typeof C.title=="function"?C.title():C.title:ne.createElement(ne.Fragment,null,Ye||C.icon||C.promise?ne.createElement("div",{"data-icon":"",className:_r(Z==null?void 0:Z.icon,(d=C==null?void 0:C.classNames)==null?void 0:d.icon)},C.promise||C.type==="loading"&&!C.icon?C.icon||Pl():null,C.type!=="loading"?C.icon||(de==null?void 0:de[Ye])||q3(Ye):null):null,ne.createElement("div",{"data-content":"",className:_r(Z==null?void 0:Z.content,(m=C==null?void 0:C.classNames)==null?void 0:m.content)},ne.createElement("div",{"data-title":"",className:_r(Z==null?void 0:Z.title,(p=C==null?void 0:C.classNames)==null?void 0:p.title)},typeof C.title=="function"?C.title():C.title),C.description?ne.createElement("div",{"data-description":"",className:_r(ce,Ut,Z==null?void 0:Z.description,(g=C==null?void 0:C.classNames)==null?void 0:g.description)},typeof C.description=="function"?C.description():C.description):null),P.isValidElement(C.cancel)?C.cancel:C.cancel&&lc(C.cancel)?ne.createElement("button",{"data-button":!0,"data-cancel":!0,style:C.cancelButtonStyle||re,onClick:Se=>{var et,Fe;lc(C.cancel)&&on&&((Fe=(et=C.cancel).onClick)==null||Fe.call(et,Se),Er())},className:_r(Z==null?void 0:Z.cancelButton,(y=C==null?void 0:C.classNames)==null?void 0:y.cancelButton)},C.cancel.label):null,P.isValidElement(C.action)?C.action:C.action&&lc(C.action)?ne.createElement("button",{"data-button":!0,"data-action":!0,style:C.actionButtonStyle||he,onClick:Se=>{var et,Fe;lc(C.action)&&((Fe=(et=C.action).onClick)==null||Fe.call(et,Se),!Se.defaultPrevented&&Er())},className:_r(Z==null?void 0:Z.actionButton,(v=C==null?void 0:C.classNames)==null?void 0:v.actionButton)},C.action.label):null))};function kp(){if(typeof window>"u"||typeof document>"u")return"ltr";let t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function EA(t,e){let n={};return[t,e].forEach((i,o)=>{let l=o===1,d=l?"--mobile-offset":"--offset",m=l?pA:fA;function p(g){["top","right","bottom","left"].forEach(y=>{n[`${d}-${y}`]=typeof g=="number"?`${g}px`:g})}typeof i=="number"||typeof i=="string"?p(i):typeof i=="object"?["top","right","bottom","left"].forEach(g=>{i[g]===void 0?n[`${d}-${g}`]=m:n[`${d}-${g}`]=typeof i[g]=="number"?`${i[g]}px`:i[g]}):p(m)}),n}var CA=P.forwardRef(function(t,e){let{invert:n,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:d,className:m,offset:p,mobileOffset:g,theme:y="light",richColors:v,duration:E,style:C,visibleToasts:T=hA,toastOptions:A,dir:N=kp(),gap:O=mA,loadingIcon:S,icons:_,containerAriaLabel:D="Notifications",pauseWhenPageIsHidden:U}=t,[z,F]=ne.useState([]),K=ne.useMemo(()=>Array.from(new Set([i].concat(z.filter(fe=>fe.position).map(fe=>fe.position)))),[z,i]),[W,re]=ne.useState([]),[he,Q]=ne.useState(!1),[ce,te]=ne.useState(!1),[H,pe]=ne.useState(y!=="system"?y:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),oe=ne.useRef(null),q=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),Z=ne.useRef(null),de=ne.useRef(!1),Ae=ne.useCallback(fe=>{F(Te=>{var Ee;return(Ee=Te.find(nt=>nt.id===fe.id))!=null&&Ee.delete||Un.dismiss(fe.id),Te.filter(({id:nt})=>nt!==fe.id)})},[]);return ne.useEffect(()=>Un.subscribe(fe=>{if(fe.dismiss){F(Te=>Te.map(Ee=>Ee.id===fe.id?{...Ee,delete:!0}:Ee));return}setTimeout(()=>{my.flushSync(()=>{F(Te=>{let Ee=Te.findIndex(nt=>nt.id===fe.id);return Ee!==-1?[...Te.slice(0,Ee),{...Te[Ee],...fe},...Te.slice(Ee+1)]:[fe,...Te]})})})}),[]),ne.useEffect(()=>{if(y!=="system"){pe(y);return}if(y==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?pe("dark"):pe("light")),typeof window>"u")return;let fe=window.matchMedia("(prefers-color-scheme: dark)");try{fe.addEventListener("change",({matches:Te})=>{pe(Te?"dark":"light")})}catch{fe.addListener(({matches:Ee})=>{try{pe(Ee?"dark":"light")}catch(nt){console.error(nt)}})}},[y]),ne.useEffect(()=>{z.length<=1&&Q(!1)},[z]),ne.useEffect(()=>{let fe=Te=>{var Ee,nt;o.every(me=>Te[me]||Te.code===me)&&(Q(!0),(Ee=oe.current)==null||Ee.focus()),Te.code==="Escape"&&(document.activeElement===oe.current||(nt=oe.current)!=null&&nt.contains(document.activeElement))&&Q(!1)};return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[o]),ne.useEffect(()=>{if(oe.current)return()=>{Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null,de.current=!1)}},[oe.current]),ne.createElement("section",{ref:e,"aria-label":`${D} ${q}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},K.map((fe,Te)=>{var Ee;let[nt,me]=fe.split("-");return z.length?ne.createElement("ol",{key:fe,dir:N==="auto"?kp():N,tabIndex:-1,ref:oe,className:m,"data-sonner-toaster":!0,"data-theme":H,"data-y-position":nt,"data-lifted":he&&z.length>1&&!l,"data-x-position":me,style:{"--front-toast-height":`${((Ee=W[0])==null?void 0:Ee.height)||0}px`,"--width":`${gA}px`,"--gap":`${O}px`,...C,...EA(p,g)},onBlur:Ve=>{de.current&&!Ve.currentTarget.contains(Ve.relatedTarget)&&(de.current=!1,Z.current&&(Z.current.focus({preventScroll:!0}),Z.current=null))},onFocus:Ve=>{Ve.target instanceof HTMLElement&&Ve.target.dataset.dismissible==="false"||de.current||(de.current=!0,Z.current=Ve.relatedTarget)},onMouseEnter:()=>Q(!0),onMouseMove:()=>Q(!0),onMouseLeave:()=>{ce||Q(!1)},onDragEnd:()=>Q(!1),onPointerDown:Ve=>{Ve.target instanceof HTMLElement&&Ve.target.dataset.dismissible==="false"||te(!0)},onPointerUp:()=>te(!1)},z.filter(Ve=>!Ve.position&&Te===0||Ve.position===fe).map((Ve,ot)=>{var gn,mn;return ne.createElement(vA,{key:Ve.id,icons:_,index:ot,toast:Ve,defaultRichColors:v,duration:(gn=A==null?void 0:A.duration)!=null?gn:E,className:A==null?void 0:A.className,descriptionClassName:A==null?void 0:A.descriptionClassName,invert:n,visibleToasts:T,closeButton:(mn=A==null?void 0:A.closeButton)!=null?mn:d,interacting:ce,position:fe,style:A==null?void 0:A.style,unstyled:A==null?void 0:A.unstyled,classNames:A==null?void 0:A.classNames,cancelButtonStyle:A==null?void 0:A.cancelButtonStyle,actionButtonStyle:A==null?void 0:A.actionButtonStyle,removeToast:Ae,toasts:z.filter(pt=>pt.position==Ve.position),heights:W.filter(pt=>pt.position==Ve.position),setHeights:re,expandByDefault:l,gap:O,loadingIcon:S,expanded:he,pauseWhenPageIsHidden:U,swipeDirections:t.swipeDirections})})):null}))});const bA=({...t})=>{const{theme:e="system"}=Y3();return B.jsx(CA,{theme:e,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t})},AA=["top","right","bottom","left"],us=Math.min,Jn=Math.max,nu=Math.round,cc=Math.floor,ri=t=>({x:t,y:t}),_A={left:"right",right:"left",bottom:"top",top:"bottom"},SA={start:"end",end:"start"};function ef(t,e,n){return Jn(t,us(e,n))}function bi(t,e){return typeof t=="function"?t(e):t}function Ai(t){return t.split("-")[0]}function la(t){return t.split("-")[1]}function O0(t){return t==="x"?"y":"x"}function N0(t){return t==="y"?"height":"width"}const TA=new Set(["top","bottom"]);function ei(t){return TA.has(Ai(t))?"y":"x"}function k0(t){return O0(ei(t))}function IA(t,e,n){n===void 0&&(n=!1);const i=la(t),o=k0(t),l=N0(o);let d=o==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(d=ru(d)),[d,ru(d)]}function RA(t){const e=ru(t);return[tf(t),e,tf(e)]}function tf(t){return t.replace(/start|end/g,e=>SA[e])}const Pp=["left","right"],Dp=["right","left"],OA=["top","bottom"],NA=["bottom","top"];function kA(t,e,n){switch(t){case"top":case"bottom":return n?e?Dp:Pp:e?Pp:Dp;case"left":case"right":return e?OA:NA;default:return[]}}function PA(t,e,n,i){const o=la(t);let l=kA(Ai(t),n==="start",i);return o&&(l=l.map(d=>d+"-"+o),e&&(l=l.concat(l.map(tf)))),l}function ru(t){return t.replace(/left|right|bottom|top/g,e=>_A[e])}function DA(t){return{top:0,right:0,bottom:0,left:0,...t}}function s2(t){return typeof t!="number"?DA(t):{top:t,right:t,bottom:t,left:t}}function iu(t){const{x:e,y:n,width:i,height:o}=t;return{width:i,height:o,top:n,left:e,right:e+i,bottom:n+o,x:e,y:n}}function Mp(t,e,n){let{reference:i,floating:o}=t;const l=ei(e),d=k0(e),m=N0(d),p=Ai(e),g=l==="y",y=i.x+i.width/2-o.width/2,v=i.y+i.height/2-o.height/2,E=i[m]/2-o[m]/2;let C;switch(p){case"top":C={x:y,y:i.y-o.height};break;case"bottom":C={x:y,y:i.y+i.height};break;case"right":C={x:i.x+i.width,y:v};break;case"left":C={x:i.x-o.width,y:v};break;default:C={x:i.x,y:i.y}}switch(la(e)){case"start":C[d]-=E*(n&&g?-1:1);break;case"end":C[d]+=E*(n&&g?-1:1);break}return C}const MA=async(t,e,n)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:d}=n,m=l.filter(Boolean),p=await(d.isRTL==null?void 0:d.isRTL(e));let g=await d.getElementRects({reference:t,floating:e,strategy:o}),{x:y,y:v}=Mp(g,i,p),E=i,C={},T=0;for(let A=0;A<m.length;A++){const{name:N,fn:O}=m[A],{x:S,y:_,data:D,reset:U}=await O({x:y,y:v,initialPlacement:i,placement:E,strategy:o,middlewareData:C,rects:g,platform:d,elements:{reference:t,floating:e}});y=S??y,v=_??v,C={...C,[N]:{...C[N],...D}},U&&T<=50&&(T++,typeof U=="object"&&(U.placement&&(E=U.placement),U.rects&&(g=U.rects===!0?await d.getElementRects({reference:t,floating:e,strategy:o}):U.rects),{x:y,y:v}=Mp(g,E,p)),A=-1)}return{x:y,y:v,placement:E,strategy:o,middlewareData:C}};async function hl(t,e){var n;e===void 0&&(e={});const{x:i,y:o,platform:l,rects:d,elements:m,strategy:p}=t,{boundary:g="clippingAncestors",rootBoundary:y="viewport",elementContext:v="floating",altBoundary:E=!1,padding:C=0}=bi(e,t),T=s2(C),N=m[E?v==="floating"?"reference":"floating":v],O=iu(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(N)))==null||n?N:N.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(m.floating)),boundary:g,rootBoundary:y,strategy:p})),S=v==="floating"?{x:i,y:o,width:d.floating.width,height:d.floating.height}:d.reference,_=await(l.getOffsetParent==null?void 0:l.getOffsetParent(m.floating)),D=await(l.isElement==null?void 0:l.isElement(_))?await(l.getScale==null?void 0:l.getScale(_))||{x:1,y:1}:{x:1,y:1},U=iu(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:m,rect:S,offsetParent:_,strategy:p}):S);return{top:(O.top-U.top+T.top)/D.y,bottom:(U.bottom-O.bottom+T.bottom)/D.y,left:(O.left-U.left+T.left)/D.x,right:(U.right-O.right+T.right)/D.x}}const LA=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:o,rects:l,platform:d,elements:m,middlewareData:p}=e,{element:g,padding:y=0}=bi(t,e)||{};if(g==null)return{};const v=s2(y),E={x:n,y:i},C=k0(o),T=N0(C),A=await d.getDimensions(g),N=C==="y",O=N?"top":"left",S=N?"bottom":"right",_=N?"clientHeight":"clientWidth",D=l.reference[T]+l.reference[C]-E[C]-l.floating[T],U=E[C]-l.reference[C],z=await(d.getOffsetParent==null?void 0:d.getOffsetParent(g));let F=z?z[_]:0;(!F||!await(d.isElement==null?void 0:d.isElement(z)))&&(F=m.floating[_]||l.floating[T]);const K=D/2-U/2,W=F/2-A[T]/2-1,re=us(v[O],W),he=us(v[S],W),Q=re,ce=F-A[T]-he,te=F/2-A[T]/2+K,H=ef(Q,te,ce),pe=!p.arrow&&la(o)!=null&&te!==H&&l.reference[T]/2-(te<Q?re:he)-A[T]/2<0,oe=pe?te<Q?te-Q:te-ce:0;return{[C]:E[C]+oe,data:{[C]:H,centerOffset:te-H-oe,...pe&&{alignmentOffset:oe}},reset:pe}}}),BA=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:o,middlewareData:l,rects:d,initialPlacement:m,platform:p,elements:g}=e,{mainAxis:y=!0,crossAxis:v=!0,fallbackPlacements:E,fallbackStrategy:C="bestFit",fallbackAxisSideDirection:T="none",flipAlignment:A=!0,...N}=bi(t,e);if((n=l.arrow)!=null&&n.alignmentOffset)return{};const O=Ai(o),S=ei(m),_=Ai(m)===m,D=await(p.isRTL==null?void 0:p.isRTL(g.floating)),U=E||(_||!A?[ru(m)]:RA(m)),z=T!=="none";!E&&z&&U.push(...PA(m,A,T,D));const F=[m,...U],K=await hl(e,N),W=[];let re=((i=l.flip)==null?void 0:i.overflows)||[];if(y&&W.push(K[O]),v){const te=IA(o,d,D);W.push(K[te[0]],K[te[1]])}if(re=[...re,{placement:o,overflows:W}],!W.every(te=>te<=0)){var he,Q;const te=(((he=l.flip)==null?void 0:he.index)||0)+1,H=F[te];if(H&&(!(v==="alignment"?S!==ei(H):!1)||re.every(q=>q.overflows[0]>0&&ei(q.placement)===S)))return{data:{index:te,overflows:re},reset:{placement:H}};let pe=(Q=re.filter(oe=>oe.overflows[0]<=0).sort((oe,q)=>oe.overflows[1]-q.overflows[1])[0])==null?void 0:Q.placement;if(!pe)switch(C){case"bestFit":{var ce;const oe=(ce=re.filter(q=>{if(z){const Z=ei(q.placement);return Z===S||Z==="y"}return!0}).map(q=>[q.placement,q.overflows.filter(Z=>Z>0).reduce((Z,de)=>Z+de,0)]).sort((q,Z)=>q[1]-Z[1])[0])==null?void 0:ce[0];oe&&(pe=oe);break}case"initialPlacement":pe=m;break}if(o!==pe)return{reset:{placement:pe}}}return{}}}};function Lp(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Bp(t){return AA.some(e=>t[e]>=0)}const FA=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...o}=bi(t,e);switch(i){case"referenceHidden":{const l=await hl(e,{...o,elementContext:"reference"}),d=Lp(l,n.reference);return{data:{referenceHiddenOffsets:d,referenceHidden:Bp(d)}}}case"escaped":{const l=await hl(e,{...o,altBoundary:!0}),d=Lp(l,n.floating);return{data:{escapedOffsets:d,escaped:Bp(d)}}}default:return{}}}}},o2=new Set(["left","top"]);async function jA(t,e){const{placement:n,platform:i,elements:o}=t,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),d=Ai(n),m=la(n),p=ei(n)==="y",g=o2.has(d)?-1:1,y=l&&p?-1:1,v=bi(e,t);let{mainAxis:E,crossAxis:C,alignmentAxis:T}=typeof v=="number"?{mainAxis:v,crossAxis:0,alignmentAxis:null}:{mainAxis:v.mainAxis||0,crossAxis:v.crossAxis||0,alignmentAxis:v.alignmentAxis};return m&&typeof T=="number"&&(C=m==="end"?T*-1:T),p?{x:C*y,y:E*g}:{x:E*g,y:C*y}}const UA=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:o,y:l,placement:d,middlewareData:m}=e,p=await jA(e,t);return d===((n=m.offset)==null?void 0:n.placement)&&(i=m.arrow)!=null&&i.alignmentOffset?{}:{x:o+p.x,y:l+p.y,data:{...p,placement:d}}}}},zA=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:o}=e,{mainAxis:l=!0,crossAxis:d=!1,limiter:m={fn:N=>{let{x:O,y:S}=N;return{x:O,y:S}}},...p}=bi(t,e),g={x:n,y:i},y=await hl(e,p),v=ei(Ai(o)),E=O0(v);let C=g[E],T=g[v];if(l){const N=E==="y"?"top":"left",O=E==="y"?"bottom":"right",S=C+y[N],_=C-y[O];C=ef(S,C,_)}if(d){const N=v==="y"?"top":"left",O=v==="y"?"bottom":"right",S=T+y[N],_=T-y[O];T=ef(S,T,_)}const A=m.fn({...e,[E]:C,[v]:T});return{...A,data:{x:A.x-n,y:A.y-i,enabled:{[E]:l,[v]:d}}}}}},VA=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:o,rects:l,middlewareData:d}=e,{offset:m=0,mainAxis:p=!0,crossAxis:g=!0}=bi(t,e),y={x:n,y:i},v=ei(o),E=O0(v);let C=y[E],T=y[v];const A=bi(m,e),N=typeof A=="number"?{mainAxis:A,crossAxis:0}:{mainAxis:0,crossAxis:0,...A};if(p){const _=E==="y"?"height":"width",D=l.reference[E]-l.floating[_]+N.mainAxis,U=l.reference[E]+l.reference[_]-N.mainAxis;C<D?C=D:C>U&&(C=U)}if(g){var O,S;const _=E==="y"?"width":"height",D=o2.has(Ai(o)),U=l.reference[v]-l.floating[_]+(D&&((O=d.offset)==null?void 0:O[v])||0)+(D?0:N.crossAxis),z=l.reference[v]+l.reference[_]+(D?0:((S=d.offset)==null?void 0:S[v])||0)-(D?N.crossAxis:0);T<U?T=U:T>z&&(T=z)}return{[E]:C,[v]:T}}}},WA=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:o,rects:l,platform:d,elements:m}=e,{apply:p=()=>{},...g}=bi(t,e),y=await hl(e,g),v=Ai(o),E=la(o),C=ei(o)==="y",{width:T,height:A}=l.floating;let N,O;v==="top"||v==="bottom"?(N=v,O=E===(await(d.isRTL==null?void 0:d.isRTL(m.floating))?"start":"end")?"left":"right"):(O=v,N=E==="end"?"top":"bottom");const S=A-y.top-y.bottom,_=T-y.left-y.right,D=us(A-y[N],S),U=us(T-y[O],_),z=!e.middlewareData.shift;let F=D,K=U;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(K=_),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(F=S),z&&!E){const re=Jn(y.left,0),he=Jn(y.right,0),Q=Jn(y.top,0),ce=Jn(y.bottom,0);C?K=T-2*(re!==0||he!==0?re+he:Jn(y.left,y.right)):F=A-2*(Q!==0||ce!==0?Q+ce:Jn(y.top,y.bottom))}await p({...e,availableWidth:K,availableHeight:F});const W=await d.getDimensions(m.floating);return T!==W.width||A!==W.height?{reset:{rects:!0}}:{}}}};function Fu(){return typeof window<"u"}function ca(t){return a2(t)?(t.nodeName||"").toLowerCase():"#document"}function ir(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function si(t){var e;return(e=(a2(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function a2(t){return Fu()?t instanceof Node||t instanceof ir(t).Node:!1}function Ur(t){return Fu()?t instanceof Element||t instanceof ir(t).Element:!1}function ii(t){return Fu()?t instanceof HTMLElement||t instanceof ir(t).HTMLElement:!1}function Fp(t){return!Fu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ir(t).ShadowRoot}const HA=new Set(["inline","contents"]);function Nl(t){const{overflow:e,overflowX:n,overflowY:i,display:o}=zr(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!HA.has(o)}const $A=new Set(["table","td","th"]);function GA(t){return $A.has(ca(t))}const KA=[":popover-open",":modal"];function ju(t){return KA.some(e=>{try{return t.matches(e)}catch{return!1}})}const XA=["transform","translate","scale","rotate","perspective"],YA=["transform","translate","scale","rotate","perspective","filter"],qA=["paint","layout","strict","content"];function P0(t){const e=D0(),n=Ur(t)?zr(t):t;return XA.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||YA.some(i=>(n.willChange||"").includes(i))||qA.some(i=>(n.contain||"").includes(i))}function QA(t){let e=ds(t);for(;ii(e)&&!na(e);){if(P0(e))return e;if(ju(e))return null;e=ds(e)}return null}function D0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const ZA=new Set(["html","body","#document"]);function na(t){return ZA.has(ca(t))}function zr(t){return ir(t).getComputedStyle(t)}function Uu(t){return Ur(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ds(t){if(ca(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Fp(t)&&t.host||si(t);return Fp(e)?e.host:e}function l2(t){const e=ds(t);return na(e)?t.ownerDocument?t.ownerDocument.body:t.body:ii(e)&&Nl(e)?e:l2(e)}function fl(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const o=l2(t),l=o===((i=t.ownerDocument)==null?void 0:i.body),d=ir(o);if(l){const m=nf(d);return e.concat(d,d.visualViewport||[],Nl(o)?o:[],m&&n?fl(m):[])}return e.concat(o,fl(o,[],n))}function nf(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function c2(t){const e=zr(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const o=ii(t),l=o?t.offsetWidth:n,d=o?t.offsetHeight:i,m=nu(n)!==l||nu(i)!==d;return m&&(n=l,i=d),{width:n,height:i,$:m}}function M0(t){return Ur(t)?t:t.contextElement}function Fo(t){const e=M0(t);if(!ii(e))return ri(1);const n=e.getBoundingClientRect(),{width:i,height:o,$:l}=c2(e);let d=(l?nu(n.width):n.width)/i,m=(l?nu(n.height):n.height)/o;return(!d||!Number.isFinite(d))&&(d=1),(!m||!Number.isFinite(m))&&(m=1),{x:d,y:m}}const JA=ri(0);function u2(t){const e=ir(t);return!D0()||!e.visualViewport?JA:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function e_(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==ir(t)?!1:e}function $s(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),l=M0(t);let d=ri(1);e&&(i?Ur(i)&&(d=Fo(i)):d=Fo(t));const m=e_(l,n,i)?u2(l):ri(0);let p=(o.left+m.x)/d.x,g=(o.top+m.y)/d.y,y=o.width/d.x,v=o.height/d.y;if(l){const E=ir(l),C=i&&Ur(i)?ir(i):i;let T=E,A=nf(T);for(;A&&i&&C!==T;){const N=Fo(A),O=A.getBoundingClientRect(),S=zr(A),_=O.left+(A.clientLeft+parseFloat(S.paddingLeft))*N.x,D=O.top+(A.clientTop+parseFloat(S.paddingTop))*N.y;p*=N.x,g*=N.y,y*=N.x,v*=N.y,p+=_,g+=D,T=ir(A),A=nf(T)}}return iu({width:y,height:v,x:p,y:g})}function L0(t,e){const n=Uu(t).scrollLeft;return e?e.left+n:$s(si(t)).left+n}function d2(t,e,n){n===void 0&&(n=!1);const i=t.getBoundingClientRect(),o=i.left+e.scrollLeft-(n?0:L0(t,i)),l=i.top+e.scrollTop;return{x:o,y:l}}function t_(t){let{elements:e,rect:n,offsetParent:i,strategy:o}=t;const l=o==="fixed",d=si(i),m=e?ju(e.floating):!1;if(i===d||m&&l)return n;let p={scrollLeft:0,scrollTop:0},g=ri(1);const y=ri(0),v=ii(i);if((v||!v&&!l)&&((ca(i)!=="body"||Nl(d))&&(p=Uu(i)),ii(i))){const C=$s(i);g=Fo(i),y.x=C.x+i.clientLeft,y.y=C.y+i.clientTop}const E=d&&!v&&!l?d2(d,p,!0):ri(0);return{width:n.width*g.x,height:n.height*g.y,x:n.x*g.x-p.scrollLeft*g.x+y.x+E.x,y:n.y*g.y-p.scrollTop*g.y+y.y+E.y}}function n_(t){return Array.from(t.getClientRects())}function r_(t){const e=si(t),n=Uu(t),i=t.ownerDocument.body,o=Jn(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),l=Jn(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let d=-n.scrollLeft+L0(t);const m=-n.scrollTop;return zr(i).direction==="rtl"&&(d+=Jn(e.clientWidth,i.clientWidth)-o),{width:o,height:l,x:d,y:m}}function i_(t,e){const n=ir(t),i=si(t),o=n.visualViewport;let l=i.clientWidth,d=i.clientHeight,m=0,p=0;if(o){l=o.width,d=o.height;const g=D0();(!g||g&&e==="fixed")&&(m=o.offsetLeft,p=o.offsetTop)}return{width:l,height:d,x:m,y:p}}const s_=new Set(["absolute","fixed"]);function o_(t,e){const n=$s(t,!0,e==="fixed"),i=n.top+t.clientTop,o=n.left+t.clientLeft,l=ii(t)?Fo(t):ri(1),d=t.clientWidth*l.x,m=t.clientHeight*l.y,p=o*l.x,g=i*l.y;return{width:d,height:m,x:p,y:g}}function jp(t,e,n){let i;if(e==="viewport")i=i_(t,n);else if(e==="document")i=r_(si(t));else if(Ur(e))i=o_(e,n);else{const o=u2(t);i={x:e.x-o.x,y:e.y-o.y,width:e.width,height:e.height}}return iu(i)}function h2(t,e){const n=ds(t);return n===e||!Ur(n)||na(n)?!1:zr(n).position==="fixed"||h2(n,e)}function a_(t,e){const n=e.get(t);if(n)return n;let i=fl(t,[],!1).filter(m=>Ur(m)&&ca(m)!=="body"),o=null;const l=zr(t).position==="fixed";let d=l?ds(t):t;for(;Ur(d)&&!na(d);){const m=zr(d),p=P0(d);!p&&m.position==="fixed"&&(o=null),(l?!p&&!o:!p&&m.position==="static"&&!!o&&s_.has(o.position)||Nl(d)&&!p&&h2(t,d))?i=i.filter(y=>y!==d):o=m,d=ds(d)}return e.set(t,i),i}function l_(t){let{element:e,boundary:n,rootBoundary:i,strategy:o}=t;const d=[...n==="clippingAncestors"?ju(e)?[]:a_(e,this._c):[].concat(n),i],m=d[0],p=d.reduce((g,y)=>{const v=jp(e,y,o);return g.top=Jn(v.top,g.top),g.right=us(v.right,g.right),g.bottom=us(v.bottom,g.bottom),g.left=Jn(v.left,g.left),g},jp(e,m,o));return{width:p.right-p.left,height:p.bottom-p.top,x:p.left,y:p.top}}function c_(t){const{width:e,height:n}=c2(t);return{width:e,height:n}}function u_(t,e,n){const i=ii(e),o=si(e),l=n==="fixed",d=$s(t,!0,l,e);let m={scrollLeft:0,scrollTop:0};const p=ri(0);function g(){p.x=L0(o)}if(i||!i&&!l)if((ca(e)!=="body"||Nl(o))&&(m=Uu(e)),i){const C=$s(e,!0,l,e);p.x=C.x+e.clientLeft,p.y=C.y+e.clientTop}else o&&g();l&&!i&&o&&g();const y=o&&!i&&!l?d2(o,m):ri(0),v=d.left+m.scrollLeft-p.x-y.x,E=d.top+m.scrollTop-p.y-y.y;return{x:v,y:E,width:d.width,height:d.height}}function Hd(t){return zr(t).position==="static"}function Up(t,e){if(!ii(t)||zr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return si(t)===n&&(n=n.ownerDocument.body),n}function f2(t,e){const n=ir(t);if(ju(t))return n;if(!ii(t)){let o=ds(t);for(;o&&!na(o);){if(Ur(o)&&!Hd(o))return o;o=ds(o)}return n}let i=Up(t,e);for(;i&&GA(i)&&Hd(i);)i=Up(i,e);return i&&na(i)&&Hd(i)&&!P0(i)?n:i||QA(t)||n}const d_=async function(t){const e=this.getOffsetParent||f2,n=this.getDimensions,i=await n(t.floating);return{reference:u_(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function h_(t){return zr(t).direction==="rtl"}const f_={convertOffsetParentRelativeRectToViewportRelativeRect:t_,getDocumentElement:si,getClippingRect:l_,getOffsetParent:f2,getElementRects:d_,getClientRects:n_,getDimensions:c_,getScale:Fo,isElement:Ur,isRTL:h_};function p2(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function p_(t,e){let n=null,i;const o=si(t);function l(){var m;clearTimeout(i),(m=n)==null||m.disconnect(),n=null}function d(m,p){m===void 0&&(m=!1),p===void 0&&(p=1),l();const g=t.getBoundingClientRect(),{left:y,top:v,width:E,height:C}=g;if(m||e(),!E||!C)return;const T=cc(v),A=cc(o.clientWidth-(y+E)),N=cc(o.clientHeight-(v+C)),O=cc(y),_={rootMargin:-T+"px "+-A+"px "+-N+"px "+-O+"px",threshold:Jn(0,us(1,p))||1};let D=!0;function U(z){const F=z[0].intersectionRatio;if(F!==p){if(!D)return d();F?d(!1,F):i=setTimeout(()=>{d(!1,1e-7)},1e3)}F===1&&!p2(g,t.getBoundingClientRect())&&d(),D=!1}try{n=new IntersectionObserver(U,{..._,root:o.ownerDocument})}catch{n=new IntersectionObserver(U,_)}n.observe(t)}return d(!0),l}function g_(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:m=typeof IntersectionObserver=="function",animationFrame:p=!1}=i,g=M0(t),y=o||l?[...g?fl(g):[],...fl(e)]:[];y.forEach(O=>{o&&O.addEventListener("scroll",n,{passive:!0}),l&&O.addEventListener("resize",n)});const v=g&&m?p_(g,n):null;let E=-1,C=null;d&&(C=new ResizeObserver(O=>{let[S]=O;S&&S.target===g&&C&&(C.unobserve(e),cancelAnimationFrame(E),E=requestAnimationFrame(()=>{var _;(_=C)==null||_.observe(e)})),n()}),g&&!p&&C.observe(g),C.observe(e));let T,A=p?$s(t):null;p&&N();function N(){const O=$s(t);A&&!p2(A,O)&&n(),A=O,T=requestAnimationFrame(N)}return n(),()=>{var O;y.forEach(S=>{o&&S.removeEventListener("scroll",n),l&&S.removeEventListener("resize",n)}),v==null||v(),(O=C)==null||O.disconnect(),C=null,p&&cancelAnimationFrame(T)}}const m_=UA,w_=zA,y_=BA,x_=WA,v_=FA,zp=LA,E_=VA,C_=(t,e,n)=>{const i=new Map,o={platform:f_,...n},l={...o.platform,_c:i};return MA(t,e,{...o,platform:l})};var b_=typeof document<"u",A_=function(){},Oc=b_?P.useLayoutEffect:A_;function su(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,o;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!su(t[i],e[i]))return!1;return!0}if(o=Object.keys(t),n=o.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,o[i]))return!1;for(i=n;i--!==0;){const l=o[i];if(!(l==="_owner"&&t.$$typeof)&&!su(t[l],e[l]))return!1}return!0}return t!==t&&e!==e}function g2(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Vp(t,e){const n=g2(t);return Math.round(e*n)/n}function $d(t){const e=P.useRef(t);return Oc(()=>{e.current=t}),e}function __(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:d}={},transform:m=!0,whileElementsMounted:p,open:g}=t,[y,v]=P.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[E,C]=P.useState(i);su(E,i)||C(i);const[T,A]=P.useState(null),[N,O]=P.useState(null),S=P.useCallback(q=>{q!==z.current&&(z.current=q,A(q))},[]),_=P.useCallback(q=>{q!==F.current&&(F.current=q,O(q))},[]),D=l||T,U=d||N,z=P.useRef(null),F=P.useRef(null),K=P.useRef(y),W=p!=null,re=$d(p),he=$d(o),Q=$d(g),ce=P.useCallback(()=>{if(!z.current||!F.current)return;const q={placement:e,strategy:n,middleware:E};he.current&&(q.platform=he.current),C_(z.current,F.current,q).then(Z=>{const de={...Z,isPositioned:Q.current!==!1};te.current&&!su(K.current,de)&&(K.current=de,Rl.flushSync(()=>{v(de)}))})},[E,e,n,he,Q]);Oc(()=>{g===!1&&K.current.isPositioned&&(K.current.isPositioned=!1,v(q=>({...q,isPositioned:!1})))},[g]);const te=P.useRef(!1);Oc(()=>(te.current=!0,()=>{te.current=!1}),[]),Oc(()=>{if(D&&(z.current=D),U&&(F.current=U),D&&U){if(re.current)return re.current(D,U,ce);ce()}},[D,U,ce,re,W]);const H=P.useMemo(()=>({reference:z,floating:F,setReference:S,setFloating:_}),[S,_]),pe=P.useMemo(()=>({reference:D,floating:U}),[D,U]),oe=P.useMemo(()=>{const q={position:n,left:0,top:0};if(!pe.floating)return q;const Z=Vp(pe.floating,y.x),de=Vp(pe.floating,y.y);return m?{...q,transform:"translate("+Z+"px, "+de+"px)",...g2(pe.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Z,top:de}},[n,m,pe.floating,y.x,y.y]);return P.useMemo(()=>({...y,update:ce,refs:H,elements:pe,floatingStyles:oe}),[y,ce,H,pe,oe])}const S_=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:o}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?zp({element:i.current,padding:o}).fn(n):{}:i?zp({element:i,padding:o}).fn(n):{}}}},T_=(t,e)=>({...m_(t),options:[t,e]}),I_=(t,e)=>({...w_(t),options:[t,e]}),R_=(t,e)=>({...E_(t),options:[t,e]}),O_=(t,e)=>({...y_(t),options:[t,e]}),N_=(t,e)=>({...x_(t),options:[t,e]}),k_=(t,e)=>({...v_(t),options:[t,e]}),P_=(t,e)=>({...S_(t),options:[t,e]});var D_="Arrow",m2=P.forwardRef((t,e)=>{const{children:n,width:i=10,height:o=5,...l}=t;return B.jsx(Kn.svg,{...l,ref:e,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:B.jsx("polygon",{points:"0,0 30,0 15,10"})})});m2.displayName=D_;var M_=m2;function L_(t){const[e,n]=P.useState(void 0);return cs(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let d,m;if("borderBoxSize"in l){const p=l.borderBoxSize,g=Array.isArray(p)?p[0]:p;d=g.inlineSize,m=g.blockSize}else d=t.offsetWidth,m=t.offsetHeight;n({width:d,height:m})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}var w2="Popper",[y2,x2]=Mu(w2),[SR,v2]=y2(w2),E2="PopperAnchor",C2=P.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...o}=t,l=v2(E2,n),d=P.useRef(null),m=jr(e,d);return P.useEffect(()=>{l.onAnchorChange((i==null?void 0:i.current)||d.current)}),i?null:B.jsx(Kn.div,{...o,ref:m})});C2.displayName=E2;var B0="PopperContent",[B_,F_]=y2(B0),b2=P.forwardRef((t,e)=>{var Ve,ot,gn,mn,pt,Sn;const{__scopePopper:n,side:i="bottom",sideOffset:o=0,align:l="center",alignOffset:d=0,arrowPadding:m=0,avoidCollisions:p=!0,collisionBoundary:g=[],collisionPadding:y=0,sticky:v="partial",hideWhenDetached:E=!1,updatePositionStrategy:C="optimized",onPlaced:T,...A}=t,N=v2(B0,n),[O,S]=P.useState(null),_=jr(e,Le=>S(Le)),[D,U]=P.useState(null),z=L_(D),F=(z==null?void 0:z.width)??0,K=(z==null?void 0:z.height)??0,W=i+(l!=="center"?"-"+l:""),re=typeof y=="number"?y:{top:0,right:0,bottom:0,left:0,...y},he=Array.isArray(g)?g:[g],Q=he.length>0,ce={padding:re,boundary:he.filter(U_),altBoundary:Q},{refs:te,floatingStyles:H,placement:pe,isPositioned:oe,middlewareData:q}=__({strategy:"fixed",placement:W,whileElementsMounted:(...Le)=>g_(...Le,{animationFrame:C==="always"}),elements:{reference:N.anchor},middleware:[T_({mainAxis:o+K,alignmentAxis:d}),p&&I_({mainAxis:!0,crossAxis:!1,limiter:v==="partial"?R_():void 0,...ce}),p&&O_({...ce}),N_({...ce,apply:({elements:Le,rects:_e,availableWidth:Ie,availableHeight:ut})=>{const{width:Ke,height:De}=_e.reference,ve=Le.floating.style;ve.setProperty("--radix-popper-available-width",`${Ie}px`),ve.setProperty("--radix-popper-available-height",`${ut}px`),ve.setProperty("--radix-popper-anchor-width",`${Ke}px`),ve.setProperty("--radix-popper-anchor-height",`${De}px`)}}),D&&P_({element:D,padding:m}),z_({arrowWidth:F,arrowHeight:K}),E&&k_({strategy:"referenceHidden",...ce})]}),[Z,de]=S2(pe),Ae=ls(T);cs(()=>{oe&&(Ae==null||Ae())},[oe,Ae]);const fe=(Ve=q.arrow)==null?void 0:Ve.x,Te=(ot=q.arrow)==null?void 0:ot.y,Ee=((gn=q.arrow)==null?void 0:gn.centerOffset)!==0,[nt,me]=P.useState();return cs(()=>{O&&me(window.getComputedStyle(O).zIndex)},[O]),B.jsx("div",{ref:te.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:oe?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:nt,"--radix-popper-transform-origin":[(mn=q.transformOrigin)==null?void 0:mn.x,(pt=q.transformOrigin)==null?void 0:pt.y].join(" "),...((Sn=q.hide)==null?void 0:Sn.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:B.jsx(B_,{scope:n,placedSide:Z,onArrowChange:U,arrowX:fe,arrowY:Te,shouldHideArrow:Ee,children:B.jsx(Kn.div,{"data-side":Z,"data-align":de,...A,ref:_,style:{...A.style,animation:oe?void 0:"none"}})})})});b2.displayName=B0;var A2="PopperArrow",j_={top:"bottom",right:"left",bottom:"top",left:"right"},_2=P.forwardRef(function(e,n){const{__scopePopper:i,...o}=e,l=F_(A2,i),d=j_[l.placedSide];return B.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:B.jsx(M_,{...o,ref:n,style:{...o.style,display:"block"}})})});_2.displayName=A2;function U_(t){return t!==null}var z_=t=>({name:"transformOrigin",options:t,fn(e){var N,O,S;const{placement:n,rects:i,middlewareData:o}=e,d=((N=o.arrow)==null?void 0:N.centerOffset)!==0,m=d?0:t.arrowWidth,p=d?0:t.arrowHeight,[g,y]=S2(n),v={start:"0%",center:"50%",end:"100%"}[y],E=(((O=o.arrow)==null?void 0:O.x)??0)+m/2,C=(((S=o.arrow)==null?void 0:S.y)??0)+p/2;let T="",A="";return g==="bottom"?(T=d?v:`${E}px`,A=`${-p}px`):g==="top"?(T=d?v:`${E}px`,A=`${i.floating.height+p}px`):g==="right"?(T=`${-p}px`,A=d?v:`${C}px`):g==="left"&&(T=`${i.floating.width+p}px`,A=d?v:`${C}px`),{data:{x:T,y:A}}}});function S2(t){const[e,n="center"]=t.split("-");return[e,n]}var V_=C2,W_=b2,H_=_2,[zu,TR]=Mu("Tooltip",[x2]),F0=x2(),T2="TooltipProvider",$_=700,Wp="tooltip.open",[G_,I2]=zu(T2),R2=t=>{const{__scopeTooltip:e,delayDuration:n=$_,skipDelayDuration:i=300,disableHoverableContent:o=!1,children:l}=t,d=P.useRef(!0),m=P.useRef(!1),p=P.useRef(0);return P.useEffect(()=>{const g=p.current;return()=>window.clearTimeout(g)},[]),B.jsx(G_,{scope:e,isOpenDelayedRef:d,delayDuration:n,onOpen:P.useCallback(()=>{window.clearTimeout(p.current),d.current=!1},[]),onClose:P.useCallback(()=>{window.clearTimeout(p.current),p.current=window.setTimeout(()=>d.current=!0,i)},[i]),isPointerInTransitRef:m,onPointerInTransitChange:P.useCallback(g=>{m.current=g},[]),disableHoverableContent:o,children:l})};R2.displayName=T2;var O2="Tooltip",[IR,Vu]=zu(O2),rf="TooltipTrigger",K_=P.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,o=Vu(rf,n),l=I2(rf,n),d=F0(n),m=P.useRef(null),p=jr(e,m,o.onTriggerChange),g=P.useRef(!1),y=P.useRef(!1),v=P.useCallback(()=>g.current=!1,[]);return P.useEffect(()=>()=>document.removeEventListener("pointerup",v),[v]),B.jsx(V_,{asChild:!0,...d,children:B.jsx(Kn.button,{"aria-describedby":o.open?o.contentId:void 0,"data-state":o.stateAttribute,...i,ref:p,onPointerMove:qt(t.onPointerMove,E=>{E.pointerType!=="touch"&&!y.current&&!l.isPointerInTransitRef.current&&(o.onTriggerEnter(),y.current=!0)}),onPointerLeave:qt(t.onPointerLeave,()=>{o.onTriggerLeave(),y.current=!1}),onPointerDown:qt(t.onPointerDown,()=>{o.open&&o.onClose(),g.current=!0,document.addEventListener("pointerup",v,{once:!0})}),onFocus:qt(t.onFocus,()=>{g.current||o.onOpen()}),onBlur:qt(t.onBlur,o.onClose),onClick:qt(t.onClick,o.onClose)})})});K_.displayName=rf;var X_="TooltipPortal",[RR,Y_]=zu(X_,{forceMount:void 0}),ra="TooltipContent",N2=P.forwardRef((t,e)=>{const n=Y_(ra,t.__scopeTooltip),{forceMount:i=n.forceMount,side:o="top",...l}=t,d=Vu(ra,t.__scopeTooltip);return B.jsx(A0,{present:i||d.open,children:d.disableHoverableContent?B.jsx(k2,{side:o,...l,ref:e}):B.jsx(q_,{side:o,...l,ref:e})})}),q_=P.forwardRef((t,e)=>{const n=Vu(ra,t.__scopeTooltip),i=I2(ra,t.__scopeTooltip),o=P.useRef(null),l=jr(e,o),[d,m]=P.useState(null),{trigger:p,onClose:g}=n,y=o.current,{onPointerInTransitChange:v}=i,E=P.useCallback(()=>{m(null),v(!1)},[v]),C=P.useCallback((T,A)=>{const N=T.currentTarget,O={x:T.clientX,y:T.clientY},S=tS(O,N.getBoundingClientRect()),_=nS(O,S),D=rS(A.getBoundingClientRect()),U=sS([..._,...D]);m(U),v(!0)},[v]);return P.useEffect(()=>()=>E(),[E]),P.useEffect(()=>{if(p&&y){const T=N=>C(N,y),A=N=>C(N,p);return p.addEventListener("pointerleave",T),y.addEventListener("pointerleave",A),()=>{p.removeEventListener("pointerleave",T),y.removeEventListener("pointerleave",A)}}},[p,y,C,E]),P.useEffect(()=>{if(d){const T=A=>{const N=A.target,O={x:A.clientX,y:A.clientY},S=(p==null?void 0:p.contains(N))||(y==null?void 0:y.contains(N)),_=!iS(O,d);S?E():_&&(E(),g())};return document.addEventListener("pointermove",T),()=>document.removeEventListener("pointermove",T)}},[p,y,d,g,E]),B.jsx(k2,{...t,ref:l})}),[Q_,Z_]=zu(O2,{isInside:!1}),J_=rb("TooltipContent"),k2=P.forwardRef((t,e)=>{const{__scopeTooltip:n,children:i,"aria-label":o,onEscapeKeyDown:l,onPointerDownOutside:d,...m}=t,p=Vu(ra,n),g=F0(n),{onClose:y}=p;return P.useEffect(()=>(document.addEventListener(Wp,y),()=>document.removeEventListener(Wp,y)),[y]),P.useEffect(()=>{if(p.trigger){const v=E=>{const C=E.target;C!=null&&C.contains(p.trigger)&&y()};return window.addEventListener("scroll",v,{capture:!0}),()=>window.removeEventListener("scroll",v,{capture:!0})}},[p.trigger,y]),B.jsx(b0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:v=>v.preventDefault(),onDismiss:y,children:B.jsxs(W_,{"data-state":p.stateAttribute,...g,...m,ref:e,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[B.jsx(J_,{children:i}),B.jsx(Q_,{scope:n,isInside:!0,children:B.jsx(Ib,{id:p.contentId,role:"tooltip",children:o||i})})]})})});N2.displayName=ra;var P2="TooltipArrow",eS=P.forwardRef((t,e)=>{const{__scopeTooltip:n,...i}=t,o=F0(n);return Z_(P2,n).isInside?null:B.jsx(H_,{...o,...i,ref:e})});eS.displayName=P2;function tS(t,e){const n=Math.abs(e.top-t.y),i=Math.abs(e.bottom-t.y),o=Math.abs(e.right-t.x),l=Math.abs(e.left-t.x);switch(Math.min(n,i,o,l)){case l:return"left";case o:return"right";case n:return"top";case i:return"bottom";default:throw new Error("unreachable")}}function nS(t,e,n=5){const i=[];switch(e){case"top":i.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":i.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":i.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":i.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return i}function rS(t){const{top:e,right:n,bottom:i,left:o}=t;return[{x:o,y:e},{x:n,y:e},{x:n,y:i},{x:o,y:i}]}function iS(t,e){const{x:n,y:i}=t;let o=!1;for(let l=0,d=e.length-1;l<e.length;d=l++){const m=e[l],p=e[d],g=m.x,y=m.y,v=p.x,E=p.y;y>i!=E>i&&n<(v-g)*(i-y)/(E-y)+g&&(o=!o)}return o}function sS(t){const e=t.slice();return e.sort((n,i)=>n.x<i.x?-1:n.x>i.x?1:n.y<i.y?-1:n.y>i.y?1:0),oS(e)}function oS(t){if(t.length<=1)return t.slice();const e=[];for(let i=0;i<t.length;i++){const o=t[i];for(;e.length>=2;){const l=e[e.length-1],d=e[e.length-2];if((l.x-d.x)*(o.y-d.y)>=(l.y-d.y)*(o.x-d.x))e.pop();else break}e.push(o)}e.pop();const n=[];for(let i=t.length-1;i>=0;i--){const o=t[i];for(;n.length>=2;){const l=n[n.length-1],d=n[n.length-2];if((l.x-d.x)*(o.y-d.y)>=(l.y-d.y)*(o.x-d.x))n.pop();else break}n.push(o)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var aS=R2,D2=N2;const lS=aS,cS=P.forwardRef(({className:t,sideOffset:e=4,...n},i)=>B.jsx(D2,{ref:i,sideOffset:e,className:_n("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n}));cS.displayName=D2.displayName;var Wu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Hu=typeof window>"u"||"Deno"in globalThis;function Rr(){}function uS(t,e){return typeof t=="function"?t(e):t}function dS(t){return typeof t=="number"&&t>=0&&t!==1/0}function hS(t,e){return Math.max(t+(e||0)-Date.now(),0)}function sf(t,e){return typeof t=="function"?t(e):t}function fS(t,e){return typeof t=="function"?t(e):t}function Hp(t,e){const{type:n="all",exact:i,fetchStatus:o,predicate:l,queryKey:d,stale:m}=t;if(d){if(i){if(e.queryHash!==j0(d,e.options))return!1}else if(!gl(e.queryKey,d))return!1}if(n!=="all"){const p=e.isActive();if(n==="active"&&!p||n==="inactive"&&p)return!1}return!(typeof m=="boolean"&&e.isStale()!==m||o&&o!==e.state.fetchStatus||l&&!l(e))}function $p(t,e){const{exact:n,status:i,predicate:o,mutationKey:l}=t;if(l){if(!e.options.mutationKey)return!1;if(n){if(pl(e.options.mutationKey)!==pl(l))return!1}else if(!gl(e.options.mutationKey,l))return!1}return!(i&&e.state.status!==i||o&&!o(e))}function j0(t,e){return((e==null?void 0:e.queryKeyHashFn)||pl)(t)}function pl(t){return JSON.stringify(t,(e,n)=>of(n)?Object.keys(n).sort().reduce((i,o)=>(i[o]=n[o],i),{}):n)}function gl(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?Object.keys(e).every(n=>gl(t[n],e[n])):!1}function M2(t,e){if(t===e)return t;const n=Gp(t)&&Gp(e);if(n||of(t)&&of(e)){const i=n?t:Object.keys(t),o=i.length,l=n?e:Object.keys(e),d=l.length,m=n?[]:{},p=new Set(i);let g=0;for(let y=0;y<d;y++){const v=n?y:l[y];(!n&&p.has(v)||n)&&t[v]===void 0&&e[v]===void 0?(m[v]=void 0,g++):(m[v]=M2(t[v],e[v]),m[v]===t[v]&&t[v]!==void 0&&g++)}return o===d&&g===o?t:m}return e}function Gp(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function of(t){if(!Kp(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!Kp(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function Kp(t){return Object.prototype.toString.call(t)==="[object Object]"}function pS(t){return new Promise(e=>{setTimeout(e,t)})}function gS(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?M2(t,e):e}function mS(t,e,n=0){const i=[...t,e];return n&&i.length>n?i.slice(1):i}function wS(t,e,n=0){const i=[e,...t];return n&&i.length>n?i.slice(0,-1):i}var U0=Symbol();function L2(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===U0?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var ks,Hi,zo,Yg,yS=(Yg=class extends Wu{constructor(){super();tt(this,ks);tt(this,Hi);tt(this,zo);Me(this,zo,e=>{if(!Hu&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){J(this,Hi)||this.setEventListener(J(this,zo))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,Hi))==null||e.call(this),Me(this,Hi,void 0))}setEventListener(e){var n;Me(this,zo,e),(n=J(this,Hi))==null||n.call(this),Me(this,Hi,e(i=>{typeof i=="boolean"?this.setFocused(i):this.onFocus()}))}setFocused(e){J(this,ks)!==e&&(Me(this,ks,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof J(this,ks)=="boolean"?J(this,ks):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},ks=new WeakMap,Hi=new WeakMap,zo=new WeakMap,Yg),B2=new yS,Vo,$i,Wo,qg,xS=(qg=class extends Wu{constructor(){super();tt(this,Vo,!0);tt(this,$i);tt(this,Wo);Me(this,Wo,e=>{if(!Hu&&window.addEventListener){const n=()=>e(!0),i=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",i,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",i)}}})}onSubscribe(){J(this,$i)||this.setEventListener(J(this,Wo))}onUnsubscribe(){var e;this.hasListeners()||((e=J(this,$i))==null||e.call(this),Me(this,$i,void 0))}setEventListener(e){var n;Me(this,Wo,e),(n=J(this,$i))==null||n.call(this),Me(this,$i,e(this.setOnline.bind(this)))}setOnline(e){J(this,Vo)!==e&&(Me(this,Vo,e),this.listeners.forEach(i=>{i(e)}))}isOnline(){return J(this,Vo)}},Vo=new WeakMap,$i=new WeakMap,Wo=new WeakMap,qg),ou=new xS;function vS(){let t,e;const n=new Promise((o,l)=>{t=o,e=l});n.status="pending",n.catch(()=>{});function i(o){Object.assign(n,o),delete n.resolve,delete n.reject}return n.resolve=o=>{i({status:"fulfilled",value:o}),t(o)},n.reject=o=>{i({status:"rejected",reason:o}),e(o)},n}function ES(t){return Math.min(1e3*2**t,3e4)}function F2(t){return(t??"online")==="online"?ou.isOnline():!0}var j2=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function Gd(t){return t instanceof j2}function U2(t){let e=!1,n=0,i=!1,o;const l=vS(),d=A=>{var N;i||(E(new j2(A)),(N=t.abort)==null||N.call(t))},m=()=>{e=!0},p=()=>{e=!1},g=()=>B2.isFocused()&&(t.networkMode==="always"||ou.isOnline())&&t.canRun(),y=()=>F2(t.networkMode)&&t.canRun(),v=A=>{var N;i||(i=!0,(N=t.onSuccess)==null||N.call(t,A),o==null||o(),l.resolve(A))},E=A=>{var N;i||(i=!0,(N=t.onError)==null||N.call(t,A),o==null||o(),l.reject(A))},C=()=>new Promise(A=>{var N;o=O=>{(i||g())&&A(O)},(N=t.onPause)==null||N.call(t)}).then(()=>{var A;o=void 0,i||(A=t.onContinue)==null||A.call(t)}),T=()=>{if(i)return;let A;const N=n===0?t.initialPromise:void 0;try{A=N??t.fn()}catch(O){A=Promise.reject(O)}Promise.resolve(A).then(v).catch(O=>{var z;if(i)return;const S=t.retry??(Hu?0:3),_=t.retryDelay??ES,D=typeof _=="function"?_(n,O):_,U=S===!0||typeof S=="number"&&n<S||typeof S=="function"&&S(n,O);if(e||!U){E(O);return}n++,(z=t.onFail)==null||z.call(t,n,O),pS(D).then(()=>g()?void 0:C()).then(()=>{e?E(O):T()})})};return{promise:l,cancel:d,continue:()=>(o==null||o(),l),cancelRetry:m,continueRetry:p,canStart:y,start:()=>(y()?T():C().then(T),l)}}var CS=t=>setTimeout(t,0);function bS(){let t=[],e=0,n=m=>{m()},i=m=>{m()},o=CS;const l=m=>{e?t.push(m):o(()=>{n(m)})},d=()=>{const m=t;t=[],m.length&&o(()=>{i(()=>{m.forEach(p=>{n(p)})})})};return{batch:m=>{let p;e++;try{p=m()}finally{e--,e||d()}return p},batchCalls:m=>(...p)=>{l(()=>{m(...p)})},schedule:l,setNotifyFunction:m=>{n=m},setBatchNotifyFunction:m=>{i=m},setScheduler:m=>{o=m}}}var On=bS(),Ps,Qg,z2=(Qg=class{constructor(){tt(this,Ps)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),dS(this.gcTime)&&Me(this,Ps,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Hu?1/0:5*60*1e3))}clearGcTimeout(){J(this,Ps)&&(clearTimeout(J(this,Ps)),Me(this,Ps,void 0))}},Ps=new WeakMap,Qg),Ho,Ds,fr,Ms,Cn,Cl,Ls,Nr,ci,Zg,AS=(Zg=class extends z2{constructor(e){super();tt(this,Nr);tt(this,Ho);tt(this,Ds);tt(this,fr);tt(this,Ms);tt(this,Cn);tt(this,Cl);tt(this,Ls);Me(this,Ls,!1),Me(this,Cl,e.defaultOptions),this.setOptions(e.options),this.observers=[],Me(this,Ms,e.client),Me(this,fr,J(this,Ms).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Me(this,Ho,SS(this.options)),this.state=e.state??J(this,Ho),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return(e=J(this,Cn))==null?void 0:e.promise}setOptions(e){this.options={...J(this,Cl),...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&J(this,fr).remove(this)}setData(e,n){const i=gS(this.state.data,e,this.options);return xn(this,Nr,ci).call(this,{data:i,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),i}setState(e,n){xn(this,Nr,ci).call(this,{type:"setState",state:e,setStateOptions:n})}cancel(e){var i,o;const n=(i=J(this,Cn))==null?void 0:i.promise;return(o=J(this,Cn))==null||o.cancel(e),n?n.then(Rr).catch(Rr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(J(this,Ho))}isActive(){return this.observers.some(e=>fS(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===U0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>sf(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!hS(this.state.dataUpdatedAt,e)}onFocus(){var n;const e=this.observers.find(i=>i.shouldFetchOnWindowFocus());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Cn))==null||n.continue()}onOnline(){var n;const e=this.observers.find(i=>i.shouldFetchOnReconnect());e==null||e.refetch({cancelRefetch:!1}),(n=J(this,Cn))==null||n.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),J(this,fr).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(J(this,Cn)&&(J(this,Ls)?J(this,Cn).cancel({revert:!0}):J(this,Cn).cancelRetry()),this.scheduleGc()),J(this,fr).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||xn(this,Nr,ci).call(this,{type:"invalidate"})}fetch(e,n){var g,y,v;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(J(this,Cn))return J(this,Cn).continueRetry(),J(this,Cn).promise}if(e&&this.setOptions(e),!this.options.queryFn){const E=this.observers.find(C=>C.options.queryFn);E&&this.setOptions(E.options)}const i=new AbortController,o=E=>{Object.defineProperty(E,"signal",{enumerable:!0,get:()=>(Me(this,Ls,!0),i.signal)})},l=()=>{const E=L2(this.options,n),T=(()=>{const A={client:J(this,Ms),queryKey:this.queryKey,meta:this.meta};return o(A),A})();return Me(this,Ls,!1),this.options.persister?this.options.persister(E,T,this):E(T)},m=(()=>{const E={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:J(this,Ms),state:this.state,fetchFn:l};return o(E),E})();(g=this.options.behavior)==null||g.onFetch(m,this),Me(this,Ds,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((y=m.fetchOptions)==null?void 0:y.meta))&&xn(this,Nr,ci).call(this,{type:"fetch",meta:(v=m.fetchOptions)==null?void 0:v.meta});const p=E=>{var C,T,A,N;Gd(E)&&E.silent||xn(this,Nr,ci).call(this,{type:"error",error:E}),Gd(E)||((T=(C=J(this,fr).config).onError)==null||T.call(C,E,this),(N=(A=J(this,fr).config).onSettled)==null||N.call(A,this.state.data,E,this)),this.scheduleGc()};return Me(this,Cn,U2({initialPromise:n==null?void 0:n.initialPromise,fn:m.fetchFn,abort:i.abort.bind(i),onSuccess:E=>{var C,T,A,N;if(E===void 0){p(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(E)}catch(O){p(O);return}(T=(C=J(this,fr).config).onSuccess)==null||T.call(C,E,this),(N=(A=J(this,fr).config).onSettled)==null||N.call(A,E,this.state.error,this),this.scheduleGc()},onError:p,onFail:(E,C)=>{xn(this,Nr,ci).call(this,{type:"failed",failureCount:E,error:C})},onPause:()=>{xn(this,Nr,ci).call(this,{type:"pause"})},onContinue:()=>{xn(this,Nr,ci).call(this,{type:"continue"})},retry:m.options.retry,retryDelay:m.options.retryDelay,networkMode:m.options.networkMode,canRun:()=>!0})),J(this,Cn).start()}},Ho=new WeakMap,Ds=new WeakMap,fr=new WeakMap,Ms=new WeakMap,Cn=new WeakMap,Cl=new WeakMap,Ls=new WeakMap,Nr=new WeakSet,ci=function(e){const n=i=>{switch(e.type){case"failed":return{...i,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...i,fetchStatus:"paused"};case"continue":return{...i,fetchStatus:"fetching"};case"fetch":return{...i,..._S(i.data,this.options),fetchMeta:e.meta??null};case"success":return Me(this,Ds,void 0),{...i,data:e.data,dataUpdateCount:i.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=e.error;return Gd(o)&&o.revert&&J(this,Ds)?{...J(this,Ds),fetchStatus:"idle"}:{...i,error:o,errorUpdateCount:i.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:i.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...i,isInvalidated:!0};case"setState":return{...i,...e.state}}};this.state=n(this.state),On.batch(()=>{this.observers.forEach(i=>{i.onQueryUpdate()}),J(this,fr).notify({query:this,type:"updated",action:e})})},Zg);function _S(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:F2(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function SS(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,i=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?i??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Yr,Jg,TS=(Jg=class extends Wu{constructor(e={}){super();tt(this,Yr);this.config=e,Me(this,Yr,new Map)}build(e,n,i){const o=n.queryKey,l=n.queryHash??j0(o,n);let d=this.get(l);return d||(d=new AS({client:e,queryKey:o,queryHash:l,options:e.defaultQueryOptions(n),state:i,defaultOptions:e.getQueryDefaults(o)}),this.add(d)),d}add(e){J(this,Yr).has(e.queryHash)||(J(this,Yr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=J(this,Yr).get(e.queryHash);n&&(e.destroy(),n===e&&J(this,Yr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){On.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return J(this,Yr).get(e)}getAll(){return[...J(this,Yr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(i=>Hp(n,i))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(i=>Hp(e,i)):n}notify(e){On.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){On.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){On.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Yr=new WeakMap,Jg),qr,In,Bs,Qr,Bi,em,IS=(em=class extends z2{constructor(e){super();tt(this,Qr);tt(this,qr);tt(this,In);tt(this,Bs);this.mutationId=e.mutationId,Me(this,In,e.mutationCache),Me(this,qr,[]),this.state=e.state||RS(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){J(this,qr).includes(e)||(J(this,qr).push(e),this.clearGcTimeout(),J(this,In).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Me(this,qr,J(this,qr).filter(n=>n!==e)),this.scheduleGc(),J(this,In).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){J(this,qr).length||(this.state.status==="pending"?this.scheduleGc():J(this,In).remove(this))}continue(){var e;return((e=J(this,Bs))==null?void 0:e.continue())??this.execute(this.state.variables)}async execute(e){var l,d,m,p,g,y,v,E,C,T,A,N,O,S,_,D,U,z,F,K;const n=()=>{xn(this,Qr,Bi).call(this,{type:"continue"})};Me(this,Bs,U2({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(W,re)=>{xn(this,Qr,Bi).call(this,{type:"failed",failureCount:W,error:re})},onPause:()=>{xn(this,Qr,Bi).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>J(this,In).canRun(this)}));const i=this.state.status==="pending",o=!J(this,Bs).canStart();try{if(i)n();else{xn(this,Qr,Bi).call(this,{type:"pending",variables:e,isPaused:o}),await((d=(l=J(this,In).config).onMutate)==null?void 0:d.call(l,e,this));const re=await((p=(m=this.options).onMutate)==null?void 0:p.call(m,e));re!==this.state.context&&xn(this,Qr,Bi).call(this,{type:"pending",context:re,variables:e,isPaused:o})}const W=await J(this,Bs).start();return await((y=(g=J(this,In).config).onSuccess)==null?void 0:y.call(g,W,e,this.state.context,this)),await((E=(v=this.options).onSuccess)==null?void 0:E.call(v,W,e,this.state.context)),await((T=(C=J(this,In).config).onSettled)==null?void 0:T.call(C,W,null,this.state.variables,this.state.context,this)),await((N=(A=this.options).onSettled)==null?void 0:N.call(A,W,null,e,this.state.context)),xn(this,Qr,Bi).call(this,{type:"success",data:W}),W}catch(W){try{throw await((S=(O=J(this,In).config).onError)==null?void 0:S.call(O,W,e,this.state.context,this)),await((D=(_=this.options).onError)==null?void 0:D.call(_,W,e,this.state.context)),await((z=(U=J(this,In).config).onSettled)==null?void 0:z.call(U,void 0,W,this.state.variables,this.state.context,this)),await((K=(F=this.options).onSettled)==null?void 0:K.call(F,void 0,W,e,this.state.context)),W}finally{xn(this,Qr,Bi).call(this,{type:"error",error:W})}}finally{J(this,In).runNext(this)}}},qr=new WeakMap,In=new WeakMap,Bs=new WeakMap,Qr=new WeakSet,Bi=function(e){const n=i=>{switch(e.type){case"failed":return{...i,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...i,isPaused:!0};case"continue":return{...i,isPaused:!1};case"pending":return{...i,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...i,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...i,data:void 0,error:e.error,failureCount:i.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),On.batch(()=>{J(this,qr).forEach(i=>{i.onMutationUpdate(e)}),J(this,In).notify({mutation:this,type:"updated",action:e})})},em);function RS(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var pi,kr,bl,tm,OS=(tm=class extends Wu{constructor(e={}){super();tt(this,pi);tt(this,kr);tt(this,bl);this.config=e,Me(this,pi,new Set),Me(this,kr,new Map),Me(this,bl,0)}build(e,n,i){const o=new IS({mutationCache:this,mutationId:++Vl(this,bl)._,options:e.defaultMutationOptions(n),state:i});return this.add(o),o}add(e){J(this,pi).add(e);const n=uc(e);if(typeof n=="string"){const i=J(this,kr).get(n);i?i.push(e):J(this,kr).set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(J(this,pi).delete(e)){const n=uc(e);if(typeof n=="string"){const i=J(this,kr).get(n);if(i)if(i.length>1){const o=i.indexOf(e);o!==-1&&i.splice(o,1)}else i[0]===e&&J(this,kr).delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=uc(e);if(typeof n=="string"){const i=J(this,kr).get(n),o=i==null?void 0:i.find(l=>l.state.status==="pending");return!o||o===e}else return!0}runNext(e){var i;const n=uc(e);if(typeof n=="string"){const o=(i=J(this,kr).get(n))==null?void 0:i.find(l=>l!==e&&l.state.isPaused);return(o==null?void 0:o.continue())??Promise.resolve()}else return Promise.resolve()}clear(){On.batch(()=>{J(this,pi).forEach(e=>{this.notify({type:"removed",mutation:e})}),J(this,pi).clear(),J(this,kr).clear()})}getAll(){return Array.from(J(this,pi))}find(e){const n={exact:!0,...e};return this.getAll().find(i=>$p(n,i))}findAll(e={}){return this.getAll().filter(n=>$p(e,n))}notify(e){On.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return On.batch(()=>Promise.all(e.map(n=>n.continue().catch(Rr))))}},pi=new WeakMap,kr=new WeakMap,bl=new WeakMap,tm);function uc(t){var e;return(e=t.options.scope)==null?void 0:e.id}function Xp(t){return{onFetch:(e,n)=>{var y,v,E,C,T;const i=e.options,o=(E=(v=(y=e.fetchOptions)==null?void 0:y.meta)==null?void 0:v.fetchMore)==null?void 0:E.direction,l=((C=e.state.data)==null?void 0:C.pages)||[],d=((T=e.state.data)==null?void 0:T.pageParams)||[];let m={pages:[],pageParams:[]},p=0;const g=async()=>{let A=!1;const N=_=>{Object.defineProperty(_,"signal",{enumerable:!0,get:()=>(e.signal.aborted?A=!0:e.signal.addEventListener("abort",()=>{A=!0}),e.signal)})},O=L2(e.options,e.fetchOptions),S=async(_,D,U)=>{if(A)return Promise.reject();if(D==null&&_.pages.length)return Promise.resolve(_);const F=(()=>{const he={client:e.client,queryKey:e.queryKey,pageParam:D,direction:U?"backward":"forward",meta:e.options.meta};return N(he),he})(),K=await O(F),{maxPages:W}=e.options,re=U?wS:mS;return{pages:re(_.pages,K,W),pageParams:re(_.pageParams,D,W)}};if(o&&l.length){const _=o==="backward",D=_?NS:Yp,U={pages:l,pageParams:d},z=D(i,U);m=await S(U,z,_)}else{const _=t??l.length;do{const D=p===0?d[0]??i.initialPageParam:Yp(i,m);if(p>0&&D==null)break;m=await S(m,D),p++}while(p<_)}return m};e.options.persister?e.fetchFn=()=>{var A,N;return(N=(A=e.options).persister)==null?void 0:N.call(A,g,{client:e.client,queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=g}}}function Yp(t,{pages:e,pageParams:n}){const i=e.length-1;return e.length>0?t.getNextPageParam(e[i],e,n[i],n):void 0}function NS(t,{pages:e,pageParams:n}){var i;return e.length>0?(i=t.getPreviousPageParam)==null?void 0:i.call(t,e[0],e,n[0],n):void 0}var kt,Gi,Ki,$o,Go,Xi,Ko,Xo,nm,kS=(nm=class{constructor(t={}){tt(this,kt);tt(this,Gi);tt(this,Ki);tt(this,$o);tt(this,Go);tt(this,Xi);tt(this,Ko);tt(this,Xo);Me(this,kt,t.queryCache||new TS),Me(this,Gi,t.mutationCache||new OS),Me(this,Ki,t.defaultOptions||{}),Me(this,$o,new Map),Me(this,Go,new Map),Me(this,Xi,0)}mount(){Vl(this,Xi)._++,J(this,Xi)===1&&(Me(this,Ko,B2.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,kt).onFocus())})),Me(this,Xo,ou.subscribe(async t=>{t&&(await this.resumePausedMutations(),J(this,kt).onOnline())})))}unmount(){var t,e;Vl(this,Xi)._--,J(this,Xi)===0&&((t=J(this,Ko))==null||t.call(this),Me(this,Ko,void 0),(e=J(this,Xo))==null||e.call(this),Me(this,Xo,void 0))}isFetching(t){return J(this,kt).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return J(this,Gi).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,kt).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.defaultQueryOptions(t),n=J(this,kt).build(this,e),i=n.state.data;return i===void 0?this.fetchQuery(t):(t.revalidateIfStale&&n.isStaleByTime(sf(e.staleTime,n))&&this.prefetchQuery(e),Promise.resolve(i))}getQueriesData(t){return J(this,kt).findAll(t).map(({queryKey:e,state:n})=>{const i=n.data;return[e,i]})}setQueryData(t,e,n){const i=this.defaultQueryOptions({queryKey:t}),o=J(this,kt).get(i.queryHash),l=o==null?void 0:o.state.data,d=uS(e,l);if(d!==void 0)return J(this,kt).build(this,i).setData(d,{...n,manual:!0})}setQueriesData(t,e,n){return On.batch(()=>J(this,kt).findAll(t).map(({queryKey:i})=>[i,this.setQueryData(i,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=J(this,kt).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=J(this,kt);On.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=J(this,kt);return On.batch(()=>(n.findAll(t).forEach(i=>{i.reset()}),this.refetchQueries({type:"active",...t},e)))}cancelQueries(t,e={}){const n={revert:!0,...e},i=On.batch(()=>J(this,kt).findAll(t).map(o=>o.cancel(n)));return Promise.all(i).then(Rr).catch(Rr)}invalidateQueries(t,e={}){return On.batch(()=>(J(this,kt).findAll(t).forEach(n=>{n.invalidate()}),(t==null?void 0:t.refetchType)==="none"?Promise.resolve():this.refetchQueries({...t,type:(t==null?void 0:t.refetchType)??(t==null?void 0:t.type)??"active"},e)))}refetchQueries(t,e={}){const n={...e,cancelRefetch:e.cancelRefetch??!0},i=On.batch(()=>J(this,kt).findAll(t).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let l=o.fetch(void 0,n);return n.throwOnError||(l=l.catch(Rr)),o.state.fetchStatus==="paused"?Promise.resolve():l}));return Promise.all(i).then(Rr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=J(this,kt).build(this,e);return n.isStaleByTime(sf(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Rr).catch(Rr)}fetchInfiniteQuery(t){return t.behavior=Xp(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Rr).catch(Rr)}ensureInfiniteQueryData(t){return t.behavior=Xp(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ou.isOnline()?J(this,Gi).resumePausedMutations():Promise.resolve()}getQueryCache(){return J(this,kt)}getMutationCache(){return J(this,Gi)}getDefaultOptions(){return J(this,Ki)}setDefaultOptions(t){Me(this,Ki,t)}setQueryDefaults(t,e){J(this,$o).set(pl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...J(this,$o).values()],n={};return e.forEach(i=>{gl(t,i.queryKey)&&Object.assign(n,i.defaultOptions)}),n}setMutationDefaults(t,e){J(this,Go).set(pl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...J(this,Go).values()],n={};return e.forEach(i=>{gl(t,i.mutationKey)&&Object.assign(n,i.defaultOptions)}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...J(this,Ki).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=j0(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.queryFn===U0&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...J(this,Ki).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){J(this,kt).clear(),J(this,Gi).clear()}},kt=new WeakMap,Gi=new WeakMap,Ki=new WeakMap,$o=new WeakMap,Go=new WeakMap,Xi=new WeakMap,Ko=new WeakMap,Xo=new WeakMap,nm),PS=P.createContext(void 0),DS=({client:t,children:e})=>(P.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),B.jsx(PS.Provider,{value:t,children:e}));/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function au(){return au=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},au.apply(this,arguments)}var Qi;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Qi||(Qi={}));const qp="popstate";function MS(t){t===void 0&&(t={});function e(i,o){let{pathname:l,search:d,hash:m}=i.location;return af("",{pathname:l,search:d,hash:m},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(i,o){return typeof o=="string"?o:W2(o)}return BS(e,n,null,t)}function Gn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function V2(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function LS(){return Math.random().toString(36).substr(2,8)}function Qp(t,e){return{usr:t.state,key:t.key,idx:e}}function af(t,e,n,i){return n===void 0&&(n=null),au({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?$u(e):e,{state:n,key:e&&e.key||i||LS()})}function W2(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function $u(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function BS(t,e,n,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:l=!1}=i,d=o.history,m=Qi.Pop,p=null,g=y();g==null&&(g=0,d.replaceState(au({},d.state,{idx:g}),""));function y(){return(d.state||{idx:null}).idx}function v(){m=Qi.Pop;let N=y(),O=N==null?null:N-g;g=N,p&&p({action:m,location:A.location,delta:O})}function E(N,O){m=Qi.Push;let S=af(A.location,N,O);g=y()+1;let _=Qp(S,g),D=A.createHref(S);try{d.pushState(_,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;o.location.assign(D)}l&&p&&p({action:m,location:A.location,delta:1})}function C(N,O){m=Qi.Replace;let S=af(A.location,N,O);g=y();let _=Qp(S,g),D=A.createHref(S);d.replaceState(_,"",D),l&&p&&p({action:m,location:A.location,delta:0})}function T(N){let O=o.location.origin!=="null"?o.location.origin:o.location.href,S=typeof N=="string"?N:W2(N);return S=S.replace(/ $/,"%20"),Gn(O,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,O)}let A={get action(){return m},get location(){return t(o,d)},listen(N){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(qp,v),p=N,()=>{o.removeEventListener(qp,v),p=null}},createHref(N){return e(o,N)},createURL:T,encodeLocation(N){let O=T(N);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:E,replace:C,go(N){return d.go(N)}};return A}var Zp;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Zp||(Zp={}));function FS(t,e,n){return n===void 0&&(n="/"),jS(t,e,n,!1)}function jS(t,e,n,i){let o=typeof e=="string"?$u(e):e,l=G2(o.pathname||"/",n);if(l==null)return null;let d=H2(t);US(d);let m=null;for(let p=0;m==null&&p<d.length;++p){let g=QS(l);m=YS(d[p],g,i)}return m}function H2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let o=(l,d,m)=>{let p={relativePath:m===void 0?l.path||"":m,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};p.relativePath.startsWith("/")&&(Gn(p.relativePath.startsWith(i),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(i.length));let g=jo([i,p.relativePath]),y=n.concat(p);l.children&&l.children.length>0&&(Gn(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),H2(l.children,e,y,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:KS(g,l.index),routesMeta:y})};return t.forEach((l,d)=>{var m;if(l.path===""||!((m=l.path)!=null&&m.includes("?")))o(l,d);else for(let p of $2(l.path))o(l,d,p)}),e}function $2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,o=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let d=$2(i.join("/")),m=[];return m.push(...d.map(p=>p===""?l:[l,p].join("/"))),o&&m.push(...d),m.map(p=>t.startsWith("/")&&p===""?"/":p)}function US(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XS(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const zS=/^:[\w-]+$/,VS=3,WS=2,HS=1,$S=10,GS=-2,Jp=t=>t==="*";function KS(t,e){let n=t.split("/"),i=n.length;return n.some(Jp)&&(i+=GS),e&&(i+=WS),n.filter(o=>!Jp(o)).reduce((o,l)=>o+(zS.test(l)?VS:l===""?HS:$S),i)}function XS(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function YS(t,e,n){let{routesMeta:i}=t,o={},l="/",d=[];for(let m=0;m<i.length;++m){let p=i[m],g=m===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",v=eg({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},y),E=p.route;if(!v&&g&&n&&!i[i.length-1].route.index&&(v=eg({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},y)),!v)return null;Object.assign(o,v.params),d.push({params:o,pathname:jo([l,v.pathname]),pathnameBase:ZS(jo([l,v.pathnameBase])),route:E}),v.pathnameBase!=="/"&&(l=jo([l,v.pathnameBase]))}return d}function eg(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=qS(t.path,t.caseSensitive,t.end),o=e.match(n);if(!o)return null;let l=o[0],d=l.replace(/(.)\/+$/,"$1"),m=o.slice(1);return{params:i.reduce((g,y,v)=>{let{paramName:E,isOptional:C}=y;if(E==="*"){let A=m[v]||"";d=l.slice(0,l.length-A.length).replace(/(.)\/+$/,"$1")}const T=m[v];return C&&!T?g[E]=void 0:g[E]=(T||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:d,pattern:t}}function qS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),V2(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(d,m,p)=>(i.push({paramName:m,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function QS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return V2(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function G2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const jo=t=>t.join("/").replace(/\/\/+/g,"/"),ZS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function JS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const K2=["post","put","patch","delete"];new Set(K2);const e8=["get",...K2];new Set(e8);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lu(){return lu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},lu.apply(this,arguments)}const t8=P.createContext(null),n8=P.createContext(null),X2=P.createContext(null),Gu=P.createContext(null),Ku=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Y2=P.createContext(null);function z0(){return P.useContext(Gu)!=null}function q2(){return z0()||Gn(!1),P.useContext(Gu).location}function r8(t,e){return i8(t,e)}function i8(t,e,n,i){z0()||Gn(!1);let{navigator:o}=P.useContext(X2),{matches:l}=P.useContext(Ku),d=l[l.length-1],m=d?d.params:{};d&&d.pathname;let p=d?d.pathnameBase:"/";d&&d.route;let g=q2(),y;if(e){var v;let N=typeof e=="string"?$u(e):e;p==="/"||(v=N.pathname)!=null&&v.startsWith(p)||Gn(!1),y=N}else y=g;let E=y.pathname||"/",C=E;if(p!=="/"){let N=p.replace(/^\//,"").split("/");C="/"+E.replace(/^\//,"").split("/").slice(N.length).join("/")}let T=FS(t,{pathname:C}),A=c8(T&&T.map(N=>Object.assign({},N,{params:Object.assign({},m,N.params),pathname:jo([p,o.encodeLocation?o.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:jo([p,o.encodeLocation?o.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,i);return e&&A?P.createElement(Gu.Provider,{value:{location:lu({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:Qi.Pop}},A):A}function s8(){let t=f8(),e=JS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:o},n):null,null)}const o8=P.createElement(s8,null);class a8 extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Ku.Provider,{value:this.props.routeContext},P.createElement(Y2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function l8(t){let{routeContext:e,match:n,children:i}=t,o=P.useContext(t8);return o&&o.static&&o.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Ku.Provider,{value:e},i)}function c8(t,e,n,i){var o;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let d=t,m=(o=n)==null?void 0:o.errors;if(m!=null){let y=d.findIndex(v=>v.route.id&&(m==null?void 0:m[v.route.id])!==void 0);y>=0||Gn(!1),d=d.slice(0,Math.min(d.length,y+1))}let p=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<d.length;y++){let v=d[y];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(g=y),v.route.id){let{loaderData:E,errors:C}=n,T=v.route.loader&&E[v.route.id]===void 0&&(!C||C[v.route.id]===void 0);if(v.route.lazy||T){p=!0,g>=0?d=d.slice(0,g+1):d=[d[0]];break}}}return d.reduceRight((y,v,E)=>{let C,T=!1,A=null,N=null;n&&(C=m&&v.route.id?m[v.route.id]:void 0,A=v.route.errorElement||o8,p&&(g<0&&E===0?(T=!0,N=null):g===E&&(T=!0,N=v.route.hydrateFallbackElement||null)));let O=e.concat(d.slice(0,E+1)),S=()=>{let _;return C?_=A:T?_=N:v.route.Component?_=P.createElement(v.route.Component,null):v.route.element?_=v.route.element:_=y,P.createElement(l8,{match:v,routeContext:{outlet:y,matches:O,isDataRoute:n!=null},children:_})};return n&&(v.route.ErrorBoundary||v.route.errorElement||E===0)?P.createElement(a8,{location:n.location,revalidation:n.revalidation,component:A,error:C,children:S(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):S()},null)}var lf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(lf||{});function u8(t){let e=P.useContext(n8);return e||Gn(!1),e}function d8(t){let e=P.useContext(Ku);return e||Gn(!1),e}function h8(t){let e=d8(),n=e.matches[e.matches.length-1];return n.route.id||Gn(!1),n.route.id}function f8(){var t;let e=P.useContext(Y2),n=u8(lf.UseRouteError),i=h8(lf.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function p8(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function cf(t){Gn(!1)}function g8(t){let{basename:e="/",children:n=null,location:i,navigationType:o=Qi.Pop,navigator:l,static:d=!1,future:m}=t;z0()&&Gn(!1);let p=e.replace(/^\/*/,"/"),g=P.useMemo(()=>({basename:p,navigator:l,static:d,future:lu({v7_relativeSplatPath:!1},m)}),[p,m,l,d]);typeof i=="string"&&(i=$u(i));let{pathname:y="/",search:v="",hash:E="",state:C=null,key:T="default"}=i,A=P.useMemo(()=>{let N=G2(y,p);return N==null?null:{location:{pathname:N,search:v,hash:E,state:C,key:T},navigationType:o}},[p,y,v,E,C,T,o]);return A==null?null:P.createElement(X2.Provider,{value:g},P.createElement(Gu.Provider,{children:n,value:A}))}function m8(t){let{children:e,location:n}=t;return r8(uf(e),n)}new Promise(()=>{});function uf(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(i,o)=>{if(!P.isValidElement(i))return;let l=[...e,o];if(i.type===P.Fragment){n.push.apply(n,uf(i.props.children,l));return}i.type!==cf&&Gn(!1),!i.props.index||!i.props.children||Gn(!1);let d={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(d.children=uf(i.props.children,l)),n.push(d)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const w8="6";try{window.__reactRouterVersion=w8}catch{}const y8="startTransition",tg=Nf[y8];function x8(t){let{basename:e,children:n,future:i,window:o}=t,l=P.useRef();l.current==null&&(l.current=MS({window:o,v5Compat:!0}));let d=l.current,[m,p]=P.useState({action:d.action,location:d.location}),{v7_startTransition:g}=i||{},y=P.useCallback(v=>{g&&tg?tg(()=>p(v)):p(v)},[p,g]);return P.useLayoutEffect(()=>d.listen(y),[d,y]),P.useEffect(()=>p8(i),[i]),P.createElement(g8,{basename:e,children:n,location:m.location,navigationType:m.action,navigator:d,future:i})}var ng;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ng||(ng={}));var rg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(rg||(rg={}));const v8=$y("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Jr=P.forwardRef(({className:t,variant:e,size:n,asChild:i=!1,...o},l)=>{const d=i?tb:"button";return B.jsx(d,{className:_n(v8({variant:e,size:n,className:t})),ref:l,...o})});Jr.displayName="Button";var E8=Object.defineProperty,C8=Object.defineProperties,b8=Object.getOwnPropertyDescriptors,cu=Object.getOwnPropertySymbols,Q2=Object.prototype.hasOwnProperty,Z2=Object.prototype.propertyIsEnumerable,ig=(t,e,n)=>e in t?E8(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,A8=(t,e)=>{for(var n in e||(e={}))Q2.call(e,n)&&ig(t,n,e[n]);if(cu)for(var n of cu(e))Z2.call(e,n)&&ig(t,n,e[n]);return t},_8=(t,e)=>C8(t,b8(e)),S8=(t,e)=>{var n={};for(var i in t)Q2.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&cu)for(var i of cu(t))e.indexOf(i)<0&&Z2.call(t,i)&&(n[i]=t[i]);return n};function T8(t){let e=setTimeout(t,0),n=setTimeout(t,10),i=setTimeout(t,50);return[e,n,i]}function I8(t){let e=P.useRef();return P.useEffect(()=>{e.current=t}),e.current}var R8=18,J2=40,O8=`${J2}px`,N8=["[data-lastpass-icon-root]","com-1password-button","[data-dashlanecreated]",'[style$="2147483647 !important;"]'].join(",");function k8({containerRef:t,inputRef:e,pushPasswordManagerStrategy:n,isFocused:i}){let[o,l]=P.useState(!1),[d,m]=P.useState(!1),[p,g]=P.useState(!1),y=P.useMemo(()=>n==="none"?!1:(n==="increase-width"||n==="experimental-no-flickering")&&o&&d,[o,d,n]),v=P.useCallback(()=>{let E=t.current,C=e.current;if(!E||!C||p||n==="none")return;let T=E,A=T.getBoundingClientRect().left+T.offsetWidth,N=T.getBoundingClientRect().top+T.offsetHeight/2,O=A-R8,S=N;document.querySelectorAll(N8).length===0&&document.elementFromPoint(O,S)===E||(l(!0),g(!0))},[t,e,p,n]);return P.useEffect(()=>{let E=t.current;if(!E||n==="none")return;function C(){let A=window.innerWidth-E.getBoundingClientRect().right;m(A>=J2)}C();let T=setInterval(C,1e3);return()=>{clearInterval(T)}},[t,n]),P.useEffect(()=>{let E=i||document.activeElement===e.current;if(n==="none"||!E)return;let C=setTimeout(v,0),T=setTimeout(v,2e3),A=setTimeout(v,5e3),N=setTimeout(()=>{g(!0)},6e3);return()=>{clearTimeout(C),clearTimeout(T),clearTimeout(A),clearTimeout(N)}},[e,i,n,v]),{hasPWMBadge:o,willPushPWMBadge:y,PWM_BADGE_SPACE_WIDTH:O8}}var ex=P.createContext({}),tx=P.forwardRef((t,e)=>{var n=t,{value:i,onChange:o,maxLength:l,textAlign:d="left",pattern:m,placeholder:p,inputMode:g="numeric",onComplete:y,pushPasswordManagerStrategy:v="increase-width",pasteTransformer:E,containerClassName:C,noScriptCSSFallback:T=P8,render:A,children:N}=n,O=S8(n,["value","onChange","maxLength","textAlign","pattern","placeholder","inputMode","onComplete","pushPasswordManagerStrategy","pasteTransformer","containerClassName","noScriptCSSFallback","render","children"]),S,_,D,U,z;let[F,K]=P.useState(typeof O.defaultValue=="string"?O.defaultValue:""),W=i??F,re=I8(W),he=P.useCallback(_e=>{o==null||o(_e),K(_e)},[o]),Q=P.useMemo(()=>m?typeof m=="string"?new RegExp(m):m:null,[m]),ce=P.useRef(null),te=P.useRef(null),H=P.useRef({value:W,onChange:he,isIOS:typeof window<"u"&&((_=(S=window==null?void 0:window.CSS)==null?void 0:S.supports)==null?void 0:_.call(S,"-webkit-touch-callout","none"))}),pe=P.useRef({prev:[(D=ce.current)==null?void 0:D.selectionStart,(U=ce.current)==null?void 0:U.selectionEnd,(z=ce.current)==null?void 0:z.selectionDirection]});P.useImperativeHandle(e,()=>ce.current,[]),P.useEffect(()=>{let _e=ce.current,Ie=te.current;if(!_e||!Ie)return;H.current.value!==_e.value&&H.current.onChange(_e.value),pe.current.prev=[_e.selectionStart,_e.selectionEnd,_e.selectionDirection];function ut(){if(document.activeElement!==_e){fe(null),Ee(null);return}let ve=_e.selectionStart,Lt=_e.selectionEnd,ge=_e.selectionDirection,Wt=_e.maxLength,Jt=_e.value,Bt=pe.current.prev,Dn=-1,Ye=-1,on;if(Jt.length!==0&&ve!==null&&Lt!==null){let Ti=ve===Lt,Ys=ve===Jt.length&&Jt.length<Wt;if(Ti&&!Ys){let Je=ve;if(Je===0)Dn=0,Ye=1,on="forward";else if(Je===Wt)Dn=Je-1,Ye=Je,on="backward";else if(Wt>1&&Jt.length>1){let le=0;if(Bt[0]!==null&&Bt[1]!==null){on=Je<Bt[1]?"backward":"forward";let vt=Bt[0]===Bt[1]&&Bt[0]<Wt;on==="backward"&&!vt&&(le=-1)}Dn=le+Je,Ye=le+Je+1}}Dn!==-1&&Ye!==-1&&Dn!==Ye&&ce.current.setSelectionRange(Dn,Ye,on)}let Xn=Dn!==-1?Dn:ve,Ut=Ye!==-1?Ye:Lt,oi=on??ge;fe(Xn),Ee(Ut),pe.current.prev=[Xn,Ut,oi]}if(document.addEventListener("selectionchange",ut,{capture:!0}),ut(),document.activeElement===_e&&de(!0),!document.getElementById("input-otp-style")){let ve=document.createElement("style");if(ve.id="input-otp-style",document.head.appendChild(ve),ve.sheet){let Lt="background: transparent !important; color: transparent !important; border-color: transparent !important; opacity: 0 !important; box-shadow: none !important; -webkit-box-shadow: none !important; -webkit-text-fill-color: transparent !important;";Oa(ve.sheet,"[data-input-otp]::selection { background: transparent !important; color: transparent !important; }"),Oa(ve.sheet,`[data-input-otp]:autofill { ${Lt} }`),Oa(ve.sheet,`[data-input-otp]:-webkit-autofill { ${Lt} }`),Oa(ve.sheet,"@supports (-webkit-touch-callout: none) { [data-input-otp] { letter-spacing: -.6em !important; font-weight: 100 !important; font-stretch: ultra-condensed; font-optical-sizing: none !important; left: -1px !important; right: 1px !important; } }"),Oa(ve.sheet,"[data-input-otp] + * { pointer-events: all !important; }")}}let Ke=()=>{Ie&&Ie.style.setProperty("--root-height",`${_e.clientHeight}px`)};Ke();let De=new ResizeObserver(Ke);return De.observe(_e),()=>{document.removeEventListener("selectionchange",ut,{capture:!0}),De.disconnect()}},[]);let[oe,q]=P.useState(!1),[Z,de]=P.useState(!1),[Ae,fe]=P.useState(null),[Te,Ee]=P.useState(null);P.useEffect(()=>{T8(()=>{var _e,Ie,ut,Ke;(_e=ce.current)==null||_e.dispatchEvent(new Event("input"));let De=(Ie=ce.current)==null?void 0:Ie.selectionStart,ve=(ut=ce.current)==null?void 0:ut.selectionEnd,Lt=(Ke=ce.current)==null?void 0:Ke.selectionDirection;De!==null&&ve!==null&&(fe(De),Ee(ve),pe.current.prev=[De,ve,Lt])})},[W,Z]),P.useEffect(()=>{re!==void 0&&W!==re&&re.length<l&&W.length===l&&(y==null||y(W))},[l,y,re,W]);let nt=k8({containerRef:te,inputRef:ce,pushPasswordManagerStrategy:v,isFocused:Z}),me=P.useCallback(_e=>{let Ie=_e.currentTarget.value.slice(0,l);if(Ie.length>0&&Q&&!Q.test(Ie)){_e.preventDefault();return}typeof re=="string"&&Ie.length<re.length&&document.dispatchEvent(new Event("selectionchange")),he(Ie)},[l,he,re,Q]),Ve=P.useCallback(()=>{var _e;if(ce.current){let Ie=Math.min(ce.current.value.length,l-1),ut=ce.current.value.length;(_e=ce.current)==null||_e.setSelectionRange(Ie,ut),fe(Ie),Ee(ut)}de(!0)},[l]),ot=P.useCallback(_e=>{var Ie,ut;let Ke=ce.current;if(!E&&(!H.current.isIOS||!_e.clipboardData||!Ke))return;let De=_e.clipboardData.getData("text/plain"),ve=E?E(De):De;_e.preventDefault();let Lt=(Ie=ce.current)==null?void 0:Ie.selectionStart,ge=(ut=ce.current)==null?void 0:ut.selectionEnd,Wt=(Lt!==ge?W.slice(0,Lt)+ve+W.slice(ge):W.slice(0,Lt)+ve+W.slice(Lt)).slice(0,l);if(Wt.length>0&&Q&&!Q.test(Wt))return;Ke.value=Wt,he(Wt);let Jt=Math.min(Wt.length,l-1),Bt=Wt.length;Ke.setSelectionRange(Jt,Bt),fe(Jt),Ee(Bt)},[l,he,Q,W]),gn=P.useMemo(()=>({position:"relative",cursor:O.disabled?"default":"text",userSelect:"none",WebkitUserSelect:"none",pointerEvents:"none"}),[O.disabled]),mn=P.useMemo(()=>({position:"absolute",inset:0,width:nt.willPushPWMBadge?`calc(100% + ${nt.PWM_BADGE_SPACE_WIDTH})`:"100%",clipPath:nt.willPushPWMBadge?`inset(0 ${nt.PWM_BADGE_SPACE_WIDTH} 0 0)`:void 0,height:"100%",display:"flex",textAlign:d,opacity:"1",color:"transparent",pointerEvents:"all",background:"transparent",caretColor:"transparent",border:"0 solid transparent",outline:"0 solid transparent",boxShadow:"none",lineHeight:"1",letterSpacing:"-.5em",fontSize:"var(--root-height)",fontFamily:"monospace",fontVariantNumeric:"tabular-nums"}),[nt.PWM_BADGE_SPACE_WIDTH,nt.willPushPWMBadge,d]),pt=P.useMemo(()=>P.createElement("input",_8(A8({autoComplete:O.autoComplete||"one-time-code"},O),{"data-input-otp":!0,"data-input-otp-placeholder-shown":W.length===0||void 0,"data-input-otp-mss":Ae,"data-input-otp-mse":Te,inputMode:g,pattern:Q==null?void 0:Q.source,"aria-placeholder":p,style:mn,maxLength:l,value:W,ref:ce,onPaste:_e=>{var Ie;ot(_e),(Ie=O.onPaste)==null||Ie.call(O,_e)},onChange:me,onMouseOver:_e=>{var Ie;q(!0),(Ie=O.onMouseOver)==null||Ie.call(O,_e)},onMouseLeave:_e=>{var Ie;q(!1),(Ie=O.onMouseLeave)==null||Ie.call(O,_e)},onFocus:_e=>{var Ie;Ve(),(Ie=O.onFocus)==null||Ie.call(O,_e)},onBlur:_e=>{var Ie;de(!1),(Ie=O.onBlur)==null||Ie.call(O,_e)}})),[me,Ve,ot,g,mn,l,Te,Ae,O,Q==null?void 0:Q.source,W]),Sn=P.useMemo(()=>({slots:Array.from({length:l}).map((_e,Ie)=>{var ut;let Ke=Z&&Ae!==null&&Te!==null&&(Ae===Te&&Ie===Ae||Ie>=Ae&&Ie<Te),De=W[Ie]!==void 0?W[Ie]:null,ve=W[0]!==void 0?null:(ut=p==null?void 0:p[Ie])!=null?ut:null;return{char:De,placeholderChar:ve,isActive:Ke,hasFakeCaret:Ke&&De===null}}),isFocused:Z,isHovering:!O.disabled&&oe}),[Z,oe,l,Te,Ae,O.disabled,W]),Le=P.useMemo(()=>A?A(Sn):P.createElement(ex.Provider,{value:Sn},N),[N,Sn,A]);return P.createElement(P.Fragment,null,T!==null&&P.createElement("noscript",null,P.createElement("style",null,T)),P.createElement("div",{ref:te,"data-input-otp-container":!0,style:gn,className:C},Le,P.createElement("div",{style:{position:"absolute",inset:0,pointerEvents:"none"}},pt)))});tx.displayName="Input";function Oa(t,e){try{t.insertRule(e)}catch{console.error("input-otp could not insert CSS rule:",e)}}var P8=`
[data-input-otp] {
  --nojs-bg: white !important;
  --nojs-fg: black !important;

  background-color: var(--nojs-bg) !important;
  color: var(--nojs-fg) !important;
  caret-color: var(--nojs-fg) !important;
  letter-spacing: .25em !important;
  text-align: center !important;
  border: 1px solid var(--nojs-fg) !important;
  border-radius: 4px !important;
  width: 100% !important;
}
@media (prefers-color-scheme: dark) {
  [data-input-otp] {
    --nojs-bg: black !important;
    --nojs-fg: white !important;
  }
}`;const nx=P.forwardRef(({className:t,containerClassName:e,...n},i)=>B.jsx(tx,{ref:i,containerClassName:_n("flex items-center gap-2 has-[:disabled]:opacity-50",e),className:_n("disabled:cursor-not-allowed",t),...n}));nx.displayName="InputOTP";const rx=P.forwardRef(({className:t,...e},n)=>B.jsx("div",{ref:n,className:_n("flex items-center",t),...e}));rx.displayName="InputOTPGroup";const As=P.forwardRef(({index:t,className:e,...n},i)=>{const o=P.useContext(ex),{char:l,hasFakeCaret:d,isActive:m}=o.slots[t];return B.jsxs("div",{ref:i,className:_n("relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md",m&&"z-10 ring-2 ring-ring ring-offset-background",e),...n,children:[l,d&&B.jsx("div",{className:"pointer-events-none absolute inset-0 flex items-center justify-center",children:B.jsx("div",{className:"animate-caret-blink h-4 w-px bg-foreground duration-1000"})})]})});As.displayName="InputOTPSlot";const D8=P.forwardRef(({...t},e)=>B.jsx("div",{ref:e,role:"separator",...t,children:B.jsx(t3,{})}));D8.displayName="InputOTPSeparator";async function sg(){const t=await crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"]);return{publicKey:t.publicKey,privateKey:t.privateKey}}async function og(t){const e=await crypto.subtle.exportKey("jwk",t);return btoa(JSON.stringify(e))}async function ag(t){const e=JSON.parse(atob(t));return crypto.subtle.importKey("jwk",e,{name:"ECDH",namedCurve:"P-256"},!0,[])}async function lg(t,e){return crypto.subtle.deriveKey({name:"ECDH",public:e},t,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function ix(t,e){const n=crypto.getRandomValues(new Uint8Array(12)),i=new ArrayBuffer(e.length);new Uint8Array(i).set(e);const o=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,i);return{iv:n,encrypted:new Uint8Array(o)}}async function sx(t,e,n){const i=new ArrayBuffer(e.length);new Uint8Array(i).set(e);const o=new ArrayBuffer(n.length);new Uint8Array(o).set(n);const l=await crypto.subtle.decrypt({name:"AES-GCM",iv:i},t,o);return new Uint8Array(l)}async function cg(t,e){const i=new TextEncoder().encode(e),{iv:o,encrypted:l}=await ix(t,i),d=new Uint8Array(o.length+l.length);return d.set(new Uint8Array(o)),d.set(new Uint8Array(l),o.length),btoa(String.fromCharCode(...d))}async function ug(t,e){const n=new Uint8Array(atob(e).split("").map(m=>m.charCodeAt(0))),i=n.slice(0,12),o=n.slice(12),l=await sx(t,i,o);return new TextDecoder().decode(l)}const dg=16384;class M8{constructor(){br(this,"peerConnection",null);br(this,"dataChannel",null);br(this,"messageHandlers",new Set);br(this,"fileHandlers",new Set);br(this,"receivedChunks",new Map);br(this,"receivedMeta",new Map);br(this,"keyPair",null);br(this,"sharedKey",null);br(this,"isEncrypted",!1);br(this,"config",{iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478"},{urls:"turn:global.relay.metered.ca:80",username:"e8dd65b92f6ec01bf7e7c5a3",credential:"uWdEMvEiz+qsS3V2"},{urls:"turn:global.relay.metered.ca:80?transport=tcp",username:"e8dd65b92f6ec01bf7e7c5a3",credential:"uWdEMvEiz+qsS3V2"},{urls:"turn:global.relay.metered.ca:443",username:"e8dd65b92f6ec01bf7e7c5a3",credential:"uWdEMvEiz+qsS3V2"},{urls:"turns:global.relay.metered.ca:443?transport=tcp",username:"e8dd65b92f6ec01bf7e7c5a3",credential:"uWdEMvEiz+qsS3V2"}],iceCandidatePoolSize:10,iceTransportPolicy:"all"})}onMessage(e){return this.messageHandlers.add(e),()=>this.messageHandlers.delete(e)}onFile(e){return this.fileHandlers.add(e),()=>this.fileHandlers.delete(e)}emit(e){this.messageHandlers.forEach(n=>n(e))}emitFile(e){this.fileHandlers.forEach(n=>n(e))}async createOffer(){this.keyPair=await sg();const e=await og(this.keyPair.publicKey);this.peerConnection=new RTCPeerConnection(this.config),this.setupConnectionHandlers(),this.dataChannel=this.peerConnection.createDataChannel("fileTransfer",{ordered:!0}),this.setupDataChannelHandlers(this.dataChannel);const n=await this.peerConnection.createOffer();await this.peerConnection.setLocalDescription(n),await this.waitForIceGathering();const i=this.peerConnection.localDescription;return{offer:btoa(JSON.stringify(i)),publicKey:e}}async handleOffer(e,n){const i=JSON.parse(atob(e));this.keyPair=await sg();const o=await og(this.keyPair.publicKey),l=await ag(n);this.sharedKey=await lg(this.keyPair.privateKey,l),this.isEncrypted=!0,this.peerConnection=new RTCPeerConnection(this.config),this.setupConnectionHandlers(),this.peerConnection.ondatachannel=p=>{this.dataChannel=p.channel,this.setupDataChannelHandlers(this.dataChannel)},await this.peerConnection.setRemoteDescription(i);const d=await this.peerConnection.createAnswer();await this.peerConnection.setLocalDescription(d),await this.waitForIceGathering();const m=this.peerConnection.localDescription;return{answer:btoa(JSON.stringify(m)),publicKey:o}}async handleAnswer(e,n){var o;const i=JSON.parse(atob(e));if(this.keyPair){const l=await ag(n);this.sharedKey=await lg(this.keyPair.privateKey,l),this.isEncrypted=!0}await((o=this.peerConnection)==null?void 0:o.setRemoteDescription(i))}waitForIceGathering(e=4e3){return new Promise(n=>{if(!this.peerConnection||this.peerConnection.iceGatheringState==="complete")return n();const i=()=>{var o,l;((o=this.peerConnection)==null?void 0:o.iceGatheringState)==="complete"&&((l=this.peerConnection)==null||l.removeEventListener("icegatheringstatechange",i),n())};this.peerConnection.addEventListener("icegatheringstatechange",i),setTimeout(()=>{var o;(o=this.peerConnection)==null||o.removeEventListener("icegatheringstatechange",i),n()},e)})}setupConnectionHandlers(){this.peerConnection&&(this.peerConnection.onicegatheringstatechange=()=>{var e;console.log("ICE gathering state:",(e=this.peerConnection)==null?void 0:e.iceGatheringState)},this.peerConnection.onicecandidate=e=>{e.candidate&&console.log("ICE candidate type:",e.candidate.type,"protocol:",e.candidate.protocol)},this.peerConnection.onicecandidateerror=e=>{e.errorCode!==701&&console.warn("ICE candidate error:",e.errorCode,e.errorText)},this.peerConnection.oniceconnectionstatechange=()=>{var n;const e=(n=this.peerConnection)==null?void 0:n.iceConnectionState;console.log("ICE connection state:",e),this.emit({type:"connectionState",state:e}),(e==="disconnected"||e==="failed")&&(console.log("Attempting ICE restart..."),this.attemptIceRestart())},this.peerConnection.onconnectionstatechange=()=>{var n;const e=(n=this.peerConnection)==null?void 0:n.connectionState;console.log("Connection state:",e),this.emit({type:"connectionState",state:e})})}async attemptIceRestart(){if(this.peerConnection)try{const e=await this.peerConnection.createOffer({iceRestart:!0});await this.peerConnection.setLocalDescription(e),console.log("ICE restart initiated")}catch(e){console.error("ICE restart failed:",e)}}setupDataChannelHandlers(e){e.binaryType="arraybuffer",e.onopen=()=>{console.log("Data channel opened"),this.emit({type:"channelOpen"})},e.onclose=()=>{console.log("Data channel closed"),this.emit({type:"channelClose"})},e.onmessage=n=>{this.handleIncomingMessage(n.data)},e.onerror=n=>{console.error("Data channel error:",n),this.emit({type:"error",error:n})}}async handleIncomingMessage(e){if(typeof e=="string"){let n=JSON.parse(e);if(n.encrypted&&this.sharedKey)try{n.type==="file-meta"&&(n.name=await ug(this.sharedKey,n.name),n.fileType=await ug(this.sharedKey,n.fileType))}catch(i){console.error("Decryption error:",i)}if(n.type==="file-meta")this.receivedMeta.set(n.id,{name:n.name,size:n.size,type:n.fileType}),this.receivedChunks.set(n.id,[]),this.emitFile({id:n.id,name:n.name,size:n.size,type:n.fileType,progress:0,status:"transferring"});else if(n.type==="file-complete"){const i=this.receivedChunks.get(n.id),o=this.receivedMeta.get(n.id);if(i&&o){const l=i.map(m=>m.buffer),d=new Blob(l,{type:o.type});this.emitFile({id:n.id,name:o.name,size:o.size,type:o.type,progress:100,status:"completed",data:d}),this.receivedChunks.delete(n.id),this.receivedMeta.delete(n.id)}}else this.emit(n)}else{const i=new DataView(e).getUint8(0),l=new TextDecoder().decode(new Uint8Array(e,1,i));let d;if(this.isEncrypted&&this.sharedKey){const g=new Uint8Array(e,1+i,12),y=new Uint8Array(e,1+i+12);try{d=await sx(this.sharedKey,g,y)}catch(v){console.error("Chunk decryption error:",v);return}}else d=new Uint8Array(e,1+i);const m=this.receivedChunks.get(l),p=this.receivedMeta.get(l);if(m&&p){m.push(d);const g=m.reduce((v,E)=>v+E.length,0),y=Math.round(g/p.size*100);this.emitFile({id:l,name:p.name,size:p.size,type:p.type,progress:y,status:"transferring"})}}}async sendFile(e){if(!this.dataChannel||this.dataChannel.readyState!=="open")throw new Error("Data channel not ready");const n=crypto.randomUUID(),i={type:"file-meta",id:n,name:e.name,size:e.size,fileType:e.type,encrypted:this.isEncrypted};this.isEncrypted&&this.sharedKey&&(i.name=await cg(this.sharedKey,e.name),i.fileType=await cg(this.sharedKey,e.type)),this.dataChannel.send(JSON.stringify(i));const o=await e.arrayBuffer(),l=new Uint8Array(o),d=new TextEncoder().encode(n);let m=0;for(;m<l.length;){const p=l.slice(m,m+dg);let g;if(this.isEncrypted&&this.sharedKey){const{iv:E,encrypted:C}=await ix(this.sharedKey,p);g=new Uint8Array(1+d.length+12+C.length),g[0]=d.length,g.set(d,1),g.set(E,1+d.length),g.set(C,1+d.length+12)}else g=new Uint8Array(1+d.length+p.length),g[0]=d.length,g.set(d,1),g.set(p,1+d.length);for(;this.dataChannel.bufferedAmount>1024*1024;)await new Promise(E=>setTimeout(E,10));const y=new ArrayBuffer(g.length);new Uint8Array(y).set(g),this.dataChannel.send(y),m+=dg;const v=Math.round(m/l.length*100);this.emitFile({id:n,name:e.name,size:e.size,type:e.type,progress:Math.min(v,100),status:"transferring"})}return this.dataChannel.send(JSON.stringify({type:"file-complete",id:n})),this.emitFile({id:n,name:e.name,size:e.size,type:e.type,progress:100,status:"completed"}),n}isConnected(){var e;return((e=this.dataChannel)==null?void 0:e.readyState)==="open"}isEncryptionEnabled(){return this.isEncrypted}disconnect(){var e,n;(e=this.dataChannel)==null||e.close(),(n=this.peerConnection)==null||n.close(),this.dataChannel=null,this.peerConnection=null,this.receivedChunks.clear(),this.receivedMeta.clear(),this.keyPair=null,this.sharedKey=null,this.isEncrypted=!1}}const gi=new M8;function Xu(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(t);o<i.length;o++)e.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(t,i[o])&&(n[i[o]]=t[i[o]]);return n}function L8(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function m(y){try{g(i.next(y))}catch(v){d(v)}}function p(y){try{g(i.throw(y))}catch(v){d(v)}}function g(y){y.done?l(y.value):o(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})}const B8=t=>t?(...e)=>t(...e):(...e)=>fetch(...e);class V0 extends Error{constructor(e,n="FunctionsError",i){super(e),this.name=n,this.context=i}}class F8 extends V0{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class hg extends V0{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class fg extends V0{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var df;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(df||(df={}));class j8{constructor(e,{headers:n={},customFetch:i,region:o=df.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=B8(i)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return L8(this,arguments,void 0,function*(n,i={}){var o;let l,d;try{const{headers:m,method:p,body:g,signal:y,timeout:v}=i;let E={},{region:C}=i;C||(C=this.region);const T=new URL(`${this.url}/${n}`);C&&C!=="any"&&(E["x-region"]=C,T.searchParams.set("forceFunctionRegion",C));let A;g&&(m&&!Object.prototype.hasOwnProperty.call(m,"Content-Type")||!m)?typeof Blob<"u"&&g instanceof Blob||g instanceof ArrayBuffer?(E["Content-Type"]="application/octet-stream",A=g):typeof g=="string"?(E["Content-Type"]="text/plain",A=g):typeof FormData<"u"&&g instanceof FormData?A=g:(E["Content-Type"]="application/json",A=JSON.stringify(g)):A=g;let N=y;v&&(d=new AbortController,l=setTimeout(()=>d.abort(),v),y?(N=d.signal,y.addEventListener("abort",()=>d.abort())):N=d.signal);const O=yield this.fetch(T.toString(),{method:p||"POST",headers:Object.assign(Object.assign(Object.assign({},E),this.headers),m),body:A,signal:N}).catch(U=>{throw new F8(U)}),S=O.headers.get("x-relay-error");if(S&&S==="true")throw new hg(O);if(!O.ok)throw new fg(O);let _=((o=O.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),D;return _==="application/json"?D=yield O.json():_==="application/octet-stream"||_==="application/pdf"?D=yield O.blob():_==="text/event-stream"?D=O:_==="multipart/form-data"?D=yield O.formData():D=yield O.text(),{data:D,error:null,response:O}}catch(m){return{data:null,error:m,response:m instanceof fg||m instanceof hg?m.context:void 0}}finally{l&&clearTimeout(l)}})}}var U8=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}},z8=class{constructor(t){var e,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(e=t.shouldThrowOnError)!==null&&e!==void 0?e:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=new Headers(this.headers),this.headers.set(t,e),this}then(t,e){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const i=this.fetch;let o=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{let d=null,m=null,p=null,g=l.status,y=l.statusText;if(l.ok){var v,E;if(n.method!=="HEAD"){var C;const O=await l.text();O===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((C=n.headers.get("Accept"))===null||C===void 0)&&C.includes("application/vnd.pgrst.plan+text"))?m=O:m=JSON.parse(O))}const A=(v=n.headers.get("Prefer"))===null||v===void 0?void 0:v.match(/count=(exact|planned|estimated)/),N=(E=l.headers.get("content-range"))===null||E===void 0?void 0:E.split("/");A&&N&&N.length>1&&(p=parseInt(N[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(m)&&(m.length>1?(d={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,p=null,g=406,y="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{var T;const A=await l.text();try{d=JSON.parse(A),Array.isArray(d)&&l.status===404&&(m=[],d=null,g=200,y="OK")}catch{l.status===404&&A===""?(g=204,y="No Content"):d={message:A}}if(d&&n.isMaybeSingle&&(!(d==null||(T=d.details)===null||T===void 0)&&T.includes("0 rows"))&&(d=null,g=200,y="OK"),d&&n.shouldThrowOnError)throw new U8(d)}return{error:d,data:m,count:p,status:g,statusText:y}});return this.shouldThrowOnError||(o=o.catch(l=>{var d;let m="";const p=l==null?void 0:l.cause;if(p){var g,y,v,E;const T=(g=p==null?void 0:p.message)!==null&&g!==void 0?g:"",A=(y=p==null?void 0:p.code)!==null&&y!==void 0?y:"";m=`${(v=l==null?void 0:l.name)!==null&&v!==void 0?v:"FetchError"}: ${l==null?void 0:l.message}`,m+=`

Caused by: ${(E=p==null?void 0:p.name)!==null&&E!==void 0?E:"Error"}: ${T}`,A&&(m+=` (${A})`),p!=null&&p.stack&&(m+=`
${p.stack}`)}else{var C;m=(C=l==null?void 0:l.stack)!==null&&C!==void 0?C:""}return{error:{message:`${(d=l==null?void 0:l.name)!==null&&d!==void 0?d:"FetchError"}: ${l==null?void 0:l.message}`,details:m,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),o.then(t,e)}returns(){return this}overrideTypes(){return this}},V8=class extends z8{select(t){let e=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.order`:"order",d=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${d?`${d},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){const o=typeof i>"u"?"offset":`${i}.offset`,l=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(o,`${t}`),this.url.searchParams.set(l,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:o=!1,format:l="text"}={}){var d;const m=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,o?"wal":null].filter(Boolean).join("|"),p=(d=this.headers.get("Accept"))!==null&&d!==void 0?d:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${p}"; options=${m};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};const pg=new RegExp("[,()]");var fo=class extends V8{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}regexMatch(t,e){return this.url.searchParams.append(t,`match.${e}`),this}regexIMatch(t,e){return this.url.searchParams.append(t,`imatch.${e}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}isDistinct(t,e){return this.url.searchParams.append(t,`isdistinct.${e}`),this}in(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&pg.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}notIn(t,e){const n=Array.from(new Set(e)).map(i=>typeof i=="string"&&pg.test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`not.in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let o="";i==="plain"?o="pl":i==="phrase"?o="ph":i==="websearch"&&(o="w");const l=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${o}fts${l}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}},W8=class{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(e),this.schema=n,this.fetch=i}select(t,e){const{head:n=!1,count:i}=e??{},o=n?"HEAD":"GET";let l=!1;const d=(t??"*").split("").map(m=>/\s/.test(m)&&!l?"":(m==='"'&&(l=!l),m)).join("");return this.url.searchParams.set("select",d),i&&this.headers.append("Prefer",`count=${i}`),new fo({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:e,defaultToNull:n=!0}={}){var i;const o="POST";if(e&&this.headers.append("Prefer",`count=${e}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((d,m)=>d.concat(Object.keys(m)),[]);if(l.length>0){const d=[...new Set(l)].map(m=>`"${m}"`);this.url.searchParams.set("columns",d.join(","))}}return new fo({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:o=!0}={}){var l;const d="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),e!==void 0&&this.url.searchParams.set("on_conflict",e),i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const m=t.reduce((p,g)=>p.concat(Object.keys(g)),[]);if(m.length>0){const p=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",p.join(","))}}return new fo({method:d,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(t,{count:e}={}){var n;const i="PATCH";return e&&this.headers.append("Prefer",`count=${e}`),new fo({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var e;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new fo({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch})}},H8=class ox{constructor(e,{headers:n={},schema:i,fetch:o}={}){this.url=e,this.headers=new Headers(n),this.schemaName=i,this.fetch=o}from(e){if(!e||typeof e!="string"||e.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new W8(new URL(`${this.url}/${e}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ox(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,n={},{head:i=!1,get:o=!1,count:l}={}){var d;let m;const p=new URL(`${this.url}/rpc/${e}`);let g;i||o?(m=i?"HEAD":"GET",Object.entries(n).filter(([v,E])=>E!==void 0).map(([v,E])=>[v,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([v,E])=>{p.searchParams.append(v,E)})):(m="POST",g=n);const y=new Headers(this.headers);return l&&y.set("Prefer",`count=${l}`),new fo({method:m,url:p,headers:y,schema:this.schemaName,body:g,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}};class $8{constructor(){}static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const i=n.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const i=this.getWebSocketConstructor();return new i(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const G8="2.89.0",K8=`realtime-js/${G8}`,ax="1.0.0",X8="2.0.0",gg=ax,hf=1e4,Y8=1e3,q8=100;var Ui;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Ui||(Ui={}));var Xt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(Xt||(Xt={}));var Dr;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(Dr||(Dr={}));var ff;(function(t){t.websocket="websocket"})(ff||(ff={}));var Ss;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(Ss||(Ss={}));class Q8{constructor(e){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=e??[]}encode(e,n){if(e.event===this.BROADCAST_EVENT&&!(e.payload instanceof ArrayBuffer)&&typeof e.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(e));let i=[e.join_ref,e.ref,e.topic,e.event,e.payload];return n(JSON.stringify(i))}_binaryEncodeUserBroadcastPush(e){var n;return this._isArrayBuffer((n=e.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:new ArrayBuffer(0);return this._encodeUserBroadcastPush(e,this.BINARY_ENCODING,o)}_encodeJsonUserBroadcastPush(e){var n,i;const o=(i=(n=e.payload)===null||n===void 0?void 0:n.payload)!==null&&i!==void 0?i:{},d=new TextEncoder().encode(JSON.stringify(o)).buffer;return this._encodeUserBroadcastPush(e,this.JSON_ENCODING,d)}_encodeUserBroadcastPush(e,n,i){var o,l;const d=e.topic,m=(o=e.ref)!==null&&o!==void 0?o:"",p=(l=e.join_ref)!==null&&l!==void 0?l:"",g=e.payload.event,y=this.allowedMetadataKeys?this._pick(e.payload,this.allowedMetadataKeys):{},v=Object.keys(y).length===0?"":JSON.stringify(y);if(p.length>255)throw new Error(`joinRef length ${p.length} exceeds maximum of 255`);if(m.length>255)throw new Error(`ref length ${m.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`topic length ${d.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`userEvent length ${g.length} exceeds maximum of 255`);if(v.length>255)throw new Error(`metadata length ${v.length} exceeds maximum of 255`);const E=this.USER_BROADCAST_PUSH_META_LENGTH+p.length+m.length+d.length+g.length+v.length,C=new ArrayBuffer(this.HEADER_LENGTH+E);let T=new DataView(C),A=0;T.setUint8(A++,this.KINDS.userBroadcastPush),T.setUint8(A++,p.length),T.setUint8(A++,m.length),T.setUint8(A++,d.length),T.setUint8(A++,g.length),T.setUint8(A++,v.length),T.setUint8(A++,n),Array.from(p,O=>T.setUint8(A++,O.charCodeAt(0))),Array.from(m,O=>T.setUint8(A++,O.charCodeAt(0))),Array.from(d,O=>T.setUint8(A++,O.charCodeAt(0))),Array.from(g,O=>T.setUint8(A++,O.charCodeAt(0))),Array.from(v,O=>T.setUint8(A++,O.charCodeAt(0)));var N=new Uint8Array(C.byteLength+i.byteLength);return N.set(new Uint8Array(C),0),N.set(new Uint8Array(i),C.byteLength),N.buffer}decode(e,n){if(this._isArrayBuffer(e)){let i=this._binaryDecode(e);return n(i)}if(typeof e=="string"){const i=JSON.parse(e),[o,l,d,m,p]=i;return n({join_ref:o,ref:l,topic:d,event:m,payload:p})}return n({})}_binaryDecode(e){const n=new DataView(e),i=n.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,n,o)}}_decodeUserBroadcast(e,n,i){const o=n.getUint8(1),l=n.getUint8(2),d=n.getUint8(3),m=n.getUint8(4);let p=this.HEADER_LENGTH+4;const g=i.decode(e.slice(p,p+o));p=p+o;const y=i.decode(e.slice(p,p+l));p=p+l;const v=i.decode(e.slice(p,p+d));p=p+d;const E=e.slice(p,e.byteLength),C=m===this.JSON_ENCODING?JSON.parse(i.decode(E)):E,T={type:this.BROADCAST_EVENT,event:y,payload:C};return d>0&&(T.meta=JSON.parse(v)),{join_ref:null,ref:null,topic:g,event:this.BROADCAST_EVENT,payload:T}}_isArrayBuffer(e){var n;return e instanceof ArrayBuffer||((n=e==null?void 0:e.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(e,n){return!e||typeof e!="object"?{}:Object.fromEntries(Object.entries(e).filter(([i])=>n.includes(i)))}}class lx{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ht;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(ht||(ht={}));const mg=(t,e,n={})=>{var i;const o=(i=n.skipTypes)!==null&&i!==void 0?i:[];return e?Object.keys(e).reduce((l,d)=>(l[d]=Z8(d,t,e,o),l),{}):{}},Z8=(t,e,n,i)=>{const o=e.find(m=>m.name===t),l=o==null?void 0:o.type,d=n[t];return l&&!i.includes(l)?cx(l,d):pf(d)},cx=(t,e)=>{if(t.charAt(0)==="_"){const n=t.slice(1,t.length);return n4(e,n)}switch(t){case ht.bool:return J8(e);case ht.float4:case ht.float8:case ht.int2:case ht.int4:case ht.int8:case ht.numeric:case ht.oid:return e4(e);case ht.json:case ht.jsonb:return t4(e);case ht.timestamp:return r4(e);case ht.abstime:case ht.date:case ht.daterange:case ht.int4range:case ht.int8range:case ht.money:case ht.reltime:case ht.text:case ht.time:case ht.timestamptz:case ht.timetz:case ht.tsrange:case ht.tstzrange:return pf(e);default:return pf(e)}},pf=t=>t,J8=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},e4=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},t4=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch{return t}return t},n4=(t,e)=>{if(typeof t!="string")return t;const n=t.length-1,i=t[n];if(t[0]==="{"&&i==="}"){let l;const d=t.slice(1,n);try{l=JSON.parse("["+d+"]")}catch{l=d?d.split(","):[]}return l.map(m=>cx(e,m))}return t},r4=t=>typeof t=="string"?t.replace(" ","T"):t,ux=t=>{const e=new URL(t);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Kd{constructor(e,n,i={},o=hf){this.channel=e,this.event=n,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var i;return this._hasReceived(e)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(i=>i.status===e).forEach(i=>i.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var wg;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(wg||(wg={}));class Ka{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:d,onSync:m}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ka.syncState(this.state,o,l,d),this.pendingDiffs.forEach(p=>{this.state=Ka.syncDiff(this.state,p,l,d)}),this.pendingDiffs=[],m()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:d,onSync:m}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ka.syncDiff(this.state,o,l,d),m())}),this.onJoin((o,l,d)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:d})}),this.onLeave((o,l,d)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:d})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,i,o){const l=this.cloneDeep(e),d=this.transformState(n),m={},p={};return this.map(l,(g,y)=>{d[g]||(p[g]=y)}),this.map(d,(g,y)=>{const v=l[g];if(v){const E=y.map(N=>N.presence_ref),C=v.map(N=>N.presence_ref),T=y.filter(N=>C.indexOf(N.presence_ref)<0),A=v.filter(N=>E.indexOf(N.presence_ref)<0);T.length>0&&(m[g]=T),A.length>0&&(p[g]=A)}else m[g]=y}),this.syncDiff(l,{joins:m,leaves:p},i,o)}static syncDiff(e,n,i,o){const{joins:l,leaves:d}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(m,p)=>{var g;const y=(g=e[m])!==null&&g!==void 0?g:[];if(e[m]=this.cloneDeep(p),y.length>0){const v=e[m].map(C=>C.presence_ref),E=y.filter(C=>v.indexOf(C.presence_ref)<0);e[m].unshift(...E)}i(m,y,p)}),this.map(d,(m,p)=>{let g=e[m];if(!g)return;const y=p.map(v=>v.presence_ref);g=g.filter(v=>y.indexOf(v.presence_ref)<0),e[m]=g,o(m,g,p),g.length===0&&delete e[m]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(i=>n(i,e[i]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,i)=>{const o=e[i];return"metas"in o?n[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[i]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var yg;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(yg||(yg={}));var Xa;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(Xa||(Xa={}));var hi;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(hi||(hi={}));class Io{constructor(e,n={config:{}},i){var o,l;if(this.topic=e,this.params=n,this.socket=i,this.bindings={},this.state=Xt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Kd(this,Dr.join,this.params,this.timeout),this.rejoinTimer=new lx(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Xt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(d=>d.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Xt.closed,this.socket._remove(this)}),this._onError(d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",d=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,d),this.state=Xt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Dr.reply,{},(d,m)=>{this._trigger(this._replyEventName(m),d)}),this.presence=new Ka(this),this.broadcastEndpointURL=ux(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Xt.closed){const{config:{broadcast:d,presence:m,private:p}}=this.params,g=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(C=>C.filter))!==null&&o!==void 0?o:[],y=!!this.bindings[Xa.PRESENCE]&&this.bindings[Xa.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,v={},E={broadcast:d,presence:Object.assign(Object.assign({},m),{enabled:y}),postgres_changes:g,private:p};this.socket.accessTokenValue&&(v.access_token=this.socket.accessTokenValue),this._onError(C=>e==null?void 0:e(hi.CHANNEL_ERROR,C)),this._onClose(()=>e==null?void 0:e(hi.CLOSED)),this.updateJoinPayload(Object.assign({config:E},v)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:C})=>{var T;if(this.socket._isManualToken()||this.socket.setAuth(),C===void 0){e==null||e(hi.SUBSCRIBED);return}else{const A=this.bindings.postgres_changes,N=(T=A==null?void 0:A.length)!==null&&T!==void 0?T:0,O=[];for(let S=0;S<N;S++){const _=A[S],{filter:{event:D,schema:U,table:z,filter:F}}=_,K=C&&C[S];if(K&&K.event===D&&Io.isFilterValueEqual(K.schema,U)&&Io.isFilterValueEqual(K.table,z)&&Io.isFilterValueEqual(K.filter,F))O.push(Object.assign(Object.assign({},_),{id:K.id}));else{this.unsubscribe(),this.state=Xt.errored,e==null||e(hi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,e&&e(hi.SUBSCRIBED);return}}).receive("error",C=>{this.state=Xt.errored,e==null||e(hi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(C).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(hi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,i){return this.state===Xt.joined&&e===Xa.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(e,n,i)}async httpSend(e,n,i={}){var o;if(n==null)return Promise.reject("Payload is required for httpSend()");const l={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(l.Authorization=`Bearer ${this.socket.accessTokenValue}`);const d={method:"POST",headers:l,body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},m=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(m.status===202)return{success:!0};let p=m.statusText;try{const g=await m.json();p=g.error||g.message||p}catch{}return Promise.reject(new Error(p))}async send(e,n={}){var i,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:d}=e,m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const p={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:d,private:this.private}]})};try{const g=await this._fetchWithTimeout(this.broadcastEndpointURL,p,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=g.body)===null||o===void 0?void 0:o.cancel()),g.ok?"ok":"error"}catch(g){return g.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var d,m,p;const g=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((p=(m=(d=this.params)===null||d===void 0?void 0:d.config)===null||m===void 0?void 0:m.broadcast)===null||p===void 0)&&p.ack)&&l("ok"),g.receive("ok",()=>l("ok")),g.receive("error",()=>l("error")),g.receive("timeout",()=>l("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=Xt.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Dr.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new Kd(this,Dr.leave,{},e),i.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Xt.closed,this.bindings={}}async _fetchWithTimeout(e,n,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),d=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(l),d}_push(e,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Kd(this,e,n,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>q8){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,i){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,i){var o,l;const d=e.toLocaleLowerCase(),{close:m,error:p,leave:g,join:y}=Dr;if(i&&[m,p,g,y].indexOf(d)>=0&&i!==this._joinRef())return;let E=this._onMessage(d,n,i);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(d)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(C=>{var T,A,N;return((T=C.filter)===null||T===void 0?void 0:T.event)==="*"||((N=(A=C.filter)===null||A===void 0?void 0:A.event)===null||N===void 0?void 0:N.toLocaleLowerCase())===d}).map(C=>C.callback(E,i)):(l=this.bindings[d])===null||l===void 0||l.filter(C=>{var T,A,N,O,S,_;if(["broadcast","presence","postgres_changes"].includes(d))if("id"in C){const D=C.id,U=(T=C.filter)===null||T===void 0?void 0:T.event;return D&&((A=n.ids)===null||A===void 0?void 0:A.includes(D))&&(U==="*"||(U==null?void 0:U.toLocaleLowerCase())===((N=n.data)===null||N===void 0?void 0:N.type.toLocaleLowerCase()))}else{const D=(S=(O=C==null?void 0:C.filter)===null||O===void 0?void 0:O.event)===null||S===void 0?void 0:S.toLocaleLowerCase();return D==="*"||D===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return C.type.toLocaleLowerCase()===d}).map(C=>{if(typeof E=="object"&&"ids"in E){const T=E.data,{schema:A,table:N,commit_timestamp:O,type:S,errors:_}=T;E=Object.assign(Object.assign({},{schema:A,table:N,commit_timestamp:O,eventType:S,new:{},old:{},errors:_}),this._getPayloadRecords(T))}C.callback(E,i)})}_isClosed(){return this.state===Xt.closed}_isJoined(){return this.state===Xt.joined}_isJoining(){return this.state===Xt.joining}_isLeaving(){return this.state===Xt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,i){const o=e.toLocaleLowerCase(),l={type:o,filter:n,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(e,n){const i=e.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Io.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const i in e)if(e[i]!==n[i])return!1;return!0}static isFilterValueEqual(e,n){return(e??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Dr.close,{},e)}_onError(e){this._on(Dr.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Xt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=mg(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=mg(e.columns,e.old_record)),n}}const Xd=()=>{},dc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},i4=[1e3,2e3,5e3,1e4],s4=1e4,o4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a4{constructor(e,n){var i;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=hf,this.transport=null,this.heartbeatIntervalMs=dc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Xd,this.ref=0,this.reconnectTimer=null,this.vsn=gg,this.logger=Xd,this.conn=null,this.sendBuffer=[],this.serializer=new Q8,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=n==null?void 0:n.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${ff.websocket}`,this.httpEndpoint=ux(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=$8.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(e?this.conn.close(e,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,i){this.logger(e,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ui.connecting:return Ss.Connecting;case Ui.open:return Ss.Open;case Ui.closing:return Ss.Closing;default:return Ss.Closed}}isConnected(){return this.connectionState()===Ss.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const i=`realtime:${e}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Io(`realtime:${e}`,n,this);return this.channels.push(l),l}}push(e){const{topic:n,event:i,payload:o,ref:l}=e,d=()=>{this.encode(e,m=>{var p;(p=this.conn)===null||p===void 0||p.send(m)})};this.log("push",`${n} ${i} (${l})`,o),this.isConnected()?d():this.sendBuffer.push(d)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Y8,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},dc.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(i=>i.topic===e&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(g){this.log("error","error in heartbeat callback",g)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:d}=n,m=d?`(${d})`:"",p=l.status||"";this.log("receive",`${p} ${i} ${o} ${m}`.trim(),l),this.channels.filter(g=>g._isMember(i)).forEach(g=>g._trigger(o,l,d)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e),this.conn.readyState===Ui.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Ui.open||this.conn.readyState===Ui.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Dr.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const i=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${i}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const i=new Blob([o4],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n,i=!1;if(e)n=e,i=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(o){this.log("error","Error fetching access token from callback",o),n=this.accessTokenValue}else n=this.accessTokenValue;i?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(o=>{const l={access_token:n,version:K8};n&&o.updateJoinPayload(l),o.joinedOnce&&o._isJoined()&&o._push(Dr.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(i=>{try{i(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(i){this.log("error",`error triggering ${e} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new lx(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,i,o,l,d,m,p,g,y,v,E,C;switch(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(i=e==null?void 0:e.timeout)!==null&&i!==void 0?i:hf,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:dc.HEARTBEAT_INTERVAL,this.worker=(l=e==null?void 0:e.worker)!==null&&l!==void 0?l:!1,this.accessToken=(d=e==null?void 0:e.accessToken)!==null&&d!==void 0?d:null,this.heartbeatCallback=(m=e==null?void 0:e.heartbeatCallback)!==null&&m!==void 0?m:Xd,this.vsn=(p=e==null?void 0:e.vsn)!==null&&p!==void 0?p:gg,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(g=e==null?void 0:e.reconnectAfterMs)!==null&&g!==void 0?g:T=>i4[T-1]||s4,this.vsn){case ax:this.encode=(y=e==null?void 0:e.encode)!==null&&y!==void 0?y:(T,A)=>A(JSON.stringify(T)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:(T,A)=>A(JSON.parse(T));break;case X8:this.encode=(E=e==null?void 0:e.encode)!==null&&E!==void 0?E:this.serializer.encode.bind(this.serializer),this.decode=(C=e==null?void 0:e.decode)!==null&&C!==void 0?C:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}var ml=class extends Error{constructor(t,e){var n;super(t),this.name="IcebergError",this.status=e.status,this.icebergType=e.icebergType,this.icebergCode=e.icebergCode,this.details=e.details,this.isCommitStateUnknown=e.icebergType==="CommitStateUnknownException"||[500,502,504].includes(e.status)&&((n=e.icebergType)==null?void 0:n.includes("CommitState"))===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function l4(t,e,n){const i=new URL(e,t);if(n)for(const[o,l]of Object.entries(n))l!==void 0&&i.searchParams.set(o,l);return i.toString()}async function c4(t){return!t||t.type==="none"?{}:t.type==="bearer"?{Authorization:`Bearer ${t.token}`}:t.type==="header"?{[t.name]:t.value}:t.type==="custom"?await t.getHeaders():{}}function u4(t){const e=t.fetchImpl??globalThis.fetch;return{async request({method:n,path:i,query:o,body:l,headers:d}){const m=l4(t.baseUrl,i,o),p=await c4(t.auth),g=await e(m,{method:n,headers:{...l?{"Content-Type":"application/json"}:{},...p,...d},body:l?JSON.stringify(l):void 0}),y=await g.text(),v=(g.headers.get("content-type")||"").includes("application/json"),E=v&&y?JSON.parse(y):y;if(!g.ok){const C=v?E:void 0,T=C==null?void 0:C.error;throw new ml((T==null?void 0:T.message)??`Request failed with status ${g.status}`,{status:g.status,icebergType:T==null?void 0:T.type,icebergCode:T==null?void 0:T.code,details:C})}return{status:g.status,headers:g.headers,data:E}}}}function hc(t){return t.join("")}var d4=class{constructor(t,e=""){this.client=t,this.prefix=e}async listNamespaces(t){const e=t?{parent:hc(t.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:e})).data.namespaces.map(i=>({namespace:i}))}async createNamespace(t,e){const n={namespace:t.namespace,properties:e==null?void 0:e.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${hc(t.namespace)}`})}async loadNamespaceMetadata(t){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${hc(t.namespace)}`})).data.properties}}async namespaceExists(t){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${hc(t.namespace)}`}),!0}catch(e){if(e instanceof ml&&e.status===404)return!1;throw e}}async createNamespaceIfNotExists(t,e){try{return await this.createNamespace(t,e)}catch(n){if(n instanceof ml&&n.status===409)return;throw n}}};function oo(t){return t.join("")}var h4=class{constructor(t,e="",n){this.client=t,this.prefix=e,this.accessDelegation=n}async listTables(t){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oo(t.namespace)}/tables`})).data.identifiers}async createTable(t,e){const n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oo(t.namespace)}/tables`,body:e,headers:n})).data.metadata}async updateTable(t,e){const n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${oo(t.namespace)}/tables/${t.name}`,body:e});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(t,e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${oo(t.namespace)}/tables/${t.name}`,query:{purgeRequested:String((e==null?void 0:e.purge)??!1)}})}async loadTable(t){const e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${oo(t.namespace)}/tables/${t.name}`,headers:e})).data.metadata}async tableExists(t){const e={};this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${oo(t.namespace)}/tables/${t.name}`,headers:e}),!0}catch(n){if(n instanceof ml&&n.status===404)return!1;throw n}}async createTableIfNotExists(t,e){try{return await this.createTable(t,e)}catch(n){if(n instanceof ml&&n.status===409)return await this.loadTable({namespace:t.namespace,name:e.name});throw n}}},f4=class{constructor(t){var i;let e="v1";t.catalogName&&(e+=`/${t.catalogName}`);const n=t.baseUrl.endsWith("/")?t.baseUrl:`${t.baseUrl}/`;this.client=u4({baseUrl:n,auth:t.auth,fetchImpl:t.fetch}),this.accessDelegation=(i=t.accessDelegation)==null?void 0:i.join(","),this.namespaceOps=new d4(this.client,e),this.tableOps=new h4(this.client,e,this.accessDelegation)}async listNamespaces(t){return this.namespaceOps.listNamespaces(t)}async createNamespace(t,e){return this.namespaceOps.createNamespace(t,e)}async dropNamespace(t){await this.namespaceOps.dropNamespace(t)}async loadNamespaceMetadata(t){return this.namespaceOps.loadNamespaceMetadata(t)}async listTables(t){return this.tableOps.listTables(t)}async createTable(t,e){return this.tableOps.createTable(t,e)}async updateTable(t,e){return this.tableOps.updateTable(t,e)}async dropTable(t,e){await this.tableOps.dropTable(t,e)}async loadTable(t){return this.tableOps.loadTable(t)}async namespaceExists(t){return this.namespaceOps.namespaceExists(t)}async tableExists(t){return this.tableOps.tableExists(t)}async createNamespaceIfNotExists(t,e){return this.namespaceOps.createNamespaceIfNotExists(t,e)}async createTableIfNotExists(t,e){return this.tableOps.createTableIfNotExists(t,e)}},Yu=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function _t(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}var p4=class extends Yu{constructor(t,e,n){super(t),this.name="StorageApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},gf=class extends Yu{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};const W0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),g4=()=>Response,mf=t=>{if(Array.isArray(t))return t.map(n=>mf(n));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([n,i])=>{const o=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));e[o]=mf(i)}),e},m4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},w4=t=>!t||typeof t!="string"||t.length===0||t.length>100||t.trim()!==t||t.includes("/")||t.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(t);function wl(t){"@babel/helpers - typeof";return wl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wl(t)}function y4(t,e){if(wl(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(wl(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function x4(t){var e=y4(t,"string");return wl(e)=="symbol"?e:e+""}function v4(t,e,n){return(e=x4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function ke(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xg(Object(n),!0).forEach(function(i){v4(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xg(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const Yd=t=>{var e;return t.msg||t.message||t.error_description||(typeof t.error=="string"?t.error:(e=t.error)===null||e===void 0?void 0:e.message)||JSON.stringify(t)},E4=async(t,e,n)=>{t instanceof await g4()&&!(n!=null&&n.noResolveJson)?t.json().then(i=>{const o=t.status||500,l=(i==null?void 0:i.statusCode)||o+"";e(new p4(Yd(i),o,l))}).catch(i=>{e(new gf(Yd(i),i))}):e(new gf(Yd(t),t))},C4=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!i?o:(m4(i)?(o.headers=ke({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(i)):o.body=i,e!=null&&e.duplex&&(o.duplex=e.duplex),ke(ke({},o),n))};async function kl(t,e,n,i,o,l){return new Promise((d,m)=>{t(n,C4(e,i,o,l)).then(p=>{if(!p.ok)throw p;return i!=null&&i.noResolveJson?p:p.json()}).then(p=>d(p)).catch(p=>E4(p,m,i))})}async function yl(t,e,n,i){return kl(t,"GET",e,n,i)}async function Or(t,e,n,i,o){return kl(t,"POST",e,i,o,n)}async function wf(t,e,n,i,o){return kl(t,"PUT",e,i,o,n)}async function b4(t,e,n,i){return kl(t,"HEAD",e,ke(ke({},n),{},{noResolveJson:!0}),i)}async function H0(t,e,n,i,o){return kl(t,"DELETE",e,i,o,n)}var A4=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e}then(t,e){return this.execute().then(t,e)}async execute(){var t=this;try{return{data:(await t.downloadFn()).body,error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(_t(e))return{data:null,error:e};throw e}}};let dx;dx=Symbol.toStringTag;var _4=class{constructor(t,e){this.downloadFn=t,this.shouldThrowOnError=e,this[dx]="BlobDownloadBuilder",this.promise=null}asStream(){return new A4(this.downloadFn,this.shouldThrowOnError)}then(t,e){return this.getPromise().then(t,e)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var t=this;try{return{data:await(await t.downloadFn()).blob(),error:null}}catch(e){if(t.shouldThrowOnError)throw e;if(_t(e))return{data:null,error:e};throw e}}};const S4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vg={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var T4=class{constructor(t,e={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=e,this.bucketId=n,this.fetch=W0(i)}throwOnError(){return this.shouldThrowOnError=!0,this}async uploadOrUpdate(t,e,n,i){var o=this;try{let l;const d=ke(ke({},vg),i);let m=ke(ke({},o.headers),t==="POST"&&{"x-upsert":String(d.upsert)});const p=d.metadata;typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",d.cacheControl),p&&l.append("metadata",o.encodeMetadata(p)),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.has("cacheControl")||l.append("cacheControl",d.cacheControl),p&&!l.has("metadata")&&l.append("metadata",o.encodeMetadata(p))):(l=n,m["cache-control"]=`max-age=${d.cacheControl}`,m["content-type"]=d.contentType,p&&(m["x-metadata"]=o.toBase64(o.encodeMetadata(p))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!d.duplex&&(d.duplex="half")),i!=null&&i.headers&&(m=ke(ke({},m),i.headers));const g=o._removeEmptyFolders(e),y=o._getFinalPath(g),v=await(t=="PUT"?wf:Or)(o.fetch,`${o.url}/object/${y}`,l,ke({headers:m},d!=null&&d.duplex?{duplex:d.duplex}:{}));return{data:{path:g,id:v.Id,fullPath:v.Key},error:null}}catch(l){if(o.shouldThrowOnError)throw l;if(_t(l))return{data:null,error:l};throw l}}async upload(t,e,n){return this.uploadOrUpdate("POST",t,e,n)}async uploadToSignedUrl(t,e,n,i){var o=this;const l=o._removeEmptyFolders(t),d=o._getFinalPath(l),m=new URL(o.url+`/object/upload/sign/${d}`);m.searchParams.set("token",e);try{let p;const g=ke({upsert:vg.upsert},i),y=ke(ke({},o.headers),{"x-upsert":String(g.upsert)});return typeof Blob<"u"&&n instanceof Blob?(p=new FormData,p.append("cacheControl",g.cacheControl),p.append("",n)):typeof FormData<"u"&&n instanceof FormData?(p=n,p.append("cacheControl",g.cacheControl)):(p=n,y["cache-control"]=`max-age=${g.cacheControl}`,y["content-type"]=g.contentType),{data:{path:l,fullPath:(await wf(o.fetch,m.toString(),p,{headers:y})).Key},error:null}}catch(p){if(o.shouldThrowOnError)throw p;if(_t(p))return{data:null,error:p};throw p}}async createSignedUploadUrl(t,e){var n=this;try{let i=n._getFinalPath(t);const o=ke({},n.headers);e!=null&&e.upsert&&(o["x-upsert"]="true");const l=await Or(n.fetch,`${n.url}/object/upload/sign/${i}`,{},{headers:o}),d=new URL(n.url+l.url),m=d.searchParams.get("token");if(!m)throw new Yu("No token returned by API");return{data:{signedUrl:d.toString(),path:t,token:m},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}}async update(t,e,n){return this.uploadOrUpdate("PUT",t,e,n)}async move(t,e,n){var i=this;try{return{data:await Or(i.fetch,`${i.url}/object/move`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers}),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}async copy(t,e,n){var i=this;try{return{data:{path:(await Or(i.fetch,`${i.url}/object/copy`,{bucketId:i.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n==null?void 0:n.destinationBucket},{headers:i.headers})).Key},error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}async createSignedUrl(t,e,n){var i=this;try{let o=i._getFinalPath(t),l=await Or(i.fetch,`${i.url}/object/sign/${o}`,ke({expiresIn:e},n!=null&&n.transform?{transform:n.transform}:{}),{headers:i.headers});const d=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return l={signedUrl:encodeURI(`${i.url}${l.signedURL}${d}`)},{data:l,error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}async createSignedUrls(t,e,n){var i=this;try{const o=await Or(i.fetch,`${i.url}/object/sign/${i.bucketId}`,{expiresIn:e,paths:t},{headers:i.headers}),l=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:o.map(d=>ke(ke({},d),{},{signedUrl:d.signedURL?encodeURI(`${i.url}${d.signedURL}${l}`):null})),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}download(t,e){const n=typeof(e==null?void 0:e.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((e==null?void 0:e.transform)||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),d=()=>yl(this.fetch,`${this.url}/${n}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new _4(d,this.shouldThrowOnError)}async info(t){var e=this;const n=e._getFinalPath(t);try{return{data:mf(await yl(e.fetch,`${e.url}/object/info/${n}`,{headers:e.headers})),error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}}async exists(t){var e=this;const n=e._getFinalPath(t);try{return await b4(e.fetch,`${e.url}/object/${n}`,{headers:e.headers}),{data:!0,error:null}}catch(i){if(e.shouldThrowOnError)throw i;if(_t(i)&&i instanceof gf){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}}getPublicUrl(t,e){const n=this._getFinalPath(t),i=[],o=e!=null&&e.download?`download=${e.download===!0?"":e.download}`:"";o!==""&&i.push(o);const l=typeof(e==null?void 0:e.transform)<"u"?"render/image":"object",d=this.transformOptsToQueryString((e==null?void 0:e.transform)||{});d!==""&&i.push(d);let m=i.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${m}`)}}}async remove(t){var e=this;try{return{data:await H0(e.fetch,`${e.url}/object/${e.bucketId}`,{prefixes:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async list(t,e,n){var i=this;try{const o=ke(ke(ke({},S4),e),{},{prefix:t||""});return{data:await Or(i.fetch,`${i.url}/object/list/${i.bucketId}`,o,{headers:i.headers},n),error:null}}catch(o){if(i.shouldThrowOnError)throw o;if(_t(o))return{data:null,error:o};throw o}}async listV2(t,e){var n=this;try{const i=ke({},t);return{data:await Or(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,i,{headers:n.headers},e),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};const hx="2.89.0",fx={"X-Client-Info":`storage-js/${hx}`};var I4=class{constructor(t,e={},n,i){this.shouldThrowOnError=!1;const o=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(o.hostname)&&!o.hostname.includes("storage.supabase.")&&(o.hostname=o.hostname.replace("supabase.","storage.supabase.")),this.url=o.href.replace(/\/$/,""),this.headers=ke(ke({},fx),e),this.fetch=W0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async listBuckets(t){var e=this;try{const n=e.listBucketOptionsToQueryString(t);return{data:await yl(e.fetch,`${e.url}/bucket${n}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await yl(e.fetch,`${e.url}/bucket/${t}`,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async createBucket(t,e={public:!1}){var n=this;try{return{data:await Or(n.fetch,`${n.url}/bucket`,{id:t,name:t,type:e.type,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}}async updateBucket(t,e){var n=this;try{return{data:await wf(n.fetch,`${n.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(_t(i))return{data:null,error:i};throw i}}async emptyBucket(t){var e=this;try{return{data:await Or(e.fetch,`${e.url}/bucket/${t}/empty`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await H0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}listBucketOptionsToQueryString(t){const e={};return t&&("limit"in t&&(e.limit=String(t.limit)),"offset"in t&&(e.offset=String(t.offset)),t.search&&(e.search=t.search),t.sortColumn&&(e.sortColumn=t.sortColumn),t.sortOrder&&(e.sortOrder=t.sortOrder)),Object.keys(e).length>0?"?"+new URLSearchParams(e).toString():""}},R4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ke(ke({},fx),e),this.fetch=W0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await Or(e.fetch,`${e.url}/bucket`,{name:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async listBuckets(t){var e=this;try{const n=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&n.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&n.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&n.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&n.set("sortOrder",t.sortOrder),t!=null&&t.search&&n.set("search",t.search);const i=n.toString(),o=i?`${e.url}/bucket?${i}`:`${e.url}/bucket`;return{data:await yl(e.fetch,o,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await H0(e.fetch,`${e.url}/bucket/${t}`,{},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(_t(n))return{data:null,error:n};throw n}}from(t){var e=this;if(!w4(t))throw new Yu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const n=new f4({baseUrl:this.url,catalogName:t,auth:{type:"custom",getHeaders:async()=>e.headers},fetch:this.fetch}),i=this.shouldThrowOnError;return new Proxy(n,{get(o,l){const d=o[l];return typeof d!="function"?d:async(...m)=>{try{return{data:await d.apply(o,m),error:null}}catch(p){if(i)throw p;return{data:null,error:p}}}}})}};const $0={"X-Client-Info":`storage-js/${hx}`,"Content-Type":"application/json"};var px=class extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}};function er(t){return typeof t=="object"&&t!==null&&"__isStorageVectorsError"in t}var qd=class extends px{constructor(t,e,n){super(t),this.name="StorageVectorsApiError",this.status=e,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},O4=class extends px{constructor(t,e){super(t),this.name="StorageVectorsUnknownError",this.originalError=e}};const G0=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),N4=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Eg=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),k4=async(t,e,n)=>{if(t&&typeof t=="object"&&"status"in t&&"ok"in t&&typeof t.status=="number"&&!(n!=null&&n.noResolveJson)){const i=t.status||500,o=t;if(typeof o.json=="function")o.json().then(l=>{const d=(l==null?void 0:l.statusCode)||(l==null?void 0:l.code)||i+"";e(new qd(Eg(l),i,d))}).catch(()=>{const l=i+"";e(new qd(o.statusText||`HTTP ${i} error`,i,l))});else{const l=i+"";e(new qd(o.statusText||`HTTP ${i} error`,i,l))}}else e(new O4(Eg(t),t))},P4=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return i?(N4(i)?(o.headers=ke({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(i)):o.body=i,ke(ke({},o),n)):o};async function D4(t,e,n,i,o,l){return new Promise((d,m)=>{t(n,P4(e,i,o,l)).then(p=>{if(!p.ok)throw p;if(i!=null&&i.noResolveJson)return p;const g=p.headers.get("content-type");return!g||!g.includes("application/json")?{}:p.json()}).then(p=>d(p)).catch(p=>k4(p,m,i))})}async function tr(t,e,n,i,o){return D4(t,"POST",e,i,o,n)}var M4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ke(ke({},$0),e),this.fetch=G0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createIndex(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/CreateIndex`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async getIndex(t,e){var n=this;try{return{data:await tr(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers}),error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}}async listIndexes(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/ListIndexes`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async deleteIndex(t,e){var n=this;try{return{data:await tr(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:t,indexName:e},{headers:n.headers})||{},error:null}}catch(i){if(n.shouldThrowOnError)throw i;if(er(i))return{data:null,error:i};throw i}}},L4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ke(ke({},$0),e),this.fetch=G0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async putVectors(t){var e=this;try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:await tr(e.fetch,`${e.url}/PutVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async getVectors(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/GetVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async listVectors(t){var e=this;try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:await tr(e.fetch,`${e.url}/ListVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async queryVectors(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/QueryVectors`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async deleteVectors(t){var e=this;try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:await tr(e.fetch,`${e.url}/DeleteVectors`,t,{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}},B4=class{constructor(t,e={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=ke(ke({},$0),e),this.fetch=G0(n)}throwOnError(){return this.shouldThrowOnError=!0,this}async createBucket(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async getBucket(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/GetVectorBucket`,{vectorBucketName:t},{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async listBuckets(t={}){var e=this;try{return{data:await tr(e.fetch,`${e.url}/ListVectorBuckets`,t,{headers:e.headers}),error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}async deleteBucket(t){var e=this;try{return{data:await tr(e.fetch,`${e.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:e.headers})||{},error:null}}catch(n){if(e.shouldThrowOnError)throw n;if(er(n))return{data:null,error:n};throw n}}},F4=class extends B4{constructor(t,e={}){super(t,e.headers||{},e.fetch)}from(t){return new j4(this.url,this.headers,t,this.fetch)}async createBucket(t){var e=()=>super.createBucket,n=this;return e().call(n,t)}async getBucket(t){var e=()=>super.getBucket,n=this;return e().call(n,t)}async listBuckets(t={}){var e=()=>super.listBuckets,n=this;return e().call(n,t)}async deleteBucket(t){var e=()=>super.deleteBucket,n=this;return e().call(n,t)}},j4=class extends M4{constructor(t,e,n,i){super(t,e,i),this.vectorBucketName=n}async createIndex(t){var e=()=>super.createIndex,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(t={}){var e=()=>super.listIndexes,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(t){var e=()=>super.getIndex,n=this;return e().call(n,n.vectorBucketName,t)}async deleteIndex(t){var e=()=>super.deleteIndex,n=this;return e().call(n,n.vectorBucketName,t)}index(t){return new U4(this.url,this.headers,this.vectorBucketName,t,this.fetch)}},U4=class extends L4{constructor(t,e,n,i,o){super(t,e,o),this.vectorBucketName=n,this.indexName=i}async putVectors(t){var e=()=>super.putVectors,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(t){var e=()=>super.getVectors,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(t={}){var e=()=>super.listVectors,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(t){var e=()=>super.queryVectors,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(t){var e=()=>super.deleteVectors,n=this;return e().call(n,ke(ke({},t),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},z4=class extends I4{constructor(t,e={},n,i){super(t,e,n,i)}from(t){return new T4(this.url,this.headers,t,this.fetch)}get vectors(){return new F4(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new R4(this.url+"/iceberg",this.headers,this.fetch)}};const gx="2.89.0",po=30*1e3,yf=3,Qd=yf*po,V4="http://localhost:9999",W4="supabase.auth.token",H4={"X-Client-Info":`gotrue-js/${gx}`},xf="X-Supabase-Api-Version",mx={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,G4=10*60*1e3;class xl extends Error{constructor(e,n,i){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function Ce(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class K4 extends xl{constructor(e,n,i){super(e,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function X4(t){return Ce(t)&&t.name==="AuthApiError"}class Ts extends xl{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Si extends xl{constructor(e,n,i,o){super(e,i,o),this.name=n,this.status=i}}class qn extends Si{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Y4(t){return Ce(t)&&t.name==="AuthSessionMissingError"}class ao extends Si{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fc extends Si{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class pc extends Si{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q4(t){return Ce(t)&&t.name==="AuthImplicitGrantRedirectError"}class Cg extends Si{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Q4 extends Si{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class vf extends Si{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Zd(t){return Ce(t)&&t.name==="AuthRetryableFetchError"}class bg extends Si{constructor(e,n,i){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class Ef extends Si{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const uu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ag=` 	
\r=`.split(""),Z4=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Ag.length;e+=1)t[Ag[e].charCodeAt(0)]=-2;for(let e=0;e<uu.length;e+=1)t[uu[e].charCodeAt(0)]=e;return t})();function _g(t,e,n){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(uu[i]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const i=e.queue>>e.queuedBits-6&63;n(uu[i]),e.queuedBits-=6}}function wx(t,e,n){const i=Z4[t];if(i>-1)for(e.queue=e.queue<<6|i,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Sg(t){const e=[],n=d=>{e.push(String.fromCodePoint(d))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=d=>{tT(d,i,n)};for(let d=0;d<t.length;d+=1)wx(t.charCodeAt(d),o,l);return e.join("")}function J4(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function eT(t,e){for(let n=0;n<t.length;n+=1){let i=t.charCodeAt(n);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(t.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}J4(i,e)}}function tT(t,e,n){if(e.utf8seq===0){if(t<=127){n(t);return}for(let i=1;i<6;i+=1)if(!(t>>7-i&1)){e.utf8seq=i;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Uo(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};for(let o=0;o<t.length;o+=1)wx(t.charCodeAt(o),n,i);return new Uint8Array(e)}function nT(t){const e=[];return eT(t,n=>e.push(n)),new Uint8Array(e)}function Ns(t){const e=[],n={queue:0,queuedBits:0},i=o=>{e.push(o)};return t.forEach(o=>_g(o,n,i)),_g(null,n,i),e.join("")}function rT(t){return Math.round(Date.now()/1e3)+t}function iT(){return Symbol("auth-callback")}const dn=()=>typeof window<"u"&&typeof document<"u",vs={tested:!1,writable:!1},yx=()=>{if(!dn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(vs.tested)return vs.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),vs.tested=!0,vs.writable=!0}catch{vs.tested=!0,vs.writable=!1}return vs.writable};function sT(t){const e={},n=new URL(t);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,l)=>{e[l]=o})}catch{}return n.searchParams.forEach((i,o)=>{e[o]=i}),e}const xx=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),oT=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",go=async(t,e,n)=>{await t.setItem(e,JSON.stringify(n))},Es=async(t,e)=>{const n=await t.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},un=async(t,e)=>{await t.removeItem(e)};class qu{constructor(){this.promise=new qu.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}qu.promiseConstructor=Promise;function Jd(t){const e=t.split(".");if(e.length!==3)throw new Ef("Invalid JWT structure");for(let i=0;i<e.length;i++)if(!$4.test(e[i]))throw new Ef("JWT not in base64url format");return{header:JSON.parse(Sg(e[0])),payload:JSON.parse(Sg(e[1])),signature:Uo(e[2]),raw:{header:e[0],payload:e[1]}}}async function aT(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function lT(t,e){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const d=await t(l);if(!e(l,null,d)){i(d);return}}catch(d){if(!e(l,d)){o(d);return}}})()})}function cT(t){return("0"+t.toString(16)).substr(-2)}function uT(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let o="";for(let l=0;l<56;l++)o+=n.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(e),Array.from(e,cT).join("")}async function dT(t){const n=new TextEncoder().encode(t),i=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function hT(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const n=await dT(t);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function lo(t,e,n=!1){const i=uT();let o=i;n&&(o+="/PASSWORD_RECOVERY"),await go(t,`${e}-code-verifier`,o);const l=await hT(i);return[l,i===l?"plain":"s256"]}const fT=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function pT(t){const e=t.headers.get(xf);if(!e||!e.match(fT))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function gT(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function mT(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const wT=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function co(t){if(!wT.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function eh(){const t={};return new Proxy(t,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function yT(t,e){return new Proxy(t,{get:(n,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,i,o)}return!e.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,i,o)}})}function Tg(t){return JSON.parse(JSON.stringify(t))}const _s=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),xT=[502,503,504];async function Ig(t){var e;if(!oT(t))throw new vf(_s(t),0);if(xT.includes(t.status))throw new vf(_s(t),t.status);let n;try{n=await t.json()}catch(l){throw new Ts(_s(l),l)}let i;const o=pT(t);if(o&&o.getTime()>=mx["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new bg(_s(n),t.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(i==="session_not_found")throw new qn}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0))throw new bg(_s(n),t.status,n.weak_password.reasons);throw new K4(_s(n),t.status||500,i)}const vT=(t,e,n,i)=>{const o={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),n))};async function Ne(t,e,n,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[xf]||(l[xf]=mx["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const d=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(d.redirect_to=i.redirectTo);const m=Object.keys(d).length?"?"+new URLSearchParams(d).toString():"",p=await ET(t,e,n+m,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(p):{data:Object.assign({},p),error:null}}async function ET(t,e,n,i,o,l){const d=vT(e,i,o,l);let m;try{m=await t(n,Object.assign({},d))}catch(p){throw console.error(p),new vf(_s(p),0)}if(m.ok||await Ig(m),i!=null&&i.noResolveJson)return m;try{return await m.json()}catch(p){await Ig(p)}}function Sr(t){var e;let n=null;AT(t)&&(n=Object.assign({},t),t.expires_at||(n.expires_at=rT(t.expires_in)));const i=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:n,user:i},error:null}}function Rg(t){const e=Sr(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(e.data.weak_password=t.weak_password),e}function Wi(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function CT(t){return{data:t,error:null}}function bT(t){const{action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l}=t,d=Xu(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),m={action_link:e,email_otp:n,hashed_token:i,redirect_to:o,verification_type:l},p=Object.assign({},d);return{data:{properties:m,user:p},error:null}}function Og(t){return t}function AT(t){return t.access_token&&t.refresh_token&&t.expires_in}const th=["global","local","others"];class _T{constructor({url:e="",headers:n={},fetch:i}){this.url=e,this.headers=n,this.fetch=xx(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=th[0]){if(th.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${th.join(", ")}`);try{return await Ne(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async inviteUserByEmail(e,n={}){try{return await Ne(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Wi})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async generateLink(e){try{const{options:n}=e,i=Xu(e,["options"]),o=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Ne(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:bT,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(Ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Wi})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,i,o,l,d,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Ne(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Og});if(y.error)throw y.error;const v=await y.json(),E=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(T=>{const A=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(T.split(";")[1].split("=")[1]);g[`${N}Page`]=A}),g.total=parseInt(E)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ce(g))return{data:{users:[]},error:g};throw g}}async getUserById(e){co(e);try{return await Ne(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Wi})}catch(n){if(Ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){co(e);try{return await Ne(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Wi})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async deleteUser(e,n=!1){co(e);try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Wi})}catch(i){if(Ce(i))return{data:{user:null},error:i};throw i}}async _listFactors(e){co(e.userId);try{const{data:n,error:i}=await Ne(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:i}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _deleteFactor(e){co(e.userId),co(e.id);try{return{data:await Ne(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,i,o,l,d,m,p;try{const g={nextPage:null,lastPage:0,total:0},y=await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:Og});if(y.error)throw y.error;const v=await y.json(),E=(d=y.headers.get("x-total-count"))!==null&&d!==void 0?d:0,C=(p=(m=y.headers.get("link"))===null||m===void 0?void 0:m.split(","))!==null&&p!==void 0?p:[];return C.length>0&&(C.forEach(T=>{const A=parseInt(T.split(";")[0].split("=")[1].substring(0,1)),N=JSON.parse(T.split(";")[1].split("=")[1]);g[`${N}Page`]=A}),g.total=parseInt(E)),{data:Object.assign(Object.assign({},v),g),error:null}}catch(g){if(Ce(g))return{data:{clients:[]},error:g};throw g}}async _createOAuthClient(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await Ne(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await Ne(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(Ce(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(e){try{return await Ne(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ce(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await Ne(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(Ce(n))return{data:null,error:n};throw n}}}function Ng(t={}){return{getItem:e=>t[e]||null,setItem:(e,n)=>{t[e]=n},removeItem:e=>{delete t[e]}}}const uo={debug:!!(globalThis&&yx()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vx extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ST extends vx{}async function TT(t,e,n){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const i=new globalThis.AbortController;return e>0&&setTimeout(()=>{i.abort(),uo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,o.name);try{return await n()}finally{uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,o.name)}}else{if(e===0)throw uo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ST(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(uo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function IT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Ex(t){if(!/^0x[a-fA-F0-9]{40}$/.test(t))throw new Error(`@supabase/auth-js: Address "${t}" is invalid.`);return t.toLowerCase()}function RT(t){return parseInt(t,16)}function OT(t){const e=new TextEncoder().encode(t);return"0x"+Array.from(e,i=>i.toString(16).padStart(2,"0")).join("")}function NT(t){var e;const{chainId:n,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:d,notBefore:m,requestId:p,resources:g,scheme:y,uri:v,version:E}=t;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(d&&d.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${d}`);if(!v)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(E!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${E}`);if(!((e=t.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${t.statement}`)}const C=Ex(t.address),T=y?`${y}://${i}`:i,A=t.statement?`${t.statement}
`:"",N=`${T} wants you to sign in with your Ethereum account:
${C}

${A}`;let O=`URI: ${v}
Version: ${E}
Chain ID: ${n}${d?`
Nonce: ${d}`:""}
Issued At: ${l.toISOString()}`;if(o&&(O+=`
Expiration Time: ${o.toISOString()}`),m&&(O+=`
Not Before: ${m.toISOString()}`),p&&(O+=`
Request ID: ${p}`),g){let S=`
Resources:`;for(const _ of g){if(!_||typeof _!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${_}`);S+=`
- ${_}`}O+=S}return`${N}
${O}`}class zt extends Error{constructor({message:e,code:n,cause:i,name:o}){var l;super(e,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=n}}class du extends zt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function kT({error:t,options:e}){var n,i,o;const{publicKey:l}=e;if(!l)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new zt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else if(t.name==="ConstraintError"){if(((n=l.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new zt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:t});if(e.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new zt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:t});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new zt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:t})}else{if(t.name==="InvalidStateError")return new zt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:t});if(t.name==="NotAllowedError")return new zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="NotSupportedError")return l.pubKeyCredParams.filter(m=>m.type==="public-key").length===0?new zt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:t}):new zt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:t});if(t.name==="SecurityError"){const d=window.location.hostname;if(Cx(d)){if(l.rp.id!==d)return new zt({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new zt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:t})}else if(t.name==="UnknownError")return new zt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}function PT({error:t,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(t.name==="AbortError"){if(e.signal instanceof AbortSignal)return new zt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:t})}else{if(t.name==="NotAllowedError")return new zt({message:t.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t});if(t.name==="SecurityError"){const i=window.location.hostname;if(Cx(i)){if(n.rpId!==i)return new zt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:t})}else return new zt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:t})}else if(t.name==="UnknownError")return new zt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:t})}return new zt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t})}class DT{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const MT=new DT;function LT(t){if(!t)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(t);const{challenge:e,user:n,excludeCredentials:i}=t,o=Xu(t,["challenge","user","excludeCredentials"]),l=Uo(e).buffer,d=Object.assign(Object.assign({},n),{id:Uo(n.id).buffer}),m=Object.assign(Object.assign({},o),{challenge:l,user:d});if(i&&i.length>0){m.excludeCredentials=new Array(i.length);for(let p=0;p<i.length;p++){const g=i[p];m.excludeCredentials[p]=Object.assign(Object.assign({},g),{id:Uo(g.id).buffer,type:g.type||"public-key",transports:g.transports})}}return m}function BT(t){if(!t)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(t);const{challenge:e,allowCredentials:n}=t,i=Xu(t,["challenge","allowCredentials"]),o=Uo(e).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(n&&n.length>0){l.allowCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const m=n[d];l.allowCredentials[d]=Object.assign(Object.assign({},m),{id:Uo(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return l}function FT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t;return{id:t.id,rawId:t.id,response:{attestationObject:Ns(new Uint8Array(t.response.attestationObject)),clientDataJSON:Ns(new Uint8Array(t.response.clientDataJSON))},type:"public-key",clientExtensionResults:t.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function jT(t){var e;if("toJSON"in t&&typeof t.toJSON=="function")return t.toJSON();const n=t,i=t.getClientExtensionResults(),o=t.response;return{id:t.id,rawId:t.id,response:{authenticatorData:Ns(new Uint8Array(o.authenticatorData)),clientDataJSON:Ns(new Uint8Array(o.clientDataJSON)),signature:Ns(new Uint8Array(o.signature)),userHandle:o.userHandle?Ns(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Cx(t){return t==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(t)}function kg(){var t,e;return!!(dn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function UT(t){try{const e=await navigator.credentials.create(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new du("Browser returned unexpected credential type",e)}:{data:null,error:new du("Empty credential response",e)}}catch(e){return{data:null,error:kT({error:e,options:t})}}}async function zT(t){try{const e=await navigator.credentials.get(t);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new du("Browser returned unexpected credential type",e)}:{data:null,error:new du("Empty credential response",e)}}catch(e){return{data:null,error:PT({error:e,options:t})}}}const VT={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},WT={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function hu(...t){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of t)if(o)for(const l in o){const d=o[l];if(d!==void 0)if(Array.isArray(d))i[l]=d;else if(n(d))i[l]=d;else if(e(d)){const m=i[l];e(m)?i[l]=hu(m,d):i[l]=hu(d)}else i[l]=d}return i}function HT(t,e){return hu(VT,t,e||{})}function $T(t,e){return hu(WT,t,e||{})}class GT{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:i,signal:o},l){try{const{data:d,error:m}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!d)return{data:null,error:m};const p=o??MT.createNewAbortSignal();if(d.webauthn.type==="create"){const{user:g}=d.webauthn.credential_options.publicKey;g.name||(g.name=`${g.id}:${i}`),g.displayName||(g.displayName=g.name)}switch(d.webauthn.type){case"create":{const g=HT(d.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:y,error:v}=await UT({publicKey:g,signal:p});return y?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}case"request":{const g=$T(d.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:y,error:v}=await zT(Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:g,signal:p}));return y?{data:{factorId:e,challengeId:d.id,webauthn:{type:d.webauthn.type,credential_response:y}},error:null}:{data:null,error:v}}}}catch(d){return Ce(d)?{data:null,error:d}:{data:null,error:new Ts("Unexpected error in challenge",d)}}}async _verify({challengeId:e,factorId:n,webauthn:i}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:i})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new xl("rpId is required for WebAuthn authentication")};try{if(!kg())return{data:null,error:new Ts("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:i},signal:o},{request:l});if(!d)return{data:null,error:m};const{webauthn:p}=d;return this._verify({factorId:e,challengeId:d.challengeId,webauthn:{type:p.type,rpId:n,rpOrigins:i,credential_response:p.credential_response}})}catch(d){return Ce(d)?{data:null,error:d}:{data:null,error:new Ts("Unexpected error in authenticate",d)}}}async _register({friendlyName:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!n)return{data:null,error:new xl("rpId is required for WebAuthn registration")};try{if(!kg())return{data:null,error:new Ts("Browser does not support WebAuthn",null)};const{data:d,error:m}=await this._enroll({friendlyName:e});if(!d)return await this.client.mfa.listFactors().then(y=>{var v;return(v=y.data)===null||v===void 0?void 0:v.all.find(E=>E.factor_type==="webauthn"&&E.friendly_name===e&&E.status!=="unverified")}).then(y=>y?this.client.mfa.unenroll({factorId:y==null?void 0:y.id}):void 0),{data:null,error:m};const{data:p,error:g}=await this._challenge({factorId:d.id,friendlyName:d.friendly_name,webauthn:{rpId:n,rpOrigins:i},signal:o},{create:l});return p?this._verify({factorId:d.id,challengeId:p.challengeId,webauthn:{rpId:n,rpOrigins:i,type:p.webauthn.type,credential_response:p.webauthn.credential_response}}):{data:null,error:g}}catch(d){return Ce(d)?{data:null,error:d}:{data:null,error:new Ts("Unexpected error in register",d)}}}}IT();const KT={url:V4,storageKey:W4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:H4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function Pg(t,e,n){return await n()}const ho={};class vl{get jwks(){var e,n;return(n=(e=ho[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){ho[this.storageKey]=Object.assign(Object.assign({},ho[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=ho[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ho[this.storageKey]=Object.assign(Object.assign({},ho[this.storageKey]),{cachedAt:e})}constructor(e){var n,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},KT),e);if(this.storageKey=l.storageKey,this.instanceID=(n=vl.nextInstanceID[this.storageKey])!==null&&n!==void 0?n:0,vl.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&dn()){const d=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(d),this.logDebugMessages&&console.trace(d)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new _T({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=xx(l.fetch),this.lock=l.lock||Pg,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:this.persistSession&&dn()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=TT:this.lock=Pg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new GT(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:yx()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ng(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=Ng(this.memoryStorage)),dn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(d){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",d)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async d=>{this._debug("received broadcast notification from other tab or client",d),await this._notifyAllSubscribers(d.data.event,d.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${gx}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let n={},i="none";if(dn()&&(n=sT(window.location.href),this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce")),dn()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(n,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),q4(l)){const p=(e=l.details)===null||e===void 0?void 0:e.code;if(p==="identity_already_exists"||p==="identity_not_found"||p==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:d,redirectType:m}=o;return this._debug("#_initialize()","detected session in URL",d,"redirect type",m),await this._saveSession(d),setTimeout(async()=>{m==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",d):await this._notifyAllSubscribers("SIGNED_IN",d)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return Ce(n)?this._returnResult({error:n}):this._returnResult({error:new Ts("Unexpected error during initialization",n)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,i,o;try{const l=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Sr}),{data:d,error:m}=l;if(m||!d)return this._returnResult({data:{user:null,session:null},error:m});const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(e){var n,i,o;try{let l;if("email"in e){const{email:y,password:v,options:E}=e;let C=null,T=null;this.flowType==="pkce"&&([C,T]=await lo(this.storage,this.storageKey)),l=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:y,password:v,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:C,code_challenge_method:T},xform:Sr})}else if("phone"in e){const{phone:y,password:v,options:E}=e;l=await Ne(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:v,data:(i=E==null?void 0:E.data)!==null&&i!==void 0?i:{},channel:(o=E==null?void 0:E.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:Sr})}else throw new fc("You must provide either an email or phone number and a password");const{data:d,error:m}=l;if(m||!d)return await un(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:m});const p=d.session,g=d.user;return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(l){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(e){try{let n;if("email"in e){const{email:l,password:d,options:m}=e;n=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Rg})}else if("phone"in e){const{phone:l,password:d,options:m}=e;n=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:d,gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Rg})}else throw new fc("You must provide either an email or phone number and a password");const{data:i,error:o}=n;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new ao;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOAuth(e){var n,i,o,l;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=e.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,i,o,l,d,m,p,g,y,v,E;let C,T;if("message"in e)C=e.message,T=e.signature;else{const{chain:A,wallet:N,statement:O,options:S}=e;let _;if(dn())if(typeof N=="object")_=N;else{const W=window;if("ethereum"in W&&typeof W.ethereum=="object"&&"request"in W.ethereum&&typeof W.ethereum.request=="function")_=W.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(S!=null&&S.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");_=N}const D=new URL((n=S==null?void 0:S.url)!==null&&n!==void 0?n:window.location.href),U=await _.request({method:"eth_requestAccounts"}).then(W=>W).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!U||U.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const z=Ex(U[0]);let F=(i=S==null?void 0:S.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!F){const W=await _.request({method:"eth_chainId"});F=RT(W)}const K={domain:D.host,address:z,statement:O,uri:D.href,version:"1",chainId:F,nonce:(o=S==null?void 0:S.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(d=(l=S==null?void 0:S.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&d!==void 0?d:new Date,expirationTime:(m=S==null?void 0:S.signInWithEthereum)===null||m===void 0?void 0:m.expirationTime,notBefore:(p=S==null?void 0:S.signInWithEthereum)===null||p===void 0?void 0:p.notBefore,requestId:(g=S==null?void 0:S.signInWithEthereum)===null||g===void 0?void 0:g.requestId,resources:(y=S==null?void 0:S.signInWithEthereum)===null||y===void 0?void 0:y.resources};C=NT(K),T=await _.request({method:"personal_sign",params:[OT(C),z]})}try{const{data:A,error:N}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:C,signature:T},!((v=e.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(E=e.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Sr});if(N)throw N;if(!A||!A.session||!A.user){const O=new ao;return this._returnResult({data:{user:null,session:null},error:O})}return A.session&&(await this._saveSession(A.session),await this._notifyAllSubscribers("SIGNED_IN",A.session)),this._returnResult({data:Object.assign({},A),error:N})}catch(A){if(Ce(A))return this._returnResult({data:{user:null,session:null},error:A});throw A}}async signInWithSolana(e){var n,i,o,l,d,m,p,g,y,v,E,C;let T,A;if("message"in e)T=e.message,A=e.signature;else{const{chain:N,wallet:O,statement:S,options:_}=e;let D;if(dn())if(typeof O=="object")D=O;else{const z=window;if("solana"in z&&typeof z.solana=="object"&&("signIn"in z.solana&&typeof z.solana.signIn=="function"||"signMessage"in z.solana&&typeof z.solana.signMessage=="function"))D=z.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof O!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");D=O}const U=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in D&&D.signIn){const z=await D.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:U.host,uri:U.href}),S?{statement:S}:null));let F;if(Array.isArray(z)&&z[0]&&typeof z[0]=="object")F=z[0];else if(z&&typeof z=="object"&&"signedMessage"in z&&"signature"in z)F=z;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)T=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),A=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in D)||typeof D.signMessage!="function"||!("publicKey"in D)||typeof D!="object"||!D.publicKey||!("toBase58"in D.publicKey)||typeof D.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");T=[`${U.host} wants you to sign in with your Solana account:`,D.publicKey.toBase58(),...S?["",S,""]:[""],"Version: 1",`URI: ${U.href}`,`Issued At: ${(o=(i=_==null?void 0:_.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((d=_==null?void 0:_.signInWithSolana)===null||d===void 0)&&d.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((m=_==null?void 0:_.signInWithSolana)===null||m===void 0)&&m.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((p=_==null?void 0:_.signInWithSolana)===null||p===void 0)&&p.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((g=_==null?void 0:_.signInWithSolana)===null||g===void 0)&&g.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((v=(y=_==null?void 0:_.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||v===void 0)&&v.length?["Resources",..._.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const z=await D.signMessage(new TextEncoder().encode(T),"utf8");if(!z||!(z instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");A=z}}try{const{data:N,error:O}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:T,signature:Ns(A)},!((E=e.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(C=e.options)===null||C===void 0?void 0:C.captchaToken}}:null),xform:Sr});if(O)throw O;if(!N||!N.session||!N.user){const S=new ao;return this._returnResult({data:{user:null,session:null},error:S})}return N.session&&(await this._saveSession(N.session),await this._notifyAllSubscribers("SIGNED_IN",N.session)),this._returnResult({data:Object.assign({},N),error:O})}catch(N){if(Ce(N))return this._returnResult({data:{user:null,session:null},error:N});throw N}}async _exchangeCodeForSession(e){const n=await Es(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(n??"").split("/");try{if(!i&&this.flowType==="pkce")throw new Q4;const{data:l,error:d}=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:Sr});if(await un(this.storage,`${this.storageKey}-code-verifier`),d)throw d;if(!l||!l.session||!l.user){const m=new ao;return this._returnResult({data:{user:null,session:null,redirectType:null},error:m})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:d})}catch(l){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(e){try{const{options:n,provider:i,token:o,access_token:l,nonce:d}=e,m=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:d,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Sr}),{data:p,error:g}=m;if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p||!p.session||!p.user){const y=new ao;return this._returnResult({data:{user:null,session:null},error:y})}return p.session&&(await this._saveSession(p.session),await this._notifyAllSubscribers("SIGNED_IN",p.session)),this._returnResult({data:p,error:g})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithOtp(e){var n,i,o,l,d;try{if("email"in e){const{email:m,options:p}=e;let g=null,y=null;this.flowType==="pkce"&&([g,y]=await lo(this.storage,this.storageKey));const{error:v}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:m,data:(n=p==null?void 0:p.data)!==null&&n!==void 0?n:{},create_user:(i=p==null?void 0:p.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},code_challenge:g,code_challenge_method:y},redirectTo:p==null?void 0:p.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:v})}if("phone"in e){const{phone:m,options:p}=e,{data:g,error:y}=await Ne(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:m,data:(o=p==null?void 0:p.data)!==null&&o!==void 0?o:{},create_user:(l=p==null?void 0:p.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken},channel:(d=p==null?void 0:p.channel)!==null&&d!==void 0?d:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:g==null?void 0:g.message_id},error:y})}throw new fc("You must provide either an email or phone number.")}catch(m){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async verifyOtp(e){var n,i;try{let o,l;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,l=(i=e.options)===null||i===void 0?void 0:i.captchaToken);const{data:d,error:m}=await Ne(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Sr});if(m)throw m;if(!d)throw new Error("An error occurred on token verification.");const p=d.session,g=d.user;return p!=null&&p.access_token&&(await this._saveSession(p),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",p)),this._returnResult({data:{user:g,session:p},error:null})}catch(o){if(Ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(e){var n,i,o,l,d;try{let m=null,p=null;this.flowType==="pkce"&&([m,p]=await lo(this.storage,this.storageKey));const g=await Ne(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:m,code_challenge_method:p}),headers:this.headers,xform:CT});return!((l=g.data)===null||l===void 0)&&l.url&&dn()&&!(!((d=e.options)===null||d===void 0)&&d.skipBrowserRedirect)&&window.location.assign(g.data.url),this._returnResult(g)}catch(m){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(m))return this._returnResult({data:null,error:m});throw m}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new qn;const{error:o}=await Ne(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(e){if(Ce(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:i,type:o,options:l}=e,{error:d}=await Ne(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:d})}else if("phone"in e){const{phone:i,type:o,options:l}=e,{data:d,error:m}=await Ne(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:m})}throw new fc("You must provide either an email or phone number and a type")}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Es(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const i=e.expires_at?e.expires_at*1e3-Date.now()<Qd:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){const d=await Es(this.userStorage,this.storageKey+"-user");d!=null&&d.user?e.user=d.user:e.user=eh()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const d={value:this.suppressGetSessionWarning};e.user=yT(e.user,d),d.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;const n=await this._acquireLock(-1,async()=>await this._getUser());return n.data.user&&(this.suppressGetSessionWarning=!0),n}async _getUser(e){try{return e?await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Wi}):await this._useSession(async n=>{var i,o,l;const{data:d,error:m}=n;if(m)throw m;return!(!((i=d.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new qn}:await Ne(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=d.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:Wi})})}catch(n){if(Ce(n))return Y4(n)&&(await this._removeSession(),await un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:n});throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new qn;const d=o.session;let m=null,p=null;this.flowType==="pkce"&&e.email!=null&&([m,p]=await lo(this.storage,this.storageKey));const{data:g,error:y}=await Ne(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:m,code_challenge_method:p}),jwt:d.access_token,xform:Wi});if(y)throw y;return d.user=g.user,await this._saveSession(d),await this._notifyAllSubscribers("USER_UPDATED",d),this._returnResult({data:{user:d.user},error:null})})}catch(i){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new qn;const n=Date.now()/1e3;let i=n,o=!0,l=null;const{payload:d}=Jd(e.access_token);if(d.exp&&(i=d.exp,o=i<=n),o){const{data:m,error:p}=await this._callRefreshToken(e.refresh_token);if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!m)return{data:{user:null,session:null},error:null};l=m}else{const{data:m,error:p}=await this._getUser(e.access_token);if(p)throw p;l={access_token:e.access_token,refresh_token:e.refresh_token,user:m.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(n){if(Ce(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var i;if(!e){const{data:d,error:m}=n;if(m)throw m;e=(i=d.session)!==null&&i!==void 0?i:void 0}if(!(e!=null&&e.refresh_token))throw new qn;const{data:o,error:l}=await this._callRefreshToken(e.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(n){if(Ce(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async _getSessionFromURL(e,n){try{if(!dn())throw new pc("No browser detected.");if(e.error||e.error_description||e.error_code)throw new pc(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Cg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new pc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Cg("No code detected.");const{data:S,error:_}=await this._exchangeCodeForSession(e.code);if(_)throw _;const D=new URL(window.location.href);return D.searchParams.delete("code"),window.history.replaceState(window.history.state,"",D.toString()),{data:{session:S.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:d,expires_in:m,expires_at:p,token_type:g}=e;if(!l||!m||!d||!g)throw new pc("No session defined in URL");const y=Math.round(Date.now()/1e3),v=parseInt(m);let E=y+v;p&&(E=parseInt(p));const C=E-y;C*1e3<=po&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${v}s`);const T=E-v;y-T>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",T,E,y):y-T<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",T,E,y);const{data:A,error:N}=await this._getUser(l);if(N)throw N;const O={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:v,expires_at:E,refresh_token:d,token_type:g,user:A.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:O,redirectType:e.type},error:null})}catch(i){if(Ce(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Es(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({error:l});const d=(i=o.session)===null||i===void 0?void 0:i.access_token;if(d){const{error:m}=await this.admin.signOut(d,e);if(m&&!(X4(m)&&(m.status===404||m.status===401||m.status===403)))return this._returnResult({error:m})}return e!=="others"&&(await this._removeSession(),await un(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const n=iT(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(e){return await this._useSession(async n=>{var i,o;try{const{data:{session:l},error:d}=n;if(d)throw d;await((i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",e,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",l),console.error(l)}})}async resetPasswordForEmail(e,n={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await lo(this.storage,this.storageKey,!0));try{return await Ne(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var e;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:i,error:o}=await this._useSession(async l=>{var d,m,p,g,y;const{data:v,error:E}=l;if(E)throw E;const C=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(d=e.options)===null||d===void 0?void 0:d.redirectTo,scopes:(m=e.options)===null||m===void 0?void 0:m.scopes,queryParams:(p=e.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:!0});return await Ne(this.fetch,"GET",C,{headers:this.headers,jwt:(y=(g=v.session)===null||g===void 0?void 0:g.access_token)!==null&&y!==void 0?y:void 0})});if(o)throw o;return dn()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:e.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(Ce(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var i;try{const{error:o,data:{session:l}}=n;if(o)throw o;const{options:d,provider:m,token:p,access_token:g,nonce:y}=e,v=await Ne(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l==null?void 0:l.access_token)!==null&&i!==void 0?i:void 0,body:{provider:m,id_token:p,access_token:g,nonce:y,link_identity:!0,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Sr}),{data:E,error:C}=v;return C?this._returnResult({data:{user:null,session:null},error:C}):!E||!E.session||!E.user?this._returnResult({data:{user:null,session:null},error:new ao}):(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("USER_UPDATED",E.session)),this._returnResult({data:E,error:C}))}catch(o){if(await un(this.storage,`${this.storageKey}-code-verifier`),Ce(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:d}=n;if(d)throw d;return await Ne(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await lT(async o=>(o>0&&await aT(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await Ne(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Sr})),(o,l)=>{const d=200*Math.pow(2,o);return l&&Zd(l)&&Date.now()+d-i<po})}catch(i){if(this._debug(n,"error",i),Ce(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),dn()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}}async _recoverAndRefresh(){var e,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await Es(this.storage,this.storageKey);if(o&&this.userStorage){let d=await Es(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!d&&(d={user:o.user},await go(this.userStorage,this.storageKey+"-user",d)),o.user=(e=d==null?void 0:d.user)!==null&&e!==void 0?e:eh()}else if(o&&!o.user&&!o.user){const d=await Es(this.storage,this.storageKey+"-user");d&&(d!=null&&d.user)?(o.user=d.user,await un(this.storage,this.storageKey+"-user"),await go(this.storage,this.storageKey,o)):o.user=eh()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Qd;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Qd}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:d}=await this._callRefreshToken(o.refresh_token);d&&(console.error(d),Zd(d)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",d),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:d,error:m}=await this._getUser(o.access_token);!m&&(d!=null&&d.user)?(o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(d){console.error("Error getting user data:",d),this._debug(i,"error getting user data, skipping SIGNED_IN notification",d)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(e){var n,i;if(!e)throw new qn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new qu;const{data:l,error:d}=await this._refreshAccessToken(e);if(d)throw d;if(!l.session)throw new qn;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const m={data:l.session,error:null};return this.refreshingDeferred.resolve(m),m}catch(l){if(this._debug(o,"error",l),Ce(l)){const d={data:null,error:l};return Zd(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(d),d}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,i=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});const l=[],d=Array.from(this.stateChangeEmitters.values()).map(async m=>{try{await m.callback(e,n)}catch(p){l.push(p)}});if(await Promise.all(d),l.length>0){for(let m=0;m<l.length;m+=1)console.error(l[m]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await un(this.storage,`${this.storageKey}-code-verifier`);const n=Object.assign({},e),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await go(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const l=Tg(o);await go(this.storage,this.storageKey,l)}else{const o=Tg(n);await go(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await un(this.storage,this.storageKey),await un(this.storage,this.storageKey+"-code-verifier"),await un(this.storage,this.storageKey+"-user"),this.userStorage&&await un(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&dn()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),po);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-e)/po);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${po}ms, refresh threshold is ${yf} ticks`),o<=yf&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof vx)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!dn()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,i){const o=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,d]=await lo(this.storage,this.storageKey),m=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(d)}`});o.push(m.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;return l?this._returnResult({data:null,error:l}):await Ne(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _enroll(e){try{return await this._useSession(async n=>{var i,o;const{data:l,error:d}=n;if(d)return this._returnResult({data:null,error:d});const m=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:p,error:g}=await Ne(this.fetch,"POST",`${this.url}/factors`,{body:m,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(e.factorType==="totp"&&p.type==="totp"&&(!((o=p==null?void 0:p.totp)===null||o===void 0)&&o.qr_code)&&(p.totp.qr_code=`data:image/svg+xml;utf-8,${p.totp.qr_code}`),this._returnResult({data:p,error:null}))})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const d=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?FT(e.webauthn.credential_response):jT(e.webauthn.credential_response)})}:{code:e.code}),{data:m,error:p}=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:d,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return p?this._returnResult({data:null,error:p}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+m.expires_in},m)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",m),this._returnResult({data:m,error:p}))})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:o,error:l}=n;if(l)return this._returnResult({data:null,error:l});const d=await Ne(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(d.error)return d;const{data:m}=d;if(m.type!=="webauthn")return{data:m,error:null};switch(m.webauthn.type){case"create":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:LT(m.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},m),{webauthn:Object.assign(Object.assign({},m.webauthn),{credential_options:Object.assign(Object.assign({},m.webauthn.credential_options),{publicKey:BT(m.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}})}async _challengeAndVerify(e){const{data:n,error:i}=await this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=Jd(i.access_token);let d=null;l.aal&&(d=l.aal);let m=d;((n=(e=i.user.factors)===null||e===void 0?void 0:e.filter(y=>y.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(m="aal2");const g=l.amr||[];return{data:{currentLevel:d,nextLevel:m,currentAuthenticationMethods:g},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?await Ne(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new qn})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new qn});const d=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&dn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(e,n){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new qn});const d=await Ne(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:m=>({data:m,error:null})});return d.data&&d.data.redirect_url&&dn()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(d.data.redirect_url),d})}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async e=>{const{data:{session:n},error:i}=e;return i?this._returnResult({data:null,error:i}):n?await Ne(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:n.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new qn})})}catch(e){if(Ce(e))return this._returnResult({data:null,error:e});throw e}}async _revokeOAuthGrant(e){try{return await this._useSession(async n=>{const{data:{session:i},error:o}=n;return o?this._returnResult({data:null,error:o}):i?(await Ne(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new qn})})}catch(n){if(Ce(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,n={keys:[]}){let i=n.keys.find(m=>m.kid===e);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(m=>m.kid===e),i&&this.jwks_cached_at+G4>o)return i;const{data:l,error:d}=await Ne(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(d)throw d;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(m=>m.kid===e),!i)?null:i}async getClaims(e,n={}){try{let i=e;if(!i){const{data:C,error:T}=await this.getSession();if(T||!C.session)return this._returnResult({data:null,error:T});i=C.session.access_token}const{header:o,payload:l,signature:d,raw:{header:m,payload:p}}=Jd(i);n!=null&&n.allowExpired||gT(l.exp);const g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!g){const{error:C}=await this.getUser(i);if(C)throw C;return{data:{claims:l,header:o,signature:d},error:null}}const y=mT(o.alg),v=await crypto.subtle.importKey("jwk",g,y,!0,["verify"]);if(!await crypto.subtle.verify(y,v,d,nT(`${m}.${p}`)))throw new Ef("Invalid JWT signature");return{data:{claims:l,header:o,signature:d},error:null}}catch(i){if(Ce(i))return this._returnResult({data:null,error:i});throw i}}}vl.nextInstanceID={};const XT=vl,YT="2.89.0";let La="";typeof Deno<"u"?La="deno":typeof document<"u"?La="web":typeof navigator<"u"&&navigator.product==="ReactNative"?La="react-native":La="node";const qT={"X-Client-Info":`supabase-js-${La}/${YT}`},QT={headers:qT},ZT={schema:"public"},JT={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},eI={};function El(t){"@babel/helpers - typeof";return El=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},El(t)}function tI(t,e){if(El(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(El(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function nI(t){var e=tI(t,"string");return El(e)=="symbol"?e:e+""}function rI(t,e,n){return(e=nI(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),n.push.apply(n,i)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dg(Object(n),!0).forEach(function(i){rI(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dg(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}const iI=t=>t?(...e)=>t(...e):(...e)=>fetch(...e),sI=()=>Headers,oI=(t,e,n)=>{const i=iI(n),o=sI();return async(l,d)=>{var m;const p=(m=await e())!==null&&m!==void 0?m:t;let g=new o(d==null?void 0:d.headers);return g.has("apikey")||g.set("apikey",t),g.has("Authorization")||g.set("Authorization",`Bearer ${p}`),i(l,Dt(Dt({},d),{},{headers:g}))}};function aI(t){return t.endsWith("/")?t:t+"/"}function lI(t,e){var n,i;const{db:o,auth:l,realtime:d,global:m}=t,{db:p,auth:g,realtime:y,global:v}=e,E={db:Dt(Dt({},p),o),auth:Dt(Dt({},g),l),realtime:Dt(Dt({},y),d),storage:{},global:Dt(Dt(Dt({},v),m),{},{headers:Dt(Dt({},(n=v==null?void 0:v.headers)!==null&&n!==void 0?n:{}),(i=m==null?void 0:m.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return t.accessToken?E.accessToken=t.accessToken:delete E.accessToken,E}function cI(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(aI(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var uI=class extends XT{constructor(t){super(t)}},dI=class{constructor(t,e,n){var i,o;this.supabaseUrl=t,this.supabaseKey=e;const l=cI(t);if(!e)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,m={db:ZT,realtime:eI,auth:Dt(Dt({},JT),{},{storageKey:d}),global:QT},p=lI(n??{},m);if(this.storageKey=(i=p.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(o=p.global.headers)!==null&&o!==void 0?o:{},p.accessToken)this.accessToken=p.accessToken,this.auth=new Proxy({},{get:(y,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}});else{var g;this.auth=this._initSupabaseAuthClient((g=p.auth)!==null&&g!==void 0?g:{},this.headers,p.global.fetch)}this.fetch=oI(e,this._getAccessToken.bind(this),p.global.fetch),this.realtime=this._initRealtimeClient(Dt({headers:this.headers,accessToken:this._getAccessToken.bind(this)},p.realtime)),this.accessToken&&this.accessToken().then(y=>this.realtime.setAuth(y)).catch(y=>console.warn("Failed to set initial Realtime auth token:",y)),this.rest=new H8(new URL("rest/v1",l).href,{headers:this.headers,schema:p.db.schema,fetch:this.fetch}),this.storage=new z4(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),p.accessToken||this._listenForAuthEvents()}get functions(){return new j8(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t=this,e,n;if(t.accessToken)return await t.accessToken();const{data:i}=await t.auth.getSession();return(e=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&e!==void 0?e:t.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,storageKey:l,flowType:d,lock:m,debug:p,throwOnError:g},y,v){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new uI({url:this.authUrl.href,headers:Dt(Dt({},E),y),storageKey:l,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,userStorage:o,flowType:d,lock:m,debug:p,throwOnError:g,fetch:v,hasCustomAuthorizationHeader:Object.keys(this.headers).some(C=>C.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new a4(this.realtimeUrl.href,Dt(Dt({},t),{},{params:Dt(Dt({},{apikey:this.supabaseKey}),t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,e)=>{this._handleTokenChanged(t,"CLIENT",e==null?void 0:e.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const hI=(t,e,n)=>new dI(t,e,n);function fI(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}fI()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const pI="https://cycuhufiizprykklcjcc.supabase.co",gI="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImN5Y3VodWZpaXpwcnlra2xjamNjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjYzMTIyNjgsImV4cCI6MjA4MTg4ODI2OH0.0yDAtz0XKw852wvFBjC7Su1_OukIfUCtHc5Hwgut6Vk",Na=hI(pI,gI,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}});var mI=Object.defineProperty,fu=Object.getOwnPropertySymbols,bx=Object.prototype.hasOwnProperty,Ax=Object.prototype.propertyIsEnumerable,Mg=(t,e,n)=>e in t?mI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Cf=(t,e)=>{for(var n in e||(e={}))bx.call(e,n)&&Mg(t,n,e[n]);if(fu)for(var n of fu(e))Ax.call(e,n)&&Mg(t,n,e[n]);return t},bf=(t,e)=>{var n={};for(var i in t)bx.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&fu)for(var i of fu(t))e.indexOf(i)<0&&Ax.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Gs;(t=>{const e=class We{constructor(p,g,y,v){if(this.version=p,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],p<We.MIN_VERSION||p>We.MAX_VERSION)throw new RangeError("Version value out of range");if(v<-1||v>7)throw new RangeError("Mask value out of range");this.size=p*4+17;let E=[];for(let T=0;T<this.size;T++)E.push(!1);for(let T=0;T<this.size;T++)this.modules.push(E.slice()),this.isFunction.push(E.slice());this.drawFunctionPatterns();const C=this.addEccAndInterleave(y);if(this.drawCodewords(C),v==-1){let T=1e9;for(let A=0;A<8;A++){this.applyMask(A),this.drawFormatBits(A);const N=this.getPenaltyScore();N<T&&(v=A,T=N),this.applyMask(A)}}o(0<=v&&v<=7),this.mask=v,this.applyMask(v),this.drawFormatBits(v),this.isFunction=[]}static encodeText(p,g){const y=t.QrSegment.makeSegments(p);return We.encodeSegments(y,g)}static encodeBinary(p,g){const y=t.QrSegment.makeBytes(p);return We.encodeSegments([y],g)}static encodeSegments(p,g,y=1,v=40,E=-1,C=!0){if(!(We.MIN_VERSION<=y&&y<=v&&v<=We.MAX_VERSION)||E<-1||E>7)throw new RangeError("Invalid value");let T,A;for(T=y;;T++){const _=We.getNumDataCodewords(T,g)*8,D=d.getTotalBits(p,T);if(D<=_){A=D;break}if(T>=v)throw new RangeError("Data too long")}for(const _ of[We.Ecc.MEDIUM,We.Ecc.QUARTILE,We.Ecc.HIGH])C&&A<=We.getNumDataCodewords(T,_)*8&&(g=_);let N=[];for(const _ of p){n(_.mode.modeBits,4,N),n(_.numChars,_.mode.numCharCountBits(T),N);for(const D of _.getData())N.push(D)}o(N.length==A);const O=We.getNumDataCodewords(T,g)*8;o(N.length<=O),n(0,Math.min(4,O-N.length),N),n(0,(8-N.length%8)%8,N),o(N.length%8==0);for(let _=236;N.length<O;_^=253)n(_,8,N);let S=[];for(;S.length*8<N.length;)S.push(0);return N.forEach((_,D)=>S[D>>>3]|=_<<7-(D&7)),new We(T,g,S,E)}getModule(p,g){return 0<=p&&p<this.size&&0<=g&&g<this.size&&this.modules[g][p]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const p=this.getAlignmentPatternPositions(),g=p.length;for(let y=0;y<g;y++)for(let v=0;v<g;v++)y==0&&v==0||y==0&&v==g-1||y==g-1&&v==0||this.drawAlignmentPattern(p[y],p[v]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(p){const g=this.errorCorrectionLevel.formatBits<<3|p;let y=g;for(let E=0;E<10;E++)y=y<<1^(y>>>9)*1335;const v=(g<<10|y)^21522;o(v>>>15==0);for(let E=0;E<=5;E++)this.setFunctionModule(8,E,i(v,E));this.setFunctionModule(8,7,i(v,6)),this.setFunctionModule(8,8,i(v,7)),this.setFunctionModule(7,8,i(v,8));for(let E=9;E<15;E++)this.setFunctionModule(14-E,8,i(v,E));for(let E=0;E<8;E++)this.setFunctionModule(this.size-1-E,8,i(v,E));for(let E=8;E<15;E++)this.setFunctionModule(8,this.size-15+E,i(v,E));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let p=this.version;for(let y=0;y<12;y++)p=p<<1^(p>>>11)*7973;const g=this.version<<12|p;o(g>>>18==0);for(let y=0;y<18;y++){const v=i(g,y),E=this.size-11+y%3,C=Math.floor(y/3);this.setFunctionModule(E,C,v),this.setFunctionModule(C,E,v)}}drawFinderPattern(p,g){for(let y=-4;y<=4;y++)for(let v=-4;v<=4;v++){const E=Math.max(Math.abs(v),Math.abs(y)),C=p+v,T=g+y;0<=C&&C<this.size&&0<=T&&T<this.size&&this.setFunctionModule(C,T,E!=2&&E!=4)}}drawAlignmentPattern(p,g){for(let y=-2;y<=2;y++)for(let v=-2;v<=2;v++)this.setFunctionModule(p+v,g+y,Math.max(Math.abs(v),Math.abs(y))!=1)}setFunctionModule(p,g,y){this.modules[g][p]=y,this.isFunction[g][p]=!0}addEccAndInterleave(p){const g=this.version,y=this.errorCorrectionLevel;if(p.length!=We.getNumDataCodewords(g,y))throw new RangeError("Invalid argument");const v=We.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][g],E=We.ECC_CODEWORDS_PER_BLOCK[y.ordinal][g],C=Math.floor(We.getNumRawDataModules(g)/8),T=v-C%v,A=Math.floor(C/v);let N=[];const O=We.reedSolomonComputeDivisor(E);for(let _=0,D=0;_<v;_++){let U=p.slice(D,D+A-E+(_<T?0:1));D+=U.length;const z=We.reedSolomonComputeRemainder(U,O);_<T&&U.push(0),N.push(U.concat(z))}let S=[];for(let _=0;_<N[0].length;_++)N.forEach((D,U)=>{(_!=A-E||U>=T)&&S.push(D[_])});return o(S.length==C),S}drawCodewords(p){if(p.length!=Math.floor(We.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let v=0;v<this.size;v++)for(let E=0;E<2;E++){const C=y-E,A=(y+1&2)==0?this.size-1-v:v;!this.isFunction[A][C]&&g<p.length*8&&(this.modules[A][C]=i(p[g>>>3],7-(g&7)),g++)}}o(g==p.length*8)}applyMask(p){if(p<0||p>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let y=0;y<this.size;y++){let v;switch(p){case 0:v=(y+g)%2==0;break;case 1:v=g%2==0;break;case 2:v=y%3==0;break;case 3:v=(y+g)%3==0;break;case 4:v=(Math.floor(y/3)+Math.floor(g/2))%2==0;break;case 5:v=y*g%2+y*g%3==0;break;case 6:v=(y*g%2+y*g%3)%2==0;break;case 7:v=((y+g)%2+y*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][y]&&v&&(this.modules[g][y]=!this.modules[g][y])}}getPenaltyScore(){let p=0;for(let E=0;E<this.size;E++){let C=!1,T=0,A=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[E][N]==C?(T++,T==5?p+=We.PENALTY_N1:T>5&&p++):(this.finderPenaltyAddHistory(T,A),C||(p+=this.finderPenaltyCountPatterns(A)*We.PENALTY_N3),C=this.modules[E][N],T=1);p+=this.finderPenaltyTerminateAndCount(C,T,A)*We.PENALTY_N3}for(let E=0;E<this.size;E++){let C=!1,T=0,A=[0,0,0,0,0,0,0];for(let N=0;N<this.size;N++)this.modules[N][E]==C?(T++,T==5?p+=We.PENALTY_N1:T>5&&p++):(this.finderPenaltyAddHistory(T,A),C||(p+=this.finderPenaltyCountPatterns(A)*We.PENALTY_N3),C=this.modules[N][E],T=1);p+=this.finderPenaltyTerminateAndCount(C,T,A)*We.PENALTY_N3}for(let E=0;E<this.size-1;E++)for(let C=0;C<this.size-1;C++){const T=this.modules[E][C];T==this.modules[E][C+1]&&T==this.modules[E+1][C]&&T==this.modules[E+1][C+1]&&(p+=We.PENALTY_N2)}let g=0;for(const E of this.modules)g=E.reduce((C,T)=>C+(T?1:0),g);const y=this.size*this.size,v=Math.ceil(Math.abs(g*20-y*10)/y)-1;return o(0<=v&&v<=9),p+=v*We.PENALTY_N4,o(0<=p&&p<=2568888),p}getAlignmentPatternPositions(){if(this.version==1)return[];{const p=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(p*2-2))*2;let y=[6];for(let v=this.size-7;y.length<p;v-=g)y.splice(1,0,v);return y}}static getNumRawDataModules(p){if(p<We.MIN_VERSION||p>We.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*p+128)*p+64;if(p>=2){const y=Math.floor(p/7)+2;g-=(25*y-10)*y-55,p>=7&&(g-=36)}return o(208<=g&&g<=29648),g}static getNumDataCodewords(p,g){return Math.floor(We.getNumRawDataModules(p)/8)-We.ECC_CODEWORDS_PER_BLOCK[g.ordinal][p]*We.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][p]}static reedSolomonComputeDivisor(p){if(p<1||p>255)throw new RangeError("Degree out of range");let g=[];for(let v=0;v<p-1;v++)g.push(0);g.push(1);let y=1;for(let v=0;v<p;v++){for(let E=0;E<g.length;E++)g[E]=We.reedSolomonMultiply(g[E],y),E+1<g.length&&(g[E]^=g[E+1]);y=We.reedSolomonMultiply(y,2)}return g}static reedSolomonComputeRemainder(p,g){let y=g.map(v=>0);for(const v of p){const E=v^y.shift();y.push(0),g.forEach((C,T)=>y[T]^=We.reedSolomonMultiply(C,E))}return y}static reedSolomonMultiply(p,g){if(p>>>8||g>>>8)throw new RangeError("Byte out of range");let y=0;for(let v=7;v>=0;v--)y=y<<1^(y>>>7)*285,y^=(g>>>v&1)*p;return o(y>>>8==0),y}finderPenaltyCountPatterns(p){const g=p[1];o(g<=this.size*3);const y=g>0&&p[2]==g&&p[3]==g*3&&p[4]==g&&p[5]==g;return(y&&p[0]>=g*4&&p[6]>=g?1:0)+(y&&p[6]>=g*4&&p[0]>=g?1:0)}finderPenaltyTerminateAndCount(p,g,y){return p&&(this.finderPenaltyAddHistory(g,y),g=0),g+=this.size,this.finderPenaltyAddHistory(g,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(p,g){g[0]==0&&(p+=this.size),g.pop(),g.unshift(p)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(m,p,g){if(p<0||p>31||m>>>p)throw new RangeError("Value out of range");for(let y=p-1;y>=0;y--)g.push(m>>>y&1)}function i(m,p){return(m>>>p&1)!=0}function o(m){if(!m)throw new Error("Assertion error")}const l=class Nt{constructor(p,g,y){if(this.mode=p,this.numChars=g,this.bitData=y,g<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(p){let g=[];for(const y of p)n(y,8,g);return new Nt(Nt.Mode.BYTE,p.length,g)}static makeNumeric(p){if(!Nt.isNumeric(p))throw new RangeError("String contains non-numeric characters");let g=[];for(let y=0;y<p.length;){const v=Math.min(p.length-y,3);n(parseInt(p.substring(y,y+v),10),v*3+1,g),y+=v}return new Nt(Nt.Mode.NUMERIC,p.length,g)}static makeAlphanumeric(p){if(!Nt.isAlphanumeric(p))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],y;for(y=0;y+2<=p.length;y+=2){let v=Nt.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y))*45;v+=Nt.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y+1)),n(v,11,g)}return y<p.length&&n(Nt.ALPHANUMERIC_CHARSET.indexOf(p.charAt(y)),6,g),new Nt(Nt.Mode.ALPHANUMERIC,p.length,g)}static makeSegments(p){return p==""?[]:Nt.isNumeric(p)?[Nt.makeNumeric(p)]:Nt.isAlphanumeric(p)?[Nt.makeAlphanumeric(p)]:[Nt.makeBytes(Nt.toUtf8ByteArray(p))]}static makeEci(p){let g=[];if(p<0)throw new RangeError("ECI assignment value out of range");if(p<128)n(p,8,g);else if(p<16384)n(2,2,g),n(p,14,g);else if(p<1e6)n(6,3,g),n(p,21,g);else throw new RangeError("ECI assignment value out of range");return new Nt(Nt.Mode.ECI,0,g)}static isNumeric(p){return Nt.NUMERIC_REGEX.test(p)}static isAlphanumeric(p){return Nt.ALPHANUMERIC_REGEX.test(p)}getData(){return this.bitData.slice()}static getTotalBits(p,g){let y=0;for(const v of p){const E=v.mode.numCharCountBits(g);if(v.numChars>=1<<E)return 1/0;y+=4+E+v.bitData.length}return y}static toUtf8ByteArray(p){p=encodeURI(p);let g=[];for(let y=0;y<p.length;y++)p.charAt(y)!="%"?g.push(p.charCodeAt(y)):(g.push(parseInt(p.substring(y+1,y+3),16)),y+=2);return g}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let d=l;t.QrSegment=l})(Gs||(Gs={}));(t=>{(e=>{const n=class{constructor(o,l){this.ordinal=o,this.formatBits=l}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Gs||(Gs={}));(t=>{(e=>{const n=class{constructor(o,l){this.modeBits=o,this.numBitsCharCount=l}numCharCountBits(o){return this.numBitsCharCount[Math.floor((o+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Gs||(Gs={}));var Ro=Gs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var wI={L:Ro.QrCode.Ecc.LOW,M:Ro.QrCode.Ecc.MEDIUM,Q:Ro.QrCode.Ecc.QUARTILE,H:Ro.QrCode.Ecc.HIGH},_x=128,Sx="L",Tx="#FFFFFF",Ix="#000000",Rx=!1,Ox=1,yI=4,xI=0,vI=.1;function Nx(t,e=0){const n=[];return t.forEach(function(i,o){let l=null;i.forEach(function(d,m){if(!d&&l!==null){n.push(`M${l+e} ${o+e}h${m-l}v1H${l+e}z`),l=null;return}if(m===i.length-1){if(!d)return;l===null?n.push(`M${m+e},${o+e} h1v1H${m+e}z`):n.push(`M${l+e},${o+e} h${m+1-l}v1H${l+e}z`);return}d&&l===null&&(l=m)})}),n.join("")}function kx(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((o,l)=>l<e.x||l>=e.x+e.w?o:!1))}function EI(t,e,n,i){if(i==null)return null;const o=t.length+n*2,l=Math.floor(e*vI),d=o/e,m=(i.width||l)*d,p=(i.height||l)*d,g=i.x==null?t.length/2-m/2:i.x*d,y=i.y==null?t.length/2-p/2:i.y*d,v=i.opacity==null?1:i.opacity;let E=null;if(i.excavate){let T=Math.floor(g),A=Math.floor(y),N=Math.ceil(m+g-T),O=Math.ceil(p+y-A);E={x:T,y:A,w:N,h:O}}const C=i.crossOrigin;return{x:g,y,h:p,w:m,excavation:E,opacity:v,crossOrigin:C}}function CI(t,e){return e!=null?Math.max(Math.floor(e),0):t?yI:xI}function Px({value:t,level:e,minVersion:n,includeMargin:i,marginSize:o,imageSettings:l,size:d,boostLevel:m}){let p=ne.useMemo(()=>{const T=(Array.isArray(t)?t:[t]).reduce((A,N)=>(A.push(...Ro.QrSegment.makeSegments(N)),A),[]);return Ro.QrCode.encodeSegments(T,wI[e],n,void 0,void 0,m)},[t,e,n,m]);const{cells:g,margin:y,numCells:v,calculatedImageSettings:E}=ne.useMemo(()=>{let C=p.getModules();const T=CI(i,o),A=C.length+T*2,N=EI(C,d,T,l);return{cells:C,margin:T,numCells:A,calculatedImageSettings:N}},[p,d,l,i,o]);return{qrcode:p,margin:y,cells:g,numCells:v,calculatedImageSettings:E}}var bI=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),AI=ne.forwardRef(function(e,n){const i=e,{value:o,size:l=_x,level:d=Sx,bgColor:m=Tx,fgColor:p=Ix,includeMargin:g=Rx,minVersion:y=Ox,boostLevel:v,marginSize:E,imageSettings:C}=i,A=bf(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:N}=A,O=bf(A,["style"]),S=C==null?void 0:C.src,_=ne.useRef(null),D=ne.useRef(null),U=ne.useCallback(te=>{_.current=te,typeof n=="function"?n(te):n&&(n.current=te)},[n]),[z,F]=ne.useState(!1),{margin:K,cells:W,numCells:re,calculatedImageSettings:he}=Px({value:o,level:d,minVersion:y,boostLevel:v,includeMargin:g,marginSize:E,imageSettings:C,size:l});ne.useEffect(()=>{if(_.current!=null){const te=_.current,H=te.getContext("2d");if(!H)return;let pe=W;const oe=D.current,q=he!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;q&&he.excavation!=null&&(pe=kx(W,he.excavation));const Z=window.devicePixelRatio||1;te.height=te.width=l*Z;const de=l/re*Z;H.scale(de,de),H.fillStyle=m,H.fillRect(0,0,re,re),H.fillStyle=p,bI?H.fill(new Path2D(Nx(pe,K))):W.forEach(function(Ae,fe){Ae.forEach(function(Te,Ee){Te&&H.fillRect(Ee+K,fe+K,1,1)})}),he&&(H.globalAlpha=he.opacity),q&&H.drawImage(oe,he.x+K,he.y+K,he.w,he.h)}}),ne.useEffect(()=>{F(!1)},[S]);const Q=Cf({height:l,width:l},N);let ce=null;return S!=null&&(ce=ne.createElement("img",{src:S,key:S,style:{display:"none"},onLoad:()=>{F(!0)},ref:D,crossOrigin:he==null?void 0:he.crossOrigin})),ne.createElement(ne.Fragment,null,ne.createElement("canvas",Cf({style:Q,height:l,width:l,ref:U,role:"img"},O)),ce)});AI.displayName="QRCodeCanvas";var Dx=ne.forwardRef(function(e,n){const i=e,{value:o,size:l=_x,level:d=Sx,bgColor:m=Tx,fgColor:p=Ix,includeMargin:g=Rx,minVersion:y=Ox,boostLevel:v,title:E,marginSize:C,imageSettings:T}=i,A=bf(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:N,cells:O,numCells:S,calculatedImageSettings:_}=Px({value:o,level:d,minVersion:y,boostLevel:v,includeMargin:g,marginSize:C,imageSettings:T,size:l});let D=O,U=null;T!=null&&_!=null&&(_.excavation!=null&&(D=kx(O,_.excavation)),U=ne.createElement("image",{href:T.src,height:_.h,width:_.w,x:_.x+N,y:_.y+N,preserveAspectRatio:"none",opacity:_.opacity,crossOrigin:_.crossOrigin}));const z=Nx(D,N);return ne.createElement("svg",Cf({height:l,width:l,viewBox:`0 0 ${S} ${S}`,ref:n,role:"img"},A),!!E&&ne.createElement("title",null,E),ne.createElement("path",{fill:m,d:`M0,0 h${S}v${S}H0z`,shapeRendering:"crispEdges"}),ne.createElement("path",{fill:p,d:z,shapeRendering:"crispEdges"}),U)});Dx.displayName="QRCodeSVG";var ye;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ye||(ye={}));var Lg=new Map([[ye.QR_CODE,"QR_CODE"],[ye.AZTEC,"AZTEC"],[ye.CODABAR,"CODABAR"],[ye.CODE_39,"CODE_39"],[ye.CODE_93,"CODE_93"],[ye.CODE_128,"CODE_128"],[ye.DATA_MATRIX,"DATA_MATRIX"],[ye.MAXICODE,"MAXICODE"],[ye.ITF,"ITF"],[ye.EAN_13,"EAN_13"],[ye.EAN_8,"EAN_8"],[ye.PDF_417,"PDF_417"],[ye.RSS_14,"RSS_14"],[ye.RSS_EXPANDED,"RSS_EXPANDED"],[ye.UPC_A,"UPC_A"],[ye.UPC_E,"UPC_E"],[ye.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Bg;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(Bg||(Bg={}));function _I(t){return Object.values(ye).includes(t)}var pu;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(pu||(pu={}));var SI=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[pu.SCAN_TYPE_CAMERA,pu.SCAN_TYPE_FILE],t}(),Mx=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!Lg.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,Lg.get(e))},t}(),Fg=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Af;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Af||(Af={}));var TI=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Af.UNKWOWN_ERROR}},t}(),II=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function ui(t){return typeof t>"u"||t===null}var Oo=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),Lx=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var o=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(o),d=Object.keys(e),m=0,p=d;m<p.length;m++){var g=p[m];if(l.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),_f={exports:{}};(function(t,e){(function(n,i){i(e)})(xa,function(n){function i(I){return I==null}var o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,r){I.__proto__=r}||function(I,r){for(var s in r)r.hasOwnProperty(s)&&(I[s]=r[s])};function l(I,r){o(I,r);function s(){this.constructor=I}I.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function d(I,r){var s=Object.setPrototypeOf;s?s(I,r):I.__proto__=r}function m(I,r){r===void 0&&(r=I.constructor);var s=Error.captureStackTrace;s&&s(I,r)}var p=function(I){l(r,I);function r(s){var a=this.constructor,c=I.call(this,s)||this;return Object.defineProperty(c,"name",{value:a.name,enumerable:!1}),d(c,a.prototype),m(c),c}return r}(Error);class g extends p{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}g.kind="Exception";class y extends g{}y.kind="ArgumentException";class v extends g{}v.kind="IllegalArgumentException";class E{constructor(r){if(this.binarizer=r,r===null)throw new v("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,a,c){const u=this.binarizer.getLuminanceSource().crop(r,s,a,c);return new E(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class C extends g{static getChecksumInstance(){return new C}}C.kind="ChecksumException";class T{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class A{static arraycopy(r,s,a,c,u){for(;u--;)a[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class N extends g{}N.kind="IndexOutOfBoundsException";class O extends N{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}O.kind="ArrayIndexOutOfBoundsException";class S{static fill(r,s){for(let a=0,c=r.length;a<c;a++)r[a]=s}static fillWithin(r,s,a,c){S.rangeCheck(r.length,s,a);for(let u=s;u<a;u++)r[u]=c}static rangeCheck(r,s,a){if(s>a)throw new v("fromIndex("+s+") > toIndex("+a+")");if(s<0)throw new O(s);if(a>r)throw new O(a)}static asList(...r){return r}static create(r,s,a){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(a))}static createInt32Array(r,s,a){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(a))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let a=0,c=r.length;a<c;a++)if(r[a]!==s[a])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const a of r)s=31*s+a;return s}static fillUint8Array(r,s){for(let a=0;a!==r.length;a++)r[a]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const a=new Uint8Array(s);return a.set(r),a}return r.slice(0,s)}static copyOfRange(r,s,a){const c=a-s,u=new Int32Array(c);return A.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,a){a===void 0&&(a=S.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const h=u+c>>1,f=a(s,r[h]);if(f>0)c=h+1;else if(f<0)u=h-1;else return h}return-c-1}static numberComparator(r,s){return r-s}}class _{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let a=31;return s=r<<16,s!==0&&(a-=16,r=s),s=r<<8,s!==0&&(a-=8,r=s),s=r<<4,s!==0&&(a-=4,r=s),s=r<<2,s!==0&&(a-=2,r=s),a-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class D{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=D.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=D.makeArray(r);A.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=a[c];u&=~((1<<(r&31))-1);const h=a.length;for(;u===0;){if(++c===h)return s;u=a[c]}const f=c*32+_.numberOfTrailingZeros(u);return f>s?s:f}getNextUnset(r){const s=this.size;if(r>=s)return s;const a=this.bits;let c=Math.floor(r/32),u=~a[c];u&=~((1<<(r&31))-1);const h=a.length;for(;u===0;){if(++c===h)return s;u=~a[c]}const f=c*32+_.numberOfTrailingZeros(u);return f>s?s:f}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new v;if(s===r)return;s--;const a=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let h=a;h<=c;h++){const f=h>a?0:r&31,x=(2<<(h<c?31:s&31))-(1<<f);u[h]|=x}}clear(){const r=this.bits.length,s=this.bits;for(let a=0;a<r;a++)s[a]=0}isRange(r,s,a){if(s<r||r<0||s>this.size)throw new v;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),h=this.bits;for(let f=c;f<=u;f++){const w=f>c?0:r&31,b=(2<<(f<u?31:s&31))-(1<<w)&4294967295;if((h[f]&b)!==(a?b:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new v("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let a=s;a>0;a--)this.appendBit((r>>a-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let a=0;a<s;a++)this.appendBit(r.get(a))}xor(r){if(this.size!==r.size)throw new v("Sizes don't match");const s=this.bits;for(let a=0,c=s.length;a<c;a++)s[a]^=r.bits[a]}toBytes(r,s,a,c){for(let u=0;u<c;u++){let h=0;for(let f=0;f<8;f++)this.get(r)&&(h|=1<<7-f),r++;s[a+u]=h}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),a=s+1,c=this.bits;for(let u=0;u<a;u++){let h=c[u];h=h>>1&1431655765|(h&1431655765)<<1,h=h>>2&858993459|(h&858993459)<<2,h=h>>4&252645135|(h&252645135)<<4,h=h>>8&16711935|(h&16711935)<<8,h=h>>16&65535|(h&65535)<<16,r[s-u]=h}if(this.size!==a*32){const u=a*32-this.size;let h=r[0]>>>u;for(let f=1;f<a;f++){const w=r[f];h|=w<<32-u,r[f-1]=h,h=w>>>u}r[a-1]=h}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof D))return!1;const s=r;return this.size===s.size&&S.equals(this.bits,s.bits)}hashCode(){return 31*this.size+S.hashCode(this.bits)}toString(){let r="";for(let s=0,a=this.size;s<a;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new D(this.size,this.bits.slice())}}var U;(function(I){I[I.OTHER=0]="OTHER",I[I.PURE_BARCODE=1]="PURE_BARCODE",I[I.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",I[I.TRY_HARDER=3]="TRY_HARDER",I[I.CHARACTER_SET=4]="CHARACTER_SET",I[I.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",I[I.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",I[I.ASSUME_GS1=7]="ASSUME_GS1",I[I.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",I[I.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",I[I.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(U||(U={}));var z=U;class F extends g{static getFormatInstance(){return new F}}F.kind="FormatException";var K;(function(I){I[I.Cp437=0]="Cp437",I[I.ISO8859_1=1]="ISO8859_1",I[I.ISO8859_2=2]="ISO8859_2",I[I.ISO8859_3=3]="ISO8859_3",I[I.ISO8859_4=4]="ISO8859_4",I[I.ISO8859_5=5]="ISO8859_5",I[I.ISO8859_6=6]="ISO8859_6",I[I.ISO8859_7=7]="ISO8859_7",I[I.ISO8859_8=8]="ISO8859_8",I[I.ISO8859_9=9]="ISO8859_9",I[I.ISO8859_10=10]="ISO8859_10",I[I.ISO8859_11=11]="ISO8859_11",I[I.ISO8859_13=12]="ISO8859_13",I[I.ISO8859_14=13]="ISO8859_14",I[I.ISO8859_15=14]="ISO8859_15",I[I.ISO8859_16=15]="ISO8859_16",I[I.SJIS=16]="SJIS",I[I.Cp1250=17]="Cp1250",I[I.Cp1251=18]="Cp1251",I[I.Cp1252=19]="Cp1252",I[I.Cp1256=20]="Cp1256",I[I.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",I[I.UTF8=22]="UTF8",I[I.ASCII=23]="ASCII",I[I.Big5=24]="Big5",I[I.GB18030=25]="GB18030",I[I.EUC_KR=26]="EUC_KR"})(K||(K={}));class W{constructor(r,s,a,...c){this.valueIdentifier=r,this.name=a,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,W.VALUE_IDENTIFIER_TO_ECI.set(r,this),W.NAME_TO_ECI.set(a,this);const u=this.values;for(let h=0,f=u.length;h!==f;h++){const w=u[h];W.VALUES_TO_ECI.set(w,this)}for(const h of c)W.NAME_TO_ECI.set(h,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new F("incorect value");const s=W.VALUES_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}static getCharacterSetECIByName(r){const s=W.NAME_TO_ECI.get(r);if(s===void 0)throw new F("incorect value");return s}equals(r){if(!(r instanceof W))return!1;const s=r;return this.getName()===s.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(K.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(K.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(K.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(K.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(K.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(K.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(K.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(K.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(K.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(K.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(K.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(K.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(K.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(K.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(K.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(K.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(K.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(K.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(K.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(K.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(K.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(K.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(K.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(K.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(K.Big5,28,"Big5"),W.GB18030=new W(K.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(K.EUC_KR,30,"EUC_KR","EUC-KR");class re extends g{}re.kind="UnsupportedOperationException";class he{static decode(r,s){const a=this.encodingName(s);return this.customDecoder?this.customDecoder(r,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(r,a):new TextDecoder(a).decode(r)}static shouldDecodeOnFallback(r){return!he.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const a=this.encodingName(s);return this.customEncoder?this.customEncoder(r,a):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof W?r:W.getCharacterSetECIByName(r)}static decodeFallback(r,s){const a=this.encodingCharacterSet(s);if(he.isDecodeFallbackSupported(a)){let c="";for(let u=0,h=r.length;u<h;u++){let f=r[u].toString(16);f.length<2&&(f="0"+f),c+="%"+f}return decodeURIComponent(c)}if(a.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new re(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(W.UTF8)||r.equals(W.ISO8859_1)||r.equals(W.ASCII)}static encodeFallback(r){const a=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<a.length;u++)c.push(a[u].charCodeAt(0));return new Uint8Array(c)}}class Q{static castAsNonUtf8Char(r,s=null){const a=s?s.getName():this.ISO88591;return he.decode(new Uint8Array([r]),a)}static guessEncoding(r,s){if(s!=null&&s.get(z.CHARACTER_SET)!==void 0)return s.get(z.CHARACTER_SET).toString();const a=r.length;let c=!0,u=!0,h=!0,f=0,w=0,x=0,b=0,R=0,k=0,L=0,j=0,V=0,$=0,Y=0;const ae=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let ue=0;ue<a&&(c||u||h);ue++){const ie=r[ue]&255;h&&(f>0?ie&128?f--:h=!1:ie&128&&(ie&64?(f++,ie&32?(f++,ie&16?(f++,ie&8?h=!1:b++):x++):w++):h=!1)),c&&(ie>127&&ie<160?c=!1:ie>159&&(ie<192||ie===215||ie===247)&&Y++),u&&(R>0?ie<64||ie===127||ie>252?u=!1:R--:ie===128||ie===160||ie>239?u=!1:ie>160&&ie<224?(k++,j=0,L++,L>V&&(V=L)):ie>127?(R++,L=0,j++,j>$&&($=j)):(L=0,j=0))}return h&&f>0&&(h=!1),u&&R>0&&(u=!1),h&&(ae||w+x+b>0)?Q.UTF8:u&&(Q.ASSUME_SHIFT_JIS||V>=3||$>=3)?Q.SHIFT_JIS:c&&u?V===2&&k===2||Y*10>=a?Q.SHIFT_JIS:Q.ISO88591:c?Q.ISO88591:u?Q.SHIFT_JIS:h?Q.UTF8:Q.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let a=-1;function c(h,f,w,x,b,R){if(h==="%%")return"%";if(s[++a]===void 0)return;h=x?parseInt(x.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,L;switch(R){case"s":L=s[a];break;case"c":L=s[a][0];break;case"f":L=parseFloat(s[a]).toFixed(h);break;case"p":L=parseFloat(s[a]).toPrecision(h);break;case"e":L=parseFloat(s[a]).toExponential(h);break;case"x":L=parseInt(s[a]).toString(k||16);break;case"d":L=parseFloat(parseInt(s[a],k||10).toPrecision(h)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let j=parseInt(w),V=w&&w[0]+""=="0"?"0":" ";for(;L.length<j;)L=f!==void 0?L+V:V+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return he.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}Q.SHIFT_JIS=W.SJIS.getName(),Q.GB2312="GB2312",Q.ISO88591=W.ISO8859_1.getName(),Q.EUC_JP="EUC_JP",Q.UTF8=W.UTF8.getName(),Q.PLATFORM_DEFAULT_ENCODING=Q.UTF8,Q.ASSUME_SHIFT_JIS=!1;class ce{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=Q.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,a){for(let c=s;s<s+a;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class te{constructor(r,s,a,c){if(this.width=r,this.height=s,this.rowSize=a,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new v("Both dimensions must be greater than 0");a==null&&(a=Math.floor((r+31)/32)),this.rowSize=a,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,a=r[0].length,c=new te(a,s);for(let u=0;u<s;u++){const h=r[u];for(let f=0;f<a;f++)h[f]&&c.set(f,u)}return c}static parseFromString(r,s,a){if(r===null)throw new v("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,h=0,f=-1,w=0,x=0;for(;x<r.length;)if(r.charAt(x)===`
`||r.charAt(x)==="\r"){if(u>h){if(f===-1)f=u-h;else if(u-h!==f)throw new v("row lengths do not match");h=u,w++}x++}else if(r.substring(x,x+s.length)===s)x+=s.length,c[u]=!0,u++;else if(r.substring(x,x+a.length)===a)x+=a.length,c[u]=!1,u++;else throw new v("illegal character encountered: "+r.substring(x));if(u>h){if(f===-1)f=u-h;else if(u-h!==f)throw new v("row lengths do not match");w++}const b=new te(f,w);for(let R=0;R<u;R++)c[R]&&b.set(Math.floor(R%f),Math.floor(R/f));return b}get(r,s){const a=s*this.rowSize+Math.floor(r/32);return(this.bits[a]>>>(r&31)&1)!==0}set(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]|=1<<(r&31)&4294967295}unset(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]&=~(1<<(r&31)&4294967295)}flip(r,s){const a=s*this.rowSize+Math.floor(r/32);this.bits[a]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new v("input matrix dimensions do not match");const s=new D(Math.floor(this.width/32)+1),a=this.rowSize,c=this.bits;for(let u=0,h=this.height;u<h;u++){const f=u*a,w=r.getRow(u,s).getBitArray();for(let x=0;x<a;x++)c[f+x]^=w[x]}}clear(){const r=this.bits,s=r.length;for(let a=0;a<s;a++)r[a]=0}setRegion(r,s,a,c){if(s<0||r<0)throw new v("Left and top must be nonnegative");if(c<1||a<1)throw new v("Height and width must be at least 1");const u=r+a,h=s+c;if(h>this.height||u>this.width)throw new v("The region must fit inside the matrix");const f=this.rowSize,w=this.bits;for(let x=s;x<h;x++){const b=x*f;for(let R=r;R<u;R++)w[b+Math.floor(R/32)]|=1<<(R&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new D(this.width):s.clear();const a=this.rowSize,c=this.bits,u=r*a;for(let h=0;h<a;h++)s.setBulk(h*32,c[u+h]);return s}setRow(r,s){A.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let a=new D(r),c=new D(r);for(let u=0,h=Math.floor((s+1)/2);u<h;u++)a=this.getRow(u,a),c=this.getRow(s-1-u,c),a.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,a)}getEnclosingRectangle(){const r=this.width,s=this.height,a=this.rowSize,c=this.bits;let u=r,h=s,f=-1,w=-1;for(let x=0;x<s;x++)for(let b=0;b<a;b++){const R=c[x*a+b];if(R!==0){if(x<h&&(h=x),x>w&&(w=x),b*32<u){let k=0;for(;!(R<<31-k&4294967295);)k++;b*32+k<u&&(u=b*32+k)}if(b*32+31>f){let k=31;for(;!(R>>>k);)k--;b*32+k>f&&(f=b*32+k)}}}return f<u||w<h?null:Int32Array.from([u,h,f-u+1,w-h+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let a=0;for(;a<s.length&&s[a]===0;)a++;if(a===s.length)return null;const c=a/r;let u=a%r*32;const h=s[a];let f=0;for(;!(h<<31-f&4294967295);)f++;return u+=f,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let a=s.length-1;for(;a>=0&&s[a]===0;)a--;if(a<0)return null;const c=Math.floor(a/r);let u=Math.floor(a%r)*32;const h=s[a];let f=31;for(;!(h>>>f);)f--;return u+=f,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof te))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&S.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+S.hashCode(this.bits),r}toString(r="X ",s="  ",a=`
`){return this.buildToString(r,s,a)}buildToString(r,s,a){let c=new ce;for(let u=0,h=this.height;u<h;u++){for(let f=0,w=this.width;f<w;f++)c.append(this.get(f,u)?r:s);c.append(a)}return c.toString()}clone(){return new te(this.width,this.height,this.rowSize,this.bits.slice())}}class H extends g{static getNotFoundInstance(){return new H}}H.kind="NotFoundException";class pe extends T{constructor(r){super(r),this.luminances=pe.EMPTY,this.buckets=new Int32Array(pe.LUMINANCE_BUCKETS)}getBlackRow(r,s){const a=this.getLuminanceSource(),c=a.getWidth();s==null||s.getSize()<c?s=new D(c):s.clear(),this.initArrays(c);const u=a.getRow(r,this.luminances),h=this.buckets;for(let w=0;w<c;w++)h[(u[w]&255)>>pe.LUMINANCE_SHIFT]++;const f=pe.estimateBlackPoint(h);if(c<3)for(let w=0;w<c;w++)(u[w]&255)<f&&s.set(w);else{let w=u[0]&255,x=u[1]&255;for(let b=1;b<c-1;b++){const R=u[b+1]&255;(x*4-w-R)/2<f&&s.set(b),w=x,x=R}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight(),c=new te(s,a);this.initArrays(s);const u=this.buckets;for(let w=1;w<5;w++){const x=Math.floor(a*w/5),b=r.getRow(x,this.luminances),R=Math.floor(s*4/5);for(let k=Math.floor(s/5);k<R;k++){const L=b[k]&255;u[L>>pe.LUMINANCE_SHIFT]++}}const h=pe.estimateBlackPoint(u),f=r.getMatrix();for(let w=0;w<a;w++){const x=w*s;for(let b=0;b<s;b++)(f[x+b]&255)<h&&c.set(b,w)}return c}createBinarizer(r){return new pe(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let a=0;a<pe.LUMINANCE_BUCKETS;a++)s[a]=0}static estimateBlackPoint(r){const s=r.length;let a=0,c=0,u=0;for(let b=0;b<s;b++)r[b]>u&&(c=b,u=r[b]),r[b]>a&&(a=r[b]);let h=0,f=0;for(let b=0;b<s;b++){const R=b-c,k=r[b]*R*R;k>f&&(h=b,f=k)}if(c>h){const b=c;c=h,h=b}if(h-c<=s/16)throw new H;let w=h-1,x=-1;for(let b=h-1;b>c;b--){const R=b-c,k=R*R*(h-b)*(a-r[b]);k>x&&(w=b,x=k)}return w<<pe.LUMINANCE_SHIFT}}pe.LUMINANCE_BITS=5,pe.LUMINANCE_SHIFT=8-pe.LUMINANCE_BITS,pe.LUMINANCE_BUCKETS=1<<pe.LUMINANCE_BITS,pe.EMPTY=Uint8ClampedArray.from([0]);class oe extends pe{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),a=r.getHeight();if(s>=oe.MINIMUM_DIMENSION&&a>=oe.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>oe.BLOCK_SIZE_POWER;s&oe.BLOCK_SIZE_MASK&&u++;let h=a>>oe.BLOCK_SIZE_POWER;a&oe.BLOCK_SIZE_MASK&&h++;const f=oe.calculateBlackPoints(c,u,h,s,a),w=new te(s,a);oe.calculateThresholdForBlock(c,u,h,s,a,f,w),this.matrix=w}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new oe(r)}static calculateThresholdForBlock(r,s,a,c,u,h,f){const w=u-oe.BLOCK_SIZE,x=c-oe.BLOCK_SIZE;for(let b=0;b<a;b++){let R=b<<oe.BLOCK_SIZE_POWER;R>w&&(R=w);const k=oe.cap(b,2,a-3);for(let L=0;L<s;L++){let j=L<<oe.BLOCK_SIZE_POWER;j>x&&(j=x);const V=oe.cap(L,2,s-3);let $=0;for(let ae=-2;ae<=2;ae++){const ue=h[k+ae];$+=ue[V-2]+ue[V-1]+ue[V]+ue[V+1]+ue[V+2]}const Y=$/25;oe.thresholdBlock(r,j,R,Y,c,f)}}}static cap(r,s,a){return r<s?s:r>a?a:r}static thresholdBlock(r,s,a,c,u,h){for(let f=0,w=a*u+s;f<oe.BLOCK_SIZE;f++,w+=u)for(let x=0;x<oe.BLOCK_SIZE;x++)(r[w+x]&255)<=c&&h.set(s+x,a+f)}static calculateBlackPoints(r,s,a,c,u){const h=u-oe.BLOCK_SIZE,f=c-oe.BLOCK_SIZE,w=new Array(a);for(let x=0;x<a;x++){w[x]=new Int32Array(s);let b=x<<oe.BLOCK_SIZE_POWER;b>h&&(b=h);for(let R=0;R<s;R++){let k=R<<oe.BLOCK_SIZE_POWER;k>f&&(k=f);let L=0,j=255,V=0;for(let Y=0,ae=b*c+k;Y<oe.BLOCK_SIZE;Y++,ae+=c){for(let ue=0;ue<oe.BLOCK_SIZE;ue++){const ie=r[ae+ue]&255;L+=ie,ie<j&&(j=ie),ie>V&&(V=ie)}if(V-j>oe.MIN_DYNAMIC_RANGE)for(Y++,ae+=c;Y<oe.BLOCK_SIZE;Y++,ae+=c)for(let ue=0;ue<oe.BLOCK_SIZE;ue++)L+=r[ae+ue]&255}let $=L>>oe.BLOCK_SIZE_POWER*2;if(V-j<=oe.MIN_DYNAMIC_RANGE&&($=j/2,x>0&&R>0)){const Y=(w[x-1][R]+2*w[x][R-1]+w[x-1][R-1])/4;j<Y&&($=Y)}w[x][R]=$}}return w}}oe.BLOCK_SIZE_POWER=3,oe.BLOCK_SIZE=1<<oe.BLOCK_SIZE_POWER,oe.BLOCK_SIZE_MASK=oe.BLOCK_SIZE-1,oe.MINIMUM_DIMENSION=oe.BLOCK_SIZE*5,oe.MIN_DYNAMIC_RANGE=24;class q{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,a,c){throw new re("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new re("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new re("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ce;for(let a=0;a<this.height;a++){const c=this.getRow(a,r);for(let u=0;u<this.width;u++){const h=c[u]&255;let f;h<64?f="#":h<128?f="+":h<192?f=".":f=" ",s.append(f)}s.append(`
`)}return s.toString()}}class Z extends q{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const a=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(s);for(let c=0;c<s;c++)a[c]=255-(r[c]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,a,c){return new Z(this.delegate.crop(r,s,a,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Z(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Z(this.delegate.rotateCounterClockwise45())}}class de extends q{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=de.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return de.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,a){const c=new Uint8ClampedArray(s*a);for(let u=0,h=0,f=r.length;u<f;u+=4,h++){let w;if(r[u+3]===0)w=255;else{const b=r[u],R=r[u+1],k=r[u+2];w=306*b+601*R+117*k+512>>10}c[h]=w}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth(),c=r*a;return s===null?s=this.buffer.slice(c,c+a):(s.length<a&&(s=new Uint8ClampedArray(a)),s.set(this.buffer.slice(c,c+a))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,a,c){return super.crop(r,s,a,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),a=s.getContext("2d"),c=r*de.DEGREE_TO_RADIANS,u=this.canvas.width,h=this.canvas.height,f=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*h),w=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*h);return s.width=f,s.height=w,a.translate(f/2,w/2),a.rotate(c),a.drawImage(this.canvas,u/-2,h/-2),this.buffer=de.makeBufferFromCanvasImageData(s),this}invert(){return new Z(this)}}de.DEGREE_TO_RADIANS=Math.PI/180;class Ae{constructor(r,s,a){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var fe=(globalThis||xa||self||window||void 0)&&(globalThis||xa||self||window||void 0).__awaiter||function(I,r,s,a){function c(u){return u instanceof s?u:new s(function(h){h(u)})}return new(s||(s=Promise))(function(u,h){function f(b){try{x(a.next(b))}catch(R){h(R)}}function w(b){try{x(a.throw(b))}catch(R){h(R)}}function x(b){b.done?u(b.value):c(b.value).then(f,w)}x((a=a.apply(I,r||[])).next())})};class Te{constructor(r,s=500,a){this.reader=r,this.timeBetweenScansMillis=s,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return fe(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const a of r){const c=a.kind==="video"?"videoinput":a.kind;if(c!=="videoinput")continue;const u=a.deviceId||a.id,h=a.label||`Video device ${s.length+1}`,f=a.groupId,w={deviceId:u,label:h,kind:c,groupId:f};s.push(w)}return s})}getVideoInputDevices(){return fe(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Ae(s.deviceId,s.label))})}findDeviceById(r){return fe(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(a=>a.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return fe(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return fe(this,void 0,void 0,function*(){this.reset();let a;r?a={deviceId:{exact:r}}:a={facingMode:"environment"};const c={video:a};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return fe(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(a,s)})}decodeOnceFromStream(r,s){return fe(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(r,s,a){return fe(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,a)})}decodeFromVideoDevice(r,s,a){return fe(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,a)})}decodeFromConstraints(r,s,a){return fe(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,a)})}decodeFromStream(r,s,a){return fe(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return fe(this,void 0,void 0,function*(){const a=this.prepareVideoElement(s);return this.addVideoSource(a,r),this.videoElement=a,this.stream=r,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(r){return new Promise((s,a)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return fe(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const a=document.getElementById(r);if(!a)throw new y(`element with id '${r}' not found`);if(a.nodeName.toLowerCase()!==s.toLowerCase())throw new y(`element with id '${r}' must be an ${s} element`);return a}decodeFromImage(r,s){if(!r&&!s)throw new y("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new y("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,a){if(r===void 0&&s===void 0)throw new y("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,a):this.decodeFromVideoElementContinuously(r,a)}decodeFromImageElement(r){if(!r)throw new y("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let a;return this.isImageLoaded(s)?a=this.decodeOnce(s,!1,!0):a=this._decodeOnLoadImage(s),a}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const a=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(a,s)}_decodeFromVideoElementSetup(r){if(!r)throw new y("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new y("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const a=this._decodeOnLoadImage(s);return s.src=r,a}decodeFromVideoUrl(r){if(!r)throw new y("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),a=this.decodeFromVideoElement(s);return s.src=r,a}decodeFromVideoUrlContinuously(r,s){if(!r)throw new y("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(a,s);return a.src=r,c}_decodeOnLoadImage(r){return new Promise((s,a)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,a),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return fe(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return fe(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,a=!0){this._stopAsyncDecode=!1;const c=(u,h)=>{if(this._stopAsyncDecode){h(new H("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const f=this.decode(r);u(f)}catch(f){const w=s&&f instanceof H,b=(f instanceof C||f instanceof F)&&a;if(w||b)return setTimeout(c,this._timeBetweenDecodingAttempts,u,h);h(f)}};return new Promise((u,h)=>c(u,h))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(a,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof C||c instanceof F,h=c instanceof H;(u||h)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,a){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,a=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),a=new de(s),c=new oe(a);return new E(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let a,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(a=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(a=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=a+"px",s.style.height=c+"px",s.width=a,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class Ee{constructor(r,s,a=s==null?0:8*s.length,c,u,h=A.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=a,this.resultPoints=c,this.format=u,this.timestamp=h,this.text=r,this.rawBytes=s,a==null?this.numBits=s==null?0:8*s.length:this.numBits=a,this.resultPoints=c,this.format=u,this.resultMetadata=null,h==null?this.timestamp=A.currentTimeMillis():this.timestamp=h}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const a=new Array(s.length+r.length);A.arraycopy(s,0,a,0,s.length),A.arraycopy(r,0,a,s.length,r.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var nt;(function(I){I[I.AZTEC=0]="AZTEC",I[I.CODABAR=1]="CODABAR",I[I.CODE_39=2]="CODE_39",I[I.CODE_93=3]="CODE_93",I[I.CODE_128=4]="CODE_128",I[I.DATA_MATRIX=5]="DATA_MATRIX",I[I.EAN_8=6]="EAN_8",I[I.EAN_13=7]="EAN_13",I[I.ITF=8]="ITF",I[I.MAXICODE=9]="MAXICODE",I[I.PDF_417=10]="PDF_417",I[I.QR_CODE=11]="QR_CODE",I[I.RSS_14=12]="RSS_14",I[I.RSS_EXPANDED=13]="RSS_EXPANDED",I[I.UPC_A=14]="UPC_A",I[I.UPC_E=15]="UPC_E",I[I.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(nt||(nt={}));var me=nt,Ve;(function(I){I[I.OTHER=0]="OTHER",I[I.ORIENTATION=1]="ORIENTATION",I[I.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",I[I.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",I[I.ISSUE_NUMBER=4]="ISSUE_NUMBER",I[I.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",I[I.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",I[I.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",I[I.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",I[I.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",I[I.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Ve||(Ve={}));var ot=Ve;class gn{constructor(r,s,a,c,u=-1,h=-1){this.rawBytes=r,this.text=s,this.byteSegments=a,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=h,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class mn{exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class pt{constructor(r,s){if(s.length===0)throw new v;this.field=r;const a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-c),A.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let a;if(r===1){a=0;for(let h=0,f=s.length;h!==f;h++){const w=s[h];a=mn.addOrSubtract(a,w)}return a}a=s[0];const c=s.length,u=this.field;for(let h=1;h<c;h++)a=mn.addOrSubtract(u.multiply(r,a),s[h]);return a}addOrSubtract(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){const h=s;s=a,a=h}let c=new Int32Array(a.length);const u=a.length-s.length;A.arraycopy(a,0,c,0,u);for(let h=u;h<a.length;h++)c[h]=mn.addOrSubtract(s[h-u],a[h]);return new pt(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,h=new Int32Array(a+u-1),f=this.field;for(let w=0;w<a;w++){const x=s[w];for(let b=0;b<u;b++)h[w+b]=mn.addOrSubtract(h[w+b],f.multiply(x,c[b]))}return new pt(f,h)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,a=this.field,c=new Int32Array(s),u=this.coefficients;for(let h=0;h<s;h++)c[h]=a.multiply(u[h],r);return new pt(a,c)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return this.field.getZero();const a=this.coefficients,c=a.length,u=new Int32Array(c+r),h=this.field;for(let f=0;f<c;f++)u[f]=h.multiply(a[f],s);return new pt(h,u)}divide(r){if(!this.field.equals(r.field))throw new v("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new v("Divide by 0");const s=this.field;let a=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),h=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const f=c.getDegree()-r.getDegree(),w=s.multiply(c.getCoefficient(c.getDegree()),h),x=r.multiplyByMonomial(f,w),b=s.buildMonomial(f,w);a=a.addOrSubtract(b),c=c.addOrSubtract(x)}return[a,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);if(a!==0){if(a<0?(r+=" - ",a=-a):r.length>0&&(r+=" + "),s===0||a!==1){const c=this.field.log(a);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class Sn extends g{}Sn.kind="ArithmeticException";class Le extends mn{constructor(r,s,a){super(),this.primitive=r,this.size=s,this.generatorBase=a;const c=new Int32Array(s);let u=1;for(let f=0;f<s;f++)c[f]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const h=new Int32Array(s);for(let f=0;f<s-1;f++)h[c[f]]=f;this.logTable=h,this.zero=new pt(this,Int32Array.from([0])),this.one=new pt(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;const a=new Int32Array(r+1);return a[0]=s,new pt(this,a)}inverse(r){if(r===0)throw new Sn;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Le.AZTEC_DATA_12=new Le(4201,4096,1),Le.AZTEC_DATA_10=new Le(1033,1024,1),Le.AZTEC_DATA_6=new Le(67,64,1),Le.AZTEC_PARAM=new Le(19,16,1),Le.QR_CODE_FIELD_256=new Le(285,256,0),Le.DATA_MATRIX_FIELD_256=new Le(301,256,1),Le.AZTEC_DATA_8=Le.DATA_MATRIX_FIELD_256,Le.MAXICODE_FIELD_64=Le.AZTEC_DATA_6;class _e extends g{}_e.kind="ReedSolomonException";class Ie extends g{}Ie.kind="IllegalStateException";class ut{constructor(r){this.field=r}decode(r,s){const a=this.field,c=new pt(a,r),u=new Int32Array(s);let h=!0;for(let L=0;L<s;L++){const j=c.evaluateAt(a.exp(L+a.getGeneratorBase()));u[u.length-1-L]=j,j!==0&&(h=!1)}if(h)return;const f=new pt(a,u),w=this.runEuclideanAlgorithm(a.buildMonomial(s,1),f,s),x=w[0],b=w[1],R=this.findErrorLocations(x),k=this.findErrorMagnitudes(b,R);for(let L=0;L<R.length;L++){const j=r.length-1-a.log(R[L]);if(j<0)throw new _e("Bad error location");r[j]=Le.addOrSubtract(r[j],k[L])}}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){const L=r;r=s,s=L}const c=this.field;let u=r,h=s,f=c.getZero(),w=c.getOne();for(;h.getDegree()>=(a/2|0);){let L=u,j=f;if(u=h,f=w,u.isZero())throw new _e("r_{i-1} was zero");h=L;let V=c.getZero();const $=u.getCoefficient(u.getDegree()),Y=c.inverse($);for(;h.getDegree()>=u.getDegree()&&!h.isZero();){const ae=h.getDegree()-u.getDegree(),ue=c.multiply(h.getCoefficient(h.getDegree()),Y);V=V.addOrSubtract(c.buildMonomial(ae,ue)),h=h.addOrSubtract(u.multiplyByMonomial(ae,ue))}if(w=V.multiply(f).addOrSubtract(j),h.getDegree()>=u.getDegree())throw new Ie("Division algorithm failed to reduce polynomial?")}const x=w.getCoefficient(0);if(x===0)throw new _e("sigmaTilde(0) was zero");const b=c.inverse(x),R=w.multiplyScalar(b),k=h.multiplyScalar(b);return[R,k]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const a=new Int32Array(s);let c=0;const u=this.field;for(let h=1;h<u.getSize()&&c<s;h++)r.evaluateAt(h)===0&&(a[c]=u.inverse(h),c++);if(c!==s)throw new _e("Error locator degree does not match number of roots");return a}findErrorMagnitudes(r,s){const a=s.length,c=new Int32Array(a),u=this.field;for(let h=0;h<a;h++){const f=u.inverse(s[h]);let w=1;for(let x=0;x<a;x++)if(h!==x){const b=u.multiply(s[x],f),R=b&1?b&-2:b|1;w=u.multiply(w,R)}c[h]=u.multiply(r.evaluateAt(f),u.inverse(w)),u.getGeneratorBase()!==0&&(c[h]=u.multiply(c[h],f))}return c}}var Ke;(function(I){I[I.UPPER=0]="UPPER",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.DIGIT=3]="DIGIT",I[I.PUNCT=4]="PUNCT",I[I.BINARY=5]="BINARY"})(Ke||(Ke={}));class De{decode(r){this.ddata=r;let s=r.getBits(),a=this.extractBits(s),c=this.correctBits(a),u=De.convertBoolArrayToByteArray(c),h=De.getEncodedData(c),f=new gn(u,h,null,null);return f.setNumBits(c.length),f}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,a=Ke.UPPER,c=Ke.UPPER,u="",h=0;for(;h<s;)if(c===Ke.BINARY){if(s-h<5)break;let f=De.readCode(r,h,5);if(h+=5,f===0){if(s-h<11)break;f=De.readCode(r,h,11)+31,h+=11}for(let w=0;w<f;w++){if(s-h<8){h=s;break}const x=De.readCode(r,h,8);u+=Q.castAsNonUtf8Char(x),h+=8}c=a}else{let f=c===Ke.DIGIT?4:5;if(s-h<f)break;let w=De.readCode(r,h,f);h+=f;let x=De.getCharacter(c,w);x.startsWith("CTRL_")?(a=c,c=De.getTable(x.charAt(5)),x.charAt(6)==="L"&&(a=c)):(u+=x,c=a)}return u}static getTable(r){switch(r){case"L":return Ke.LOWER;case"P":return Ke.PUNCT;case"M":return Ke.MIXED;case"D":return Ke.DIGIT;case"B":return Ke.BINARY;case"U":default:return Ke.UPPER}}static getCharacter(r,s){switch(r){case Ke.UPPER:return De.UPPER_TABLE[s];case Ke.LOWER:return De.LOWER_TABLE[s];case Ke.MIXED:return De.MIXED_TABLE[s];case Ke.PUNCT:return De.PUNCT_TABLE[s];case Ke.DIGIT:return De.DIGIT_TABLE[s];default:throw new Ie("Bad table")}}correctBits(r){let s,a;this.ddata.getNbLayers()<=2?(a=6,s=Le.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,s=Le.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,s=Le.AZTEC_DATA_10):(a=12,s=Le.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/a;if(u<c)throw new F;let h=r.length%a,f=new Int32Array(u);for(let k=0;k<u;k++,h+=a)f[k]=De.readCode(r,h,a);try{new ut(s).decode(f,u-c)}catch(k){throw new F(k)}let w=(1<<a)-1,x=0;for(let k=0;k<c;k++){let L=f[k];if(L===0||L===w)throw new F;(L===1||L===w-1)&&x++}let b=new Array(c*a-x),R=0;for(let k=0;k<c;k++){let L=f[k];if(L===1||L===w-1)b.fill(L>1,R,R+a-1),R+=a-1;else for(let j=a-1;j>=0;--j)b[R++]=(L&1<<j)!==0}return b}extractBits(r){let s=this.ddata.isCompact(),a=this.ddata.getNbLayers(),c=(s?11:14)+a*4,u=new Int32Array(c),h=new Array(this.totalBitsInLayer(a,s));if(s)for(let f=0;f<u.length;f++)u[f]=f;else{let f=c+1+2*_.truncDivision(_.truncDivision(c,2)-1,15),w=c/2,x=_.truncDivision(f,2);for(let b=0;b<w;b++){let R=b+_.truncDivision(b,15);u[w-b-1]=x-R-1,u[w+b]=x+R+1}}for(let f=0,w=0;f<a;f++){let x=(a-f)*4+(s?9:12),b=f*2,R=c-1-b;for(let k=0;k<x;k++){let L=k*2;for(let j=0;j<2;j++)h[w+L+j]=r.get(u[b+j],u[b+k]),h[w+2*x+L+j]=r.get(u[b+k],u[R-j]),h[w+4*x+L+j]=r.get(u[R-j],u[R-k]),h[w+6*x+L+j]=r.get(u[R-k],u[b+j])}w+=x*8}return h}static readCode(r,s,a){let c=0;for(let u=s;u<s+a;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let a=r.length-s;return a>=8?De.readCode(r,s,8):De.readCode(r,s,a)<<8-a}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let a=0;a<s.length;a++)s[a]=De.readByte(r,8*a);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}De.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],De.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],De.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],De.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],De.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class ve{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,a,c){const u=r-a,h=s-c;return Math.sqrt(u*u+h*h)}static sum(r){let s=0;for(let a=0,c=r.length;a!==c;a++){const u=r[a];s+=u}return s}}class Lt{static floatToIntBits(r){return r}}Lt.MAX_VALUE=Number.MAX_SAFE_INTEGER;class ge{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof ge){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*Lt.floatToIntBits(this.x)+Lt.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),a=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,h,f;if(a>=s&&a>=c?(h=r[0],u=r[1],f=r[2]):c>=a&&c>=s?(h=r[1],u=r[0],f=r[2]):(h=r[2],u=r[0],f=r[1]),this.crossProductZ(u,h,f)<0){const w=u;u=f,f=w}r[0]=u,r[1]=h,r[2]=f}static distance(r,s){return ve.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,a){const c=s.x,u=s.y;return(a.x-c)*(r.y-u)-(a.y-u)*(r.x-c)}}class Wt{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Jt extends Wt{constructor(r,s,a,c,u){super(r,s),this.compact=a,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Bt{constructor(r,s,a,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Bt.INIT_SIZE),a==null&&(a=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new H}detect(){let r=this.leftInit,s=this.rightInit,a=this.upInit,c=this.downInit,u=!1,h=!0,f=!1,w=!1,x=!1,b=!1,R=!1;const k=this.width,L=this.height;for(;h;){h=!1;let j=!0;for(;(j||!w)&&s<k;)j=this.containsBlackPoint(a,c,s,!1),j?(s++,h=!0,w=!0):w||s++;if(s>=k){u=!0;break}let V=!0;for(;(V||!x)&&c<L;)V=this.containsBlackPoint(r,s,c,!0),V?(c++,h=!0,x=!0):x||c++;if(c>=L){u=!0;break}let $=!0;for(;($||!b)&&r>=0;)$=this.containsBlackPoint(a,c,r,!1),$?(r--,h=!0,b=!0):b||r--;if(r<0){u=!0;break}let Y=!0;for(;(Y||!R)&&a>=0;)Y=this.containsBlackPoint(r,s,a,!0),Y?(a--,h=!0,R=!0):R||a--;if(a<0){u=!0;break}h&&(f=!0)}if(!u&&f){const j=s-r;let V=null;for(let ue=1;V===null&&ue<j;ue++)V=this.getBlackPointOnSegment(r,c-ue,r+ue,c);if(V==null)throw new H;let $=null;for(let ue=1;$===null&&ue<j;ue++)$=this.getBlackPointOnSegment(r,a+ue,r+ue,a);if($==null)throw new H;let Y=null;for(let ue=1;Y===null&&ue<j;ue++)Y=this.getBlackPointOnSegment(s,a+ue,s-ue,a);if(Y==null)throw new H;let ae=null;for(let ue=1;ae===null&&ue<j;ue++)ae=this.getBlackPointOnSegment(s,c-ue,s-ue,c);if(ae==null)throw new H;return this.centerEdges(ae,V,Y,$)}else throw new H}getBlackPointOnSegment(r,s,a,c){const u=ve.round(ve.distance(r,s,a,c)),h=(a-r)/u,f=(c-s)/u,w=this.image;for(let x=0;x<u;x++){const b=ve.round(r+x*h),R=ve.round(s+x*f);if(w.get(b,R))return new ge(b,R)}return null}centerEdges(r,s,a,c){const u=r.getX(),h=r.getY(),f=s.getX(),w=s.getY(),x=a.getX(),b=a.getY(),R=c.getX(),k=c.getY(),L=Bt.CORR;return u<this.width/2?[new ge(R-L,k+L),new ge(f+L,w+L),new ge(x-L,b-L),new ge(u+L,h-L)]:[new ge(R+L,k+L),new ge(f+L,w-L),new ge(x-L,b+L),new ge(u-L,h-L)]}containsBlackPoint(r,s,a,c){const u=this.image;if(c){for(let h=r;h<=s;h++)if(u.get(h,a))return!0}else for(let h=r;h<=s;h++)if(u.get(a,h))return!0;return!1}}Bt.INIT_SIZE=10,Bt.CORR=1;class Dn{static checkAndNudgePoints(r,s){const a=r.getWidth(),c=r.getHeight();let u=!0;for(let h=0;h<s.length&&u;h+=2){const f=Math.floor(s[h]),w=Math.floor(s[h+1]);if(f<-1||f>a||w<-1||w>c)throw new H;u=!1,f===-1?(s[h]=0,u=!0):f===a&&(s[h]=a-1,u=!0),w===-1?(s[h+1]=0,u=!0):w===c&&(s[h+1]=c-1,u=!0)}u=!0;for(let h=s.length-2;h>=0&&u;h-=2){const f=Math.floor(s[h]),w=Math.floor(s[h+1]);if(f<-1||f>a||w<-1||w>c)throw new H;u=!1,f===-1?(s[h]=0,u=!0):f===a&&(s[h]=a-1,u=!0),w===-1?(s[h+1]=0,u=!0):w===c&&(s[h+1]=c-1,u=!0)}}}class Ye{constructor(r,s,a,c,u,h,f,w,x){this.a11=r,this.a21=s,this.a31=a,this.a12=c,this.a22=u,this.a32=h,this.a13=f,this.a23=w,this.a33=x}static quadrilateralToQuadrilateral(r,s,a,c,u,h,f,w,x,b,R,k,L,j,V,$){const Y=Ye.quadrilateralToSquare(r,s,a,c,u,h,f,w);return Ye.squareToQuadrilateral(x,b,R,k,L,j,V,$).times(Y)}transformPoints(r){const s=r.length,a=this.a11,c=this.a12,u=this.a13,h=this.a21,f=this.a22,w=this.a23,x=this.a31,b=this.a32,R=this.a33;for(let k=0;k<s;k+=2){const L=r[k],j=r[k+1],V=u*L+w*j+R;r[k]=(a*L+h*j+x)/V,r[k+1]=(c*L+f*j+b)/V}}transformPointsWithValues(r,s){const a=this.a11,c=this.a12,u=this.a13,h=this.a21,f=this.a22,w=this.a23,x=this.a31,b=this.a32,R=this.a33,k=r.length;for(let L=0;L<k;L++){const j=r[L],V=s[L],$=u*j+w*V+R;r[L]=(a*j+h*V+x)/$,s[L]=(c*j+f*V+b)/$}}static squareToQuadrilateral(r,s,a,c,u,h,f,w){const x=r-a+u-f,b=s-c+h-w;if(x===0&&b===0)return new Ye(a-r,u-a,r,c-s,h-c,s,0,0,1);{const R=a-u,k=f-u,L=c-h,j=w-h,V=R*j-k*L,$=(x*j-k*b)/V,Y=(R*b-x*L)/V;return new Ye(a-r+$*a,f-r+Y*f,r,c-s+$*c,w-s+Y*w,s,$,Y,1)}}static quadrilateralToSquare(r,s,a,c,u,h,f,w){return Ye.squareToQuadrilateral(r,s,a,c,u,h,f,w).buildAdjoint()}buildAdjoint(){return new Ye(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Ye(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class on extends Dn{sampleGrid(r,s,a,c,u,h,f,w,x,b,R,k,L,j,V,$,Y,ae,ue){const ie=Ye.quadrilateralToQuadrilateral(c,u,h,f,w,x,b,R,k,L,j,V,$,Y,ae,ue);return this.sampleGridWithTransform(r,s,a,ie)}sampleGridWithTransform(r,s,a,c){if(s<=0||a<=0)throw new H;const u=new te(s,a),h=new Float32Array(2*s);for(let f=0;f<a;f++){const w=h.length,x=f+.5;for(let b=0;b<w;b+=2)h[b]=b/2+.5,h[b+1]=x;c.transformPoints(h),Dn.checkAndNudgePoints(r,h);try{for(let b=0;b<w;b+=2)r.get(Math.floor(h[b]),Math.floor(h[b+1]))&&u.set(b/2,f)}catch{throw new H}}return u}}class Xn{static setGridSampler(r){Xn.gridSampler=r}static getInstance(){return Xn.gridSampler}}Xn.gridSampler=new on;class Ut{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new ge(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class oi{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),a=this.getBullsEyeCorners(s);if(r){let h=a[0];a[0]=a[2],a[2]=h}this.extractParameters(a);let c=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new Jt(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new H;let s=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(a,s);let c=0;for(let h=0;h<4;h++){let f=a[(this.shift+h)%4];this.compact?(c<<=7,c+=f>>1&127):(c<<=10,c+=(f>>2&992)+(f>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let a=0;r.forEach((c,u,h)=>{let f=(c>>s-2<<1)+(c&1);a=(a<<3)+f}),a=((a&1)<<11)+(a>>1);for(let c=0;c<4;c++)if(_.bitCount(a^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new H}getCorrectedParameterData(r,s){let a,c;s?(a=7,c=2):(a=10,c=4);let u=a-c,h=new Int32Array(a);for(let w=a-1;w>=0;--w)h[w]=r&15,r>>=4;try{new ut(Le.AZTEC_PARAM).decode(h,u)}catch{throw new H}let f=0;for(let w=0;w<c;w++)f=(f<<4)+h[w];return f}getBullsEyeCorners(r){let s=r,a=r,c=r,u=r,h=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let R=this.getFirstDifferent(s,h,1,-1),k=this.getFirstDifferent(a,h,1,1),L=this.getFirstDifferent(c,h,-1,1),j=this.getFirstDifferent(u,h,-1,-1);if(this.nbCenterLayers>2){let V=this.distancePoint(j,R)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(V<.75||V>1.25||!this.isWhiteOrBlackRectangle(R,k,L,j))break}s=R,a=k,c=L,u=j,h=!h}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new H;this.compact=this.nbCenterLayers===5;let f=new ge(s.getX()+.5,s.getY()-.5),w=new ge(a.getX()+.5,a.getY()+.5),x=new ge(c.getX()-.5,c.getY()+.5),b=new ge(u.getX()-.5,u.getY()-.5);return this.expandSquare([f,w,x,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,a,c;try{let f=new Bt(this.image).detect();r=f[0],s=f[1],a=f[2],c=f[3]}catch{let w=this.image.getWidth()/2,x=this.image.getHeight()/2;r=this.getFirstDifferent(new Ut(w+7,x-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ut(w+7,x+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ut(w-7,x+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ut(w-7,x-7),!1,-1,-1).toResultPoint()}let u=ve.round((r.getX()+c.getX()+s.getX()+a.getX())/4),h=ve.round((r.getY()+c.getY()+s.getY()+a.getY())/4);try{let f=new Bt(this.image,15,u,h).detect();r=f[0],s=f[1],a=f[2],c=f[3]}catch{r=this.getFirstDifferent(new Ut(u+7,h-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new Ut(u+7,h+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Ut(u-7,h+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new Ut(u-7,h-7),!1,-1,-1).toResultPoint()}return u=ve.round((r.getX()+c.getX()+s.getX()+a.getX())/4),h=ve.round((r.getY()+c.getY()+s.getY()+a.getY())/4),new Ut(u,h)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,a,c,u){let h=Xn.getInstance(),f=this.getDimension(),w=f/2-this.nbCenterLayers,x=f/2+this.nbCenterLayers;return h.sampleGrid(r,f,f,w,w,x,w,x,x,w,x,s.getX(),s.getY(),a.getX(),a.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,a){let c=0,u=this.distanceResultPoint(r,s),h=u/a,f=r.getX(),w=r.getY(),x=h*(s.getX()-r.getX())/u,b=h*(s.getY()-r.getY())/u;for(let R=0;R<a;R++)this.image.get(ve.round(f+R*x),ve.round(w+R*b))&&(c|=1<<a-R-1);return c}isWhiteOrBlackRectangle(r,s,a,c){let u=3;r=new Ut(r.getX()-u,r.getY()+u),s=new Ut(s.getX()-u,s.getY()-u),a=new Ut(a.getX()+u,a.getY()-u),c=new Ut(c.getX()+u,c.getY()+u);let h=this.getColor(c,r);if(h===0)return!1;let f=this.getColor(r,s);return f!==h||(f=this.getColor(s,a),f!==h)?!1:(f=this.getColor(a,c),f===h)}getColor(r,s){let a=this.distancePoint(r,s),c=(s.getX()-r.getX())/a,u=(s.getY()-r.getY())/a,h=0,f=r.getX(),w=r.getY(),x=this.image.get(r.getX(),r.getY()),b=Math.ceil(a);for(let k=0;k<b;k++)f+=c,w+=u,this.image.get(ve.round(f),ve.round(w))!==x&&h++;let R=h/a;return R>.1&&R<.9?0:R<=.1===x?1:-1}getFirstDifferent(r,s,a,c){let u=r.getX()+a,h=r.getY()+c;for(;this.isValid(u,h)&&this.image.get(u,h)===s;)u+=a,h+=c;for(u-=a,h-=c;this.isValid(u,h)&&this.image.get(u,h)===s;)u+=a;for(u-=a;this.isValid(u,h)&&this.image.get(u,h)===s;)h+=c;return h-=c,new Ut(u,h)}expandSquare(r,s,a){let c=a/(2*s),u=r[0].getX()-r[2].getX(),h=r[0].getY()-r[2].getY(),f=(r[0].getX()+r[2].getX())/2,w=(r[0].getY()+r[2].getY())/2,x=new ge(f+c*u,w+c*h),b=new ge(f-c*u,w-c*h);u=r[1].getX()-r[3].getX(),h=r[1].getY()-r[3].getY(),f=(r[1].getX()+r[3].getX())/2,w=(r[1].getY()+r[3].getY())/2;let R=new ge(f+c*u,w+c*h),k=new ge(f-c*u,w-c*h);return[x,R,b,k]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=ve.round(r.getX()),a=ve.round(r.getY());return this.isValid(s,a)}distancePoint(r,s){return ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return ve.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class Ti{decode(r,s=null){let a=null,c=new oi(r.getBlackMatrix()),u=null,h=null;try{let b=c.detectMirror(!1);u=b.getPoints(),this.reportFoundResultPoints(s,u),h=new De().decode(b)}catch(b){a=b}if(h==null)try{let b=c.detectMirror(!0);u=b.getPoints(),this.reportFoundResultPoints(s,u),h=new De().decode(b)}catch(b){throw a??b}let f=new Ee(h.getText(),h.getRawBytes(),h.getNumBits(),u,me.AZTEC,A.currentTimeMillis()),w=h.getByteSegments();w!=null&&f.putMetadata(ot.BYTE_SEGMENTS,w);let x=h.getECLevel();return x!=null&&f.putMetadata(ot.ERROR_CORRECTION_LEVEL,x),f}reportFoundResultPoints(r,s){if(r!=null){let a=r.get(z.NEED_RESULT_POINT_CALLBACK);a!=null&&s.forEach((c,u,h)=>{a.foundPossibleResultPoint(c)})}}reset(){}}class Ys extends Te{constructor(r=500){super(new Ti,r)}}class Je{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(z.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),h=this.doDecode(u,s),f=h.getResultMetadata();let w=270;f!==null&&f.get(ot.ORIENTATION)===!0&&(w=w+f.get(ot.ORIENTATION)%360),h.putMetadata(ot.ORIENTATION,w);const x=h.getResultPoints();if(x!==null){const b=u.getHeight();for(let R=0;R<x.length;R++)x[R]=new ge(b-x[R].getY()-1,x[R].getX())}return h}else throw new H}}reset(){}doDecode(r,s){const a=r.getWidth(),c=r.getHeight();let u=new D(a);const h=s&&s.get(z.TRY_HARDER)===!0,f=Math.max(1,c>>(h?8:5));let w;h?w=c:w=15;const x=Math.trunc(c/2);for(let b=0;b<w;b++){const R=Math.trunc((b+1)/2),k=(b&1)===0,L=x+f*(k?R:-R);if(L<0||L>=c)break;try{u=r.getBlackRow(L,u)}catch{continue}for(let j=0;j<2;j++){if(j===1&&(u.reverse(),s&&s.get(z.NEED_RESULT_POINT_CALLBACK)===!0)){const V=new Map;s.forEach(($,Y)=>V.set(Y,$)),V.delete(z.NEED_RESULT_POINT_CALLBACK),s=V}try{const V=this.decodeRow(L,u,s);if(j===1){V.putMetadata(ot.ORIENTATION,180);const $=V.getResultPoints();$!==null&&($[0]=new ge(a-$[0].getX()-1,$[0].getY()),$[1]=new ge(a-$[1].getX()-1,$[1].getY()))}return V}catch{}}}throw new H}static recordPattern(r,s,a){const c=a.length;for(let x=0;x<c;x++)a[x]=0;const u=r.getSize();if(s>=u)throw new H;let h=!r.get(s),f=0,w=s;for(;w<u;){if(r.get(w)!==h)a[f]++;else{if(++f===c)break;a[f]=1,h=!h}w++}if(!(f===c||f===c-1&&w===u))throw new H}static recordPatternInReverse(r,s,a){let c=a.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new H;Je.recordPattern(r,s+1,a)}static patternMatchVariance(r,s,a){const c=r.length;let u=0,h=0;for(let x=0;x<c;x++)u+=r[x],h+=s[x];if(u<h)return Number.POSITIVE_INFINITY;const f=u/h;a*=f;let w=0;for(let x=0;x<c;x++){const b=r[x],R=s[x]*f,k=b>R?b-R:R-b;if(k>a)return Number.POSITIVE_INFINITY;w+=k}return w/u}}class le extends Je{static findStartPattern(r){const s=r.getSize(),a=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),h=a,f=!1;const w=6;for(let x=a;x<s;x++)if(r.get(x)!==f)u[c]++;else{if(c===w-1){let b=le.MAX_AVG_VARIANCE,R=-1;for(let k=le.CODE_START_A;k<=le.CODE_START_C;k++){const L=Je.patternMatchVariance(u,le.CODE_PATTERNS[k],le.MAX_INDIVIDUAL_VARIANCE);L<b&&(b=L,R=k)}if(R>=0&&r.isRange(Math.max(0,h-(x-h)/2),h,!1))return Int32Array.from([h,x,R]);h+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,f=!f}throw new H}static decodeCode(r,s,a){Je.recordPattern(r,a,s);let c=le.MAX_AVG_VARIANCE,u=-1;for(let h=0;h<le.CODE_PATTERNS.length;h++){const f=le.CODE_PATTERNS[h],w=this.patternMatchVariance(s,f,le.MAX_INDIVIDUAL_VARIANCE);w<c&&(c=w,u=h)}if(u>=0)return u;throw new H}decodeRow(r,s,a){const c=a&&a.get(z.ASSUME_GS1)===!0,u=le.findStartPattern(s),h=u[2];let f=0;const w=new Uint8Array(20);w[f++]=h;let x;switch(h){case le.CODE_START_A:x=le.CODE_CODE_A;break;case le.CODE_START_B:x=le.CODE_CODE_B;break;case le.CODE_START_C:x=le.CODE_CODE_C;break;default:throw new F}let b=!1,R=!1,k="",L=u[0],j=u[1];const V=Int32Array.from([0,0,0,0,0,0]);let $=0,Y=0,ae=h,ue=0,ie=!0,$e=!1,Be=!1;for(;!b;){const io=R;switch(R=!1,$=Y,Y=le.decodeCode(s,V,j),w[f++]=Y,Y!==le.CODE_STOP&&(ie=!0),Y!==le.CODE_STOP&&(ue++,ae+=ue*Y),L=j,j+=V.reduce((xv,vv)=>xv+vv,0),Y){case le.CODE_START_A:case le.CODE_START_B:case le.CODE_START_C:throw new F}switch(x){case le.CODE_CODE_A:if(Y<64)Be===$e?k+=String.fromCharCode(32+Y):k+=String.fromCharCode(32+Y+128),Be=!1;else if(Y<96)Be===$e?k+=String.fromCharCode(Y-64):k+=String.fromCharCode(Y+64),Be=!1;else switch(Y!==le.CODE_STOP&&(ie=!1),Y){case le.CODE_FNC_1:c&&(k.length===0?k+="]C1":k+="");break;case le.CODE_FNC_2:case le.CODE_FNC_3:break;case le.CODE_FNC_4_A:!$e&&Be?($e=!0,Be=!1):$e&&Be?($e=!1,Be=!1):Be=!0;break;case le.CODE_SHIFT:R=!0,x=le.CODE_CODE_B;break;case le.CODE_CODE_B:x=le.CODE_CODE_B;break;case le.CODE_CODE_C:x=le.CODE_CODE_C;break;case le.CODE_STOP:b=!0;break}break;case le.CODE_CODE_B:if(Y<96)Be===$e?k+=String.fromCharCode(32+Y):k+=String.fromCharCode(32+Y+128),Be=!1;else switch(Y!==le.CODE_STOP&&(ie=!1),Y){case le.CODE_FNC_1:c&&(k.length===0?k+="]C1":k+="");break;case le.CODE_FNC_2:case le.CODE_FNC_3:break;case le.CODE_FNC_4_B:!$e&&Be?($e=!0,Be=!1):$e&&Be?($e=!1,Be=!1):Be=!0;break;case le.CODE_SHIFT:R=!0,x=le.CODE_CODE_A;break;case le.CODE_CODE_A:x=le.CODE_CODE_A;break;case le.CODE_CODE_C:x=le.CODE_CODE_C;break;case le.CODE_STOP:b=!0;break}break;case le.CODE_CODE_C:if(Y<100)Y<10&&(k+="0"),k+=Y;else switch(Y!==le.CODE_STOP&&(ie=!1),Y){case le.CODE_FNC_1:c&&(k.length===0?k+="]C1":k+="");break;case le.CODE_CODE_A:x=le.CODE_CODE_A;break;case le.CODE_CODE_B:x=le.CODE_CODE_B;break;case le.CODE_STOP:b=!0;break}break}io&&(x=x===le.CODE_CODE_A?le.CODE_CODE_B:le.CODE_CODE_A)}const Fn=j-L;if(j=s.getNextUnset(j),!s.isRange(j,Math.min(s.getSize(),j+(j-L)/2),!1))throw new H;if(ae-=ue*$,ae%103!==$)throw new C;const Cr=k.length;if(Cr===0)throw new H;Cr>0&&ie&&(x===le.CODE_CODE_C?k=k.substring(0,Cr-2):k=k.substring(0,Cr-1));const jn=(u[1]+u[0])/2,ct=L+Fn/2,cn=w.length,Yn=new Uint8Array(cn);for(let io=0;io<cn;io++)Yn[io]=w[io];const ro=[new ge(jn,r),new ge(ct,r)];return new Ee(k,Yn,0,ro,me.CODE_128,new Date().getTime())}}le.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],le.MAX_AVG_VARIANCE=.25,le.MAX_INDIVIDUAL_VARIANCE=.7,le.CODE_SHIFT=98,le.CODE_CODE_C=99,le.CODE_CODE_B=100,le.CODE_CODE_A=101,le.CODE_FNC_1=102,le.CODE_FNC_2=97,le.CODE_FNC_3=96,le.CODE_FNC_4_A=101,le.CODE_FNC_4_B=100,le.CODE_START_A=103,le.CODE_START_B=104,le.CODE_START_C=105,le.CODE_STOP=106;class vt extends Je{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,a){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=vt.findAsteriskPattern(s,c),h=s.getNextSet(u[1]),f=s.getSize(),w,x;do{vt.recordPattern(s,h,c);let V=vt.toNarrowWidePattern(c);if(V<0)throw new H;w=vt.patternToChar(V),this.decodeRowResult+=w,x=h;for(let $ of c)h+=$;h=s.getNextSet(h)}while(w!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let V of c)b+=V;let R=h-x-b;if(h!==f&&R*2<b)throw new H;if(this.usingCheckDigit){let V=this.decodeRowResult.length-1,$=0;for(let Y=0;Y<V;Y++)$+=vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Y));if(this.decodeRowResult.charAt(V)!==vt.ALPHABET_STRING.charAt($%43))throw new C;this.decodeRowResult=this.decodeRowResult.substring(0,V)}if(this.decodeRowResult.length===0)throw new H;let k;this.extendedMode?k=vt.decodeExtended(this.decodeRowResult):k=this.decodeRowResult;let L=(u[1]+u[0])/2,j=x+b/2;return new Ee(k,null,0,[new ge(L,r),new ge(j,r)],me.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let a=r.getSize(),c=r.getNextSet(0),u=0,h=c,f=!1,w=s.length;for(let x=c;x<a;x++)if(r.get(x)!==f)s[u]++;else{if(u===w-1){if(this.toNarrowWidePattern(s)===vt.ASTERISK_ENCODING&&r.isRange(Math.max(0,h-Math.floor((x-h)/2)),h,!1))return[h,x];h+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,f=!f}throw new H}static toNarrowWidePattern(r){let s=r.length,a=0,c;do{let u=2147483647;for(let w of r)w<u&&w>a&&(u=w);a=u,c=0;let h=0,f=0;for(let w=0;w<s;w++){let x=r[w];x>a&&(f|=1<<s-1-w,c++,h+=x)}if(c===3){for(let w=0;w<s&&c>0;w++){let x=r[w];if(x>a&&(c--,x*2>=h))return-1}return f}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<vt.CHARACTER_ENCODINGS.length;s++)if(vt.CHARACTER_ENCODINGS[s]===r)return vt.ALPHABET_STRING.charAt(s);if(r===vt.ASTERISK_ENCODING)return"*";throw new H}static decodeExtended(r){let s=r.length,a="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let h=r.charAt(c+1),f="\0";switch(u){case"+":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)+32);else throw new F;break;case"$":if(h>="A"&&h<="Z")f=String.fromCharCode(h.charCodeAt(0)-64);else throw new F;break;case"%":if(h>="A"&&h<="E")f=String.fromCharCode(h.charCodeAt(0)-38);else if(h>="F"&&h<="J")f=String.fromCharCode(h.charCodeAt(0)-11);else if(h>="K"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)+16);else if(h>="P"&&h<="T")f=String.fromCharCode(h.charCodeAt(0)+43);else if(h==="U")f="\0";else if(h==="V")f="@";else if(h==="W")f="`";else if(h==="X"||h==="Y"||h==="Z")f="";else throw new F;break;case"/":if(h>="A"&&h<="O")f=String.fromCharCode(h.charCodeAt(0)-32);else if(h==="Z")f=":";else throw new F;break}a+=f,c++}else a+=u}return a}}vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],vt.ASTERISK_ENCODING=148;class Xe extends Je{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,a){let c=this.decodeStart(s),u=this.decodeEnd(s),h=new ce;Xe.decodeMiddle(s,c[1],u[0],h);let f=h.toString(),w=null;a!=null&&(w=a.get(z.ALLOWED_LENGTHS)),w==null&&(w=Xe.DEFAULT_ALLOWED_LENGTHS);let x=f.length,b=!1,R=0;for(let j of w){if(x===j){b=!0;break}j>R&&(R=j)}if(!b&&x>R&&(b=!0),!b)throw new F;const k=[new ge(c[1],r),new ge(u[0],r)];return new Ee(f,null,0,k,me.ITF,new Date().getTime())}static decodeMiddle(r,s,a,c){let u=new Int32Array(10),h=new Int32Array(5),f=new Int32Array(5);for(u.fill(0),h.fill(0),f.fill(0);s<a;){Je.recordPattern(r,s,u);for(let x=0;x<5;x++){let b=2*x;h[x]=u[b],f[x]=u[b+1]}let w=Xe.decodeDigit(h);c.append(w.toString()),w=this.decodeDigit(f),c.append(w.toString()),u.forEach(function(x){s+=x})}}decodeStart(r){let s=Xe.skipWhiteSpace(r),a=Xe.findGuardPattern(r,s,Xe.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(r,a[0]),a}validateQuietZone(r,s){let a=this.narrowLineWidth*10;a=a<s?a:s;for(let c=s-1;a>0&&c>=0&&!r.get(c);c--)a--;if(a!==0)throw new H}static skipWhiteSpace(r){const s=r.getSize(),a=r.getNextSet(0);if(a===s)throw new H;return a}decodeEnd(r){r.reverse();try{let s=Xe.skipWhiteSpace(r),a;try{a=Xe.findGuardPattern(r,s,Xe.END_PATTERN_REVERSED[0])}catch(u){u instanceof H&&(a=Xe.findGuardPattern(r,s,Xe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,a[0]);let c=a[0];return a[0]=r.getSize()-a[1],a[1]=r.getSize()-c,a}finally{r.reverse()}}static findGuardPattern(r,s,a){let c=a.length,u=new Int32Array(c),h=r.getSize(),f=!1,w=0,x=s;u.fill(0);for(let b=s;b<h;b++)if(r.get(b)!==f)u[w]++;else{if(w===c-1){if(Je.patternMatchVariance(u,a,Xe.MAX_INDIVIDUAL_VARIANCE)<Xe.MAX_AVG_VARIANCE)return[x,b];x+=u[0]+u[1],A.arraycopy(u,2,u,0,w-1),u[w-1]=0,u[w]=0,w--}else w++;u[w]=1,f=!f}throw new H}static decodeDigit(r){let s=Xe.MAX_AVG_VARIANCE,a=-1,c=Xe.PATTERNS.length;for(let u=0;u<c;u++){let h=Xe.PATTERNS[u],f=Je.patternMatchVariance(r,h,Xe.MAX_INDIVIDUAL_VARIANCE);f<s?(s=f,a=u):f===s&&(a=-1)}if(a>=0)return a%10;throw new H}}Xe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Xe.MAX_AVG_VARIANCE=.38,Xe.MAX_INDIVIDUAL_VARIANCE=.5,Xe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Xe.START_PATTERN=Int32Array.from([1,1,1,1]),Xe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Et extends Je{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,a,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),a=Et.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let h=a[0];c=a[1];let f=h-(c-h);f>=0&&(s=r.isRange(f,h,!1))}return a}static checkChecksum(r){return Et.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return Et.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new F;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new F;a+=u}return(1e3-a)%10}static decodeEnd(r,s){return Et.findGuardPattern(r,s,!1,Et.START_END_PATTERN,new Int32Array(Et.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,a,c){return this.findGuardPattern(r,s,a,c,new Int32Array(c.length))}static findGuardPattern(r,s,a,c,u){let h=r.getSize();s=a?r.getNextUnset(s):r.getNextSet(s);let f=0,w=s,x=c.length,b=a;for(let R=s;R<h;R++)if(r.get(R)!==b)u[f]++;else{if(f===x-1){if(Je.patternMatchVariance(u,c,Et.MAX_INDIVIDUAL_VARIANCE)<Et.MAX_AVG_VARIANCE)return Int32Array.from([w,R]);w+=u[0]+u[1];let k=u.slice(2,u.length-1);for(let L=0;L<f-1;L++)u[L]=k[L];u[f-1]=0,u[f]=0,f--}else f++;u[f]=1,b=!b}throw new H}static decodeDigit(r,s,a,c){this.recordPattern(r,a,s);let u=this.MAX_AVG_VARIANCE,h=-1,f=c.length;for(let w=0;w<f;w++){let x=c[w],b=Je.patternMatchVariance(s,x,Et.MAX_INDIVIDUAL_VARIANCE);b<u&&(u=b,h=w)}if(h>=0)return h;throw new H}}Et.MAX_AVG_VARIANCE=.48,Et.MAX_INDIVIDUAL_VARIANCE=.7,Et.START_END_PATTERN=Int32Array.from([1,1,1]),Et.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Et.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Et.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class gs{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),h=c.toString(),f=gs.parseExtensionString(h),w=[new ge((a[0]+a[1])/2,r),new ge(u,r)],x=new Ee(h,null,0,w,me.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],f=0;for(let x=0;x<5&&h<u;x++){let b=Et.decodeDigit(r,c,h,Et.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let R of c)h+=R;b>=10&&(f|=1<<4-x),x!==4&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==5)throw new H;let w=this.determineCheckDigit(f);if(gs.extensionChecksum(a.toString())!==w)throw new H;return h}static extensionChecksum(r){let s=r.length,a=0;for(let c=s-2;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;a*=3;for(let c=s-1;c>=0;c-=2)a+=r.charAt(c).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new H}static parseExtensionString(r){if(r.length!==5)return null;let s=gs.parseExtension5String(r);return s==null?null:new Map([[ot.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let a=parseInt(r.substring(1)),c=(a/100).toString(),u=a%100,h=u<10?"0"+u:u.toString();return s+c+"."+h}}class qs{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,a){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,a,c),h=c.toString(),f=qs.parseExtensionString(h),w=[new ge((a[0]+a[1])/2,r),new ge(u,r)],x=new Ee(h,null,0,w,me.UPC_EAN_EXTENSION,new Date().getTime());return f!=null&&x.putAllMetadata(f),x}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],f=0;for(let w=0;w<2&&h<u;w++){let x=Et.decodeDigit(r,c,h,Et.L_AND_G_PATTERNS);a+=String.fromCharCode(48+x%10);for(let b of c)h+=b;x>=10&&(f|=1<<1-w),w!==1&&(h=r.getNextSet(h),h=r.getNextUnset(h))}if(a.length!==2)throw new H;if(parseInt(a.toString())%4!==f)throw new H;return h}static parseExtensionString(r){return r.length!==2?null:new Map([[ot.ISSUE_NUMBER,parseInt(r)]])}}class ua{static decodeRow(r,s,a){let c=Et.findGuardPattern(s,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new gs().decodeRow(r,s,c)}catch{return new qs().decodeRow(r,s,c)}}}ua.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class qe extends Et{constructor(){super(),this.decodeRowStringBuffer="",qe.L_AND_G_PATTERNS=qe.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=qe.L_PATTERNS[r-10],a=new Int32Array(s.length);for(let c=0;c<s.length;c++)a[c]=s[s.length-c-1];qe.L_AND_G_PATTERNS[r]=a}}decodeRow(r,s,a){let c=qe.findStartGuardPattern(s),u=a==null?null:a.get(z.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ie=new ge((c[0]+c[1])/2,r);u.foundPossibleResultPoint(ie)}let h=this.decodeMiddle(s,c,this.decodeRowStringBuffer),f=h.rowOffset,w=h.resultString;if(u!=null){const ie=new ge(f,r);u.foundPossibleResultPoint(ie)}let x=this.decodeEnd(s,f);if(u!=null){const ie=new ge((x[0]+x[1])/2,r);u.foundPossibleResultPoint(ie)}let b=x[1],R=b+(b-x[0]);if(R>=s.getSize()||!s.isRange(b,R,!1))throw new H;let k=w.toString();if(k.length<8)throw new F;if(!qe.checkChecksum(k))throw new C;let L=(c[1]+c[0])/2,j=(x[1]+x[0])/2,V=this.getBarcodeFormat(),$=[new ge(L,r),new ge(j,r)],Y=new Ee(k,null,0,$,V,new Date().getTime()),ae=0;try{let ie=ua.decodeRow(r,s,x[1]);Y.putMetadata(ot.UPC_EAN_EXTENSION,ie.getText()),Y.putAllMetadata(ie.getResultMetadata()),Y.addResultPoints(ie.getResultPoints()),ae=ie.getText().length}catch{}let ue=a==null?null:a.get(z.ALLOWED_EAN_EXTENSIONS);if(ue!=null){let ie=!1;for(let $e in ue)if(ae.toString()===$e){ie=!0;break}if(!ie)throw new H}return Y}decodeEnd(r,s){return qe.findGuardPattern(r,s,!1,qe.START_END_PATTERN,new Int32Array(qe.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return qe.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let a=parseInt(r.charAt(s-1),10);return qe.getStandardUPCEANChecksum(r.substring(0,s-1))===a}static getStandardUPCEANChecksum(r){let s=r.length,a=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new F;a+=u}a*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new F;a+=u}return(1e3-a)%10}}class vr extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1],f=0;for(let x=0;x<6&&h<u;x++){let b=qe.decodeDigit(r,c,h,qe.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let R of c)h+=R;b>=10&&(f|=1<<5-x)}a=vr.determineFirstDigit(a,f),h=qe.findGuardPattern(r,h,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<6&&h<u;x++){let b=qe.decodeDigit(r,c,h,qe.L_PATTERNS);a+=String.fromCharCode(48+b);for(let R of c)h+=R}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return me.EAN_13}static determineFirstDigit(r,s){for(let a=0;a<10;a++)if(s===this.FIRST_DIGIT_ENCODINGS[a])return r=String.fromCharCode(48+a)+r,r;throw new H}}vr.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Er extends qe{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h=s[1];for(let w=0;w<4&&h<u;w++){let x=qe.decodeDigit(r,c,h,qe.L_PATTERNS);a+=String.fromCharCode(48+x);for(let b of c)h+=b}h=qe.findGuardPattern(r,h,!0,qe.MIDDLE_PATTERN,new Int32Array(qe.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<4&&h<u;w++){let x=qe.decodeDigit(r,c,h,qe.L_PATTERNS);a+=String.fromCharCode(48+x);for(let b of c)h+=b}return{rowOffset:h,resultString:a}}getBarcodeFormat(){return me.EAN_8}}class Pl extends qe{constructor(){super(...arguments),this.ean13Reader=new vr}getBarcodeFormat(){return me.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,a))}decodeMiddle(r,s,a){return this.ean13Reader.decodeMiddle(r,s,a)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let a=new Ee(s.substring(1),null,null,r.getResultPoints(),me.UPC_A);return r.getResultMetadata()!=null&&a.putAllMetadata(r.getResultMetadata()),a}else throw new H}reset(){this.ean13Reader.reset()}}class Se extends qe{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,a){const c=this.decodeMiddleCounters.map(x=>x);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let h=s[1],f=0;for(let x=0;x<6&&h<u;x++){const b=Se.decodeDigit(r,c,h,Se.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let R of c)h+=R;b>=10&&(f|=1<<5-x)}let w=Se.determineNumSysAndCheckDigit(a,f);return{rowOffset:h,resultString:w}}decodeEnd(r,s){return Se.findGuardPatternWithoutCounters(r,s,!0,Se.MIDDLE_END_PATTERN)}checkChecksum(r){return qe.checkChecksum(Se.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let a=0;a<=1;a++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][c]){let u=String.fromCharCode(48+a),h=String.fromCharCode(48+c);return u+r+h}throw H.getNotFoundInstance()}getBarcodeFormat(){return me.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new ce;a.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:a.appendChars(s,0,2),a.append(c),a.append("0000"),a.appendChars(s,2,3);break;case 3:a.appendChars(s,0,3),a.append("00000"),a.appendChars(s,3,2);break;case 4:a.appendChars(s,0,4),a.append("00000"),a.append(s[4]);break;default:a.appendChars(s,0,5),a.append("0000"),a.append(c);break}return r.length>=8&&a.append(r.charAt(7)),a.toString()}}Se.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Se.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class et extends Je{constructor(r){super();let s=r==null?null:r.get(z.POSSIBLE_FORMATS),a=[];i(s)?(a.push(new vr),a.push(new Pl),a.push(new Er),a.push(new Se)):(s.indexOf(me.EAN_13)>-1&&a.push(new vr),s.indexOf(me.UPC_A)>-1&&a.push(new Pl),s.indexOf(me.EAN_8)>-1&&a.push(new Er),s.indexOf(me.UPC_E)>-1&&a.push(new Se)),this.readers=a}decodeRow(r,s,a){for(let c of this.readers)try{const u=c.decodeRow(r,s,a),h=u.getBarcodeFormat()===me.EAN_13&&u.getText().charAt(0)==="0",f=a==null?null:a.get(z.POSSIBLE_FORMATS),w=f==null||f.includes(me.UPC_A);if(h&&w){const x=u.getRawBytes(),b=new Ee(u.getText().substring(1),x,x?x.length:null,u.getResultPoints(),me.UPC_A);return b.putAllMetadata(u.getResultMetadata()),b}return u}catch{}throw new H}reset(){for(let r of this.readers)r.reset()}}class Fe extends Je{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let a=0;a<s.length;a++)if(Je.patternMatchVariance(r,s[a],Fe.MAX_INDIVIDUAL_VARIANCE)<Fe.MAX_AVG_VARIANCE)return a;throw new H}static count(r){return ve.sum(new Int32Array(r))}static increment(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],a=u);r[a]++}static decrement(r,s){let a=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],a=u);r[a]--}static isFinderPattern(r){let s=r[0]+r[1],a=s+r[2]+r[3],c=s/a;if(c>=Fe.MIN_FINDER_PATTERN_RATIO&&c<=Fe.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,h=Number.MIN_SAFE_INTEGER;for(let f of r)f>h&&(h=f),f<u&&(u=f);return h<10*u}return!1}}Fe.MAX_AVG_VARIANCE=.2,Fe.MAX_INDIVIDUAL_VARIANCE=.45,Fe.MIN_FINDER_PATTERN_RATIO=9.5/12,Fe.MAX_FINDER_PATTERN_RATIO=12.5/14;class en{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof en))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class wn{constructor(r,s,a,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new ge(a,u)),this.resultPoints.push(new ge(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof wn))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class Ht{constructor(){}static getRSSvalue(r,s,a){let c=0;for(let w of r)c+=w;let u=0,h=0,f=r.length;for(let w=0;w<f-1;w++){let x;for(x=1,h|=1<<w;x<r[w];x++,h&=~(1<<w)){let b=Ht.combins(c-x-1,f-w-2);if(a&&h===0&&c-x-(f-w-1)>=f-w-1&&(b-=Ht.combins(c-x-(f-w),f-w-2)),f-w-1>1){let R=0;for(let k=c-x-(f-w-2);k>s;k--)R+=Ht.combins(c-x-k-1,f-w-3);b-=R*(f-1-w)}else c-x>s&&b--;u+=b}c-=x}return u}static combins(r,s){let a,c;r-s>s?(c=s,a=r-s):(c=r-s,a=s);let u=1,h=1;for(let f=r;f>a;f--)u*=f,h<=c&&(u/=h,h++);for(;h<=c;)u/=h,h++;return u}}class ai{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let a=12*s,c=new D(a),u=0,f=r[0].getRightChar().getValue();for(let w=11;w>=0;--w)f&1<<w&&c.set(u),u++;for(let w=1;w<r.length;++w){let x=r[w],b=x.getLeftChar().getValue();for(let R=11;R>=0;--R)b&1<<R&&c.set(u),u++;if(x.getRightChar()!=null){let R=x.getRightChar().getValue();for(let k=11;k>=0;--k)R&1<<k&&c.set(u),u++}}return c}}class $t{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class lr{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class Mn extends lr{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===Mn.FNC1}}Mn.FNC1="$";class ms extends lr{constructor(r,s,a){super(r),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class cr extends lr{constructor(r,s,a){if(super(r),s<0||s>10||a<0||a>10)throw new F;this.firstDigit=s,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===cr.FNC1}isSecondDigitFNC1(){return this.secondDigit===cr.FNC1}isAnyFNC1(){return this.firstDigit===cr.FNC1||this.secondDigit===cr.FNC1}}cr.FNC1=10;class we{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new H;let s=r.substring(0,2);for(let u of we.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(2,u[2],r):we.processFixedAI(2,u[1],r);if(r.length<3)throw new H;let a=r.substring(0,3);for(let u of we.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(3,u[2],r):we.processFixedAI(3,u[1],r);for(let u of we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,u[2],r):we.processFixedAI(4,u[1],r);if(r.length<4)throw new H;let c=r.substring(0,4);for(let u of we.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===we.VARIABLE_LENGTH?we.processVariableAI(4,u[2],r):we.processFixedAI(4,u[1],r);throw new H}static processFixedAI(r,s,a){if(a.length<r)throw new H;let c=a.substring(0,r);if(a.length<r+s)throw new H;let u=a.substring(r,r+s),h=a.substring(r+s),f="("+c+")"+u,w=we.parseFieldsInGeneralPurpose(h);return w==null?f:f+w}static processVariableAI(r,s,a){let c=a.substring(0,r),u;a.length<r+s?u=a.length:u=r+s;let h=a.substring(r,u),f=a.substring(u),w="("+c+")"+h,x=we.parseFieldsInGeneralPurpose(f);return x==null?w:w+x}}we.VARIABLE_LENGTH=[],we.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",we.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",we.VARIABLE_LENGTH,20],["22",we.VARIABLE_LENGTH,29],["30",we.VARIABLE_LENGTH,8],["37",we.VARIABLE_LENGTH,8],["90",we.VARIABLE_LENGTH,30],["91",we.VARIABLE_LENGTH,30],["92",we.VARIABLE_LENGTH,30],["93",we.VARIABLE_LENGTH,30],["94",we.VARIABLE_LENGTH,30],["95",we.VARIABLE_LENGTH,30],["96",we.VARIABLE_LENGTH,30],["97",we.VARIABLE_LENGTH,3],["98",we.VARIABLE_LENGTH,30],["99",we.VARIABLE_LENGTH,30]],we.THREE_DIGIT_DATA_LENGTH=[["240",we.VARIABLE_LENGTH,30],["241",we.VARIABLE_LENGTH,30],["242",we.VARIABLE_LENGTH,6],["250",we.VARIABLE_LENGTH,30],["251",we.VARIABLE_LENGTH,30],["253",we.VARIABLE_LENGTH,17],["254",we.VARIABLE_LENGTH,20],["400",we.VARIABLE_LENGTH,30],["401",we.VARIABLE_LENGTH,30],["402",17],["403",we.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",we.VARIABLE_LENGTH,20],["421",we.VARIABLE_LENGTH,15],["422",3],["423",we.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],we.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",we.VARIABLE_LENGTH,15],["391",we.VARIABLE_LENGTH,18],["392",we.VARIABLE_LENGTH,15],["393",we.VARIABLE_LENGTH,18],["703",we.VARIABLE_LENGTH,30]],we.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",we.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",we.VARIABLE_LENGTH,20],["8003",we.VARIABLE_LENGTH,30],["8004",we.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",we.VARIABLE_LENGTH,30],["8008",we.VARIABLE_LENGTH,12],["8018",18],["8020",we.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",we.VARIABLE_LENGTH,70],["8200",we.VARIABLE_LENGTH,70]];class Qs{constructor(r){this.buffer=new ce,this.information=r}decodeAllCodes(r,s){let a=s,c=null;do{let u=this.decodeGeneralPurposeField(a,c),h=we.parseFieldsInGeneralPurpose(u.getNewString());if(h!=null&&r.append(h),u.isRemaining()?c=""+u.getRemainingValue():c=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new cr(this.information.getSize(),cr.FNC1,cr.FNC1):new cr(this.information.getSize(),u-1,cr.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),a=(s-8)/11,c=(s-8)%11;return new cr(r+7,a,c)}extractNumericValueFromBitArray(r,s){return Qs.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,a){let c=0;for(let u=0;u<a;++u)r.get(s+u)&&(c|=1<<a-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new ms(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new ms(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let a=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(a!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new ms(this.current.getPosition(),this.buffer.toString()):s=new ms(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new $t(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new ms(this.current.getPosition(),this.buffer.toString());return new $t(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new $t(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new ms(this.current.getPosition(),this.buffer.toString());return new $t(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new $t(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new ms(this.current.getPosition(),this.buffer.toString());return new $t(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new $t(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Mn(r+5,Mn.FNC1);if(s>=5&&s<15)return new Mn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,7);if(a>=64&&a<90)return new Mn(r+7,""+(a+1));if(a>=90&&a<116)return new Mn(r+7,""+(a+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new F}return new Mn(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(r,6);return a>=16&&a<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new Mn(r+5,Mn.FNC1);if(s>=5&&s<15)return new Mn(r+5,"0"+(s-5));let a=this.extractNumericValueFromBitArray(r,6);if(a>=32&&a<58)return new Mn(r+6,""+(a+33));let c;switch(a){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new Ie("Decoding invalid alphanumeric value: "+a)}return new Mn(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class Qu{constructor(r){this.information=r,this.generalDecoder=new Qs(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ln extends Qu{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let a=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,a)}encodeCompressedGtinWithoutAI(r,s,a){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}Ln.appendCheckDigit(r,a)}static appendCheckDigit(r,s){let a=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-48;a+=c&1?u:3*u}a=10-a%10,a===10&&(a=0),r.append(a)}}Ln.GTIN_SIZE=40;class Zs extends Ln{constructor(r){super(r)}parseInformation(){let r=new ce;r.append("(01)");let s=r.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(Zs.HEADER_SIZE,4);return r.append(a),this.encodeCompressedGtinWithoutAI(r,Zs.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,Zs.HEADER_SIZE+44)}}Zs.HEADER_SIZE=4;class Dl extends Qu{constructor(r){super(r)}parseInformation(){let r=new ce;return this.getGeneralDecoder().decodeAllCodes(r,Dl.HEADER_SIZE)}}Dl.HEADER_SIZE=5;class Ml extends Ln{constructor(r){super(r)}encodeCompressedWeight(r,s,a){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,a);this.addWeightCode(r,c);let u=this.checkWeight(c),h=1e5;for(let f=0;f<5;++f)u/h===0&&r.append("0"),h/=10;r.append(u)}}class Vr extends Ml{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=Vr.HEADER_SIZE+Ml.GTIN_SIZE+Vr.WEIGHT_SIZE)throw new H;let r=new ce;return this.encodeCompressedGtin(r,Vr.HEADER_SIZE),this.encodeCompressedWeight(r,Vr.HEADER_SIZE+Ml.GTIN_SIZE,Vr.WEIGHT_SIZE),r.toString()}}Vr.HEADER_SIZE=5,Vr.WEIGHT_SIZE=15;class Gx extends Vr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class Kx extends Vr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class Wr extends Ln{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Wr.HEADER_SIZE+Ln.GTIN_SIZE)throw new H;let r=new ce;this.encodeCompressedGtin(r,Wr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Wr.HEADER_SIZE+Ln.GTIN_SIZE,Wr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Wr.HEADER_SIZE+Ln.GTIN_SIZE+Wr.LAST_DIGIT_SIZE,null);return r.append(a.getNewString()),r.toString()}}Wr.HEADER_SIZE=8,Wr.LAST_DIGIT_SIZE=2;class Tn extends Ln{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<Tn.HEADER_SIZE+Ln.GTIN_SIZE)throw new H;let r=new ce;this.encodeCompressedGtin(r,Tn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(Tn.HEADER_SIZE+Ln.GTIN_SIZE,Tn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Tn.HEADER_SIZE+Ln.GTIN_SIZE+Tn.LAST_DIGIT_SIZE,Tn.FIRST_THREE_DIGITS_SIZE);a/100==0&&r.append("0"),a/10==0&&r.append("0"),r.append(a);let c=this.getGeneralDecoder().decodeGeneralPurposeField(Tn.HEADER_SIZE+Ln.GTIN_SIZE+Tn.LAST_DIGIT_SIZE+Tn.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}Tn.HEADER_SIZE=8,Tn.LAST_DIGIT_SIZE=2,Tn.FIRST_THREE_DIGITS_SIZE=10;class Ct extends Ml{constructor(r,s,a){super(r),this.dateCode=a,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE+Ct.DATE_SIZE)throw new H;let r=new ce;return this.encodeCompressedGtin(r,Ct.HEADER_SIZE),this.encodeCompressedWeight(r,Ct.HEADER_SIZE+Ct.GTIN_SIZE,Ct.WEIGHT_SIZE),this.encodeCompressedDate(r,Ct.HEADER_SIZE+Ct.GTIN_SIZE+Ct.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(s,Ct.DATE_SIZE);if(a==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=a%32;a/=32;let u=a%12+1;a/=12;let h=a;h/10==0&&r.append("0"),r.append(h),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}Ct.HEADER_SIZE=8,Ct.WEIGHT_SIZE=20,Ct.DATE_SIZE=16;function q0(I){try{if(I.get(1))return new Zs(I);if(!I.get(2))return new Dl(I);switch(Qs.extractNumericValueFromBitArray(I,1,4)){case 4:return new Gx(I);case 5:return new Kx(I)}switch(Qs.extractNumericValueFromBitArray(I,1,5)){case 12:return new Wr(I);case 13:return new Tn(I)}switch(Qs.extractNumericValueFromBitArray(I,1,7)){case 56:return new Ct(I,"310","11");case 57:return new Ct(I,"320","11");case 58:return new Ct(I,"310","13");case 59:return new Ct(I,"320","13");case 60:return new Ct(I,"310","15");case 61:return new Ct(I,"320","15");case 62:return new Ct(I,"310","17");case 63:return new Ct(I,"320","17")}}catch(r){throw console.log(r),new Ie("unknown decoder: "+I)}}class Ii{constructor(r,s,a,c){this.leftchar=r,this.rightchar=s,this.finderpattern=a,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Ii?Ii.equalsOrNull(r.leftchar,s.leftchar)&&Ii.equalsOrNull(r.rightchar,s.rightchar)&&Ii.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Ii.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Zu{constructor(r,s,a){this.pairs=r,this.rowNumber=s,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof Zu?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let a;return r.forEach((c,u)=>{s.forEach(h=>{c.getLeftChar().getValue()===h.getLeftChar().getValue()&&c.getRightChar().getValue()===h.getRightChar().getValue()&&c.getFinderPatter().getValue()===h.getFinderPatter().getValue()&&(a=!0)})}),a}}class ee extends Fe{constructor(r){super(...arguments),this.pairs=new Array(ee.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,a){this.pairs.length=0,this.startFromEven=!1;try{return ee.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,ee.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof H){if(!this.pairs.length)throw new H;a=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new H}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let a=s;a<this.rows.length;a++){let c=this.rows[a];this.pairs.length=0;for(let h of r)this.pairs.push(h.getPairs());if(this.pairs.push(c.getPairs()),!ee.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,a+1)}catch(h){this.verbose&&console.log(h)}}throw new H}static isValidSequence(r){for(let s of ee.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let a=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){a=!1;break}if(a)return!0}return!1}storeRow(r,s){let a=0,c=!1,u=!1;for(;a<this.rows.length;){let h=this.rows[a];if(h.getRowNumber()>r){u=h.isEquivalent(this.pairs);break}c=h.isEquivalent(this.pairs),a++}u||c||ee.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Zu(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let a of s)if(a.getPairs().length!==r.length){for(let c of a.getPairs())for(let u of r)if(Ii.equals(c,u))break}}static isPartialRow(r,s){for(let a of s){let c=!0;for(let u of r){let h=!1;for(let f of a.getPairs())if(u.equals(f)){h=!0;break}if(!h){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=ai.buildBitArray(r),c=q0(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),h=r[r.length-1].getFinderPattern().getResultPoints(),f=[u[0],u[1],h[0],h[1]];return new Ee(c,null,null,f,me.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),a=r.getRightChar();if(a==null)return!1;let c=a.getChecksumPortion(),u=2;for(let f=1;f<this.pairs.size();++f){let w=this.pairs.get(f);c+=w.getLeftChar().getChecksumPortion(),u++;let x=w.getRightChar();x!=null&&(c+=x.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let a;return r.get(s)?(a=r.getNextUnset(s),a=r.getNextSet(a)):(a=r.getNextSet(s),a=r.getNextUnset(a)),a}retrieveNextPair(r,s,a){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,h=!0,f=-1;do this.findNextPair(r,s,f),u=this.parseFoundFinderPattern(r,a,c),u==null?f=ee.getNextSecondBar(r,this.startEnd[0]):h=!1;while(h);let w=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new H;let x;try{x=this.decodeDataCharacter(r,u,c,!1)}catch(b){x=null,this.verbose&&console.log(b)}return new Ii(w,x,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,a){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),h;a>=0?h=a:this.isEmptyPair(s)?h=0:h=s[s.length-1].getFinderPattern().getStartEnd()[1];let f=s.length%2!=0;this.startFromEven&&(f=!f);let w=!1;for(;h<u&&(w=!r.get(h),!!w);)h++;let x=0,b=h;for(let R=h;R<u;R++)if(r.get(R)!=w)c[x]++;else{if(x==3){if(f&&ee.reverseCounters(c),ee.isFinderPattern(c)){this.startEnd[0]=b,this.startEnd[1]=R;return}f&&ee.reverseCounters(c),b+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,x--}else x++;c[x]=1,w=!w}throw new H}static reverseCounters(r){let s=r.length;for(let a=0;a<s/2;++a){let c=r[a];r[a]=r[s-a-1],r[s-a-1]=c}}parseFoundFinderPattern(r,s,a){let c,u,h;if(a){let x=this.startEnd[0]-1;for(;x>=0&&!r.get(x);)x--;x++,c=this.startEnd[0]-x,u=x,h=this.startEnd[1]}else u=this.startEnd[0],h=r.getNextUnset(this.startEnd[1]+1),c=h-this.startEnd[1];let f=this.getDecodeFinderCounters();A.arraycopy(f,0,f,1,f.length-1),f[0]=c;let w;try{w=this.parseFinderValue(f,ee.FINDER_PATTERNS)}catch{return null}return new wn(w,[u,h],u,h,s)}decodeDataCharacter(r,s,a,c){let u=this.getDataCharacterCounters();for(let ct=0;ct<u.length;ct++)u[ct]=0;if(c)ee.recordPatternInReverse(r,s.getStartEnd()[0],u);else{ee.recordPattern(r,s.getStartEnd()[1],u);for(let ct=0,cn=u.length-1;ct<cn;ct++,cn--){let Yn=u[ct];u[ct]=u[cn],u[cn]=Yn}}let h=17,f=ve.sum(new Int32Array(u))/h,w=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(f-w)/w>.3)throw new H;let x=this.getOddCounts(),b=this.getEvenCounts(),R=this.getOddRoundingErrors(),k=this.getEvenRoundingErrors();for(let ct=0;ct<u.length;ct++){let cn=1*u[ct]/f,Yn=cn+.5;if(Yn<1){if(cn<.3)throw new H;Yn=1}else if(Yn>8){if(cn>8.7)throw new H;Yn=8}let ro=ct/2;ct&1?(b[ro]=Yn,k[ro]=cn-Yn):(x[ro]=Yn,R[ro]=cn-Yn)}this.adjustOddEvenCounts(h);let L=4*s.getValue()+(a?0:2)+(c?0:1)-1,j=0,V=0;for(let ct=x.length-1;ct>=0;ct--){if(ee.isNotA1left(s,a,c)){let cn=ee.WEIGHTS[L][2*ct];V+=x[ct]*cn}j+=x[ct]}let $=0;for(let ct=b.length-1;ct>=0;ct--)if(ee.isNotA1left(s,a,c)){let cn=ee.WEIGHTS[L][2*ct+1];$+=b[ct]*cn}let Y=V+$;if(j&1||j>13||j<4)throw new H;let ae=(13-j)/2,ue=ee.SYMBOL_WIDEST[ae],ie=9-ue,$e=Ht.getRSSvalue(x,ue,!0),Be=Ht.getRSSvalue(b,ie,!1),Fn=ee.EVEN_TOTAL_SUBSET[ae],Cr=ee.GSUM[ae],jn=$e*Fn+Be+Cr;return new en(jn,Y)}static isNotA1left(r,s,a){return!(r.getValue()==0&&s&&a)}adjustOddEvenCounts(r){let s=ve.sum(new Int32Array(this.getOddCounts())),a=ve.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let h=!1,f=!1;a>13?f=!0:a<4&&(h=!0);let w=s+a-r,x=(s&1)==1,b=(a&1)==0;if(w==1)if(x){if(b)throw new H;u=!0}else{if(!b)throw new H;f=!0}else if(w==-1)if(x){if(b)throw new H;c=!0}else{if(!b)throw new H;h=!0}else if(w==0){if(x){if(!b)throw new H;s<a?(c=!0,f=!0):(u=!0,h=!0)}else if(b)throw new H}else throw new H;if(c){if(u)throw new H;ee.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&ee.decrement(this.getOddCounts(),this.getOddRoundingErrors()),h){if(f)throw new H;ee.increment(this.getEvenCounts(),this.getOddRoundingErrors())}f&&ee.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ee.SYMBOL_WIDEST=[7,5,4,3,1],ee.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ee.GSUM=[0,348,1388,2948,3988],ee.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ee.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ee.FINDER_PAT_A=0,ee.FINDER_PAT_B=1,ee.FINDER_PAT_C=2,ee.FINDER_PAT_D=3,ee.FINDER_PAT_E=4,ee.FINDER_PAT_F=5,ee.FINDER_PATTERN_SEQUENCES=[[ee.FINDER_PAT_A,ee.FINDER_PAT_A],[ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B],[ee.FINDER_PAT_A,ee.FINDER_PAT_C,ee.FINDER_PAT_B,ee.FINDER_PAT_D],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_C],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_D,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_E,ee.FINDER_PAT_B,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_D],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_E],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F],[ee.FINDER_PAT_A,ee.FINDER_PAT_A,ee.FINDER_PAT_B,ee.FINDER_PAT_B,ee.FINDER_PAT_C,ee.FINDER_PAT_D,ee.FINDER_PAT_D,ee.FINDER_PAT_E,ee.FINDER_PAT_E,ee.FINDER_PAT_F,ee.FINDER_PAT_F]],ee.MAX_PAIRS=11;class Xx extends en{constructor(r,s,a){super(r,s),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Rt extends Fe{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,a){const c=this.decodePair(s,!1,r,a);Rt.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,a);Rt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let h of this.possibleLeftPairs)if(h.getCount()>1){for(let f of this.possibleRightPairs)if(f.getCount()>1&&Rt.checkChecksum(h,f))return Rt.constructResult(h,f)}throw new H}static addOrTally(r,s){if(s==null)return;let a=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),a=!0;break}a||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let a=4537077*r.getValue()+s.getValue(),c=new String(a).toString(),u=new ce;for(let x=13-c.length;x>0;x--)u.append("0");u.append(c);let h=0;for(let x=0;x<13;x++){let b=u.charAt(x).charCodeAt(0)-48;h+=x&1?b:3*b}h=10-h%10,h===10&&(h=0),u.append(h.toString());let f=r.getFinderPattern().getResultPoints(),w=s.getFinderPattern().getResultPoints();return new Ee(u.toString(),null,0,[f[0],f[1],w[0],w[1]],me.RSS_14,new Date().getTime())}static checkChecksum(r,s){let a=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,a===c}decodePair(r,s,a,c){try{let u=this.findFinderPattern(r,s),h=this.parseFoundFinderPattern(r,a,s,u),f=c==null?null:c.get(z.NEED_RESULT_POINT_CALLBACK);if(f!=null){let b=(u[0]+u[1])/2;s&&(b=r.getSize()-1-b),f.foundPossibleResultPoint(new ge(b,a))}let w=this.decodeDataCharacter(r,h,!0),x=this.decodeDataCharacter(r,h,!1);return new Xx(1597*w.getValue()+x.getValue(),w.getChecksumPortion()+4*x.getChecksumPortion(),h)}catch{return null}}decodeDataCharacter(r,s,a){let c=this.getDataCharacterCounters();for(let $=0;$<c.length;$++)c[$]=0;if(a)Je.recordPatternInReverse(r,s.getStartEnd()[0],c);else{Je.recordPattern(r,s.getStartEnd()[1]+1,c);for(let $=0,Y=c.length-1;$<Y;$++,Y--){let ae=c[$];c[$]=c[Y],c[Y]=ae}}let u=a?16:15,h=ve.sum(new Int32Array(c))/u,f=this.getOddCounts(),w=this.getEvenCounts(),x=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let $=0;$<c.length;$++){let Y=c[$]/h,ae=Math.floor(Y+.5);ae<1?ae=1:ae>8&&(ae=8);let ue=Math.floor($/2);$&1?(w[ue]=ae,b[ue]=Y-ae):(f[ue]=ae,x[ue]=Y-ae)}this.adjustOddEvenCounts(a,u);let R=0,k=0;for(let $=f.length-1;$>=0;$--)k*=9,k+=f[$],R+=f[$];let L=0,j=0;for(let $=w.length-1;$>=0;$--)L*=9,L+=w[$],j+=w[$];let V=k+3*L;if(a){if(R&1||R>12||R<4)throw new H;let $=(12-R)/2,Y=Rt.OUTSIDE_ODD_WIDEST[$],ae=9-Y,ue=Ht.getRSSvalue(f,Y,!1),ie=Ht.getRSSvalue(w,ae,!0),$e=Rt.OUTSIDE_EVEN_TOTAL_SUBSET[$],Be=Rt.OUTSIDE_GSUM[$];return new en(ue*$e+ie+Be,V)}else{if(j&1||j>10||j<4)throw new H;let $=(10-j)/2,Y=Rt.INSIDE_ODD_WIDEST[$],ae=9-Y,ue=Ht.getRSSvalue(f,Y,!0),ie=Ht.getRSSvalue(w,ae,!1),$e=Rt.INSIDE_ODD_TOTAL_SUBSET[$],Be=Rt.INSIDE_GSUM[$];return new en(ie*$e+ue+Be,V)}}findFinderPattern(r,s){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let c=r.getSize(),u=!1,h=0;for(;h<c&&(u=!r.get(h),s!==u);)h++;let f=0,w=h;for(let x=h;x<c;x++)if(r.get(x)!==u)a[f]++;else{if(f===3){if(Fe.isFinderPattern(a))return[w,x];w+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,u=!u}throw new H}parseFoundFinderPattern(r,s,a,c){let u=r.get(c[0]),h=c[0]-1;for(;h>=0&&u!==r.get(h);)h--;h++;const f=c[0]-h,w=this.getDecodeFinderCounters(),x=new Int32Array(w.length);A.arraycopy(w,0,x,1,w.length-1),x[0]=f;const b=this.parseFinderValue(x,Rt.FINDER_PATTERNS);let R=h,k=c[1];return a&&(R=r.getSize()-1-R,k=r.getSize()-1-k),new wn(b,[h,c[1]],R,k,s)}adjustOddEvenCounts(r,s){let a=ve.sum(new Int32Array(this.getOddCounts())),c=ve.sum(new Int32Array(this.getEvenCounts())),u=!1,h=!1,f=!1,w=!1;r?(a>12?h=!0:a<4&&(u=!0),c>12?w=!0:c<4&&(f=!0)):(a>11?h=!0:a<5&&(u=!0),c>10?w=!0:c<4&&(f=!0));let x=a+c-s,b=(a&1)===(r?1:0),R=(c&1)===1;if(x===1)if(b){if(R)throw new H;h=!0}else{if(!R)throw new H;w=!0}else if(x===-1)if(b){if(R)throw new H;u=!0}else{if(!R)throw new H;f=!0}else if(x===0){if(b){if(!R)throw new H;a<c?(u=!0,w=!0):(h=!0,f=!0)}else if(R)throw new H}else throw new H;if(u){if(h)throw new H;Fe.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(h&&Fe.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(w)throw new H;Fe.increment(this.getEvenCounts(),this.getOddRoundingErrors())}w&&Fe.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Rt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Rt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Rt.OUTSIDE_GSUM=[0,161,961,2015,2715],Rt.INSIDE_GSUM=[0,336,1036,1516],Rt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Rt.INSIDE_ODD_WIDEST=[2,4,6,8],Rt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class Js extends Je{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const a=r?r.get(z.POSSIBLE_FORMATS):null,c=r&&r.get(z.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(me.EAN_13)||a.includes(me.UPC_A)||a.includes(me.EAN_8)||a.includes(me.UPC_E))&&this.readers.push(new et(r)),a.includes(me.CODE_39)&&this.readers.push(new vt(c)),a.includes(me.CODE_128)&&this.readers.push(new le),a.includes(me.ITF)&&this.readers.push(new Xe),a.includes(me.RSS_14)&&this.readers.push(new Rt),a.includes(me.RSS_EXPANDED)&&this.readers.push(new ee(this.verbose))):(this.readers.push(new et(r)),this.readers.push(new vt),this.readers.push(new et(r)),this.readers.push(new le),this.readers.push(new Xe),this.readers.push(new Rt),this.readers.push(new ee(this.verbose)))}decodeRow(r,s,a){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,a)}catch{}throw new H}reset(){this.readers.forEach(r=>r.reset())}}class Yx extends Te{constructor(r=500,s){super(new Js(s),r,s)}}class it{constructor(r,s,a){this.ecCodewords=r,this.ecBlocks=[s],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class rt{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ge{constructor(r,s,a,c,u,h){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=a,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=h;let f=0;const w=h.getECCodewords(),x=h.getECBlocks();for(let b of x)f+=b.getCount()*(b.getDataCodewords()+w);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new F;for(let a of Ge.VERSIONS)if(a.symbolSizeRows===r&&a.symbolSizeColumns===s)return a;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new Ge(1,10,10,8,8,new it(5,new rt(1,3))),new Ge(2,12,12,10,10,new it(7,new rt(1,5))),new Ge(3,14,14,12,12,new it(10,new rt(1,8))),new Ge(4,16,16,14,14,new it(12,new rt(1,12))),new Ge(5,18,18,16,16,new it(14,new rt(1,18))),new Ge(6,20,20,18,18,new it(18,new rt(1,22))),new Ge(7,22,22,20,20,new it(20,new rt(1,30))),new Ge(8,24,24,22,22,new it(24,new rt(1,36))),new Ge(9,26,26,24,24,new it(28,new rt(1,44))),new Ge(10,32,32,14,14,new it(36,new rt(1,62))),new Ge(11,36,36,16,16,new it(42,new rt(1,86))),new Ge(12,40,40,18,18,new it(48,new rt(1,114))),new Ge(13,44,44,20,20,new it(56,new rt(1,144))),new Ge(14,48,48,22,22,new it(68,new rt(1,174))),new Ge(15,52,52,24,24,new it(42,new rt(2,102))),new Ge(16,64,64,14,14,new it(56,new rt(2,140))),new Ge(17,72,72,16,16,new it(36,new rt(4,92))),new Ge(18,80,80,18,18,new it(48,new rt(4,114))),new Ge(19,88,88,20,20,new it(56,new rt(4,144))),new Ge(20,96,96,22,22,new it(68,new rt(4,174))),new Ge(21,104,104,24,24,new it(56,new rt(6,136))),new Ge(22,120,120,18,18,new it(68,new rt(6,175))),new Ge(23,132,132,20,20,new it(62,new rt(8,163))),new Ge(24,144,144,22,22,new it(62,new rt(8,156),new rt(2,155))),new Ge(25,8,18,6,16,new it(7,new rt(1,5))),new Ge(26,8,32,6,14,new it(11,new rt(1,10))),new Ge(27,12,26,10,24,new it(14,new rt(1,16))),new Ge(28,12,36,10,16,new it(18,new rt(1,22))),new Ge(29,16,36,14,16,new it(24,new rt(1,32))),new Ge(30,16,48,14,22,new it(28,new rt(1,49)))]}}Ge.VERSIONS=Ge.buildVersions();class Ju{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new F;this.version=Ju.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new te(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),a=r.getWidth();return Ge.getVersionForDimensions(s,a)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,a=4,c=0;const u=this.mappingBitMatrix.getHeight(),h=this.mappingBitMatrix.getWidth();let f=!1,w=!1,x=!1,b=!1;do if(a===u&&c===0&&!f)r[s++]=this.readCorner1(u,h)&255,a-=2,c+=2,f=!0;else if(a===u-2&&c===0&&h&3&&!w)r[s++]=this.readCorner2(u,h)&255,a-=2,c+=2,w=!0;else if(a===u+4&&c===2&&!(h&7)&&!x)r[s++]=this.readCorner3(u,h)&255,a-=2,c+=2,x=!0;else if(a===u-2&&c===0&&(h&7)===4&&!b)r[s++]=this.readCorner4(u,h)&255,a-=2,c+=2,b=!0;else{do a<u&&c>=0&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,h)&255),a-=2,c+=2;while(a>=0&&c<h);a+=1,c+=3;do a>=0&&c<h&&!this.readMappingMatrix.get(c,a)&&(r[s++]=this.readUtah(a,c,u,h)&255),a+=2,c-=2;while(a<u&&c>=0);a+=3,c+=1}while(a<u||c<h);if(s!==this.version.getTotalCodewords())throw new F;return r}readModule(r,s,a,c){return r<0&&(r+=a,s+=4-(a+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,a,c){let u=0;return this.readModule(r-2,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r-1,s,a,c)&&(u|=1),u<<=1,this.readModule(r,s-2,a,c)&&(u|=1),u<<=1,this.readModule(r,s-1,a,c)&&(u|=1),u<<=1,this.readModule(r,s,a,c)&&(u|=1),u}readCorner1(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,1,r,s)&&(a|=1),a<<=1,this.readModule(r-1,2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}readCorner2(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-4,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner3(r,s){let a=0;return this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(0,s-3,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-3,r,s)&&(a|=1),a<<=1,this.readModule(1,s-2,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a}readCorner4(r,s){let a=0;return this.readModule(r-3,0,r,s)&&(a|=1),a<<=1,this.readModule(r-2,0,r,s)&&(a|=1),a<<=1,this.readModule(r-1,0,r,s)&&(a|=1),a<<=1,this.readModule(0,s-2,r,s)&&(a|=1),a<<=1,this.readModule(0,s-1,r,s)&&(a|=1),a<<=1,this.readModule(1,s-1,r,s)&&(a|=1),a<<=1,this.readModule(2,s-1,r,s)&&(a|=1),a<<=1,this.readModule(3,s-1,r,s)&&(a|=1),a}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new v("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),h=s/c|0,f=a/u|0,w=h*c,x=f*u,b=new te(x,w);for(let R=0;R<h;++R){const k=R*c;for(let L=0;L<f;++L){const j=L*u;for(let V=0;V<c;++V){const $=R*(c+2)+1+V,Y=k+V;for(let ae=0;ae<u;++ae){const ue=L*(u+2)+1+ae;if(r.get(ue,$)){const ie=j+ae;b.set(ie,Y)}}}}}return b}}class ed{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const a=s.getECBlocks();let c=0;const u=a.getECBlocks();for(let V of u)c+=V.getCount();const h=new Array(c);let f=0;for(let V of u)for(let $=0;$<V.getCount();$++){const Y=V.getDataCodewords(),ae=a.getECCodewords()+Y;h[f++]=new ed(Y,new Uint8Array(ae))}const x=h[0].codewords.length-a.getECCodewords(),b=x-1;let R=0;for(let V=0;V<b;V++)for(let $=0;$<f;$++)h[$].codewords[V]=r[R++];const k=s.getVersionNumber()===24,L=k?8:f;for(let V=0;V<L;V++)h[V].codewords[x-1]=r[R++];const j=h[0].codewords.length;for(let V=x;V<j;V++)for(let $=0;$<f;$++){const Y=k?($+8)%f:$,ae=k&&Y>7?V-1:V;h[Y].codewords[ae]=r[R++]}if(R!==r.length)throw new v;return h}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class td{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new v(""+r);let s=0,a=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(a>0){const h=8-a,f=r<h?r:h,w=h-f,x=255>>8-f<<w;s=(u[c]&x)>>w,r-=f,a+=f,a===8&&(a=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const h=8-r,f=255>>h<<h;s=s<<r|(u[c]&f)>>h,a+=r}}return this.bitOffset=a,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Gt;(function(I){I[I.PAD_ENCODE=0]="PAD_ENCODE",I[I.ASCII_ENCODE=1]="ASCII_ENCODE",I[I.C40_ENCODE=2]="C40_ENCODE",I[I.TEXT_ENCODE=3]="TEXT_ENCODE",I[I.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",I[I.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",I[I.BASE256_ENCODE=6]="BASE256_ENCODE"})(Gt||(Gt={}));class Ri{static decode(r){const s=new td(r),a=new ce,c=new ce,u=new Array;let h=Gt.ASCII_ENCODE;do if(h===Gt.ASCII_ENCODE)h=this.decodeAsciiSegment(s,a,c);else{switch(h){case Gt.C40_ENCODE:this.decodeC40Segment(s,a);break;case Gt.TEXT_ENCODE:this.decodeTextSegment(s,a);break;case Gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,a);break;case Gt.EDIFACT_ENCODE:this.decodeEdifactSegment(s,a);break;case Gt.BASE256_ENCODE:this.decodeBase256Segment(s,a,u);break;default:throw new F}h=Gt.ASCII_ENCODE}while(h!==Gt.PAD_ENCODE&&s.available()>0);return c.length()>0&&a.append(c.toString()),new gn(r,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,a){let c=!1;do{let u=r.readBits(8);if(u===0)throw new F;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),Gt.ASCII_ENCODE;if(u===129)return Gt.PAD_ENCODE;if(u<=229){const h=u-130;h<10&&s.append("0"),s.append(""+h)}else switch(u){case 230:return Gt.C40_ENCODE;case 231:return Gt.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),a.insert(0,"");break;case 237:s.append("[)>06"),a.insert(0,"");break;case 238:return Gt.ANSIX12_ENCODE;case 239:return Gt.TEXT_ENCODE;case 240:return Gt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new F;break}}while(r.available()>0);return Gt.ASCII_ENCODE}static decodeC40Segment(r,s){let a=!1;const c=[];let u=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),c);for(let f=0;f<3;f++){const w=c[f];switch(u){case 0:if(w<3)u=w+1;else if(w<this.C40_BASIC_SET_CHARS.length){const x=this.C40_BASIC_SET_CHARS[w];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new F;break;case 1:a?(s.append(String.fromCharCode(w+128)),a=!1):s.append(String.fromCharCode(w)),u=0;break;case 2:if(w<this.C40_SHIFT2_SET_CHARS.length){const x=this.C40_SHIFT2_SET_CHARS[w];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(w){case 27:s.append("");break;case 30:a=!0;break;default:throw new F}u=0;break;case 3:a?(s.append(String.fromCharCode(w+224)),a=!1):s.append(String.fromCharCode(w+96)),u=0;break;default:throw new F}}}while(r.available()>0)}static decodeTextSegment(r,s){let a=!1,c=[],u=0;do{if(r.available()===8)return;const h=r.readBits(8);if(h===254)return;this.parseTwoBytes(h,r.readBits(8),c);for(let f=0;f<3;f++){const w=c[f];switch(u){case 0:if(w<3)u=w+1;else if(w<this.TEXT_BASIC_SET_CHARS.length){const x=this.TEXT_BASIC_SET_CHARS[w];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else throw new F;break;case 1:a?(s.append(String.fromCharCode(w+128)),a=!1):s.append(String.fromCharCode(w)),u=0;break;case 2:if(w<this.TEXT_SHIFT2_SET_CHARS.length){const x=this.TEXT_SHIFT2_SET_CHARS[w];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x)}else switch(w){case 27:s.append("");break;case 30:a=!0;break;default:throw new F}u=0;break;case 3:if(w<this.TEXT_SHIFT3_SET_CHARS.length){const x=this.TEXT_SHIFT3_SET_CHARS[w];a?(s.append(String.fromCharCode(x.charCodeAt(0)+128)),a=!1):s.append(x),u=0}else throw new F;break;default:throw new F}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const a=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),a);for(let u=0;u<3;u++){const h=a[u];switch(h){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(h<14)s.append(String.fromCharCode(h+44));else if(h<40)s.append(String.fromCharCode(h+51));else throw new F;break}}}while(r.available()>0)}static parseTwoBytes(r,s,a){let c=(r<<8)+s-1,u=Math.floor(c/1600);a[0]=u,c-=u*1600,u=Math.floor(c/40),a[1]=u,a[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let a=0;a<4;a++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,a){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let h;if(u===0?h=r.available()/8|0:u<250?h=u:h=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),h<0)throw new F;const f=new Uint8Array(h);for(let w=0;w<h;w++){if(r.available()<8)throw new F;f[w]=this.unrandomize255State(r.readBits(8),c++)}a.push(f);try{s.append(he.decode(f,Q.ISO88591))}catch(w){throw new Ie("Platform does not support required encoding: "+w.message)}}static unrandomize255State(r,s){const a=149*s%255+1,c=r-a;return c>=0?c:c+256}}Ri.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ri.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ri.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ri.TEXT_SHIFT2_SET_CHARS=Ri.C40_SHIFT2_SET_CHARS,Ri.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class qx{constructor(){this.rsDecoder=new ut(Le.DATA_MATRIX_FIELD_256)}decode(r){const s=new Ju(r),a=s.getVersion(),c=s.readCodewords(),u=ed.getDataBlocks(c,a);let h=0;for(let x of u)h+=x.getNumDataCodewords();const f=new Uint8Array(h),w=u.length;for(let x=0;x<w;x++){const b=u[x],R=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(R,k);for(let L=0;L<k;L++)f[L*w+x]=R[L]}return Ri.decode(f)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new C}for(let c=0;c<s;c++)r[c]=a[c]}}class Ft{constructor(r){this.image=r,this.rectangleDetector=new Bt(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new H;s=this.shiftToModuleCenter(s);const a=s[0],c=s[1],u=s[2],h=s[3];let f=this.transitionsBetween(a,h)+1,w=this.transitionsBetween(u,h)+1;(f&1)===1&&(f+=1),(w&1)===1&&(w+=1),4*f<7*w&&4*w<7*f&&(f=w=Math.max(f,w));let x=Ft.sampleGrid(this.image,a,c,u,h,f,w);return new Wt(x,[a,c,u,h])}static shiftPoint(r,s,a){let c=(s.getX()-r.getX())/(a+1),u=(s.getY()-r.getY())/(a+1);return new ge(r.getX()+c,r.getY()+u)}static moveAway(r,s,a){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<a?u-=1:u+=1,new ge(c,u)}detectSolid1(r){let s=r[0],a=r[1],c=r[3],u=r[2],h=this.transitionsBetween(s,a),f=this.transitionsBetween(a,c),w=this.transitionsBetween(c,u),x=this.transitionsBetween(u,s),b=h,R=[u,s,a,c];return b>f&&(b=f,R[0]=s,R[1]=a,R[2]=c,R[3]=u),b>w&&(b=w,R[0]=a,R[1]=c,R[2]=u,R[3]=s),b>x&&(R[0]=c,R[1]=u,R[2]=s,R[3]=a),R}detectSolid2(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u),f=Ft.shiftPoint(a,c,(h+1)*4),w=Ft.shiftPoint(c,a,(h+1)*4),x=this.transitionsBetween(f,s),b=this.transitionsBetween(w,u);return x<b?(r[0]=s,r[1]=a,r[2]=c,r[3]=u):(r[0]=a,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u),f=this.transitionsBetween(a,u),w=Ft.shiftPoint(s,a,(f+1)*4),x=Ft.shiftPoint(c,a,(h+1)*4);h=this.transitionsBetween(w,u),f=this.transitionsBetween(x,u);let b=new ge(u.getX()+(c.getX()-a.getX())/(h+1),u.getY()+(c.getY()-a.getY())/(h+1)),R=new ge(u.getX()+(s.getX()-a.getX())/(f+1),u.getY()+(s.getY()-a.getY())/(f+1));if(!this.isValid(b))return this.isValid(R)?R:null;if(!this.isValid(R))return b;let k=this.transitionsBetween(w,b)+this.transitionsBetween(x,b),L=this.transitionsBetween(w,R)+this.transitionsBetween(x,R);return k>L?b:R}shiftToModuleCenter(r){let s=r[0],a=r[1],c=r[2],u=r[3],h=this.transitionsBetween(s,u)+1,f=this.transitionsBetween(c,u)+1,w=Ft.shiftPoint(s,a,f*4),x=Ft.shiftPoint(c,a,h*4);h=this.transitionsBetween(w,u)+1,f=this.transitionsBetween(x,u)+1,(h&1)===1&&(h+=1),(f&1)===1&&(f+=1);let b=(s.getX()+a.getX()+c.getX()+u.getX())/4,R=(s.getY()+a.getY()+c.getY()+u.getY())/4;s=Ft.moveAway(s,b,R),a=Ft.moveAway(a,b,R),c=Ft.moveAway(c,b,R),u=Ft.moveAway(u,b,R);let k,L;return w=Ft.shiftPoint(s,a,f*4),w=Ft.shiftPoint(w,u,h*4),k=Ft.shiftPoint(a,s,f*4),k=Ft.shiftPoint(k,c,h*4),x=Ft.shiftPoint(c,u,f*4),x=Ft.shiftPoint(x,a,h*4),L=Ft.shiftPoint(u,c,f*4),L=Ft.shiftPoint(L,s,h*4),[w,k,x,L]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,a,c,u,h,f){return Xn.getInstance().sampleGrid(r,h,f,.5,.5,h-.5,.5,h-.5,f-.5,.5,f-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),a.getX(),a.getY())}transitionsBetween(r,s){let a=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),h=Math.trunc(s.getY()),f=Math.abs(h-c)>Math.abs(u-a);if(f){let V=a;a=c,c=V,V=u,u=h,h=V}let w=Math.abs(u-a),x=Math.abs(h-c),b=-w/2,R=c<h?1:-1,k=a<u?1:-1,L=0,j=this.image.get(f?c:a,f?a:c);for(let V=a,$=c;V!==u;V+=k){let Y=this.image.get(f?$:V,f?V:$);if(Y!==j&&(L++,j=Y),b+=x,b>0){if($===h)break;$+=R,b-=w}}return L}}class Oi{constructor(){this.decoder=new qx}decode(r,s=null){let a,c;if(s!=null&&s.has(z.PURE_BARCODE)){const x=Oi.extractPureBits(r.getBlackMatrix());a=this.decoder.decode(x),c=Oi.NO_POINTS}else{const x=new Ft(r.getBlackMatrix()).detect();a=this.decoder.decode(x.getBits()),c=x.getPoints()}const u=a.getRawBytes(),h=new Ee(a.getText(),u,8*u.length,c,me.DATA_MATRIX,A.currentTimeMillis()),f=a.getByteSegments();f!=null&&h.putMetadata(ot.BYTE_SEGMENTS,f);const w=a.getECLevel();return w!=null&&h.putMetadata(ot.ERROR_CORRECTION_LEVEL,w),h}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s==null||a==null)throw new H;const c=this.moduleSize(s,r);let u=s[1];const h=a[1];let f=s[0];const x=(a[0]-f+1)/c,b=(h-u+1)/c;if(x<=0||b<=0)throw new H;const R=c/2;u+=R,f+=R;const k=new te(x,b);for(let L=0;L<b;L++){const j=u+L*c;for(let V=0;V<x;V++)r.get(f+V*c,j)&&k.set(V,L)}return k}static moduleSize(r,s){const a=s.getWidth();let c=r[0];const u=r[1];for(;c<a&&s.get(c,u);)c++;if(c===a)throw new H;const h=c-r[0];if(h===0)throw new H;return h}}Oi.NO_POINTS=[];class Qx extends Te{constructor(r=500){super(new Oi,r)}}var eo;(function(I){I[I.L=0]="L",I[I.M=1]="M",I[I.Q=2]="Q",I[I.H=3]="H"})(eo||(eo={}));class dt{constructor(r,s,a){this.value=r,this.stringValue=s,this.bits=a,dt.FOR_BITS.set(a,this),dt.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return dt.L;case"M":return dt.M;case"Q":return dt.Q;case"H":return dt.H;default:throw new y(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof dt))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=dt.FOR_BITS.size)throw new v;return dt.FOR_BITS.get(r)}}dt.FOR_BITS=new Map,dt.FOR_VALUE=new Map,dt.L=new dt(eo.L,"L",1),dt.M=new dt(eo.M,"M",0),dt.Q=new dt(eo.Q,"Q",3),dt.H=new dt(eo.H,"H",2);class yn{constructor(r){this.errorCorrectionLevel=dt.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return _.bitCount(r^s)}static decodeFormatInformation(r,s){const a=yn.doDecodeFormatInformation(r,s);return a!==null?a:yn.doDecodeFormatInformation(r^yn.FORMAT_INFO_MASK_QR,s^yn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let a=Number.MAX_SAFE_INTEGER,c=0;for(const u of yn.FORMAT_INFO_DECODE_LOOKUP){const h=u[0];if(h===r||h===s)return new yn(u[1]);let f=yn.numBitsDiffering(r,h);f<a&&(c=u[1],a=f),r!==s&&(f=yn.numBitsDiffering(s,h),f<a&&(c=u[1],a=f))}return a<=3?new yn(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof yn))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}yn.FORMAT_INFO_MASK_QR=21522,yn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const a of s)r+=a.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class be{constructor(r,s,...a){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=a;let c=0;const u=a[0].getECCodewordsPerBlock(),h=a[0].getECBlocks();for(const f of h)c+=f.getCount()*(f.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new F;try{return this.getVersionForNumber((r-17)/4)}catch{throw new F}}static getVersionForNumber(r){if(r<1||r>40)throw new v;return be.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,a=0;for(let c=0;c<be.VERSION_DECODE_INFO.length;c++){const u=be.VERSION_DECODE_INFO[c];if(u===r)return be.getVersionForNumber(c+7);const h=yn.numBitsDiffering(r,u);h<s&&(a=c+7,s=h)}return s<=3?be.getVersionForNumber(a):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new te(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const a=this.alignmentPatternCenters.length;for(let c=0;c<a;c++){const u=this.alignmentPatternCenters[c]-2;for(let h=0;h<a;h++)c===0&&(h===0||h===a-1)||c===a-1&&h===0||s.setRegion(this.alignmentPatternCenters[h]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}be.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),be.VERSIONS=[new be(1,new Int32Array(0),new G(7,new M(1,19)),new G(10,new M(1,16)),new G(13,new M(1,13)),new G(17,new M(1,9))),new be(2,Int32Array.from([6,18]),new G(10,new M(1,34)),new G(16,new M(1,28)),new G(22,new M(1,22)),new G(28,new M(1,16))),new be(3,Int32Array.from([6,22]),new G(15,new M(1,55)),new G(26,new M(1,44)),new G(18,new M(2,17)),new G(22,new M(2,13))),new be(4,Int32Array.from([6,26]),new G(20,new M(1,80)),new G(18,new M(2,32)),new G(26,new M(2,24)),new G(16,new M(4,9))),new be(5,Int32Array.from([6,30]),new G(26,new M(1,108)),new G(24,new M(2,43)),new G(18,new M(2,15),new M(2,16)),new G(22,new M(2,11),new M(2,12))),new be(6,Int32Array.from([6,34]),new G(18,new M(2,68)),new G(16,new M(4,27)),new G(24,new M(4,19)),new G(28,new M(4,15))),new be(7,Int32Array.from([6,22,38]),new G(20,new M(2,78)),new G(18,new M(4,31)),new G(18,new M(2,14),new M(4,15)),new G(26,new M(4,13),new M(1,14))),new be(8,Int32Array.from([6,24,42]),new G(24,new M(2,97)),new G(22,new M(2,38),new M(2,39)),new G(22,new M(4,18),new M(2,19)),new G(26,new M(4,14),new M(2,15))),new be(9,Int32Array.from([6,26,46]),new G(30,new M(2,116)),new G(22,new M(3,36),new M(2,37)),new G(20,new M(4,16),new M(4,17)),new G(24,new M(4,12),new M(4,13))),new be(10,Int32Array.from([6,28,50]),new G(18,new M(2,68),new M(2,69)),new G(26,new M(4,43),new M(1,44)),new G(24,new M(6,19),new M(2,20)),new G(28,new M(6,15),new M(2,16))),new be(11,Int32Array.from([6,30,54]),new G(20,new M(4,81)),new G(30,new M(1,50),new M(4,51)),new G(28,new M(4,22),new M(4,23)),new G(24,new M(3,12),new M(8,13))),new be(12,Int32Array.from([6,32,58]),new G(24,new M(2,92),new M(2,93)),new G(22,new M(6,36),new M(2,37)),new G(26,new M(4,20),new M(6,21)),new G(28,new M(7,14),new M(4,15))),new be(13,Int32Array.from([6,34,62]),new G(26,new M(4,107)),new G(22,new M(8,37),new M(1,38)),new G(24,new M(8,20),new M(4,21)),new G(22,new M(12,11),new M(4,12))),new be(14,Int32Array.from([6,26,46,66]),new G(30,new M(3,115),new M(1,116)),new G(24,new M(4,40),new M(5,41)),new G(20,new M(11,16),new M(5,17)),new G(24,new M(11,12),new M(5,13))),new be(15,Int32Array.from([6,26,48,70]),new G(22,new M(5,87),new M(1,88)),new G(24,new M(5,41),new M(5,42)),new G(30,new M(5,24),new M(7,25)),new G(24,new M(11,12),new M(7,13))),new be(16,Int32Array.from([6,26,50,74]),new G(24,new M(5,98),new M(1,99)),new G(28,new M(7,45),new M(3,46)),new G(24,new M(15,19),new M(2,20)),new G(30,new M(3,15),new M(13,16))),new be(17,Int32Array.from([6,30,54,78]),new G(28,new M(1,107),new M(5,108)),new G(28,new M(10,46),new M(1,47)),new G(28,new M(1,22),new M(15,23)),new G(28,new M(2,14),new M(17,15))),new be(18,Int32Array.from([6,30,56,82]),new G(30,new M(5,120),new M(1,121)),new G(26,new M(9,43),new M(4,44)),new G(28,new M(17,22),new M(1,23)),new G(28,new M(2,14),new M(19,15))),new be(19,Int32Array.from([6,30,58,86]),new G(28,new M(3,113),new M(4,114)),new G(26,new M(3,44),new M(11,45)),new G(26,new M(17,21),new M(4,22)),new G(26,new M(9,13),new M(16,14))),new be(20,Int32Array.from([6,34,62,90]),new G(28,new M(3,107),new M(5,108)),new G(26,new M(3,41),new M(13,42)),new G(30,new M(15,24),new M(5,25)),new G(28,new M(15,15),new M(10,16))),new be(21,Int32Array.from([6,28,50,72,94]),new G(28,new M(4,116),new M(4,117)),new G(26,new M(17,42)),new G(28,new M(17,22),new M(6,23)),new G(30,new M(19,16),new M(6,17))),new be(22,Int32Array.from([6,26,50,74,98]),new G(28,new M(2,111),new M(7,112)),new G(28,new M(17,46)),new G(30,new M(7,24),new M(16,25)),new G(24,new M(34,13))),new be(23,Int32Array.from([6,30,54,78,102]),new G(30,new M(4,121),new M(5,122)),new G(28,new M(4,47),new M(14,48)),new G(30,new M(11,24),new M(14,25)),new G(30,new M(16,15),new M(14,16))),new be(24,Int32Array.from([6,28,54,80,106]),new G(30,new M(6,117),new M(4,118)),new G(28,new M(6,45),new M(14,46)),new G(30,new M(11,24),new M(16,25)),new G(30,new M(30,16),new M(2,17))),new be(25,Int32Array.from([6,32,58,84,110]),new G(26,new M(8,106),new M(4,107)),new G(28,new M(8,47),new M(13,48)),new G(30,new M(7,24),new M(22,25)),new G(30,new M(22,15),new M(13,16))),new be(26,Int32Array.from([6,30,58,86,114]),new G(28,new M(10,114),new M(2,115)),new G(28,new M(19,46),new M(4,47)),new G(28,new M(28,22),new M(6,23)),new G(30,new M(33,16),new M(4,17))),new be(27,Int32Array.from([6,34,62,90,118]),new G(30,new M(8,122),new M(4,123)),new G(28,new M(22,45),new M(3,46)),new G(30,new M(8,23),new M(26,24)),new G(30,new M(12,15),new M(28,16))),new be(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new M(3,117),new M(10,118)),new G(28,new M(3,45),new M(23,46)),new G(30,new M(4,24),new M(31,25)),new G(30,new M(11,15),new M(31,16))),new be(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new M(7,116),new M(7,117)),new G(28,new M(21,45),new M(7,46)),new G(30,new M(1,23),new M(37,24)),new G(30,new M(19,15),new M(26,16))),new be(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new M(5,115),new M(10,116)),new G(28,new M(19,47),new M(10,48)),new G(30,new M(15,24),new M(25,25)),new G(30,new M(23,15),new M(25,16))),new be(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new M(13,115),new M(3,116)),new G(28,new M(2,46),new M(29,47)),new G(30,new M(42,24),new M(1,25)),new G(30,new M(23,15),new M(28,16))),new be(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new M(17,115)),new G(28,new M(10,46),new M(23,47)),new G(30,new M(10,24),new M(35,25)),new G(30,new M(19,15),new M(35,16))),new be(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new M(17,115),new M(1,116)),new G(28,new M(14,46),new M(21,47)),new G(30,new M(29,24),new M(19,25)),new G(30,new M(11,15),new M(46,16))),new be(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new M(13,115),new M(6,116)),new G(28,new M(14,46),new M(23,47)),new G(30,new M(44,24),new M(7,25)),new G(30,new M(59,16),new M(1,17))),new be(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new M(12,121),new M(7,122)),new G(28,new M(12,47),new M(26,48)),new G(30,new M(39,24),new M(14,25)),new G(30,new M(22,15),new M(41,16))),new be(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new M(6,121),new M(14,122)),new G(28,new M(6,47),new M(34,48)),new G(30,new M(46,24),new M(10,25)),new G(30,new M(2,15),new M(64,16))),new be(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new M(17,122),new M(4,123)),new G(28,new M(29,46),new M(14,47)),new G(30,new M(49,24),new M(10,25)),new G(30,new M(24,15),new M(46,16))),new be(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new M(4,122),new M(18,123)),new G(28,new M(13,46),new M(32,47)),new G(30,new M(48,24),new M(14,25)),new G(30,new M(42,15),new M(32,16))),new be(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new M(20,117),new M(4,118)),new G(28,new M(40,47),new M(7,48)),new G(30,new M(43,24),new M(22,25)),new G(30,new M(10,15),new M(67,16))),new be(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new M(19,118),new M(6,119)),new G(28,new M(18,47),new M(31,48)),new G(30,new M(34,24),new M(34,25)),new G(30,new M(20,15),new M(61,16)))];var tn;(function(I){I[I.DATA_MASK_000=0]="DATA_MASK_000",I[I.DATA_MASK_001=1]="DATA_MASK_001",I[I.DATA_MASK_010=2]="DATA_MASK_010",I[I.DATA_MASK_011=3]="DATA_MASK_011",I[I.DATA_MASK_100=4]="DATA_MASK_100",I[I.DATA_MASK_101=5]="DATA_MASK_101",I[I.DATA_MASK_110=6]="DATA_MASK_110",I[I.DATA_MASK_111=7]="DATA_MASK_111"})(tn||(tn={}));class ur{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let a=0;a<s;a++)for(let c=0;c<s;c++)this.isMasked(a,c)&&r.flip(c,a)}}ur.values=new Map([[tn.DATA_MASK_000,new ur(tn.DATA_MASK_000,(I,r)=>(I+r&1)===0)],[tn.DATA_MASK_001,new ur(tn.DATA_MASK_001,(I,r)=>(I&1)===0)],[tn.DATA_MASK_010,new ur(tn.DATA_MASK_010,(I,r)=>r%3===0)],[tn.DATA_MASK_011,new ur(tn.DATA_MASK_011,(I,r)=>(I+r)%3===0)],[tn.DATA_MASK_100,new ur(tn.DATA_MASK_100,(I,r)=>(Math.floor(I/2)+Math.floor(r/3)&1)===0)],[tn.DATA_MASK_101,new ur(tn.DATA_MASK_101,(I,r)=>I*r%6===0)],[tn.DATA_MASK_110,new ur(tn.DATA_MASK_110,(I,r)=>I*r%6<3)],[tn.DATA_MASK_111,new ur(tn.DATA_MASK_111,(I,r)=>(I+r+I*r%3&1)===0)]]);class Zx{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new F;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let a=0;const c=s-7;for(let u=s-1;u>=c;u--)a=this.copyBit(8,u,a);for(let u=s-8;u<s;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=yn.decodeFormatInformation(r,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return be.getVersionForNumber(s);let a=0;const c=r-11;for(let h=5;h>=0;h--)for(let f=r-9;f>=c;f--)a=this.copyBit(f,h,a);let u=be.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;a=0;for(let h=5;h>=0;h--)for(let f=r-9;f>=c;f--)a=this.copyBit(h,f,a);if(u=be.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new F}copyBit(r,s,a){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?a<<1|1:a<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),a=ur.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let h=!0;const f=new Uint8Array(s.getTotalCodewords());let w=0,x=0,b=0;for(let R=c-1;R>0;R-=2){R===6&&R--;for(let k=0;k<c;k++){const L=h?c-1-k:k;for(let j=0;j<2;j++)u.get(R-j,L)||(b++,x<<=1,this.bitMatrix.get(R-j,L)&&(x|=1),b===8&&(f[w++]=x,b=0,x=0))}h=!h}if(w!==s.getTotalCodewords())throw new F;return f}remask(){if(this.parsedFormatInfo===null)return;const r=ur.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,a=r.getWidth();s<a;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class nd{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,a){if(r.length!==s.getTotalCodewords())throw new v;const c=s.getECBlocksForLevel(a);let u=0;const h=c.getECBlocks();for(const j of h)u+=j.getCount();const f=new Array(u);let w=0;for(const j of h)for(let V=0;V<j.getCount();V++){const $=j.getDataCodewords(),Y=c.getECCodewordsPerBlock()+$;f[w++]=new nd($,new Uint8Array(Y))}const x=f[0].codewords.length;let b=f.length-1;for(;b>=0&&f[b].codewords.length!==x;)b--;b++;const R=x-c.getECCodewordsPerBlock();let k=0;for(let j=0;j<R;j++)for(let V=0;V<w;V++)f[V].codewords[j]=r[k++];for(let j=b;j<w;j++)f[j].codewords[R]=r[k++];const L=f[0].codewords.length;for(let j=R;j<L;j++)for(let V=0;V<w;V++){const $=V<b?j:j+1;f[V].codewords[$]=r[k++]}return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var dr;(function(I){I[I.TERMINATOR=0]="TERMINATOR",I[I.NUMERIC=1]="NUMERIC",I[I.ALPHANUMERIC=2]="ALPHANUMERIC",I[I.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",I[I.BYTE=4]="BYTE",I[I.ECI=5]="ECI",I[I.KANJI=6]="KANJI",I[I.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",I[I.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",I[I.HANZI=9]="HANZI"})(dr||(dr={}));class Re{constructor(r,s,a,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=a,this.bits=c,Re.FOR_BITS.set(c,this),Re.FOR_VALUE.set(r,this)}static forBits(r){const s=Re.FOR_BITS.get(r);if(s===void 0)throw new v;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let a;return s<=9?a=0:s<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof Re))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}Re.FOR_BITS=new Map,Re.FOR_VALUE=new Map,Re.TERMINATOR=new Re(dr.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Re.NUMERIC=new Re(dr.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Re.ALPHANUMERIC=new Re(dr.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Re.STRUCTURED_APPEND=new Re(dr.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Re.BYTE=new Re(dr.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Re.ECI=new Re(dr.ECI,"ECI",Int32Array.from([0,0,0]),7),Re.KANJI=new Re(dr.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Re.FNC1_FIRST_POSITION=new Re(dr.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Re.FNC1_SECOND_POSITION=new Re(dr.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Re.HANZI=new Re(dr.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class At{static decode(r,s,a,c){const u=new td(r);let h=new ce;const f=new Array;let w=-1,x=-1;try{let b=null,R=!1,k;do{if(u.available()<4)k=Re.TERMINATOR;else{const L=u.readBits(4);k=Re.forBits(L)}switch(k){case Re.TERMINATOR:break;case Re.FNC1_FIRST_POSITION:case Re.FNC1_SECOND_POSITION:R=!0;break;case Re.STRUCTURED_APPEND:if(u.available()<16)throw new F;w=u.readBits(8),x=u.readBits(8);break;case Re.ECI:const L=At.parseECIValue(u);if(b=W.getCharacterSetECIByValue(L),b===null)throw new F;break;case Re.HANZI:const j=u.readBits(4),V=u.readBits(k.getCharacterCountBits(s));j===At.GB2312_SUBSET&&At.decodeHanziSegment(u,h,V);break;default:const $=u.readBits(k.getCharacterCountBits(s));switch(k){case Re.NUMERIC:At.decodeNumericSegment(u,h,$);break;case Re.ALPHANUMERIC:At.decodeAlphanumericSegment(u,h,$,R);break;case Re.BYTE:At.decodeByteSegment(u,h,$,b,f,c);break;case Re.KANJI:At.decodeKanjiSegment(u,h,$);break;default:throw new F}break}}while(k!==Re.TERMINATOR)}catch{throw new F}return new gn(r,h.toString(),f.length===0?null:f,a===null?null:a.toString(),w,x)}static decodeHanziSegment(r,s,a){if(a*13>r.available())throw new F;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const h=r.readBits(13);let f=h/96<<8&4294967295|h%96;f<959?f+=41377:f+=42657,c[u]=f>>8&255,c[u+1]=f&255,u+=2,a--}try{s.append(he.decode(c,Q.GB2312))}catch(h){throw new F(h)}}static decodeKanjiSegment(r,s,a){if(a*13>r.available())throw new F;const c=new Uint8Array(2*a);let u=0;for(;a>0;){const h=r.readBits(13);let f=h/192<<8&4294967295|h%192;f<7936?f+=33088:f+=49472,c[u]=f>>8,c[u+1]=f,u+=2,a--}try{s.append(he.decode(c,Q.SHIFT_JIS))}catch(h){throw new F(h)}}static decodeByteSegment(r,s,a,c,u,h){if(8*a>r.available())throw new F;const f=new Uint8Array(a);for(let x=0;x<a;x++)f[x]=r.readBits(8);let w;c===null?w=Q.guessEncoding(f,h):w=c.getName();try{s.append(he.decode(f,w))}catch(x){throw new F(x)}u.push(f)}static toAlphaNumericChar(r){if(r>=At.ALPHANUMERIC_CHARS.length)throw new F;return At.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,a,c){const u=s.length();for(;a>1;){if(r.available()<11)throw new F;const h=r.readBits(11);s.append(At.toAlphaNumericChar(Math.floor(h/45))),s.append(At.toAlphaNumericChar(h%45)),a-=2}if(a===1){if(r.available()<6)throw new F;s.append(At.toAlphaNumericChar(r.readBits(6)))}if(c)for(let h=u;h<s.length();h++)s.charAt(h)==="%"&&(h<s.length()-1&&s.charAt(h+1)==="%"?s.deleteCharAt(h+1):s.setCharAt(h,""))}static decodeNumericSegment(r,s,a){for(;a>=3;){if(r.available()<10)throw new F;const c=r.readBits(10);if(c>=1e3)throw new F;s.append(At.toAlphaNumericChar(Math.floor(c/100))),s.append(At.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(At.toAlphaNumericChar(c%10)),a-=3}if(a===2){if(r.available()<7)throw new F;const c=r.readBits(7);if(c>=100)throw new F;s.append(At.toAlphaNumericChar(Math.floor(c/10))),s.append(At.toAlphaNumericChar(c%10))}else if(a===1){if(r.available()<4)throw new F;const c=r.readBits(4);if(c>=10)throw new F;s.append(At.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const a=r.readBits(8);return(s&63)<<8&4294967295|a}if((s&224)===192){const a=r.readBits(16);return(s&31)<<16&4294967295|a}throw new F}}At.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",At.GB2312_SUBSET=1;class Q0{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class Jx{constructor(){this.rsDecoder=new ut(Le.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(te.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const a=new Zx(r);let c=null;try{return this.decodeBitMatrixParser(a,s)}catch(u){c=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,s);return u.setOther(new Q0(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const a=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),h=nd.getDataBlocks(u,a,c);let f=0;for(const b of h)f+=b.getNumDataCodewords();const w=new Uint8Array(f);let x=0;for(const b of h){const R=b.getCodewords(),k=b.getNumDataCodewords();this.correctErrors(R,k);for(let L=0;L<k;L++)w[x++]=R[L]}return At.decode(w,a,c,s)}correctErrors(r,s){const a=new Int32Array(r);try{this.rsDecoder.decode(a,r.length-s)}catch{throw new C}for(let c=0;c<s;c++)r[c]=a[c]}}class rd extends ge{constructor(r,s,a){super(r,s),this.estimatedModuleSize=a}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,h=(this.estimatedModuleSize+a)/2;return new rd(c,u,h)}}class Ll{constructor(r,s,a,c,u,h,f){this.image=r,this.startX=s,this.startY=a,this.width=c,this.height=u,this.moduleSize=h,this.resultPointCallback=f,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,a=this.width,c=r+a,u=this.startY+s/2,h=new Int32Array(3),f=this.image;for(let w=0;w<s;w++){const x=u+(w&1?-Math.floor((w+1)/2):Math.floor((w+1)/2));h[0]=0,h[1]=0,h[2]=0;let b=r;for(;b<c&&!f.get(b,x);)b++;let R=0;for(;b<c;){if(f.get(b,x))if(R===1)h[1]++;else if(R===2){if(this.foundPatternCross(h)){const k=this.handlePossibleCenter(h,x,b);if(k!==null)return k}h[0]=h[2],h[1]=1,h[2]=0,R=1}else h[++R]++;else R===1&&R++,h[R]++;b++}if(this.foundPatternCross(h)){const k=this.handlePossibleCenter(h,x,c);if(k!==null)return k}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new H}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,a=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=a)return!1;return!0}crossCheckVertical(r,s,a,c){const u=this.image,h=u.getHeight(),f=this.crossCheckStateCount;f[0]=0,f[1]=0,f[2]=0;let w=r;for(;w>=0&&u.get(s,w)&&f[1]<=a;)f[1]++,w--;if(w<0||f[1]>a)return NaN;for(;w>=0&&!u.get(s,w)&&f[0]<=a;)f[0]++,w--;if(f[0]>a)return NaN;for(w=r+1;w<h&&u.get(s,w)&&f[1]<=a;)f[1]++,w++;if(w===h||f[1]>a)return NaN;for(;w<h&&!u.get(s,w)&&f[2]<=a;)f[2]++,w++;if(f[2]>a)return NaN;const x=f[0]+f[1]+f[2];return 5*Math.abs(x-c)>=2*c?NaN:this.foundPatternCross(f)?Ll.centerFromEnd(f,w):NaN}handlePossibleCenter(r,s,a){const c=r[0]+r[1]+r[2],u=Ll.centerFromEnd(r,a),h=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(h)){const f=(r[0]+r[1]+r[2])/3;for(const x of this.possibleCenters)if(x.aboutEquals(f,h,u))return x.combineEstimate(h,u,f);const w=new rd(u,h,f);this.possibleCenters.push(w),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(w)}return null}}class id extends ge{constructor(r,s,a,c){super(r,s),this.estimatedModuleSize=a,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,a){if(Math.abs(s-this.getY())<=r&&Math.abs(a-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,a){const c=this.count+1,u=(this.count*this.getX()+s)/c,h=(this.count*this.getY()+r)/c,f=(this.count*this.estimatedModuleSize+a)/c;return new id(u,h,f,c)}}class ev{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class nn{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(z.TRY_HARDER)!==void 0,a=r!=null&&r.get(z.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),h=c.getWidth();let f=Math.floor(3*u/(4*nn.MAX_MODULES));(f<nn.MIN_SKIP||s)&&(f=nn.MIN_SKIP);let w=!1;const x=new Int32Array(5);for(let R=f-1;R<u&&!w;R+=f){x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0;let k=0;for(let L=0;L<h;L++)if(c.get(L,R))(k&1)===1&&k++,x[k]++;else if(k&1)x[k]++;else if(k===4)if(nn.foundPatternCross(x)){if(this.handlePossibleCenter(x,R,L,a)===!0)if(f=2,this.hasSkipped===!0)w=this.haveMultiplyConfirmedCenters();else{const V=this.findRowSkip();V>x[2]&&(R+=V-x[2]-f,L=h-1)}else{x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,k=3;continue}k=0,x[0]=0,x[1]=0,x[2]=0,x[3]=0,x[4]=0}else x[0]=x[2],x[1]=x[3],x[2]=x[4],x[3]=1,x[4]=0,k=3;else x[++k]++;nn.foundPatternCross(x)&&this.handlePossibleCenter(x,R,h,a)===!0&&(f=x[0],this.hasSkipped&&(w=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return ge.orderBestPatterns(b),new ev(b)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const h=r[u];if(h===0)return!1;s+=h}if(s<7)return!1;const a=s/7,c=a/2;return Math.abs(a-r[0])<c&&Math.abs(a-r[1])<c&&Math.abs(3*a-r[2])<3*c&&Math.abs(a-r[3])<c&&Math.abs(a-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,a,c){const u=this.getCrossCheckStateCount();let h=0;const f=this.image;for(;r>=h&&s>=h&&f.get(s-h,r-h);)u[2]++,h++;if(r<h||s<h)return!1;for(;r>=h&&s>=h&&!f.get(s-h,r-h)&&u[1]<=a;)u[1]++,h++;if(r<h||s<h||u[1]>a)return!1;for(;r>=h&&s>=h&&f.get(s-h,r-h)&&u[0]<=a;)u[0]++,h++;if(u[0]>a)return!1;const w=f.getHeight(),x=f.getWidth();for(h=1;r+h<w&&s+h<x&&f.get(s+h,r+h);)u[2]++,h++;if(r+h>=w||s+h>=x)return!1;for(;r+h<w&&s+h<x&&!f.get(s+h,r+h)&&u[3]<a;)u[3]++,h++;if(r+h>=w||s+h>=x||u[3]>=a)return!1;for(;r+h<w&&s+h<x&&f.get(s+h,r+h)&&u[4]<a;)u[4]++,h++;if(u[4]>=a)return!1;const b=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(b-c)<2*c&&nn.foundPatternCross(u)}crossCheckVertical(r,s,a,c){const u=this.image,h=u.getHeight(),f=this.getCrossCheckStateCount();let w=r;for(;w>=0&&u.get(s,w);)f[2]++,w--;if(w<0)return NaN;for(;w>=0&&!u.get(s,w)&&f[1]<=a;)f[1]++,w--;if(w<0||f[1]>a)return NaN;for(;w>=0&&u.get(s,w)&&f[0]<=a;)f[0]++,w--;if(f[0]>a)return NaN;for(w=r+1;w<h&&u.get(s,w);)f[2]++,w++;if(w===h)return NaN;for(;w<h&&!u.get(s,w)&&f[3]<a;)f[3]++,w++;if(w===h||f[3]>=a)return NaN;for(;w<h&&u.get(s,w)&&f[4]<a;)f[4]++,w++;if(f[4]>=a)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-c)>=2*c?NaN:nn.foundPatternCross(f)?nn.centerFromEnd(f,w):NaN}crossCheckHorizontal(r,s,a,c){const u=this.image,h=u.getWidth(),f=this.getCrossCheckStateCount();let w=r;for(;w>=0&&u.get(w,s);)f[2]++,w--;if(w<0)return NaN;for(;w>=0&&!u.get(w,s)&&f[1]<=a;)f[1]++,w--;if(w<0||f[1]>a)return NaN;for(;w>=0&&u.get(w,s)&&f[0]<=a;)f[0]++,w--;if(f[0]>a)return NaN;for(w=r+1;w<h&&u.get(w,s);)f[2]++,w++;if(w===h)return NaN;for(;w<h&&!u.get(w,s)&&f[3]<a;)f[3]++,w++;if(w===h||f[3]>=a)return NaN;for(;w<h&&u.get(w,s)&&f[4]<a;)f[4]++,w++;if(f[4]>=a)return NaN;const x=f[0]+f[1]+f[2]+f[3]+f[4];return 5*Math.abs(x-c)>=c?NaN:nn.foundPatternCross(f)?nn.centerFromEnd(f,w):NaN}handlePossibleCenter(r,s,a,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let h=nn.centerFromEnd(r,a),f=this.crossCheckVertical(s,Math.floor(h),r[2],u);if(!isNaN(f)&&(h=this.crossCheckHorizontal(Math.floor(h),Math.floor(f),r[2],u),!isNaN(h)&&(!c||this.crossCheckDiagonal(Math.floor(f),Math.floor(h),r[2],u)))){const w=u/7;let x=!1;const b=this.possibleCenters;for(let R=0,k=b.length;R<k;R++){const L=b[R];if(L.aboutEquals(w,f,h)){b[R]=L.combineEstimate(f,h,w),x=!0;break}}if(!x){const R=new id(h,f,w);b.push(R),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(R)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const a of this.possibleCenters)if(a.getCount()>=nn.CENTER_QUORUM)if(s==null)s=a;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-a.getX())-Math.abs(s.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const a=this.possibleCenters.length;for(const h of this.possibleCenters)h.getCount()>=nn.CENTER_QUORUM&&(r++,s+=h.getEstimatedModuleSize());if(r<3)return!1;const c=s/a;let u=0;for(const h of this.possibleCenters)u+=Math.abs(h.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new H;const s=this.possibleCenters;let a;if(r>3){let c=0,u=0;for(const w of this.possibleCenters){const x=w.getEstimatedModuleSize();c+=x,u+=x*x}a=c/r;let h=Math.sqrt(u/r-a*a);s.sort((w,x)=>{const b=Math.abs(x.getEstimatedModuleSize()-a),R=Math.abs(w.getEstimatedModuleSize()-a);return b<R?-1:b>R?1:0});const f=Math.max(.2*a,h);for(let w=0;w<s.length&&s.length>3;w++){const x=s[w];Math.abs(x.getEstimatedModuleSize()-a)>f&&(s.splice(w,1),w--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();a=c/s.length,s.sort((u,h)=>{if(h.getCount()===u.getCount()){const f=Math.abs(h.getEstimatedModuleSize()-a),w=Math.abs(u.getEstimatedModuleSize()-a);return f<w?1:f>w?-1:0}else return h.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}nn.CENTER_QUORUM=2,nn.MIN_SKIP=3,nn.MAX_MODULES=57;class da{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(z.NEED_RESULT_POINT_CALLBACK);const a=new nn(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(a)}processFinderPatternInfo(r){const s=r.getTopLeft(),a=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,a,c);if(u<1)throw new H("No pattern found in proccess finder.");const h=da.computeDimension(s,a,c,u),f=be.getProvisionalVersionForDimension(h),w=f.getDimensionForVersion()-7;let x=null;if(f.getAlignmentPatternCenters().length>0){const L=a.getX()-s.getX()+c.getX(),j=a.getY()-s.getY()+c.getY(),V=1-3/w,$=Math.floor(s.getX()+V*(L-s.getX())),Y=Math.floor(s.getY()+V*(j-s.getY()));for(let ae=4;ae<=16;ae<<=1)try{x=this.findAlignmentInRegion(u,$,Y,ae);break}catch(ue){if(!(ue instanceof H))throw ue}}const b=da.createTransform(s,a,c,x,h),R=da.sampleGrid(this.image,b,h);let k;return x===null?k=[c,s,a]:k=[c,s,a,x],new Wt(R,k)}static createTransform(r,s,a,c,u){const h=u-3.5;let f,w,x,b;return c!==null?(f=c.getX(),w=c.getY(),x=h-3,b=x):(f=s.getX()-r.getX()+a.getX(),w=s.getY()-r.getY()+a.getY(),x=h,b=h),Ye.quadrilateralToQuadrilateral(3.5,3.5,h,3.5,x,b,3.5,h,r.getX(),r.getY(),s.getX(),s.getY(),f,w,a.getX(),a.getY())}static sampleGrid(r,s,a){return Xn.getInstance().sampleGridWithTransform(r,a,a,s)}static computeDimension(r,s,a,c){const u=ve.round(ge.distance(r,s)/c),h=ve.round(ge.distance(r,a)/c);let f=Math.floor((u+h)/2)+7;switch(f&3){case 0:f++;break;case 2:f--;break;case 3:throw new H("Dimensions could be not found.")}return f}calculateModuleSize(r,s,a){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,a))/2}calculateModuleSizeOneWay(r,s){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(a)?c/7:isNaN(c)?a/7:(a+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,a,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,a,c),h=1,f=r-(a-r);f<0?(h=r/(r-f),f=0):f>=this.image.getWidth()&&(h=(this.image.getWidth()-1-r)/(f-r),f=this.image.getWidth()-1);let w=Math.floor(s-(c-s)*h);return h=1,w<0?(h=s/(s-w),w=0):w>=this.image.getHeight()&&(h=(this.image.getHeight()-1-s)/(w-s),w=this.image.getHeight()-1),f=Math.floor(r+(f-r)*h),u+=this.sizeOfBlackWhiteBlackRun(r,s,f,w),u-1}sizeOfBlackWhiteBlackRun(r,s,a,c){const u=Math.abs(c-s)>Math.abs(a-r);if(u){let L=r;r=s,s=L,L=a,a=c,c=L}const h=Math.abs(a-r),f=Math.abs(c-s);let w=-h/2;const x=r<a?1:-1,b=s<c?1:-1;let R=0;const k=a+x;for(let L=r,j=s;L!==k;L+=x){const V=u?j:L,$=u?L:j;if(R===1===this.image.get(V,$)){if(R===2)return ve.distance(L,j,r,s);R++}if(w+=f,w>0){if(j===c)break;j+=b,w-=h}}return R===2?ve.distance(a+x,c,r,s):NaN}findAlignmentInRegion(r,s,a,c){const u=Math.floor(c*r),h=Math.max(0,s-u),f=Math.min(this.image.getWidth()-1,s+u);if(f-h<r*3)throw new H("Alignment top exceeds estimated module size.");const w=Math.max(0,a-u),x=Math.min(this.image.getHeight()-1,a+u);if(x-w<r*3)throw new H("Alignment bottom exceeds estimated module size.");return new Ll(this.image,h,w,f-h,x-w,r,this.resultPointCallback).find()}}class Ni{constructor(){this.decoder=new Jx}getDecoder(){return this.decoder}decode(r,s){let a,c;if(s!=null&&s.get(z.PURE_BARCODE)!==void 0){const w=Ni.extractPureBits(r.getBlackMatrix());a=this.decoder.decodeBitMatrix(w,s),c=Ni.NO_POINTS}else{const w=new da(r.getBlackMatrix()).detect(s);a=this.decoder.decodeBitMatrix(w.getBits(),s),c=w.getPoints()}a.getOther()instanceof Q0&&a.getOther().applyMirroredCorrection(c);const u=new Ee(a.getText(),a.getRawBytes(),void 0,c,me.QR_CODE,void 0),h=a.getByteSegments();h!==null&&u.putMetadata(ot.BYTE_SEGMENTS,h);const f=a.getECLevel();return f!==null&&u.putMetadata(ot.ERROR_CORRECTION_LEVEL,f),a.hasStructuredAppend()&&(u.putMetadata(ot.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(ot.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),a=r.getBottomRightOnBit();if(s===null||a===null)throw new H;const c=this.moduleSize(s,r);let u=s[1],h=a[1],f=s[0],w=a[0];if(f>=w||u>=h)throw new H;if(h-u!==w-f&&(w=f+(h-u),w>=r.getWidth()))throw new H;const x=Math.round((w-f+1)/c),b=Math.round((h-u+1)/c);if(x<=0||b<=0)throw new H;if(b!==x)throw new H;const R=Math.floor(c/2);u+=R,f+=R;const k=f+Math.floor((x-1)*c)-w;if(k>0){if(k>R)throw new H;f-=k}const L=u+Math.floor((b-1)*c)-h;if(L>0){if(L>R)throw new H;u-=L}const j=new te(x,b);for(let V=0;V<b;V++){const $=u+Math.floor(V*c);for(let Y=0;Y<x;Y++)r.get(f+Math.floor(Y*c),$)&&j.set(Y,V)}return j}static moduleSize(r,s){const a=s.getHeight(),c=s.getWidth();let u=r[0],h=r[1],f=!0,w=0;for(;u<c&&h<a;){if(f!==s.get(u,h)){if(++w===5)break;f=!f}u++,h++}if(u===c||h===a)throw new H;return(u-r[0])/7}}Ni.NO_POINTS=new Array;class Pe{PDF417Common(){}static getBitCountSum(r){return ve.sum(r)}static toIntArray(r){if(r==null||!r.length)return Pe.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let a=0;for(const c of r)s[a++]=c;return s}static getCodeword(r){const s=S.binarySearch(Pe.SYMBOL_TABLE,r&262143);return s<0?-1:(Pe.CODEWORD_TABLE[s]-1)%Pe.NUMBER_OF_CODEWORDS}}Pe.NUMBER_OF_CODEWORDS=929,Pe.MAX_CODEWORDS_IN_BARCODE=Pe.NUMBER_OF_CODEWORDS-1,Pe.MIN_ROWS_IN_BARCODE=3,Pe.MAX_ROWS_IN_BARCODE=90,Pe.MODULES_IN_CODEWORD=17,Pe.MODULES_IN_STOP_PATTERN=18,Pe.BARS_IN_MODULE=8,Pe.EMPTY_INT_ARRAY=new Int32Array([]),Pe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Pe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class tv{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ue{static detectMultiple(r,s,a){let c=r.getBlackMatrix(),u=Ue.detect(a,c);return u.length||(c=c.clone(),c.rotate180(),u=Ue.detect(a,c)),new tv(c,u)}static detect(r,s){const a=new Array;let c=0,u=0,h=!1;for(;c<s.getHeight();){const f=Ue.findVertices(s,c,u);if(f[0]==null&&f[3]==null){if(!h)break;h=!1,u=0;for(const w of a)w[1]!=null&&(c=Math.trunc(Math.max(c,w[1].getY()))),w[3]!=null&&(c=Math.max(c,Math.trunc(w[3].getY())));c+=Ue.ROW_STEP;continue}if(h=!0,a.push(f),!r)break;f[2]!=null?(u=Math.trunc(f[2].getX()),c=Math.trunc(f[2].getY())):(u=Math.trunc(f[4].getX()),c=Math.trunc(f[4].getY()))}return a}static findVertices(r,s,a){const c=r.getHeight(),u=r.getWidth(),h=new Array(8);return Ue.copyToResult(h,Ue.findRowsWithPattern(r,c,u,s,a,Ue.START_PATTERN),Ue.INDEXES_START_PATTERN),h[4]!=null&&(a=Math.trunc(h[4].getX()),s=Math.trunc(h[4].getY())),Ue.copyToResult(h,Ue.findRowsWithPattern(r,c,u,s,a,Ue.STOP_PATTERN),Ue.INDEXES_STOP_PATTERN),h}static copyToResult(r,s,a){for(let c=0;c<a.length;c++)r[a[c]]=s[c]}static findRowsWithPattern(r,s,a,c,u,h){const f=new Array(4);let w=!1;const x=new Int32Array(h.length);for(;c<s;c+=Ue.ROW_STEP){let R=Ue.findGuardPattern(r,u,c,a,!1,h,x);if(R!=null){for(;c>0;){const k=Ue.findGuardPattern(r,u,--c,a,!1,h,x);if(k!=null)R=k;else{c++;break}}f[0]=new ge(R[0],c),f[1]=new ge(R[1],c),w=!0;break}}let b=c+1;if(w){let R=0,k=Int32Array.from([Math.trunc(f[0].getX()),Math.trunc(f[1].getX())]);for(;b<s;b++){const L=Ue.findGuardPattern(r,k[0],b,a,!1,h,x);if(L!=null&&Math.abs(k[0]-L[0])<Ue.MAX_PATTERN_DRIFT&&Math.abs(k[1]-L[1])<Ue.MAX_PATTERN_DRIFT)k=L,R=0;else{if(R>Ue.SKIPPED_ROW_COUNT_MAX)break;R++}}b-=R+1,f[2]=new ge(k[0],b),f[3]=new ge(k[1],b)}return b-c<Ue.BARCODE_MIN_HEIGHT&&S.fill(f,null),f}static findGuardPattern(r,s,a,c,u,h,f){S.fillWithin(f,0,f.length,0);let w=s,x=0;for(;r.get(w,a)&&w>0&&x++<Ue.MAX_PIXEL_DRIFT;)w--;let b=w,R=0,k=h.length;for(let L=u;b<c;b++)if(r.get(b,a)!==L)f[R]++;else{if(R===k-1){if(Ue.patternMatchVariance(f,h,Ue.MAX_INDIVIDUAL_VARIANCE)<Ue.MAX_AVG_VARIANCE)return new Int32Array([w,b]);w+=f[0]+f[1],A.arraycopy(f,2,f,0,R-1),f[R-1]=0,f[R]=0,R--}else R++;f[R]=1,L=!L}return R===k-1&&Ue.patternMatchVariance(f,h,Ue.MAX_INDIVIDUAL_VARIANCE)<Ue.MAX_AVG_VARIANCE?new Int32Array([w,b-1]):null}static patternMatchVariance(r,s,a){let c=r.length,u=0,h=0;for(let x=0;x<c;x++)u+=r[x],h+=s[x];if(u<h)return 1/0;let f=u/h;a*=f;let w=0;for(let x=0;x<c;x++){let b=r[x],R=s[x]*f,k=b>R?b-R:R-b;if(k>a)return 1/0;w+=k}return w/u}}Ue.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ue.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ue.MAX_AVG_VARIANCE=.42,Ue.MAX_INDIVIDUAL_VARIANCE=.8,Ue.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ue.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ue.MAX_PIXEL_DRIFT=3,Ue.MAX_PATTERN_DRIFT=5,Ue.SKIPPED_ROW_COUNT_MAX=25,Ue.ROW_STEP=5,Ue.BARCODE_MIN_HEIGHT=10;class an{constructor(r,s){if(s.length===0)throw new v;this.field=r;let a=s.length;if(a>1&&s[0]===0){let c=1;for(;c<a&&s[c]===0;)c++;c===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-c),A.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],a=this.coefficients.length;for(let c=1;c<a;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,a=r.coefficients;if(s.length>a.length){let h=s;s=a,a=h}let c=new Int32Array(a.length),u=a.length-s.length;A.arraycopy(a,0,c,0,u);for(let h=u;h<a.length;h++)c[h]=this.field.add(s[h-u],a[h]);return new an(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof an?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new v("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new an(this.field,new Int32Array([0]));let s=this.coefficients,a=s.length,c=r.coefficients,u=c.length,h=new Int32Array(a+u-1);for(let f=0;f<a;f++){let w=s[f];for(let x=0;x<u;x++)h[f+x]=this.field.add(h[f+x],this.field.multiply(w,c[x]))}return new an(this.field,h)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let a=0;a<r;a++)s[a]=this.field.subtract(0,this.coefficients[a]);return new an(this.field,s)}multiplyScalar(r){if(r===0)return new an(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,a=new Int32Array(s);for(let c=0;c<s;c++)a[c]=this.field.multiply(this.coefficients[c],r);return new an(this.field,a)}multiplyByMonomial(r,s){if(r<0)throw new v;if(s===0)return new an(this.field,new Int32Array([0]));let a=this.coefficients.length,c=new Int32Array(a+r);for(let u=0;u<a;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new an(this.field,c)}toString(){let r=new ce;for(let s=this.getDegree();s>=0;s--){let a=this.getCoefficient(s);a!==0&&(a<0?(r.append(" - "),a=-a):r.length()>0&&r.append(" + "),(s===0||a!==1)&&r.append(a),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class nv{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new v;return this.logTable[r]}inverse(r){if(r===0)throw new Sn;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class sd extends nv{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let a=1;for(let c=0;c<r;c++)this.expTable[c]=a,a=a*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new an(this,new Int32Array([0])),this.one=new an(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new v;if(s===0)return this.zero;let a=new Int32Array(r+1);return a[0]=s,new an(this,a)}}sd.PDF417_GF=new sd(Pe.NUMBER_OF_CODEWORDS,3);class Z0{constructor(){this.field=sd.PDF417_GF}decode(r,s,a){let c=new an(this.field,r),u=new Int32Array(s),h=!1;for(let j=s;j>0;j--){let V=c.evaluateAt(this.field.exp(j));u[s-j]=V,V!==0&&(h=!0)}if(!h)return 0;let f=this.field.getOne();if(a!=null)for(const j of a){let V=this.field.exp(r.length-1-j),$=new an(this.field,new Int32Array([this.field.subtract(0,V),1]));f=f.multiply($)}let w=new an(this.field,u),x=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),w,s),b=x[0],R=x[1],k=this.findErrorLocations(b),L=this.findErrorMagnitudes(R,b,k);for(let j=0;j<k.length;j++){let V=r.length-1-this.field.log(k[j]);if(V<0)throw C.getChecksumInstance();r[V]=this.field.subtract(r[V],L[j])}return k.length}runEuclideanAlgorithm(r,s,a){if(r.getDegree()<s.getDegree()){let k=r;r=s,s=k}let c=r,u=s,h=this.field.getZero(),f=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let k=c,L=h;if(c=u,h=f,c.isZero())throw C.getChecksumInstance();u=k;let j=this.field.getZero(),V=c.getCoefficient(c.getDegree()),$=this.field.inverse(V);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let Y=u.getDegree()-c.getDegree(),ae=this.field.multiply(u.getCoefficient(u.getDegree()),$);j=j.add(this.field.buildMonomial(Y,ae)),u=u.subtract(c.multiplyByMonomial(Y,ae))}f=j.multiply(h).subtract(L).negative()}let w=f.getCoefficient(0);if(w===0)throw C.getChecksumInstance();let x=this.field.inverse(w),b=f.multiply(x),R=u.multiply(x);return[b,R]}findErrorLocations(r){let s=r.getDegree(),a=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(a[c]=this.field.inverse(u),c++);if(c!==s)throw C.getChecksumInstance();return a}findErrorMagnitudes(r,s,a){let c=s.getDegree(),u=new Int32Array(c);for(let x=1;x<=c;x++)u[c-x]=this.field.multiply(x,s.getCoefficient(x));let h=new an(this.field,u),f=a.length,w=new Int32Array(f);for(let x=0;x<f;x++){let b=this.field.inverse(a[x]),R=this.field.subtract(0,r.evaluateAt(b)),k=this.field.inverse(h.evaluateAt(b));w[x]=this.field.multiply(R,k)}return w}}class ws{constructor(r,s,a,c,u){r instanceof ws?this.constructor_2(r):this.constructor_1(r,s,a,c,u)}constructor_1(r,s,a,c,u){const h=s==null||a==null,f=c==null||u==null;if(h&&f)throw new H;h?(s=new ge(0,c.getY()),a=new ge(0,u.getY())):f&&(c=new ge(r.getWidth()-1,s.getY()),u=new ge(r.getWidth()-1,a.getY())),this.image=r,this.topLeft=s,this.bottomLeft=a,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),a.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new ws(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,a){let c=this.topLeft,u=this.bottomLeft,h=this.topRight,f=this.bottomRight;if(r>0){let w=a?this.topLeft:this.topRight,x=Math.trunc(w.getY()-r);x<0&&(x=0);let b=new ge(w.getX(),x);a?c=b:h=b}if(s>0){let w=a?this.bottomLeft:this.bottomRight,x=Math.trunc(w.getY()+s);x>=this.image.getHeight()&&(x=this.image.getHeight()-1);let b=new ge(w.getX(),x);a?u=b:f=b}return new ws(this.image,c,u,h,f)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class rv{constructor(r,s,a,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=a,this.rowCount=s+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class ha{constructor(){this.buffer=""}static form(r,s){let a=-1;function c(h,f,w,x,b,R){if(h==="%%")return"%";if(s[++a]===void 0)return;h=x?parseInt(x.substr(1)):void 0;let k=b?parseInt(b.substr(1)):void 0,L;switch(R){case"s":L=s[a];break;case"c":L=s[a][0];break;case"f":L=parseFloat(s[a]).toFixed(h);break;case"p":L=parseFloat(s[a]).toPrecision(h);break;case"e":L=parseFloat(s[a]).toExponential(h);break;case"x":L=parseInt(s[a]).toString(k||16);break;case"d":L=parseFloat(parseInt(s[a],k||10).toPrecision(h)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(k);let j=parseInt(w),V=w&&w[0]+""=="0"?"0":" ";for(;L.length<j;)L=f!==void 0?L+V:V+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=ha.form(r,s)}toString(){return this.buffer}}class fa{constructor(r){this.boundingBox=new ws(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let a=1;a<fa.MAX_NEARBY_DISTANCE;a++){let c=this.imageRowToCodewordIndex(r)-a;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+a,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new ha;let s=0;for(const a of this.codewords){if(a==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,a.getRowNumber(),a.getValue())}return r.toString()}}fa.MAX_NEARBY_DISTANCE=5;class pa{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[a,c]of this.values.entries()){const u={getKey:()=>a,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return Pe.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class J0 extends fa{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let a=this.getBoundingBox(),c=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),w=-1,x=1,b=0;for(let R=h;R<f;R++){if(s[R]==null)continue;let k=s[R],L=k.getRowNumber()-w;if(L===0)b++;else if(L===1)x=Math.max(x,b),b=1,w=k.getRowNumber();else if(L<0||k.getRowNumber()>=r.getRowCount()||L>R)s[R]=null;else{let j;x>2?j=(x-2)*L:j=L;let V=j>=R;for(let $=1;$<=j&&!V;$++)V=s[R-$]!=null;V?s[R]=null:(w=k.getRowNumber(),b=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let a of this.getCodewords())if(a!=null){let c=a.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),a=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),h=this.imageRowToCodewordIndex(Math.trunc(c.getY())),f=this.getCodewords(),w=-1;for(let x=u;x<h;x++){if(f[x]==null)continue;let b=f[x];b.setRowNumberAsRowIndicatorColumn();let R=b.getRowNumber()-w;R===0||(R===1?w=b.getRowNumber():b.getRowNumber()>=r.getRowCount()?f[x]=null:w=b.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new pa,a=new pa,c=new pa,u=new pa;for(let f of r){if(f==null)continue;f.setRowNumberAsRowIndicatorColumn();let w=f.getValue()%30,x=f.getRowNumber();switch(this._isLeft||(x+=2),x%3){case 0:a.setValue(w*3+1);break;case 1:u.setValue(w/3),c.setValue(w%3);break;case 2:s.setValue(w+1);break}}if(s.getValue().length===0||a.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||a.getValue()[0]+c.getValue()[0]<Pe.MIN_ROWS_IN_BARCODE||a.getValue()[0]+c.getValue()[0]>Pe.MAX_ROWS_IN_BARCODE)return null;let h=new rv(s.getValue()[0],a.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,h),h}removeIncorrectCodewords(r,s){for(let a=0;a<r.length;a++){let c=r[a];if(r[a]==null)continue;let u=c.getValue()%30,h=c.getRowNumber();if(h>s.getRowCount()){r[a]=null;continue}switch(this._isLeft||(h+=2),h%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[a]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[a]=null);break;case 2:u+1!==s.getColumnCount()&&(r[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class ga{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=Pe.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let a=this.detectionResultColumns[s].getCodewords();for(let c=0;c<a.length;c++)a[c]!=null&&(a[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,a))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<r.length;a++)if(r[a]!=null&&s[a]!=null&&r[a].getRowNumber()===s[a].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[a];u!=null&&(u.setRowNumber(r[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let h=this.barcodeColumnCount+1;h>0&&u<this.ADJUST_ROW_NUMBER_SKIP;h--){let f=this.detectionResultColumns[h].getCodewords()[a];f!=null&&(u=ga.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let a=0;a<s.length;a++){if(s[a]==null)continue;let c=s[a].getRowNumber(),u=0;for(let h=1;h<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;h++){let f=this.detectionResultColumns[h].getCodewords()[a];f!=null&&(u=ga.adjustRowNumberIfValid(c,u,f),f.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(r)?(a.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,a){if(!this.detectionResultColumns[r-1])return;let c=a[s],u=this.detectionResultColumns[r-1].getCodewords(),h=u;this.detectionResultColumns[r+1]!=null&&(h=this.detectionResultColumns[r+1].getCodewords());let f=new Array(14);f[2]=u[s],f[3]=h[s],s>0&&(f[0]=a[s-1],f[4]=u[s-1],f[5]=h[s-1]),s>1&&(f[8]=a[s-2],f[10]=u[s-2],f[11]=h[s-2]),s<a.length-1&&(f[1]=a[s+1],f[6]=u[s+1],f[7]=h[s+1]),s<a.length-2&&(f[9]=a[s+2],f[12]=u[s+2],f[13]=h[s+2]);for(let w of f)if(ga.adjustRowNumber(c,w))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new ha;for(let a=0;a<r.getCodewords().length;a++){s.format("CW %3d:",a);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[a];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class ma{constructor(r,s,a,c){this.rowNumber=ma.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(a),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==ma.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}ma.BARCODE_ROW_UNKNOWN=-1;class Bn{static initialize(){for(let r=0;r<Pe.SYMBOL_TABLE.length;r++){let s=Pe.SYMBOL_TABLE[r],a=s&1;for(let c=0;c<Pe.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===a;)u+=1,s>>=1;a=s&1,Bn.RATIOS_TABLE[r]||(Bn.RATIOS_TABLE[r]=new Array(Pe.BARS_IN_MODULE)),Bn.RATIOS_TABLE[r][Pe.BARS_IN_MODULE-c-1]=Math.fround(u/Pe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=Bn.getDecodedCodewordValue(Bn.sampleBitCounts(r));return s!==-1?s:Bn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=ve.sum(r),a=new Int32Array(Pe.BARS_IN_MODULE),c=0,u=0;for(let h=0;h<Pe.MODULES_IN_CODEWORD;h++){let f=s/(2*Pe.MODULES_IN_CODEWORD)+h*s/Pe.MODULES_IN_CODEWORD;u+r[c]<=f&&(u+=r[c],c++),a[c]++}return a}static getDecodedCodewordValue(r){let s=Bn.getBitValue(r);return Pe.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let a=0;a<r.length;a++)for(let c=0;c<r[a];c++)s=s<<1|(a%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=ve.sum(r),a=new Array(Pe.BARS_IN_MODULE);if(s>1)for(let h=0;h<a.length;h++)a[h]=Math.fround(r[h]/s);let c=Lt.MAX_VALUE,u=-1;this.bSymbolTableReady||Bn.initialize();for(let h=0;h<Bn.RATIOS_TABLE.length;h++){let f=0,w=Bn.RATIOS_TABLE[h];for(let x=0;x<Pe.BARS_IN_MODULE;x++){let b=Math.fround(w[x]-a[x]);if(f+=Math.fround(b*b),f>=c)break}f<c&&(c=f,u=Pe.SYMBOL_TABLE[h])}return u}}Bn.bSymbolTableReady=!1,Bn.RATIOS_TABLE=new Array(Pe.SYMBOL_TABLE.length).map(I=>new Array(Pe.BARS_IN_MODULE));class e1{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class t1{static parseLong(r,s=void 0){return parseInt(r,s)}}class n1 extends g{}n1.kind="NullPointerException";class iv{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,a){if(r==null)throw new n1;if(s<0||s>r.length||a<0||s+a>r.length||s+a<0)throw new N;if(a===0)return;for(let c=0;c<a;c++)this.write(r[s+c])}flush(){}close(){}}class sv extends g{}class ov extends iv{constructor(r=32){if(super(),this.count=0,r<0)throw new v("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let a=this.buf.length<<1;if(a-r<0&&(a=r),a<0){if(r<0)throw new sv;a=_.MAX_VALUE}this.buf=S.copyOfUint8Array(this.buf,a)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,a){if(s<0||s>r.length||a<0||s+a-r.length>0)throw new N;this.ensureCapacity(this.count+a),A.arraycopy(r,s,this.buf,this.count,a),this.count+=a}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return S.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var at;(function(I){I[I.ALPHA=0]="ALPHA",I[I.LOWER=1]="LOWER",I[I.MIXED=2]="MIXED",I[I.PUNCT=3]="PUNCT",I[I.ALPHA_SHIFT=4]="ALPHA_SHIFT",I[I.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(at||(at={}));function r1(){if(typeof window<"u")return window.BigInt||null;if(typeof xa<"u")return xa.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Bl;function ki(I){if(typeof Bl>"u"&&(Bl=r1()),Bl===null)throw new Error("BigInt is not supported!");return Bl(I)}function av(){let I=[];I[0]=ki(1);let r=ki(900);I[1]=r;for(let s=2;s<16;s++)I[s]=I[s-1]*r;return I}class X{static decode(r,s){let a=new ce(""),c=W.ISO8859_1;a.enableDecoding(c);let u=1,h=r[u++],f=new e1;for(;u<r[0];){switch(h){case X.TEXT_COMPACTION_MODE_LATCH:u=X.textCompaction(r,u,a);break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:u=X.byteCompaction(h,r,c,u,a);break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(r[u++]);break;case X.NUMERIC_COMPACTION_MODE_LATCH:u=X.numericCompaction(r,u,a);break;case X.ECI_CHARSET:W.getCharacterSetECIByValue(r[u++]);break;case X.ECI_GENERAL_PURPOSE:u+=2;break;case X.ECI_USER_DEFINED:u++;break;case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=X.decodeMacroBlock(r,u,f);break;case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:throw new F;default:u--,u=X.textCompaction(r,u,a);break}if(u<r.length)h=r[u++];else throw F.getFormatInstance()}if(a.length()===0)throw F.getFormatInstance();let w=new gn(null,a.toString(),null,s);return w.setOther(f),w}static decodeMacroBlock(r,s,a){if(s+X.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw F.getFormatInstance();let c=new Int32Array(X.NUMBER_OF_SEQUENCE_CODEWORDS);for(let f=0;f<X.NUMBER_OF_SEQUENCE_CODEWORDS;f++,s++)c[f]=r[s];a.setSegmentIndex(_.parseInt(X.decodeBase900toBase10(c,X.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ce;s=X.textCompaction(r,s,u),a.setFileId(u.toString());let h=-1;for(r[s]===X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(h=s+1);s<r[0];)switch(r[s]){case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let f=new ce;s=X.textCompaction(r,s+1,f),a.setFileName(f.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let w=new ce;s=X.textCompaction(r,s+1,w),a.setSender(w.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let x=new ce;s=X.textCompaction(r,s+1,x),a.setAddressee(x.toString());break;case X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new ce;s=X.numericCompaction(r,s+1,b),a.setSegmentCount(_.parseInt(b.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let R=new ce;s=X.numericCompaction(r,s+1,R),a.setTimestamp(t1.parseLong(R.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let k=new ce;s=X.numericCompaction(r,s+1,k),a.setChecksum(_.parseInt(k.toString()));break;case X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new ce;s=X.numericCompaction(r,s+1,L),a.setFileSize(t1.parseLong(L.toString()));break;default:throw F.getFormatInstance()}break;case X.MACRO_PDF417_TERMINATOR:s++,a.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(h!==-1){let f=s-h;a.isLastSegment()&&f--,a.setOptionalData(S.copyOfRange(r,h,h+f))}return s}static textCompaction(r,s,a){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),h=0,f=!1;for(;s<r[0]&&!f;){let w=r[s++];if(w<X.TEXT_COMPACTION_MODE_LATCH)c[h]=w/30,c[h+1]=w%30,h+=2;else switch(w){case X.TEXT_COMPACTION_MODE_LATCH:c[h++]=X.TEXT_COMPACTION_MODE_LATCH;break;case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:s--,f=!0;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[h]=X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,w=r[s++],u[h]=w,h++;break}}return X.decodeTextCompaction(c,u,h,a),s}static decodeTextCompaction(r,s,a,c){let u=at.ALPHA,h=at.ALPHA,f=0;for(;f<a;){let w=r[f],x="";switch(u){case at.ALPHA:if(w<26)x=String.fromCharCode(65+w);else switch(w){case 26:x=" ";break;case X.LL:u=at.LOWER;break;case X.ML:u=at.MIXED;break;case X.PS:h=u,u=at.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.LOWER:if(w<26)x=String.fromCharCode(97+w);else switch(w){case 26:x=" ";break;case X.AS:h=u,u=at.ALPHA_SHIFT;break;case X.ML:u=at.MIXED;break;case X.PS:h=u,u=at.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.MIXED:if(w<X.PL)x=X.MIXED_CHARS[w];else switch(w){case X.PL:u=at.PUNCT;break;case 26:x=" ";break;case X.LL:u=at.LOWER;break;case X.AL:u=at.ALPHA;break;case X.PS:h=u,u=at.PUNCT_SHIFT;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.PUNCT:if(w<X.PAL)x=X.PUNCT_CHARS[w];else switch(w){case X.PAL:u=at.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.ALPHA_SHIFT:if(u=h,w<26)x=String.fromCharCode(65+w);else switch(w){case 26:x=" ";break;case X.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break;case at.PUNCT_SHIFT:if(u=h,w<X.PAL)x=X.PUNCT_CHARS[w];else switch(w){case X.PAL:u=at.ALPHA;break;case X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[f]);break;case X.TEXT_COMPACTION_MODE_LATCH:u=at.ALPHA;break}break}x!==""&&c.append(x),f++}}static byteCompaction(r,s,a,c,u){let h=new ov,f=0,w=0,x=!1;switch(r){case X.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),R=s[c++];for(;c<s[0]&&!x;)switch(b[f++]=R,w=900*w+R,R=s[c++],R){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:c--,x=!0;break;default:if(f%5===0&&f>0){for(let k=0;k<6;++k)h.write(Number(ki(w)>>ki(8*(5-k))));w=0,f=0}break}c===s[0]&&R<X.TEXT_COMPACTION_MODE_LATCH&&(b[f++]=R);for(let k=0;k<f;k++)h.write(b[k]);break;case X.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!x;){let k=s[c++];if(k<X.TEXT_COMPACTION_MODE_LATCH)f++,w=900*w+k;else switch(k){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.NUMERIC_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:c--,x=!0;break}if(f%5===0&&f>0){for(let L=0;L<6;++L)h.write(Number(ki(w)>>ki(8*(5-L))));w=0,f=0}}break}return u.append(he.decode(h.toByteArray(),a)),c}static numericCompaction(r,s,a){let c=0,u=!1,h=new Int32Array(X.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let f=r[s++];if(s===r[0]&&(u=!0),f<X.TEXT_COMPACTION_MODE_LATCH)h[c]=f,c++;else switch(f){case X.TEXT_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH:case X.BYTE_COMPACTION_MODE_LATCH_6:case X.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case X.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%X.MAX_NUMERIC_CODEWORDS===0||f===X.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(a.append(X.decodeBase900toBase10(h,c)),c=0)}return s}static decodeBase900toBase10(r,s){let a=ki(0);for(let u=0;u<s;u++)a+=X.EXP900[s-u-1]*ki(r[u]);let c=a.toString();if(c.charAt(0)!=="1")throw new F;return c.substring(1)}}X.TEXT_COMPACTION_MODE_LATCH=900,X.BYTE_COMPACTION_MODE_LATCH=901,X.NUMERIC_COMPACTION_MODE_LATCH=902,X.BYTE_COMPACTION_MODE_LATCH_6=924,X.ECI_USER_DEFINED=925,X.ECI_GENERAL_PURPOSE=926,X.ECI_CHARSET=927,X.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,X.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,X.MACRO_PDF417_TERMINATOR=922,X.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,X.MAX_NUMERIC_CODEWORDS=15,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,X.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,X.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,X.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,X.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,X.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,X.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,X.PL=25,X.LL=27,X.AS=27,X.ML=28,X.AL=28,X.PS=29,X.PAL=29,X.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,X.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",X.EXP900=r1()?av():[],X.NUMBER_OF_SEQUENCE_CODEWORDS=2;class ze{constructor(){}static decode(r,s,a,c,u,h,f){let w=new ws(r,s,a,c,u),x=null,b=null,R;for(let j=!0;;j=!1){if(s!=null&&(x=ze.getRowIndicatorColumn(r,w,s,!0,h,f)),c!=null&&(b=ze.getRowIndicatorColumn(r,w,c,!1,h,f)),R=ze.merge(x,b),R==null)throw H.getNotFoundInstance();let V=R.getBoundingBox();if(j&&V!=null&&(V.getMinY()<w.getMinY()||V.getMaxY()>w.getMaxY()))w=V;else break}R.setBoundingBox(w);let k=R.getBarcodeColumnCount()+1;R.setDetectionResultColumn(0,x),R.setDetectionResultColumn(k,b);let L=x!=null;for(let j=1;j<=k;j++){let V=L?j:k-j;if(R.getDetectionResultColumn(V)!==void 0)continue;let $;V===0||V===k?$=new J0(w,V===0):$=new fa(w),R.setDetectionResultColumn(V,$);let Y=-1,ae=Y;for(let ue=w.getMinY();ue<=w.getMaxY();ue++){if(Y=ze.getStartColumn(R,V,ue,L),Y<0||Y>w.getMaxX()){if(ae===-1)continue;Y=ae}let ie=ze.detectCodeword(r,w.getMinX(),w.getMaxX(),L,Y,ue,h,f);ie!=null&&($.setCodeword(ue,ie),ae=Y,h=Math.min(h,ie.getWidth()),f=Math.max(f,ie.getWidth()))}}return ze.createDecoderResult(R)}static merge(r,s){if(r==null&&s==null)return null;let a=ze.getBarcodeMetadata(r,s);if(a==null)return null;let c=ws.merge(ze.adjustBoundingBox(r),ze.adjustBoundingBox(s));return new ga(a,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let a=ze.getMax(s),c=0;for(let f of s)if(c+=a-f,f>0)break;let u=r.getCodewords();for(let f=0;c>0&&u[f]==null;f++)c--;let h=0;for(let f=s.length-1;f>=0&&(h+=a-s[f],!(s[f]>0));f--);for(let f=u.length-1;h>0&&u[f]==null;f--)h--;return r.getBoundingBox().addMissingRows(c,h,r.isLeft())}static getMax(r){let s=-1;for(let a of r)s=Math.max(s,a);return s}static getBarcodeMetadata(r,s){let a;if(r==null||(a=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?a:a.getColumnCount()!==c.getColumnCount()&&a.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&a.getRowCount()!==c.getRowCount()?null:a}static getRowIndicatorColumn(r,s,a,c,u,h){let f=new J0(s,c);for(let w=0;w<2;w++){let x=w===0?1:-1,b=Math.trunc(Math.trunc(a.getX()));for(let R=Math.trunc(Math.trunc(a.getY()));R<=s.getMaxY()&&R>=s.getMinY();R+=x){let k=ze.detectCodeword(r,0,r.getWidth(),c,b,R,u,h);k!=null&&(f.setCodeword(R,k),c?b=k.getStartX():b=k.getEndX())}}return f}static adjustCodewordCount(r,s){let a=s[0][1],c=a.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-ze.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>Pe.MAX_CODEWORDS_IN_BARCODE)throw H.getNotFoundInstance();a.setValue(u)}else c[0]!==u&&a.setValue(u)}static createDecoderResult(r){let s=ze.createBarcodeMatrix(r);ze.adjustCodewordCount(r,s);let a=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],h=new Array;for(let w=0;w<r.getBarcodeRowCount();w++)for(let x=0;x<r.getBarcodeColumnCount();x++){let b=s[w][x+1].getValue(),R=w*r.getBarcodeColumnCount()+x;b.length===0?a.push(R):b.length===1?c[R]=b[0]:(h.push(R),u.push(b))}let f=new Array(u.length);for(let w=0;w<f.length;w++)f[w]=u[w];return ze.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,Pe.toIntArray(a),Pe.toIntArray(h),f)}static createDecoderResultFromAmbiguousValues(r,s,a,c,u){let h=new Int32Array(c.length),f=100;for(;f-- >0;){for(let w=0;w<h.length;w++)s[c[w]]=u[w][h[w]];try{return ze.decodeCodewords(s,r,a)}catch(w){if(!(w instanceof C))throw w}if(h.length===0)throw C.getChecksumInstance();for(let w=0;w<h.length;w++)if(h[w]<u[w].length-1){h[w]++;break}else if(h[w]=0,w===h.length-1)throw C.getChecksumInstance()}throw C.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new pa;let a=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let h=u.getRowNumber();if(h>=0){if(h>=s.length)continue;s[h][a].setValue(u.getValue())}}}a++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,a,c){let u=c?1:-1,h=null;if(ze.isValidBarcodeColumn(r,s-u)&&(h=r.getDetectionResultColumn(s-u).getCodeword(a)),h!=null)return c?h.getEndX():h.getStartX();if(h=r.getDetectionResultColumn(s).getCodewordNearby(a),h!=null)return c?h.getStartX():h.getEndX();if(ze.isValidBarcodeColumn(r,s-u)&&(h=r.getDetectionResultColumn(s-u).getCodewordNearby(a)),h!=null)return c?h.getEndX():h.getStartX();let f=0;for(;ze.isValidBarcodeColumn(r,s-u);){s-=u;for(let w of r.getDetectionResultColumn(s).getCodewords())if(w!=null)return(c?w.getEndX():w.getStartX())+u*f*(w.getEndX()-w.getStartX());f++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,a,c,u,h,f,w){u=ze.adjustCodewordStartColumn(r,s,a,c,u,h);let x=ze.getModuleBitCount(r,s,a,c,u,h);if(x==null)return null;let b,R=ve.sum(x);if(c)b=u+R;else{for(let j=0;j<x.length/2;j++){let V=x[j];x[j]=x[x.length-1-j],x[x.length-1-j]=V}b=u,u=b-R}if(!ze.checkCodewordSkew(R,f,w))return null;let k=Bn.getDecodedValue(x),L=Pe.getCodeword(k);return L===-1?null:new ma(u,b,ze.getCodewordBucketNumber(k),L)}static getModuleBitCount(r,s,a,c,u,h){let f=u,w=new Int32Array(8),x=0,b=c?1:-1,R=c;for(;(c?f<a:f>=s)&&x<w.length;)r.get(f,h)===R?(w[x]++,f+=b):(x++,R=!R);return x===w.length||f===(c?a:s)&&x===w.length-1?w:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,a,c,u,h){let f=u,w=c?-1:1;for(let x=0;x<2;x++){for(;(c?f>=s:f<a)&&c===r.get(f,h);){if(Math.abs(u-f)>ze.CODEWORD_SKEW_SIZE)return u;f+=w}w=-w,c=!c}return f}static checkCodewordSkew(r,s,a){return s-ze.CODEWORD_SKEW_SIZE<=r&&r<=a+ze.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,a){if(r.length===0)throw F.getFormatInstance();let c=1<<s+1,u=ze.correctErrors(r,a,c);ze.verifyCodewordCount(r,c);let h=X.decode(r,""+s);return h.setErrorsCorrected(u),h.setErasures(a.length),h}static correctErrors(r,s,a){if(s!=null&&s.length>a/2+ze.MAX_ERRORS||a<0||a>ze.MAX_EC_CODEWORDS)throw C.getChecksumInstance();return ze.errorCorrection.decode(r,a,s)}static verifyCodewordCount(r,s){if(r.length<4)throw F.getFormatInstance();let a=r[0];if(a>r.length)throw F.getFormatInstance();if(a===0)if(s<r.length)r[0]=r.length-s;else throw F.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),a=0,c=s.length-1;for(;!((r&1)!==a&&(a=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return ze.getCodewordBucketNumber(ze.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new ha;for(let a=0;a<r.length;a++){s.format("Row %2d: ",a);for(let c=0;c<r[a].length;c++){let u=r[a][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}ze.CODEWORD_SKEW_SIZE=2,ze.MAX_ERRORS=3,ze.MAX_EC_CODEWORDS=512,ze.errorCorrection=new Z0;class ln{decode(r,s=null){let a=ln.decode(r,s,!1);if(a==null||a.length===0||a[0]==null)throw H.getNotFoundInstance();return a[0]}decodeMultiple(r,s=null){try{return ln.decode(r,s,!0)}catch(a){throw a instanceof F||a instanceof C?H.getNotFoundInstance():a}}static decode(r,s,a){const c=new Array,u=Ue.detectMultiple(r,s,a);for(const h of u.getPoints()){const f=ze.decode(u.getBits(),h[4],h[5],h[6],h[7],ln.getMinCodewordWidth(h),ln.getMaxCodewordWidth(h)),w=new Ee(f.getText(),f.getRawBytes(),void 0,h,me.PDF_417);w.putMetadata(ot.ERROR_CORRECTION_LEVEL,f.getECLevel());const x=f.getOther();x!=null&&w.putMetadata(ot.PDF417_EXTRA_METADATA,x),c.push(w)}return c.map(h=>h)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?_.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(ln.getMaxWidth(r[0],r[4]),ln.getMaxWidth(r[6],r[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.max(ln.getMaxWidth(r[1],r[5]),ln.getMaxWidth(r[7],r[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(ln.getMinWidth(r[0],r[4]),ln.getMinWidth(r[6],r[2])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN),Math.min(ln.getMinWidth(r[1],r[5]),ln.getMinWidth(r[7],r[3])*Pe.MODULES_IN_CODEWORD/Pe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Fl extends g{}Fl.kind="ReaderException";class i1{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(z.TRY_HARDER)===!0,a=i(r)?null:r.get(z.POSSIBLE_FORMATS),c=new Array;if(!i(a)){const u=a.some(h=>h===me.UPC_A||h===me.UPC_E||h===me.EAN_13||h===me.EAN_8||h===me.CODABAR||h===me.CODE_39||h===me.CODE_93||h===me.CODE_128||h===me.ITF||h===me.RSS_14||h===me.RSS_EXPANDED);u&&!s&&c.push(new Js(r,this.verbose)),a.includes(me.QR_CODE)&&c.push(new Ni),a.includes(me.DATA_MATRIX)&&c.push(new Oi),a.includes(me.AZTEC)&&c.push(new Ti),a.includes(me.PDF_417)&&c.push(new ln),u&&s&&c.push(new Js(r,this.verbose))}c.length===0&&(s||c.push(new Js(r,this.verbose)),c.push(new Ni),c.push(new Oi),c.push(new Ti),c.push(new ln),s&&c.push(new Js(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Fl("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(a){if(a instanceof Fl)continue}throw new H("No MultiFormat Readers were able to detect the code.")}}class lv extends Te{constructor(r=null,s=500){const a=new i1;a.setHints(r),super(a,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class cv extends Te{constructor(r=500){super(new ln,r)}}class uv extends Te{constructor(r=500){super(new Ni,r)}}var od;(function(I){I[I.ERROR_CORRECTION=0]="ERROR_CORRECTION",I[I.CHARACTER_SET=1]="CHARACTER_SET",I[I.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",I[I.MIN_SIZE=3]="MIN_SIZE",I[I.MAX_SIZE=4]="MAX_SIZE",I[I.MARGIN=5]="MARGIN",I[I.PDF417_COMPACT=6]="PDF417_COMPACT",I[I.PDF417_COMPACTION=7]="PDF417_COMPACTION",I[I.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",I[I.AZTEC_LAYERS=9]="AZTEC_LAYERS",I[I.QR_VERSION=10]="QR_VERSION"})(od||(od={}));var Kt=od;class ad{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new pt(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let a=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const h=a.multiply(new pt(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(h),a=h}}return s[r]}encode(r,s){if(s===0)throw new v("No error correction bytes");const a=r.length-s;if(a<=0)throw new v("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(a);A.arraycopy(r,0,u,0,a);let h=new pt(this.field,u);h=h.multiplyByMonomial(s,1);const w=h.divide(c)[1].getCoefficients(),x=s-w.length;for(let b=0;b<x;b++)r[a+b]=0;A.arraycopy(w,0,r,a+x,w.length)}}class Ot{constructor(){}static applyMaskPenaltyRule1(r){return Ot.applyMaskPenaltyRule1Internal(r,!0)+Ot.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let h=0;h<u-1;h++){const f=a[h];for(let w=0;w<c-1;w++){const x=f[w];x===f[w+1]&&x===a[h+1][w]&&x===a[h+1][w+1]&&s++}}return Ot.N2*s}static applyMaskPenaltyRule3(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let h=0;h<u;h++)for(let f=0;f<c;f++){const w=a[h];f+6<c&&w[f]===1&&w[f+1]===0&&w[f+2]===1&&w[f+3]===1&&w[f+4]===1&&w[f+5]===0&&w[f+6]===1&&(Ot.isWhiteHorizontal(w,f-4,f)||Ot.isWhiteHorizontal(w,f+7,f+11))&&s++,h+6<u&&a[h][f]===1&&a[h+1][f]===0&&a[h+2][f]===1&&a[h+3][f]===1&&a[h+4][f]===1&&a[h+5][f]===0&&a[h+6][f]===1&&(Ot.isWhiteVertical(a,f,h-4,h)||Ot.isWhiteVertical(a,f,h+7,h+11))&&s++}return s*Ot.N3}static isWhiteHorizontal(r,s,a){s=Math.max(s,0),a=Math.min(a,r.length);for(let c=s;c<a;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,a,c){a=Math.max(a,0),c=Math.min(c,r.length);for(let u=a;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const a=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let w=0;w<u;w++){const x=a[w];for(let b=0;b<c;b++)x[b]===1&&s++}const h=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-h)*10/h)*Ot.N4}static getDataMaskBit(r,s,a){let c,u;switch(r){case 0:c=a+s&1;break;case 1:c=a&1;break;case 2:c=s%3;break;case 3:c=(a+s)%3;break;case 4:c=Math.floor(a/2)+Math.floor(s/3)&1;break;case 5:u=a*s,c=(u&1)+u%3;break;case 6:u=a*s,c=(u&1)+u%3&1;break;case 7:u=a*s,c=u%3+(a+s&1)&1;break;default:throw new v("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let a=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),h=r.getArray();for(let f=0;f<c;f++){let w=0,x=-1;for(let b=0;b<u;b++){const R=s?h[f][b]:h[b][f];R===x?w++:(w>=5&&(a+=Ot.N1+(w-5)),w=1,x=R)}w>=5&&(a+=Ot.N1+(w-5))}return a}}Ot.N1=3,Ot.N2=3,Ot.N3=40,Ot.N4=10;class jl{constructor(r,s){this.width=r,this.height=s;const a=new Array(s);for(let c=0;c!==s;c++)a[c]=new Uint8Array(r);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,a){this.bytes[s][r]=a}setBoolean(r,s,a){this.bytes[s][r]=a?1:0}clear(r){for(const s of this.bytes)S.fill(s,r)}equals(r){if(!(r instanceof jl))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let a=0,c=this.height;a<c;++a){const u=this.bytes[a],h=s.bytes[a];for(let f=0,w=this.width;f<w;++f)if(u[f]!==h[f])return!1}return!0}toString(){const r=new ce;for(let s=0,a=this.height;s<a;++s){const c=this.bytes[s];for(let u=0,h=this.width;u<h;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class ys{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ce;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<ys.NUM_MASK_PATTERNS}}ys.NUM_MASK_PATTERNS=8;class lt extends g{}lt.kind="WriterException";class Oe{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,a,c,u){Oe.clearMatrix(u),Oe.embedBasicPatterns(a,u),Oe.embedTypeInfo(s,c,u),Oe.maybeEmbedVersionInfo(a,u),Oe.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){Oe.embedPositionDetectionPatternsAndSeparators(s),Oe.embedDarkDotAtLeftBottomCorner(s),Oe.maybeEmbedPositionAdjustmentPatterns(r,s),Oe.embedTimingPatterns(s)}static embedTypeInfo(r,s,a){const c=new D;Oe.makeTypeInfoBits(r,s,c);for(let u=0,h=c.getSize();u<h;++u){const f=c.get(c.getSize()-1-u),w=Oe.TYPE_INFO_COORDINATES[u],x=w[0],b=w[1];if(a.setBoolean(x,b,f),u<8){const R=a.getWidth()-u-1;a.setBoolean(R,8,f)}else{const k=a.getHeight()-7+(u-8);a.setBoolean(8,k,f)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const a=new D;Oe.makeVersionInfoBits(r,a);let c=6*3-1;for(let u=0;u<6;++u)for(let h=0;h<3;++h){const f=a.get(c);c--,s.setBoolean(u,s.getHeight()-11+h,f),s.setBoolean(s.getHeight()-11+h,u,f)}}static embedDataBits(r,s,a){let c=0,u=-1,h=a.getWidth()-1,f=a.getHeight()-1;for(;h>0;){for(h===6&&(h-=1);f>=0&&f<a.getHeight();){for(let w=0;w<2;++w){const x=h-w;if(!Oe.isEmpty(a.get(x,f)))continue;let b;c<r.getSize()?(b=r.get(c),++c):b=!1,s!==255&&Ot.getDataMaskBit(s,x,f)&&(b=!b),a.setBoolean(x,f,b)}f+=u}u=-u,f+=u,h-=2}if(c!==r.getSize())throw new lt("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-_.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new v("0 polynomial");const a=Oe.findMSBSet(s);for(r<<=a-1;Oe.findMSBSet(r)>=a;)r^=s<<Oe.findMSBSet(r)-a;return r}static makeTypeInfoBits(r,s,a){if(!ys.isValidMaskPattern(s))throw new lt("Invalid mask pattern");const c=r.getBits()<<3|s;a.appendBits(c,5);const u=Oe.calculateBCHCode(c,Oe.TYPE_INFO_POLY);a.appendBits(u,10);const h=new D;if(h.appendBits(Oe.TYPE_INFO_MASK_PATTERN,15),a.xor(h),a.getSize()!==15)throw new lt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const a=Oe.calculateBCHCode(r.getVersionNumber(),Oe.VERSION_INFO_POLY);if(s.appendBits(a,12),s.getSize()!==18)throw new lt("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const a=(s+1)%2;Oe.isEmpty(r.get(s,6))&&r.setNumber(s,6,a),Oe.isEmpty(r.get(6,s))&&r.setNumber(6,s,a)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new lt;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,a){for(let c=0;c<8;++c){if(!Oe.isEmpty(a.get(r+c,s)))throw new lt;a.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,a){for(let c=0;c<7;++c){if(!Oe.isEmpty(a.get(r,s+c)))throw new lt;a.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,a){for(let c=0;c<5;++c){const u=Oe.POSITION_ADJUSTMENT_PATTERN[c];for(let h=0;h<5;++h)a.setNumber(r+h,s+c,u[h])}}static embedPositionDetectionPattern(r,s,a){for(let c=0;c<7;++c){const u=Oe.POSITION_DETECTION_PATTERN[c];for(let h=0;h<7;++h)a.setNumber(r+h,s+c,u[h])}}static embedPositionDetectionPatternsAndSeparators(r){const s=Oe.POSITION_DETECTION_PATTERN[0].length;Oe.embedPositionDetectionPattern(0,0,r),Oe.embedPositionDetectionPattern(r.getWidth()-s,0,r),Oe.embedPositionDetectionPattern(0,r.getWidth()-s,r);const a=8;Oe.embedHorizontalSeparationPattern(0,a-1,r),Oe.embedHorizontalSeparationPattern(r.getWidth()-a,a-1,r),Oe.embedHorizontalSeparationPattern(0,r.getWidth()-a,r);const c=7;Oe.embedVerticalSeparationPattern(c,0,r),Oe.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),Oe.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const a=r.getVersionNumber()-1,c=Oe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,h=c.length;u!==h;u++){const f=c[u];if(f>=0)for(let w=0;w!==h;w++){const x=c[w];x>=0&&Oe.isEmpty(s.get(x,f))&&Oe.embedPositionAdjustmentPattern(x-2,f-2,s)}}}}Oe.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Oe.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Oe.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Oe.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Oe.VERSION_INFO_POLY=7973,Oe.TYPE_INFO_POLY=1335,Oe.TYPE_INFO_MASK_PATTERN=21522;class dv{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class gt{constructor(){}static calculateMaskPenalty(r){return Ot.applyMaskPenaltyRule1(r)+Ot.applyMaskPenaltyRule2(r)+Ot.applyMaskPenaltyRule3(r)+Ot.applyMaskPenaltyRule4(r)}static encode(r,s,a=null){let c=gt.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(Kt.CHARACTER_SET)!==void 0;u&&(c=a.get(Kt.CHARACTER_SET).toString());const h=this.chooseMode(r,c),f=new D;if(h===Re.BYTE&&(u||gt.DEFAULT_BYTE_MODE_ENCODING!==c)){const ue=W.getCharacterSetECIByName(c);ue!==void 0&&this.appendECI(ue,f)}this.appendModeInfo(h,f);const w=new D;this.appendBytes(r,h,w,c);let x;if(a!==null&&a.get(Kt.QR_VERSION)!==void 0){const ue=Number.parseInt(a.get(Kt.QR_VERSION).toString(),10);x=be.getVersionForNumber(ue);const ie=this.calculateBitsNeeded(h,f,w,x);if(!this.willFit(ie,x,s))throw new lt("Data too big for requested version")}else x=this.recommendVersion(s,h,f,w);const b=new D;b.appendBitArray(f);const R=h===Re.BYTE?w.getSizeInBytes():r.length;this.appendLengthInfo(R,x,h,b),b.appendBitArray(w);const k=x.getECBlocksForLevel(s),L=x.getTotalCodewords()-k.getTotalECCodewords();this.terminateBits(L,b);const j=this.interleaveWithECBytes(b,x.getTotalCodewords(),L,k.getNumBlocks()),V=new ys;V.setECLevel(s),V.setMode(h),V.setVersion(x);const $=x.getDimensionForVersion(),Y=new jl($,$),ae=this.chooseMaskPattern(j,s,x,Y);return V.setMaskPattern(ae),Oe.buildMatrix(j,s,x,ae,Y),V.setMatrix(Y),V}static recommendVersion(r,s,a,c){const u=this.calculateBitsNeeded(s,a,c,be.getVersionForNumber(1)),h=this.chooseVersion(u,r),f=this.calculateBitsNeeded(s,a,c,h);return this.chooseVersion(f,r)}static calculateBitsNeeded(r,s,a,c){return s.getSize()+r.getCharacterCountBits(c)+a.getSize()}static getAlphanumericCode(r){return r<gt.ALPHANUMERIC_TABLE.length?gt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(W.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return Re.KANJI;let a=!1,c=!1;for(let u=0,h=r.length;u<h;++u){const f=r.charAt(u);if(gt.isDigit(f))a=!0;else if(this.getAlphanumericCode(f.charCodeAt(0))!==-1)c=!0;else return Re.BYTE}return c?Re.ALPHANUMERIC:a?Re.NUMERIC:Re.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=he.encode(r,W.SJIS)}catch{return!1}const a=s.length;if(a%2!==0)return!1;for(let c=0;c<a;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,a,c){let u=Number.MAX_SAFE_INTEGER,h=-1;for(let f=0;f<ys.NUM_MASK_PATTERNS;f++){Oe.buildMatrix(r,s,a,f,c);let w=this.calculateMaskPenalty(c);w<u&&(u=w,h=f)}return h}static chooseVersion(r,s){for(let a=1;a<=40;a++){const c=be.getVersionForNumber(a);if(gt.willFit(r,c,s))return c}throw new lt("Data too big")}static willFit(r,s,a){const c=s.getTotalCodewords(),h=s.getECBlocksForLevel(a).getTotalECCodewords(),f=c-h,w=(r+7)/8;return f>=w}static terminateBits(r,s){const a=r*8;if(s.getSize()>a)throw new lt("data bits cannot fit in the QR Code"+s.getSize()+" > "+a);for(let h=0;h<4&&s.getSize()<a;++h)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let h=c;h<8;h++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let h=0;h<u;++h)s.appendBits(h&1?17:236,8);if(s.getSize()!==a)throw new lt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,a,c,u,h){if(c>=a)throw new lt("Block ID too large");const f=r%a,w=a-f,x=Math.floor(r/a),b=x+1,R=Math.floor(s/a),k=R+1,L=x-R,j=b-k;if(L!==j)throw new lt("EC bytes mismatch");if(a!==w+f)throw new lt("RS blocks mismatch");if(r!==(R+L)*w+(k+j)*f)throw new lt("Total bytes mismatch");c<w?(u[0]=R,h[0]=L):(u[0]=k,h[0]=j)}static interleaveWithECBytes(r,s,a,c){if(r.getSizeInBytes()!==a)throw new lt("Number of bits and data bytes does not match");let u=0,h=0,f=0;const w=new Array;for(let b=0;b<c;++b){const R=new Int32Array(1),k=new Int32Array(1);gt.getNumDataBytesAndNumECBytesForBlockID(s,a,c,b,R,k);const L=R[0],j=new Uint8Array(L);r.toBytes(8*u,j,0,L);const V=gt.generateECBytes(j,k[0]);w.push(new dv(j,V)),h=Math.max(h,L),f=Math.max(f,V.length),u+=R[0]}if(a!==u)throw new lt("Data bytes does not match offset");const x=new D;for(let b=0;b<h;++b)for(const R of w){const k=R.getDataBytes();b<k.length&&x.appendBits(k[b],8)}for(let b=0;b<f;++b)for(const R of w){const k=R.getErrorCorrectionBytes();b<k.length&&x.appendBits(k[b],8)}if(s!==x.getSizeInBytes())throw new lt("Interleaving error: "+s+" and "+x.getSizeInBytes()+" differ.");return x}static generateECBytes(r,s){const a=r.length,c=new Int32Array(a+s);for(let h=0;h<a;h++)c[h]=r[h]&255;new ad(Le.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let h=0;h<s;h++)u[h]=c[a+h];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,a,c){const u=a.getCharacterCountBits(s);if(r>=1<<u)throw new lt(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,a,c){switch(s){case Re.NUMERIC:gt.appendNumericBytes(r,a);break;case Re.ALPHANUMERIC:gt.appendAlphanumericBytes(r,a);break;case Re.BYTE:gt.append8BitBytes(r,a,c);break;case Re.KANJI:gt.appendKanjiBytes(r,a);break;default:throw new lt("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=gt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=gt.getDigit(r.charAt(c));if(c+2<a){const h=gt.getDigit(r.charAt(c+1)),f=gt.getDigit(r.charAt(c+2));s.appendBits(u*100+h*10+f,10),c+=3}else if(c+1<a){const h=gt.getDigit(r.charAt(c+1));s.appendBits(u*10+h,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const a=r.length;let c=0;for(;c<a;){const u=gt.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new lt;if(c+1<a){const h=gt.getAlphanumericCode(r.charCodeAt(c+1));if(h===-1)throw new lt;s.appendBits(u*45+h,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,a){let c;try{c=he.encode(r,a)}catch(u){throw new lt(u)}for(let u=0,h=c.length;u!==h;u++){const f=c[u];s.appendBits(f,8)}}static appendKanjiBytes(r,s){let a;try{a=he.encode(r,W.SJIS)}catch(u){throw new lt(u)}const c=a.length;for(let u=0;u<c;u+=2){const h=a[u]&255,f=a[u+1]&255,w=h<<8&4294967295|f;let x=-1;if(w>=33088&&w<=40956?x=w-33088:w>=57408&&w<=60351&&(x=w-49472),x===-1)throw new lt("Invalid byte sequence");const b=(x>>8)*192+(x&255);s.appendBits(b,13)}}static appendECI(r,s){s.appendBits(Re.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}gt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),gt.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class xs{write(r,s,a,c=null){if(r.length===0)throw new v("Found empty contents");if(s<0||a<0)throw new v("Requested dimensions are too small: "+s+"x"+a);let u=dt.L,h=xs.QUIET_ZONE_SIZE;c!==null&&(c.get(Kt.ERROR_CORRECTION)!==void 0&&(u=dt.fromString(c.get(Kt.ERROR_CORRECTION).toString())),c.get(Kt.MARGIN)!==void 0&&(h=Number.parseInt(c.get(Kt.MARGIN).toString(),10)));const f=gt.encode(r,u,c);return this.renderResult(f,s,a,h)}writeToDom(r,s,a,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const h=this.write(s,a,c,u);r&&r.appendChild(h)}renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new Ie;const h=u.getWidth(),f=u.getHeight(),w=h+c*2,x=f+c*2,b=Math.max(s,w),R=Math.max(a,x),k=Math.min(Math.floor(b/w),Math.floor(R/x)),L=Math.floor((b-h*k)/2),j=Math.floor((R-f*k)/2),V=this.createSVGElement(b,R);for(let $=0,Y=j;$<f;$++,Y+=k)for(let ae=0,ue=L;ae<h;ae++,ue+=k)if(u.get(ae,$)===1){const ie=this.createSvgRectElement(ue,Y,k,k);V.appendChild(ie)}return V}createSVGElement(r,s){const a=document.createElementNS(xs.SVG_NS,"svg");return a.setAttributeNS(null,"height",r.toString()),a.setAttributeNS(null,"width",s.toString()),a}createSvgRectElement(r,s,a,c){const u=document.createElementNS(xs.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}xs.QUIET_ZONE_SIZE=4,xs.SVG_NS="http://www.w3.org/2000/svg";class to{encode(r,s,a,c,u){if(r.length===0)throw new v("Found empty contents");if(s!==me.QR_CODE)throw new v("Can only encode QR_CODE, but got "+s);if(a<0||c<0)throw new v(`Requested dimensions are too small: ${a}x${c}`);let h=dt.L,f=to.QUIET_ZONE_SIZE;u!==null&&(u.get(Kt.ERROR_CORRECTION)!==void 0&&(h=dt.fromString(u.get(Kt.ERROR_CORRECTION).toString())),u.get(Kt.MARGIN)!==void 0&&(f=Number.parseInt(u.get(Kt.MARGIN).toString(),10)));const w=gt.encode(r,h,u);return to.renderResult(w,a,c,f)}static renderResult(r,s,a,c){const u=r.getMatrix();if(u===null)throw new Ie;const h=u.getWidth(),f=u.getHeight(),w=h+c*2,x=f+c*2,b=Math.max(s,w),R=Math.max(a,x),k=Math.min(Math.floor(b/w),Math.floor(R/x)),L=Math.floor((b-h*k)/2),j=Math.floor((R-f*k)/2),V=new te(b,R);for(let $=0,Y=j;$<f;$++,Y+=k)for(let ae=0,ue=L;ae<h;ae++,ue+=k)u.get(ae,$)===1&&V.setRegion(ue,Y,k,k);return V}}to.QUIET_ZONE_SIZE=4;class hv{encode(r,s,a,c,u){let h;switch(s){case me.QR_CODE:h=new to;break;default:throw new v("No encoder available for format "+s)}return h.encode(r,s,a,c,u)}}class Hr extends q{constructor(r,s,a,c,u,h,f,w){if(super(h,f),this.yuvData=r,this.dataWidth=s,this.dataHeight=a,this.left=c,this.top=u,c+h>s||u+f>a)throw new v("Crop rectangle does not fit within image data.");w&&this.reverseHorizontal(h,f)}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return A.arraycopy(this.yuvData,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return A.arraycopy(this.yuvData,u,c,0,a),c;for(let h=0;h<s;h++){const f=h*r;A.arraycopy(this.yuvData,u,c,f,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new Hr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,a,c,!1)}renderThumbnail(){const r=this.getWidth()/Hr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/Hr.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let h=0;h<s;h++){const f=h*r;for(let w=0;w<r;w++){const x=c[u+w*Hr.THUMBNAIL_SCALE_FACTOR]&255;a[f+w]=4278190080|x*65793}u+=this.dataWidth*Hr.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Hr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Hr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const a=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const h=u+r/2;for(let f=u,w=u+r-1;f<h;f++,w--){const x=a[f];a[f]=a[w],a[w]=x}}}invert(){return new Z(this)}}Hr.THUMBNAIL_SCALE_FACTOR=2;class ld extends q{constructor(r,s,a,c,u,h,f){if(super(s,a),this.dataWidth=c,this.dataHeight=u,this.left=h,this.top=f,r.BYTES_PER_ELEMENT===4){const w=s*a,x=new Uint8ClampedArray(w);for(let b=0;b<w;b++){const R=r[b],k=R>>16&255,L=R>>7&510,j=R&255;x[b]=(k+L+j)/4&255}this.luminances=x}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=a),h===void 0&&(this.left=0),f===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+a>this.dataHeight)throw new v("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new v("Requested row is outside the image: "+r);const a=this.getWidth();(s==null||s.length<a)&&(s=new Uint8ClampedArray(a));const c=(r+this.top)*this.dataWidth+this.left;return A.arraycopy(this.luminances,c,s,0,a),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const a=r*s,c=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return A.arraycopy(this.luminances,u,c,0,a),c;for(let h=0;h<s;h++){const f=h*r;A.arraycopy(this.luminances,u,c,f,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,a,c){return new ld(this.luminances,a,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new Z(this)}}class s1 extends W{static forName(r){return this.getCharacterSetECIByName(r)}}class cd{}cd.ISO_8859_1=W.ISO8859_1;class o1{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class a1{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class fv{constructor(r){this.previous=r}getPrevious(){return this.previous}}class no extends fv{constructor(r,s,a){super(r),this.value=s,this.bitCount=a}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new no(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new no(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+_.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class ud extends no{constructor(r,s,a){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=a}appendTo(r,s){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):a===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+a],8)}addBinaryShift(r,s){return new ud(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function pv(I,r,s){return new ud(I,r,s)}function wa(I,r,s){return new no(I,r,s)}const gv=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Pi=0,Ul=1,hr=2,l1=3,$r=4,mv=new no(null,0,0),dd=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function wv(I){for(let r of I)S.fill(r,-1);return I[Pi][$r]=0,I[Ul][$r]=0,I[Ul][Pi]=28,I[l1][$r]=0,I[hr][$r]=0,I[hr][Pi]=15,I}const c1=wv(S.createInt32Array(6,6));class Gr{constructor(r,s,a,c){this.token=r,this.mode=s,this.binaryShiftByteCount=a,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let a=this.bitCount,c=this.token;if(r!==this.mode){let h=dd[this.mode][r];c=wa(c,h&65535,h>>16),a+=h>>16}let u=r===hr?4:5;return c=wa(c,s,u),new Gr(c,r,0,a+u)}shiftAndAppend(r,s){let a=this.token,c=this.mode===hr?4:5;return a=wa(a,c1[this.mode][r],c),a=wa(a,s,5),new Gr(a,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,a=this.mode,c=this.bitCount;if(this.mode===$r||this.mode===hr){let f=dd[a][Pi];s=wa(s,f&65535,f>>16),c+=f>>16,a=Pi}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,h=new Gr(s,a,this.binaryShiftByteCount+1,c+u);return h.binaryShiftByteCount===2078&&(h=h.endBinaryShift(r+1)),h}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=pv(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new Gr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(dd[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=Gr.calculateBinaryShiftCost(r)-Gr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let a=new D;for(const c of s)c.appendTo(a,r);return a}toString(){return Q.format("%s bits=%d bytes=%d",gv[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}Gr.INITIAL_STATE=new Gr(mv,Pi,0,0);function yv(I){const r=Q.getCharCode(" "),s=Q.getCharCode("."),a=Q.getCharCode(",");I[Pi][r]=1;const c=Q.getCharCode("Z"),u=Q.getCharCode("A");for(let k=u;k<=c;k++)I[Pi][k]=k-u+2;I[Ul][r]=1;const h=Q.getCharCode("z"),f=Q.getCharCode("a");for(let k=f;k<=h;k++)I[Ul][k]=k-f+2;I[hr][r]=1;const w=Q.getCharCode("9"),x=Q.getCharCode("0");for(let k=x;k<=w;k++)I[hr][k]=k-x+2;I[hr][a]=12,I[hr][s]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let k=0;k<b.length;k++)I[l1][Q.getCharCode(b[k])]=k;const R=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let k=0;k<R.length;k++)Q.getCharCode(R[k])>0&&(I[$r][Q.getCharCode(R[k])]=k);return I}const hd=yv(S.createInt32Array(5,256));class ya{constructor(r){this.text=r}encode(){const r=Q.getCharCode(" "),s=Q.getCharCode(`
`);let a=a1.singletonList(Gr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let h,f=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case Q.getCharCode("\r"):h=f===s?2:0;break;case Q.getCharCode("."):h=f===r?3:0;break;case Q.getCharCode(","):h=f===r?4:0;break;case Q.getCharCode(":"):h=f===r?5:0;break;default:h=0}h>0?(a=ya.updateStateListForPair(a,u,h),u++):a=this.updateStateListForChar(a,u)}return a1.min(a,(u,h)=>u.getBitCount()-h.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const a=[];for(let c of r)this.updateStateForChar(c,s,a);return ya.simplifyStates(a)}updateStateForChar(r,s,a){let c=this.text[s]&255,u=hd[r.getMode()][c]>0,h=null;for(let f=0;f<=$r;f++){let w=hd[f][c];if(w>0){if(h==null&&(h=r.endBinaryShift(s)),!u||f===r.getMode()||f===hr){const x=h.latchAndAppend(f,w);a.push(x)}if(!u&&c1[r.getMode()][f]>=0){const x=h.shiftAndAppend(f,w);a.push(x)}}}if(r.getBinaryShiftByteCount()>0||hd[r.getMode()][c]===0){let f=r.addBinaryShiftChar(s);a.push(f)}}static updateStateListForPair(r,s,a){const c=[];for(let u of r)this.updateStateForPair(u,s,a,c);return this.simplifyStates(c)}static updateStateForPair(r,s,a,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend($r,a)),r.getMode()!==$r&&c.push(u.shiftAndAppend($r,a)),a===3||a===4){let h=u.latchAndAppend(hr,16-a).latchAndAppend(hr,1);c.push(h)}if(r.getBinaryShiftByteCount()>0){let h=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(h)}}static simplifyStates(r){let s=[];for(const a of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(a)){c=!1;break}a.isBetterThanOrEqualTo(u)&&(s=s.filter(h=>h!==u))}c&&s.push(a)}return s}}class Qe{constructor(){}static encodeBytes(r){return Qe.encode(r,Qe.DEFAULT_EC_PERCENT,Qe.DEFAULT_AZTEC_LAYERS)}static encode(r,s,a){let c=new ya(r).encode(),u=_.truncDivision(c.getSize()*s,100)+11,h=c.getSize()+u,f,w,x,b,R;if(a!==Qe.DEFAULT_AZTEC_LAYERS){if(f=a<0,w=Math.abs(a),w>(f?Qe.MAX_NB_BITS_COMPACT:Qe.MAX_NB_BITS))throw new v(Q.format("Illegal value %s for layers",a));x=Qe.totalBitsInLayer(w,f),b=Qe.WORD_SIZE[w];let ie=x-x%b;if(R=Qe.stuffBits(c,b),R.getSize()+u>ie)throw new v("Data to large for user specified layer");if(f&&R.getSize()>b*64)throw new v("Data to large for user specified layer")}else{b=0,R=null;for(let ie=0;;ie++){if(ie>Qe.MAX_NB_BITS)throw new v("Data too large for an Aztec code");if(f=ie<=3,w=f?ie+1:ie,x=Qe.totalBitsInLayer(w,f),h>x)continue;(R==null||b!==Qe.WORD_SIZE[w])&&(b=Qe.WORD_SIZE[w],R=Qe.stuffBits(c,b));let $e=x-x%b;if(!(f&&R.getSize()>b*64)&&R.getSize()+u<=$e)break}}let k=Qe.generateCheckWords(R,x,b),L=R.getSize()/b,j=Qe.generateModeMessage(f,w,L),V=(f?11:14)+w*4,$=new Int32Array(V),Y;if(f){Y=V;for(let ie=0;ie<$.length;ie++)$[ie]=ie}else{Y=V+1+2*_.truncDivision(_.truncDivision(V,2)-1,15);let ie=_.truncDivision(V,2),$e=_.truncDivision(Y,2);for(let Be=0;Be<ie;Be++){let Fn=Be+_.truncDivision(Be,15);$[ie-Be-1]=$e-Fn-1,$[ie+Be]=$e+Fn+1}}let ae=new te(Y);for(let ie=0,$e=0;ie<w;ie++){let Be=(w-ie)*4+(f?9:12);for(let Fn=0;Fn<Be;Fn++){let Cr=Fn*2;for(let jn=0;jn<2;jn++)k.get($e+Cr+jn)&&ae.set($[ie*2+jn],$[ie*2+Fn]),k.get($e+Be*2+Cr+jn)&&ae.set($[ie*2+Fn],$[V-1-ie*2-jn]),k.get($e+Be*4+Cr+jn)&&ae.set($[V-1-ie*2-jn],$[V-1-ie*2-Fn]),k.get($e+Be*6+Cr+jn)&&ae.set($[V-1-ie*2-Fn],$[ie*2+jn])}$e+=Be*8}if(Qe.drawModeMessage(ae,f,Y,j),f)Qe.drawBullsEye(ae,_.truncDivision(Y,2),5);else{Qe.drawBullsEye(ae,_.truncDivision(Y,2),7);for(let ie=0,$e=0;ie<_.truncDivision(V,2)-1;ie+=15,$e+=16)for(let Be=_.truncDivision(Y,2)&1;Be<Y;Be+=2)ae.set(_.truncDivision(Y,2)-$e,Be),ae.set(_.truncDivision(Y,2)+$e,Be),ae.set(Be,_.truncDivision(Y,2)-$e),ae.set(Be,_.truncDivision(Y,2)+$e)}let ue=new o1;return ue.setCompact(f),ue.setSize(Y),ue.setLayers(w),ue.setCodeWords(L),ue.setMatrix(ae),ue}static drawBullsEye(r,s,a){for(let c=0;c<a;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-a,s-a),r.set(s-a+1,s-a),r.set(s-a,s-a+1),r.set(s+a,s-a),r.set(s+a,s-a+1),r.set(s+a,s+a-1)}static generateModeMessage(r,s,a){let c=new D;return r?(c.appendBits(s-1,2),c.appendBits(a-1,6),c=Qe.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(a-1,11),c=Qe.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,a,c){let u=_.truncDivision(a,2);if(s)for(let h=0;h<7;h++){let f=u-3+h;c.get(h)&&r.set(f,u-5),c.get(h+7)&&r.set(u+5,f),c.get(20-h)&&r.set(f,u+5),c.get(27-h)&&r.set(u-5,f)}else for(let h=0;h<10;h++){let f=u-5+h+_.truncDivision(h,5);c.get(h)&&r.set(f,u-7),c.get(h+10)&&r.set(u+7,f),c.get(29-h)&&r.set(f,u+7),c.get(39-h)&&r.set(u-7,f)}}static generateCheckWords(r,s,a){let c=r.getSize()/a,u=new ad(Qe.getGF(a)),h=_.truncDivision(s,a),f=Qe.bitsToWords(r,a,h);u.encode(f,h-c);let w=s%a,x=new D;x.appendBits(0,w);for(const b of Array.from(f))x.appendBits(b,a);return x}static bitsToWords(r,s,a){let c=new Int32Array(a),u,h;for(u=0,h=r.getSize()/s;u<h;u++){let f=0;for(let w=0;w<s;w++)f|=r.get(u*s+w)?1<<s-w-1:0;c[u]=f}return c}static getGF(r){switch(r){case 4:return Le.AZTEC_PARAM;case 6:return Le.AZTEC_DATA_6;case 8:return Le.AZTEC_DATA_8;case 10:return Le.AZTEC_DATA_10;case 12:return Le.AZTEC_DATA_12;default:throw new v("Unsupported word size "+r)}}static stuffBits(r,s){let a=new D,c=r.getSize(),u=(1<<s)-2;for(let h=0;h<c;h+=s){let f=0;for(let w=0;w<s;w++)(h+w>=c||r.get(h+w))&&(f|=1<<s-1-w);(f&u)===u?(a.appendBits(f&u,s),h--):f&u?a.appendBits(f,s):(a.appendBits(f|1,s),h--)}return a}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Qe.DEFAULT_EC_PERCENT=33,Qe.DEFAULT_AZTEC_LAYERS=0,Qe.MAX_NB_BITS=32,Qe.MAX_NB_BITS_COMPACT=4,Qe.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class zl{encode(r,s,a,c){return this.encodeWithHints(r,s,a,c,null)}encodeWithHints(r,s,a,c,u){let h=cd.ISO_8859_1,f=Qe.DEFAULT_EC_PERCENT,w=Qe.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Kt.CHARACTER_SET)&&(h=s1.forName(u.get(Kt.CHARACTER_SET).toString())),u.has(Kt.ERROR_CORRECTION)&&(f=_.parseInt(u.get(Kt.ERROR_CORRECTION).toString())),u.has(Kt.AZTEC_LAYERS)&&(w=_.parseInt(u.get(Kt.AZTEC_LAYERS).toString()))),zl.encodeLayers(r,s,a,c,h,f,w)}static encodeLayers(r,s,a,c,u,h,f){if(s!==me.AZTEC)throw new v("Can only encode AZTEC, but got "+s);let w=Qe.encode(Q.getBytes(r,u),h,f);return zl.renderResult(w,a,c)}static renderResult(r,s,a){let c=r.getMatrix();if(c==null)throw new Ie;let u=c.getWidth(),h=c.getHeight(),f=Math.max(s,u),w=Math.max(a,h),x=Math.min(f/u,w/h),b=(f-u*x)/2,R=(w-h*x)/2,k=new te(f,w);for(let L=0,j=R;L<h;L++,j+=x)for(let V=0,$=b;V<u;V++,$+=x)c.get(V,L)&&k.setRegion($,j,x,x);return k}}n.AbstractExpandedDecoder=Qu,n.ArgumentException=y,n.ArithmeticException=Sn,n.AztecCode=o1,n.AztecCodeReader=Ti,n.AztecCodeWriter=zl,n.AztecDecoder=De,n.AztecDetector=oi,n.AztecDetectorResult=Jt,n.AztecEncoder=Qe,n.AztecHighLevelEncoder=ya,n.AztecPoint=Ut,n.BarcodeFormat=me,n.Binarizer=T,n.BinaryBitmap=E,n.BitArray=D,n.BitMatrix=te,n.BitSource=td,n.BrowserAztecCodeReader=Ys,n.BrowserBarcodeReader=Yx,n.BrowserCodeReader=Te,n.BrowserDatamatrixCodeReader=Qx,n.BrowserMultiFormatReader=lv,n.BrowserPDF417Reader=cv,n.BrowserQRCodeReader=uv,n.BrowserQRCodeSvgWriter=xs,n.CharacterSetECI=W,n.ChecksumException=C,n.Code128Reader=le,n.Code39Reader=vt,n.DataMatrixDecodedBitStreamParser=Ri,n.DataMatrixReader=Oi,n.DecodeHintType=z,n.DecoderResult=gn,n.DefaultGridSampler=on,n.DetectorResult=Wt,n.EAN13Reader=vr,n.EncodeHintType=Kt,n.Exception=g,n.FormatException=F,n.GenericGF=Le,n.GenericGFPoly=pt,n.GlobalHistogramBinarizer=pe,n.GridSampler=Dn,n.GridSamplerInstance=Xn,n.HTMLCanvasElementLuminanceSource=de,n.HybridBinarizer=oe,n.ITFReader=Xe,n.IllegalArgumentException=v,n.IllegalStateException=Ie,n.InvertedLuminanceSource=Z,n.LuminanceSource=q,n.MathUtils=ve,n.MultiFormatOneDReader=Js,n.MultiFormatReader=i1,n.MultiFormatWriter=hv,n.NotFoundException=H,n.OneDReader=Je,n.PDF417DecodedBitStreamParser=X,n.PDF417DecoderErrorCorrection=Z0,n.PDF417Reader=ln,n.PDF417ResultMetadata=e1,n.PerspectiveTransform=Ye,n.PlanarYUVLuminanceSource=Hr,n.QRCodeByteMatrix=jl,n.QRCodeDataMask=ur,n.QRCodeDecodedBitStreamParser=At,n.QRCodeDecoderErrorCorrectionLevel=dt,n.QRCodeDecoderFormatInformation=yn,n.QRCodeEncoder=gt,n.QRCodeEncoderQRCode=ys,n.QRCodeMaskUtil=Ot,n.QRCodeMatrixUtil=Oe,n.QRCodeMode=Re,n.QRCodeReader=Ni,n.QRCodeVersion=be,n.QRCodeWriter=to,n.RGBLuminanceSource=ld,n.RSS14Reader=Rt,n.RSSExpandedReader=ee,n.ReaderException=Fl,n.ReedSolomonDecoder=ut,n.ReedSolomonEncoder=ad,n.ReedSolomonException=_e,n.Result=Ee,n.ResultMetadataType=ot,n.ResultPoint=ge,n.StringUtils=Q,n.UnsupportedOperationException=re,n.VideoInputDevice=Ae,n.WhiteRectangleDetector=Bt,n.WriterException=lt,n.ZXingArrays=S,n.ZXingCharset=s1,n.ZXingInteger=_,n.ZXingStandardCharsets=cd,n.ZXingStringBuilder=ce,n.ZXingStringEncoding=he,n.ZXingSystem=A,n.createAbstractExpandedDecoder=q0,Object.defineProperty(n,"__esModule",{value:!0})})})(_f,_f.exports);var yt=_f.exports;const RI=Sf(yt),OI=rm({__proto__:null,default:RI},[yt]);var jg=function(){function t(e,n,i){if(this.formatMap=new Map([[ye.QR_CODE,yt.BarcodeFormat.QR_CODE],[ye.AZTEC,yt.BarcodeFormat.AZTEC],[ye.CODABAR,yt.BarcodeFormat.CODABAR],[ye.CODE_39,yt.BarcodeFormat.CODE_39],[ye.CODE_93,yt.BarcodeFormat.CODE_93],[ye.CODE_128,yt.BarcodeFormat.CODE_128],[ye.DATA_MATRIX,yt.BarcodeFormat.DATA_MATRIX],[ye.MAXICODE,yt.BarcodeFormat.MAXICODE],[ye.ITF,yt.BarcodeFormat.ITF],[ye.EAN_13,yt.BarcodeFormat.EAN_13],[ye.EAN_8,yt.BarcodeFormat.EAN_8],[ye.PDF_417,yt.BarcodeFormat.PDF_417],[ye.RSS_14,yt.BarcodeFormat.RSS_14],[ye.RSS_EXPANDED,yt.BarcodeFormat.RSS_EXPANDED],[ye.UPC_A,yt.BarcodeFormat.UPC_A],[ye.UPC_E,yt.BarcodeFormat.UPC_E],[ye.UPC_EAN_EXTENSION,yt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!OI)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var o=this.createZXingFormats(e),l=new Map;l.set(yt.DecodeHintType.POSSIBLE_FORMATS,o),l.set(yt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,o){try{i(n.decode(e))}catch(l){o(l)}})},t.prototype.decode=function(e){var n=new yt.MultiFormatReader(this.verbose,this.hints),i=new yt.HTMLCanvasElementLuminanceSource(e),o=new yt.BinaryBitmap(new yt.HybridBinarizer(i)),l=n.decode(o);return{text:l.text,format:Mx.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),NI=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function m(y){try{g(i.next(y))}catch(v){d(v)}}function p(y){try{g(i.throw(y))}catch(v){d(v)}}function g(y){y.done?l(y.value):o(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},kI=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(i=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],o=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Ug=function(){function t(e,n,i){if(this.formatMap=new Map([[ye.QR_CODE,"qr_code"],[ye.AZTEC,"aztec"],[ye.CODABAR,"codabar"],[ye.CODE_39,"code_39"],[ye.CODE_93,"code_93"],[ye.CODE_128,"code_128"],[ye.DATA_MATRIX,"data_matrix"],[ye.ITF,"itf"],[ye.EAN_13,"ean_13"],[ye.EAN_8,"ean_8"],[ye.PDF_417,"pdf417"],[ye.UPC_A,"upc_a"],[ye.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var o=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(o),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return NI(this,void 0,void 0,function(){var n,i;return kI(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=o.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Mx.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,o=0,l=e;o<l.length;o++){var d=l[o],m=d.boundingBox.width*d.boundingBox.height;m>i&&(i=m,n=d)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,o=e;i<o.length;i++){var l=o[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,o){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),zg=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function m(y){try{g(i.next(y))}catch(v){d(v)}}function p(y){try{g(i.throw(y))}catch(v){d(v)}}function g(y){y.done?l(y.value):o(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},Vg=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(i=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],o=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},PI=function(){function t(e,n,i,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&Ug.isSupported()?(this.primaryDecoder=new Ug(e,i,o),this.secondaryDecoder=new jg(e,i,o)):this.primaryDecoder=new jg(e,i,o)}return t.prototype.decodeAsync=function(e){return zg(this,void 0,void 0,function(){var n;return Vg(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return zg(this,void 0,void 0,function(){var n,i;return Vg(this,function(o){switch(o.label){case 0:n=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,o.sent()];case 3:if(i=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var o=i[n];e+=o}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),K0=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),gu=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function m(y){try{g(i.next(y))}catch(v){d(v)}}function p(y){try{g(i.throw(y))}catch(v){d(v)}}function g(y){y.done?l(y.value):o(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},mu=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(i=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],o=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Bx=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),DI=function(t){K0(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var o={advanced:[i]};return this.track.applyConstraints(o)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(Bx),MI=function(t){K0(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(DI),LI=function(t){K0(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(Bx),BI=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new MI(this.track)},t.prototype.torchFeature=function(){return new LI(this.track)},t}(),FI=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,o=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,o),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,o){return gu(this,void 0,void 0,function(){var l,d;return mu(this,function(m){switch(m.label){case 0:return l=new t(e,n,o),i.aspectRatio?(d={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(d)]):[3,2];case 1:m.sent(),m.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return gu(this,void 0,void 0,function(){return mu(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var o=e.mediaStream.getVideoTracks(),l=o.length,d=0;e.mediaStream.getVideoTracks().forEach(function(m){e.mediaStream.removeTrack(m),m.stop(),++d,d>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new BI(this.getFirstTrackOrFail())},t}(),jI=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return gu(this,void 0,void 0,function(){return mu(this,function(o){return[2,FI.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return gu(this,void 0,void 0,function(){var n,i;return mu(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=o.sent(),[2,new t(i)]}})})},t}(),Wg=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function m(y){try{g(i.next(y))}catch(v){d(v)}}function p(y){try{g(i.throw(y))}catch(v){d(v)}}function g(y){y.done?l(y.value):o(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},Hg=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(i=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],o=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},UI=function(){function t(){}return t.failIfNotSupported=function(){return Wg(this,void 0,void 0,function(){return Hg(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return Wg(this,void 0,void 0,function(){return Hg(this,function(n){return[2,jI.create(e)]})})},t}(),zI=function(t,e,n,i){function o(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function m(y){try{g(i.next(y))}catch(v){d(v)}}function p(y){try{g(i.throw(y))}catch(v){d(v)}}function g(y){y.done?l(y.value):o(y.value).then(m,p)}g((i=i.apply(t,e||[])).next())})},VI=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,d;return d={next:m(0),throw:m(1),return:m(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function m(g){return function(y){return p([g,y])}}function p(g){if(i)throw new TypeError("Generator is already executing.");for(;d&&(d=0,g[0]&&(n=0)),n;)try{if(i=1,o&&(l=g[0]&2?o.return:g[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,g[1])).done)return l;switch(o=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,o=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],o=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},WI=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=Oo.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=Oo.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return zI(this,void 0,void 0,function(){var e,n,i,o,l,d,m;return VI(this,function(p){switch(p.label){case 0:return e=function(g){for(var y=g.getVideoTracks(),v=0,E=y;v<E.length;v++){var C=E[v];C.enabled=!1,C.stop(),g.removeTrack(C)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=p.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=p.sent(),o=[],l=0,d=i;l<d.length;l++)m=d[l],m.kind==="videoinput"&&o.push({id:m.deviceId,label:m.label});return e(n),[2,o]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var d=[],m=0,p=l;m<p.length;m++){var g=p[m];g.kind==="video"&&d.push({id:g.id,label:g.label})}e(d)},o=MediaStreamTrack;o.getSources(i)})},t}(),Pt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(Pt||(Pt={}));var HI=function(){function t(){this.state=Pt.NOT_STARTED,this.onGoingTransactionNewState=Pt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===Pt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=Pt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===Pt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=Pt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==Pt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case Pt.UNKNOWN:throw"Transition from unknown is not allowed";case Pt.NOT_STARTED:this.failIfNewStateIs(e,[Pt.PAUSED]);break;case Pt.SCANNING:break;case Pt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,o=n;i<o.length;i++){var l=o[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),$I=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===Pt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==Pt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===Pt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===Pt.PAUSED},t}(),GI=function(){function t(){}return t.create=function(){return new $I(new HI)},t}(),KI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,o){i.__proto__=o}||function(i,o){for(var l in o)Object.prototype.hasOwnProperty.call(o,l)&&(i[l]=o[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Qn=function(t){KI(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(SI),XI=function(){function t(e,n){this.logger=n,this.fps=Qn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Qn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Lx.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!ui(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),YI=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new II(this.verbose),this.qrcode=new PI(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=GI.create()}return t.prototype.start=function(e,n,i,o){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var d;o?d=o:d=this.verbose?this.logger.log:function(){};var m=XI.create(n,this.logger);this.clearElement();var p=!1;m.videoConstraints&&(m.isMediaStreamConstraintsValid()?p=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=p,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Qn.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var v=this,E=this.stateManagerProxy.startTransition(Pt.SCANNING);return new Promise(function(C,T){var A=g?m.videoConstraints:v.createVideoConstraints(e);if(!A){E.cancel(),T("videoConstraints should be defined");return}var N={};(!g||m.aspectRatio)&&(N.aspectRatio=m.aspectRatio);var O={onRenderSurfaceReady:function(S,_){v.setupUi(S,_,m),v.isScanning=!0,v.foreverScan(m,i,d)}};UI.failIfNotSupported().then(function(S){S.create(A).then(function(_){return _.render(l.element,N,O).then(function(D){v.renderedCamera=D,E.execute(),C(null)}).catch(function(D){E.cancel(),T(D)})}).catch(function(_){E.cancel(),T(Oo.errorGettingUserMedia(_))})}).catch(function(S){E.cancel(),T(Oo.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(Pt.PAUSED),this.showPausedState(),(ui(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(Pt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(Pt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Qn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),i(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),n.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ui(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var d=new Image;d.onload=function(){var m=d.width,p=d.height,g=document.getElementById(i.elementId),y=g.clientWidth?g.clientWidth:Qn.DEFAULT_WIDTH,v=Math.max(g.clientHeight?g.clientHeight:p,Qn.FILE_SCAN_MIN_HEIGHT),E=i.computeCanvasDrawConfig(m,p,y,v);if(n){var C=i.createCanvasElement(y,v,"qr-canvas-visible");C.style.display="inline-block",g.appendChild(C);var T=C.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=y,T.canvas.height=v,T.drawImage(d,0,0,m,p,E.x,E.y,E.width,E.height)}var A=Qn.FILE_SCAN_HIDDEN_CANVAS_PADDING,N=Math.max(d.width,E.width),O=Math.max(d.height,E.height),S=N+2*A,_=O+2*A,D=i.createCanvasElement(S,_);g.appendChild(D);var U=D.getContext("2d");if(!U)throw"Unable to get 2d context from canvas";U.canvas.width=S,U.canvas.height=_,U.drawImage(d,0,0,m,p,A,A,N,O);try{i.qrcode.decodeRobustlyAsync(D).then(function(z){o(Fg.createFromQrcodeResult(z))}).catch(l)}catch(z){l("QR code parse error, error = ".concat(z))}},d.onerror=l,d.onabort=l,d.onstalled=l,d.onsuspend=l,d.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return WI.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!Lx.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[ye.QR_CODE,ye.AZTEC,ye.CODABAR,ye.CODE_39,ye.CODE_93,ye.CODE_128,ye.DATA_MATRIX,ye.MAXICODE,ye.ITF,ye.EAN_13,ye.EAN_8,ye.PDF_417,ye.RSS_14,ye.RSS_EXPANDED,ye.UPC_A,ye.UPC_E,ye.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],o=0,l=e.formatsToSupport;o<l.length;o++){var d=l[o];_I(d)?i.push(d):this.logger.warn("Invalid format: ".concat(d," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(ui(e))return!0;if(!ui(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(ui(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return ui(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var o=this,l=i.qrbox;this.validateQrboxConfig(l);var d=this.toQrdimensions(e,n,l),m=function(g){if(g<Qn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Qn.MIN_QR_BOX_SIZE,"px.")},p=function(g){return g>e&&(o.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};m(d.width),m(d.height),d.width=p(d.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(o){throw new Error("qrbox config was passed as a function but it failed with unknown error"+o)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var o=ui(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(o);var l=this.toQrdimensions(e,n,o);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var d=i.isShadedBoxEnabled()&&l.height<=n,m={x:0,y:0,width:e,height:n},p=d?this.getShadedRegionBounds(e,n,l):m,g=this.createCanvasElement(p.width,p.height),y={willReadFrequently:!0},v=g.getContext("2d",y);v.canvas.width=p.width,v.canvas.height=p.height,this.element.append(g),d&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=p,this.context=v,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=Oo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(o){return e(o.text,Fg.createFromQrcodeResult(o)),i.possiblyUpdateShaders(!0),!0}).catch(function(o){i.possiblyUpdateShaders(!1);var l=Oo.codeParseError(o);return n(l,TI.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var o=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),d=l.videoWidth/l.clientWidth,m=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var p=this.qrRegion.width*d,g=this.qrRegion.height*m,y=this.qrRegion.x*d,v=this.qrRegion.y*m;this.context.drawImage(l,y,v,p,g,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(e,n,i)},o.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(C){!C&&e.disableFlip!==!0?(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(n,i).finally(function(){E()})):E()}).catch(function(C){o.logger.logError("Error happend while scanning context",C),E()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",o={user:!0,environment:!0},l="exact",d=function(T){if(T in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(T,"'")},m=Object.keys(e);if(m.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(m.length," keys");var p=Object.keys(e)[0];if(p!==n&&p!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(p===n){var g=e.facingMode;if(typeof g=="string"){if(d(g))return{facingMode:g}}else if(typeof g=="object")if(l in g){if(d(g["".concat(l)]))return{facingMode:{exact:g["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var y=typeof g;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var v=e.deviceId;if(typeof v=="string")return{deviceId:v};if(typeof v=="object"){if(l in v)return{deviceId:{exact:v["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var E=typeof v;throw"Invalid type of 'deviceId' = ".concat(E)}}}var C=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(C)},t.prototype.computeCanvasDrawConfig=function(e,n,i,o){if(e<=i&&n<=o){var l=(i-e)/2,d=(o-n)/2;return{x:l,y:d,width:e,height:n}}else{var m=e,p=n;return e>i&&(n=i/e*n,e=i),n>o&&(e=o/n*e,n=o),this.logger.log("Image downsampled from "+"".concat(m,"X").concat(p)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,o)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Qn.BORDER_SHADER_MATCH_COLOR:Qn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var o=e,l=n,d=document.createElement("canvas");return d.style.width="".concat(o,"px"),d.style.height="".concat(l,"px"),d.style.display="none",d.id=ui(i)?"qr-canvas":i,d},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,o){if(!(n-o.width<1||i-o.height<1)){var l=document.createElement("div");l.style.position="absolute";var d=(n-o.width)/2,m=(i-o.height)/2;if(l.style.borderLeft="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(d,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(m,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Qn.SHADED_REGION_ELEMENT_ID),n-o.width<11||i-o.height<11)this.hasBorderShaders=!1;else{var p=5,g=40;this.insertShaderBorders(l,g,p,-p,null,0,!0),this.insertShaderBorders(l,g,p,-p,null,0,!1),this.insertShaderBorders(l,g,p,null,-p,0,!0),this.insertShaderBorders(l,g,p,null,-p,0,!1),this.insertShaderBorders(l,p,g+p,-p,null,-p,!0),this.insertShaderBorders(l,p,g+p,null,-p,-p,!0),this.insertShaderBorders(l,p,g+p,-p,null,-p,!1),this.insertShaderBorders(l,p,g+p,null,-p,-p,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,o,l,d,m){var p=document.createElement("div");p.style.position="absolute",p.style.backgroundColor=Qn.BORDER_SHADER_DEFAULT_COLOR,p.style.width="".concat(n,"px"),p.style.height="".concat(i,"px"),o!==null&&(p.style.top="".concat(o,"px")),l!==null&&(p.style.bottom="".concat(l,"px")),m?p.style.left="".concat(d,"px"):p.style.right="".concat(d,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(p),e.appendChild(p)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),$g;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})($g||($g={}));function qI({onScan:t,onClose:e}){const[n,i]=P.useState(null),[o,l]=P.useState(!0),d=P.useRef(null),m=P.useRef(null);return P.useEffect(()=>{const p=new YI("qr-reader");return d.current=p,(async()=>{try{await p.start({facingMode:"environment"},{fps:10,qrbox:{width:250,height:250}},y=>{const v=y.match(/p2p:(\d{6})/);v?t(v[1]):/^\d{6}$/.test(y)&&t(y)},()=>{}),l(!1)}catch(y){console.error("Failed to start scanner:",y),i((y==null?void 0:y.message)||"Camera access denied"),l(!1)}})(),()=>{var y;(y=d.current)!=null&&y.isScanning&&d.current.stop().catch(console.error)}},[t]),B.jsx("div",{className:"fixed inset-0 z-50 bg-background/95 backdrop-blur-sm flex flex-col items-center justify-center p-4",children:B.jsxs("div",{className:"w-full max-w-sm",children:[B.jsxs("div",{className:"flex items-center justify-between mb-4",children:[B.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Scan QR Code"}),B.jsx(Jr,{variant:"ghost",size:"icon",onClick:e,children:B.jsx(I0,{className:"w-5 h-5"})})]}),n?B.jsxs("div",{className:"glass rounded-2xl p-8 text-center",children:[B.jsx(qb,{className:"w-12 h-12 mx-auto mb-4 text-destructive"}),B.jsx("p",{className:"text-foreground mb-2",children:"Camera Error"}),B.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:n}),B.jsx(Jr,{onClick:e,variant:"secondary",children:"Close"})]}):B.jsxs("div",{className:"relative",children:[B.jsx("div",{id:"qr-reader",ref:m,className:"rounded-2xl overflow-hidden bg-black"}),o&&B.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-2xl",children:B.jsxs("div",{className:"text-center",children:[B.jsx(Qb,{className:"w-8 h-8 mx-auto mb-2 text-primary animate-pulse"}),B.jsx("p",{className:"text-sm text-white",children:"Starting camera..."})]})})]}),B.jsx("p",{className:"text-xs text-muted-foreground text-center mt-4",children:"Point your camera at a QR code to connect"})]})})}function QI(){return Math.floor(1e5+Math.random()*9e5).toString()}function ZI({onConnected:t}){const[e,n]=P.useState("idle"),[i,o]=P.useState(""),[l,d]=P.useState(""),[m,p]=P.useState(""),[g,y]=P.useState(!1),[v,E]=P.useState(!0),[C,T]=P.useState(!1),A=async U=>{if(U.length!==6){Ir.error("Please enter a 6-digit PIN");return}n("joining");try{const{data:z,error:F}=await Na.from("rooms").select("*").eq("pin",U).maybeSingle();if(F)throw F;if(!z){Ir.error("Room not found"),n("idle");return}n("connecting");const{answer:K,publicKey:W}=await gi.handleOffer(z.offer,z.public_key);await Na.from("rooms").update({answer:K,peer_public_key:W}).eq("pin",U),gi.onMessage(re=>{re.type==="channelOpen"&&(Ir.success("Connected with E2E encryption!"),t())})}catch(z){console.error("Failed to join:",z),Ir.error("Failed to join room"),n("idle")}},N=U=>{T(!1),o(U),A(U)},O=async()=>{n("creating");try{const U=QI(),{offer:z,publicKey:F}=await gi.createOffer(),{error:K}=await Na.from("rooms").insert({pin:U,offer:z,public_key:F});if(K)throw K;d(U),p(F),n("waiting"),gi.onMessage(W=>{W.type==="channelOpen"&&(Ir.success("Connected with E2E encryption!"),t())})}catch(U){console.error("Failed to create room:",U),Ir.error("Failed to create room"),n("idle")}};P.useEffect(()=>{if(e!=="waiting"||!l)return;const U=Na.channel("room-updates").on("postgres_changes",{event:"UPDATE",schema:"public",table:"rooms",filter:`pin=eq.${l}`},async z=>{const{answer:F,peer_public_key:K}=z.new;if(F&&K)try{await gi.handleAnswer(F,K)}catch(W){console.error("Failed to handle answer:",W),Ir.error("Connection failed")}}).subscribe();return()=>{Na.removeChannel(U)}},[e,l]);const S=()=>A(i),_=()=>{navigator.clipboard.writeText(l),y(!0),Ir.success("PIN copied!"),setTimeout(()=>y(!1),2e3)},D=`p2p:${l}`;return e==="idle"?B.jsxs(B.Fragment,{children:[C&&B.jsx(qI,{onScan:N,onClose:()=>T(!1)}),B.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full mx-4",children:[B.jsx("h2",{className:"text-2xl font-semibold text-foreground mb-2 text-center",children:"Start Transfer"}),B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-6",children:[B.jsx(Tp,{className:"w-4 h-4 text-success"}),B.jsx("span",{className:"text-sm text-muted-foreground",children:"End-to-end encrypted"})]}),B.jsxs("div",{className:"space-y-6",children:[B.jsxs(Jr,{onClick:O,className:"w-full h-14 text-lg bg-primary hover:bg-primary/90 text-primary-foreground glow-primary transition-all",children:[B.jsx(r3,{className:"w-5 h-5 mr-2"}),"Create Room"]}),B.jsxs("div",{className:"relative",children:[B.jsx("div",{className:"absolute inset-0 flex items-center",children:B.jsx("div",{className:"w-full border-t border-border"})}),B.jsx("div",{className:"relative flex justify-center text-sm",children:B.jsx("span",{className:"px-4 bg-card text-muted-foreground",children:"or join with PIN"})})]}),B.jsxs("div",{className:"flex flex-col items-center gap-4",children:[B.jsx(nx,{maxLength:6,value:i,onChange:o,children:B.jsxs(rx,{children:[B.jsx(As,{index:0}),B.jsx(As,{index:1}),B.jsx(As,{index:2}),B.jsx(As,{index:3}),B.jsx(As,{index:4}),B.jsx(As,{index:5})]})}),B.jsxs("div",{className:"flex gap-2 w-full",children:[B.jsx(Jr,{onClick:()=>T(!0),variant:"outline",className:"h-12 px-4",children:B.jsx(s3,{className:"w-5 h-5"})}),B.jsx(Jr,{onClick:S,variant:"secondary",className:"flex-1 h-12",disabled:i.length!==6,children:"Join Room"})]})]})]})]})]}):e==="creating"||e==="joining"?B.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full mx-4 text-center",children:[B.jsx(Rc,{className:"w-12 h-12 mx-auto mb-4 text-primary animate-spin"}),B.jsx("p",{className:"text-foreground",children:e==="creating"?"Creating secure room...":"Joining room..."})]}):e==="waiting"?B.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full mx-4 text-center",children:[B.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4",children:[B.jsx(Tp,{className:"w-5 h-5 text-success"}),B.jsx("span",{className:"text-sm text-success font-medium",children:"E2E Encryption Ready"})]}),B.jsx("h2",{className:"text-xl font-semibold text-foreground mb-2",children:"Share to Connect"}),B.jsx("p",{className:"text-sm text-muted-foreground mb-6",children:"Scan QR or enter PIN to connect"}),B.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[B.jsxs(Jr,{variant:v?"default":"outline",size:"sm",onClick:()=>E(!0),children:[B.jsx(i3,{className:"w-4 h-4 mr-1"}),"QR Code"]}),B.jsx(Jr,{variant:v?"outline":"default",size:"sm",onClick:()=>E(!1),children:"PIN"})]}),v?B.jsx("div",{className:"bg-white p-4 rounded-xl inline-block mb-4",children:B.jsx(Dx,{value:D,size:180,level:"M",includeMargin:!1})}):B.jsxs("div",{onClick:_,className:"inline-flex items-center gap-3 bg-secondary/50 rounded-xl px-6 py-4 cursor-pointer hover:bg-secondary/70 transition-colors mb-4",children:[B.jsx("span",{className:"text-4xl font-mono font-bold text-primary tracking-widest",children:l}),g?B.jsx(Ky,{className:"w-6 h-6 text-green-500"}):B.jsx(e3,{className:"w-6 h-6 text-muted-foreground"})]}),B.jsxs("p",{className:"text-xs text-muted-foreground mb-4",children:["PIN: ",B.jsx("span",{className:"font-mono font-semibold",children:l})]}),B.jsxs("div",{className:"flex items-center justify-center gap-2 text-muted-foreground",children:[B.jsx(Rc,{className:"w-4 h-4 animate-spin"}),B.jsx("span",{className:"text-sm",children:"Waiting for peer..."})]})]}):B.jsxs("div",{className:"glass rounded-2xl p-8 max-w-md w-full mx-4 text-center",children:[B.jsx(Rc,{className:"w-12 h-12 mx-auto mb-4 text-primary animate-spin"}),B.jsx("p",{className:"text-foreground",children:"Establishing secure connection..."})]})}function JI({onFilesSelected:t,disabled:e}){const[n,i]=P.useState(!1),o=P.useCallback(g=>{g.preventDefault(),g.stopPropagation()},[]),l=P.useCallback(g=>{g.preventDefault(),g.stopPropagation(),g.dataTransfer.items&&g.dataTransfer.items.length>0&&i(!0)},[]),d=P.useCallback(g=>{g.preventDefault(),g.stopPropagation(),i(!1)},[]),m=P.useCallback(g=>{if(g.preventDefault(),g.stopPropagation(),i(!1),e)return;const y=Array.from(g.dataTransfer.files);y.length>0&&t(y)},[e,t]),p=g=>{g.target.files&&g.target.files.length>0&&t(Array.from(g.target.files))};return B.jsxs("div",{onDragEnter:l,onDragLeave:d,onDragOver:o,onDrop:m,className:_n("relative border-2 border-dashed rounded-2xl p-12 transition-all duration-300 cursor-pointer",n?"border-primary bg-primary/10 scale-[1.02]":"border-border hover:border-primary/50 hover:bg-secondary/30",e&&"opacity-50 cursor-not-allowed"),children:[B.jsx("input",{type:"file",multiple:!0,onChange:p,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:e}),B.jsxs("div",{className:"flex flex-col items-center gap-4 pointer-events-none",children:[B.jsx("div",{className:_n("w-16 h-16 rounded-full flex items-center justify-center transition-all",n?"bg-primary/20":"bg-secondary"),children:n?B.jsx(Xy,{className:"w-8 h-8 text-primary"}):B.jsx(a3,{className:"w-8 h-8 text-muted-foreground"})}),B.jsxs("div",{className:"text-center",children:[B.jsx("p",{className:"text-lg font-medium text-foreground",children:n?"Drop files here":"Drag & drop files"}),B.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"or click to browse"})]})]})]})}function eR(t,e=[]){let n=[];function i(l,d){const m=P.createContext(d);m.displayName=l+"Context";const p=n.length;n=[...n,d];const g=v=>{var O;const{scope:E,children:C,...T}=v,A=((O=E==null?void 0:E[t])==null?void 0:O[p])||m,N=P.useMemo(()=>T,Object.values(T));return B.jsx(A.Provider,{value:N,children:C})};g.displayName=l+"Provider";function y(v,E){var A;const C=((A=E==null?void 0:E[t])==null?void 0:A[p])||m,T=P.useContext(C);if(T)return T;if(d!==void 0)return d;throw new Error(`\`${v}\` must be used within \`${l}\``)}return[g,y]}const o=()=>{const l=n.map(d=>P.createContext(d));return function(m){const p=(m==null?void 0:m[t])||l;return P.useMemo(()=>({[`__scope${t}`]:{...m,[t]:p}}),[m,p])}};return o.scopeName=t,[i,tR(o,...e)]}function tR(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const d=i.reduce((m,{useScope:p,scopeName:g})=>{const v=p(l)[`__scope${g}`];return{...m,...v}},{});return P.useMemo(()=>({[`__scope${e.scopeName}`]:d}),[d])}};return n.scopeName=e.scopeName,n}var nR=Symbol.for("react.lazy"),wu=Nf[" use ".trim().toString()];function rR(t){return typeof t=="object"&&t!==null&&"then"in t}function Fx(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===nR&&"_payload"in t&&rR(t._payload)}function iR(t){const e=sR(t),n=P.forwardRef((i,o)=>{let{children:l,...d}=i;Fx(l)&&typeof wu=="function"&&(l=wu(l._payload));const m=P.Children.toArray(l),p=m.find(aR);if(p){const g=p.props.children,y=m.map(v=>v===p?P.Children.count(g)>1?P.Children.only(null):P.isValidElement(g)?g.props.children:null:v);return B.jsx(e,{...d,ref:o,children:P.isValidElement(g)?P.cloneElement(g,void 0,y):null})}return B.jsx(e,{...d,ref:o,children:l})});return n.displayName=`${t}.Slot`,n}function sR(t){const e=P.forwardRef((n,i)=>{let{children:o,...l}=n;if(Fx(o)&&typeof wu=="function"&&(o=wu(o._payload)),P.isValidElement(o)){const d=cR(o),m=lR(l,o.props);return o.type!==P.Fragment&&(m.ref=i?C0(i,d):d),P.cloneElement(o,m)}return P.Children.count(o)>1?P.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var oR=Symbol("radix.slottable");function aR(t){return P.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===oR}function lR(t,e){const n={...e};for(const i in e){const o=t[i],l=e[i];/^on[A-Z]/.test(i)?o&&l?n[i]=(...m)=>{const p=l(...m);return o(...m),p}:o&&(n[i]=o):i==="style"?n[i]={...o,...l}:i==="className"&&(n[i]=[o,l].filter(Boolean).join(" "))}return{...t,...n}}function cR(t){var i,o;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(o=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:o.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var uR=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],jx=uR.reduce((t,e)=>{const n=iR(`Primitive.${e}`),i=P.forwardRef((o,l)=>{const{asChild:d,...m}=o,p=d?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),B.jsx(p,{...m,ref:l})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),X0="Progress",Y0=100,[dR,kR]=eR(X0),[hR,fR]=dR(X0),Ux=P.forwardRef((t,e)=>{const{__scopeProgress:n,value:i=null,max:o,getValueLabel:l=pR,...d}=t;(o||o===0)&&!Gg(o)&&console.error(gR(`${o}`,"Progress"));const m=Gg(o)?o:Y0;i!==null&&!Kg(i,m)&&console.error(mR(`${i}`,"Progress"));const p=Kg(i,m)?i:null,g=yu(p)?l(p,m):void 0;return B.jsx(hR,{scope:n,value:p,max:m,children:B.jsx(jx.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":yu(p)?p:void 0,"aria-valuetext":g,role:"progressbar","data-state":Wx(p,m),"data-value":p??void 0,"data-max":m,...d,ref:e})})});Ux.displayName=X0;var zx="ProgressIndicator",Vx=P.forwardRef((t,e)=>{const{__scopeProgress:n,...i}=t,o=fR(zx,n);return B.jsx(jx.div,{"data-state":Wx(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:e})});Vx.displayName=zx;function pR(t,e){return`${Math.round(t/e*100)}%`}function Wx(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function yu(t){return typeof t=="number"}function Gg(t){return yu(t)&&!isNaN(t)&&t>0}function Kg(t,e){return yu(t)&&!isNaN(t)&&t<=e&&t>=0}function gR(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Y0}\`.`}function mR(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Y0} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Hx=Ux,wR=Vx;const $x=P.forwardRef(({className:t,value:e,...n},i)=>B.jsx(Hx,{ref:i,className:_n("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:B.jsx(wR,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));$x.displayName=Hx.displayName;function yR(t){if(t===0)return"0 B";const e=1024,n=["B","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,i)).toFixed(1))+" "+n[i]}function Xg({transfers:t,direction:e}){if(t.length===0)return null;const n=i=>{if(i.data){const o=URL.createObjectURL(i.data),l=document.createElement("a");l.href=o,l.download=i.name,l.click(),URL.revokeObjectURL(o)}};return B.jsxs("div",{className:"space-y-3",children:[B.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e==="sending"?B.jsx(Jb,{className:"w-4 h-4"}):B.jsx(Zb,{className:"w-4 h-4"}),B.jsx("span",{children:e==="sending"?"Sending":"Receiving"})]}),t.map(i=>B.jsxs("div",{className:"glass rounded-xl p-4 flex items-center gap-4",children:[B.jsx("div",{className:_n("w-10 h-10 rounded-lg flex items-center justify-center shrink-0",i.status==="completed"?"bg-success/20":"bg-secondary"),children:i.status==="completed"?B.jsx(Ky,{className:"w-5 h-5 text-success"}):i.status==="transferring"?B.jsx(Rc,{className:"w-5 h-5 text-primary animate-spin"}):B.jsx(Xy,{className:"w-5 h-5 text-muted-foreground"})}),B.jsxs("div",{className:"flex-1 min-w-0",children:[B.jsx("p",{className:"text-sm font-medium text-foreground truncate",children:i.name}),B.jsx("p",{className:"text-xs text-muted-foreground",children:yR(i.size)}),i.status==="transferring"&&B.jsx($x,{value:i.progress,className:"mt-2 h-1"})]}),i.status==="completed"&&e==="receiving"&&i.data&&B.jsx(Jr,{size:"icon",variant:"ghost",onClick:()=>n(i),className:"shrink-0",children:B.jsx(n3,{className:"w-4 h-4"})}),i.status==="transferring"&&B.jsxs("span",{className:"text-xs text-primary font-mono",children:[i.progress,"%"]})]},i.id))]})}function xR({onDisconnect:t}){const[e,n]=P.useState([]),[i,o]=P.useState([]),[l,d]=P.useState(!0);P.useEffect(()=>{const g=gi.onMessage(v=>{v.type==="connectionState"&&(v.state==="disconnected"||v.state==="failed")&&(d(!1),Ir.error("Peer disconnected")),v.type==="channelClose"&&d(!1)}),y=gi.onFile(v=>{v.data||!e.find(E=>E.id===v.id)?o(E=>{const C=E.findIndex(T=>T.id===v.id);if(C>=0){const T=[...E];return T[C]=v,T}return[...E,v]}):n(E=>{const C=E.findIndex(T=>T.id===v.id);if(C>=0){const T=[...E];return T[C]=v,T}return[...E,v]})});return()=>{g(),y()}},[e]);const m=P.useCallback(async g=>{for(const y of g)try{const v=crypto.randomUUID();n(E=>[...E,{id:v,name:y.name,size:y.size,type:y.type,progress:0,status:"pending"}]),await gi.sendFile(y),Ir.success(`Sent ${y.name}`)}catch(v){console.error("Failed to send file:",v),Ir.error(`Failed to send ${y.name}`)}},[]),p=()=>{gi.disconnect(),t()};return B.jsxs("div",{className:"glass rounded-2xl p-6 max-w-2xl w-full mx-4",children:[B.jsxs("div",{className:"flex items-center justify-between mb-6",children:[B.jsx("div",{className:"flex items-center gap-3",children:l?B.jsxs("div",{className:"flex items-center gap-2 text-success",children:[B.jsx(c3,{className:"w-5 h-5"}),B.jsx("span",{className:"text-sm font-medium",children:"Connected"})]}):B.jsxs("div",{className:"flex items-center gap-2 text-destructive",children:[B.jsx(l3,{className:"w-5 h-5"}),B.jsx("span",{className:"text-sm font-medium",children:"Disconnected"})]})}),B.jsxs(Jr,{variant:"ghost",size:"sm",onClick:p,className:"text-muted-foreground hover:text-destructive",children:[B.jsx(I0,{className:"w-4 h-4 mr-1"}),"Disconnect"]})]}),B.jsx(JI,{onFilesSelected:m,disabled:!l}),B.jsxs("div",{className:"mt-6 space-y-6",children:[B.jsx(Xg,{transfers:e,direction:"sending"}),B.jsx(Xg,{transfers:i,direction:"receiving"})]})]})}const vR=()=>{const[t,e]=P.useState(!1);return B.jsxs("div",{className:"min-h-screen bg-background flex flex-col",children:[B.jsxs("div",{className:"fixed inset-0 overflow-hidden pointer-events-none",children:[B.jsx("div",{className:"absolute top-1/4 -left-32 w-96 h-96 bg-primary/10 rounded-full blur-3xl animate-glow-pulse"}),B.jsx("div",{className:"absolute bottom-1/4 -right-32 w-96 h-96 bg-accent/10 rounded-full blur-3xl animate-glow-pulse",style:{animationDelay:"1s"}}),B.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-primary/5 rounded-full blur-3xl"})]}),B.jsx("header",{className:"relative z-10 p-6",children:B.jsxs("div",{className:"flex items-center gap-3",children:[B.jsx("div",{className:"w-10 h-10 rounded-xl bg-primary/20 flex items-center justify-center",children:B.jsx(o3,{className:"w-5 h-5 text-primary"})}),B.jsxs("div",{children:[B.jsx("h1",{className:"text-xl font-semibold text-foreground",children:"P2P Transfer"}),B.jsx("p",{className:"text-xs text-muted-foreground",children:"Secure peer-to-peer file sharing"})]})]})}),B.jsx("main",{className:"relative z-10 flex-1 flex items-center justify-center px-4 pb-12",children:t?B.jsx(xR,{onDisconnect:()=>e(!1)}):B.jsx(ZI,{onConnected:()=>e(!0)})}),B.jsx("footer",{className:"relative z-10 p-6 text-center",children:B.jsxs("p",{className:"text-xs text-muted-foreground",children:["Files are transferred directly between devices using WebRTC.",B.jsx("br",{}),"No data is stored on any server."]})})]})},ER=()=>{const t=q2();return P.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",t.pathname)},[t.pathname]),B.jsx("div",{className:"flex min-h-screen items-center justify-center bg-muted",children:B.jsxs("div",{className:"text-center",children:[B.jsx("h1",{className:"mb-4 text-4xl font-bold",children:"404"}),B.jsx("p",{className:"mb-4 text-xl text-muted-foreground",children:"Oops! Page not found"}),B.jsx("a",{href:"/",className:"text-primary underline hover:text-primary/90",children:"Return to Home"})]})})},CR=new kS,bR=()=>B.jsx(DS,{client:CR,children:B.jsxs(lS,{children:[B.jsx($3,{}),B.jsx(bA,{}),B.jsx(x8,{basename:"/webrtc-file-share/",children:B.jsxs(m8,{children:[B.jsx(cf,{path:"/",element:B.jsx(vR,{})}),B.jsx(cf,{path:"*",element:B.jsx(ER,{})})]})})]})});wy(document.getElementById("root")).render(B.jsx(bR,{}));
